# Web Open Finance ï¼ˆé‡‘èå¹³æƒ web ç«¯ï¼‰

è¯¥é¡¹ç›®ç”± `@umijs/max` æ¨¡æ¿é¡¹ç›®ï¼Œæ›´å¤šåŠŸèƒ½å‚è€ƒ [Umi Max ç®€ä»‹](https://umijs.org/docs/max/introduce) æä¾›æŠ€æœ¯æ”¯æŒ

è¿™ä»½è¯´æ˜å°†ä¸ºä½ å±•ç¤ºæ‰€ç”¨å·¥å…·ä»¥åŠè¿è¡Œç¯å¢ƒã€ä»£ç è§„èŒƒç­‰ï¼Œè¯·è®¤çœŸé˜…è¯»

## ğŸ”¨ è¿è¡Œç¯å¢ƒ

- node >= 14.13.1
- typescript >= 3.0
- yarn >= 1.14.0 or npm >= 6.7.0
- git >= 2.10.1

## ğŸ”§ å¼€å‘ç¯å¢ƒ

- [VS Code](https://code.visualstudio.com/)
- [Chrome](https://www.google.com/chrome/)
- [React Developer Tools](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en-US)
- [Redux DevTools](https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=en-US)
- [Node](https://nodejs.org/en/)
- [Typescript](https://github.com/Microsoft/TypeScript)
- [Mac å‘½ä»¤è¡Œå·¥å…·](https://zhuanlan.zhihu.com/p/53380250)

## âœ¨ VSCode æ’ä»¶æ¨è

- [GitLens](https://gitlens.amod.io)
- [Auto Close Tag](https://marketplace.visualstudio.com/items?itemName=formulahendry.auto-close-tag)
- [Auto Rename Tag](https://marketplace.visualstudio.com/items?itemName=formulahendry.auto-rename-tag)
- [ES7 React/Redux/GraphQL/React-Native snippets](https://marketplace.visualstudio.com/items?itemName=dsznajder.es7-react-js-snippets)
- [TSLint](https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-typescript-tslint-plugin)
- [Path Autocomplete](https://marketplace.visualstudio.com/items?itemName=ionutvmi.path-autocomplete)
- [Bracket Pair Colorizer](https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer)
- [TODO Highlight](https://marketplace.visualstudio.com/items?itemName=wayou.vscode-todo-highlight)
- [Code Spell Checker](https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker)

## ğŸ‘£ å¯è¿è¡Œçš„å‘½ä»¤

åœ¨è¯¥é¡¹ç›®ç›®å½•ä¸‹, ä½ å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤:

`yarn install` or `npm install`

`yarn start` or `npm start`

ä»¥å¼€å‘æ¨¡å¼è¿è¡Œè¯¥é¡¹ç›®ç„¶åæ‰“å¼€ Chrome æµè§ˆå™¨è®¿é—®[http://localhost:8000](http://localhost:8000).

`yarn start:pre` or `npm start:pre` ä»¥é¢„ç”Ÿäº§æ¨¡å¼è¿è¡Œè¯¥é¡¹ç›®

`yarn start:prod` or `npm start:prod` ä»¥ç”Ÿäº§æ¨¡å¼è¿è¡Œè¯¥é¡¹ç›®

### æŠ€æœ¯æ ˆ

[`React`](https://github.com/facebook/react)[UmiJs](https://umijs.org/zh-CN/docs) [`Typescript`](https://github.com/Microsoft/TypeScript) [`React Router`](https://github.com/ReactTraining/react-router) [`Redux`](https://github.com/reduxjs/redux) [`Ant Design`](https://github.com/ant-design/ant-design)[`Pro Component`](https://procomponents.ant.design/docs)[`Ant Design Pro`](https://pro.ant.design/zh-CN/) [`Jest`](https://github.com/facebook/jest) [`ECharts`](https://github.com/apache/incubator-echarts) [`Webpack`](https://github.com/webpack/webpack) [`Babel`](https://github.com/babel/babel) [`enzyme`](https://github.com/airbnb/enzyme)

### React Typescript ç¼–å†™è§„èŒƒ

[react-redux-typescript-guide](https://github.com/piotrwitek/react-redux-typescript-guide)

## ğŸŒ¿Git åˆ†æ”¯ç®¡ç†è¯´æ˜

```Git
git-flow æ˜¯ç›®å‰æµä¼ æœ€å¹¿çš„ Git åˆ†æ”¯ç®¡ç†å®è·µã€‚git-flow å›´ç»•çš„æ ¸å¿ƒæ¦‚å¿µæ˜¯ç‰ˆæœ¬å‘å¸ƒï¼ˆrelease)
git-flow æµç¨‹ä¸­åŒ…å« 5 ç±»åˆ†æ”¯ï¼Œåˆ†åˆ«æ˜¯ masterã€developã€æ–°åŠŸèƒ½åˆ†æ”¯ï¼ˆfeatureï¼‰ã€å‘å¸ƒåˆ†æ”¯ï¼ˆreleaseï¼‰å’Œ hotfix
```

### ç›¸å…³åˆ†æ”¯è¯´æ˜

| åˆ†æ”¯ç±»å‹ | å‘½åè§„èŒƒ   | åˆ›å»ºè‡ª             | åˆå¹¶åˆ°             | è¯´æ˜                               |
| -------- | ---------- | ------------------ | ------------------ | ---------------------------------- |
| master   | master     |                    |                    | å¼€å‘ä¸»åˆ†æ”¯                         |
| feature  | feature/\* | master             | master             | æ–°åŠŸèƒ½                             |
| staging  | staging/\* | develop            | release å’Œ master  | ç¨³å®šæµ‹è¯•ç‰ˆæœ¬å‘å¸ƒ                   |
| release  | release/\* | staging            | develop å’Œ master  | æ–°ç‰ˆæœ¬å‘å¸ƒ                         |
| hotfix   | hotfix/\*  | staging æˆ– release | release å’Œ staging | staging æˆ– release ä¸­ bug ä¿®å¤åˆ†æ”¯ |
| bugfix   | bugfix/\*  | master             | master             | master ä¸­ bug ä¿®å¤åˆ†æ”¯             |

1. `master`ä¸ºå¼€å‘åˆ†æ”¯, æ˜¯ä¸€ä¸ªè¿›è¡Œä»£ç é›†æˆçš„åˆ†æ”¯, è¯¥åˆ†æ”¯ä¼šåŠæ—¶åˆå¹¶æœ€æ–°ä»£ç , æ–°éœ€æ±‚çš„å¼€å‘éƒ½ä»æ­¤åˆ†æ”¯ä¸Šåˆ›å»º
2. `feature/my-awesome-feature` ä¸ºæ–°åŠŸèƒ½åˆ†æ”¯, å¼€å‘æ–°éœ€æ±‚æ—¶, éœ€ä»`master`åˆ†æ”¯åˆ›å»º
3. `hotfix/fix-my-bug` ä¸ºçƒ­ä¿®å¤ bug åˆ†æ”¯, ä¸»è¦æ˜¯é’ˆå¯¹`release`æˆ–`staging`åˆ†æ”¯æµ‹è¯•å‡ºç°çš„ bug è¿›è¡Œä¿®å¤
4. `release/0.0.1`åˆ†æ”¯ä¸ºéƒ¨ç½²åˆ°æŒç»­é›†æˆæœåŠ¡å™¨ä¸Šè¿›è¡Œæµ‹è¯•çš„åˆ†æ”¯, æ˜¯ä¸€ä¸ªç›¸å¯¹ç¨³å®šçš„å¯ä¾›æµ‹è¯•çš„åˆ†æ”¯
5. `staging` æ˜¯éƒ¨ç½²åˆ°æµ‹è¯•(é¢„ç”Ÿäº§)ç¯å¢ƒä¸­çš„ä»£ç , ä¸€èˆ¬ä¸å…è®¸éšæ„åˆå¹¶å…¶ä»–åˆ†æ”¯åˆ°æ­¤åˆ†æ”¯ä¸Š
6. `bugfix/fix-my-bug` ä¸ºä¸»åˆ†æ”¯ä¿®å¤ bug åˆ†æ”¯, ä¸»è¦æ˜¯é’ˆå¯¹`master`æˆ–`feature`åˆ†æ”¯æµ‹è¯•å‡ºç°çš„ bug è¿›è¡Œä¿®å¤

### `feature`åˆ†æ”¯åˆ›å»ºæµç¨‹

1. ä» `master`åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„`feature`åˆ†æ”¯, å¦‚`feature/my-awesome-feature`
2. åœ¨è¯¥`feature`åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘ç›¸å…³éœ€æ±‚ï¼Œå®Œæˆåæäº¤ä»£ç å¹¶ push åˆ°è¿œç«¯ä»“åº“
3. å½“ä»£ç å®Œæˆä¹‹åï¼Œæ`pull request`, ä»£ç å®¡æ ¸é€šè¿‡ååˆå¹¶åˆ°`master`åˆ†æ”¯, ä¹‹åå¯åˆ é™¤å½“å‰`feature`åˆ†æ”¯

### `bugfix`åˆ†æ”¯åˆ›å»ºæµç¨‹

1. ä»`master`åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„`bugfix`åˆ†æ”¯ï¼Œå¦‚ `bugfix/fix-my-bug`
2. è¿›è¡Œç›¸å…³çš„ bug ä¿®å¤å¹¶åœ¨æœ¬åœ°æµ‹è¯•é€šè¿‡
3. å½“ bug ä¿®å¤ä¹‹åï¼Œæ`pull request`, åˆå¹¶`bugfix/fix-my-bug`åˆ†æ”¯åˆ°`master`åˆ†æ”¯

### `hotfix`åˆ†æ”¯åˆ›å»ºæµç¨‹

1. ä»`master`åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„`staging`åˆ†æ”¯ï¼Œå¦‚ `staging/0.0.1`
2. æŠŠ`staging`åˆ†æ”¯éƒ¨ç½²åˆ°æŒç»­é›†æˆæœåŠ¡å™¨ä¸Š, å¹¶äº¤ç»™ç›¸å…³æµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•
3. å¯¹äºæµ‹è¯•ä¸­å‘ç°çš„é—®é¢˜ï¼Œç›´æ¥åœ¨`staging`åˆ†æ”¯ä¸Šåˆ›å»º`hotfix/fix-my-bug`åˆ†æ”¯, è¿›è¡Œç›¸å…³çš„ bug ä¿®å¤
4. å½“ bug ä¿®å¤ä¹‹åï¼Œæ`pull request`, åˆå¹¶`hotfix/fix-bug`åˆ†æ”¯åˆ°`staging`åˆ†æ”¯, å†æ¬¡éƒ¨ç½²å¹¶äº¤ç»™æµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•

### `staging`åˆ†æ”¯åˆ›å»ºæµç¨‹

1. ä»`master`åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„`staging`åˆ†æ”¯ï¼Œå¦‚ `staging/0.0.1`
2. æŠŠ`staging`åˆ†æ”¯éƒ¨ç½²åˆ°æŒç»­é›†æˆæœåŠ¡å™¨ä¸Š, å¹¶äº¤ç»™ç›¸å…³æµ‹è¯•äººå‘˜è¿›è¡Œæµ‹è¯•

### `release`åˆ†æ”¯åˆ›å»ºæµç¨‹

1. ä»`staging`åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„`release`åˆ†æ”¯, å¦‚ `release/0.0.1`
2. æŠŠ`release`åˆ†æ”¯æ¨åˆ°è¿œç«¯, éƒ¨ç½²åˆ°æŒç»­é›†æˆæœåŠ¡å™¨ä¸Šçº¿

### ä»£ç æäº¤è¯´æ˜

ä½¿ç”¨ commitizen è‡ªåŠ¨ç”Ÿæˆåˆæ ¼çš„ commit messageï¼Œç¼–å†™ message æ—¶éœ€è¦åŠ ä¸Š type å‰ç¼€
type ç”¨äºè¯´æ˜ commit çš„ç±»åˆ«ï¼Œåªå…è®¸ä½¿ç”¨ä¸‹é¢ 7 ä¸ªæ ‡è¯†

```git
1. featï¼šæ–°åŠŸèƒ½ï¼ˆfeatureï¼‰
2. fixï¼šä¿®è¡¥ bug
3. docsï¼šæ–‡æ¡£ï¼ˆdocumentationï¼‰
4. styleï¼š æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰
5. refactorï¼šé‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰
6. testï¼šå¢åŠ æµ‹è¯•
7. choreï¼šæ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
```

[Commit message å’Œ Change log ç¼–å†™æŒ‡å—](http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html)

## Jest æµ‹è¯•

Jest æµ‹è¯•æ¡†æ¶å®˜æ–¹ç½‘ç«™[Jest](https://jestjs.io/)

## ğŸ”­ å­¦ä¹ æ›´å¤š

æƒ³è·å–æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥è®¿é—®[UmiJs](https://umijs.org/zh-CN/docs).

æƒ³å­¦ä¹ æ›´å¤š React å†…å®¹ï¼Œå¯è®¿é—® React å®˜æ–¹ç½‘ç«™ [React documentation](https://reactjs.org/).
