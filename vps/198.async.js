(self.webpackChunk=self.webpackChunk||[]).push([[198],{62238:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var G=function(P,A){var N=P.nodes,O=P.edges,x=[],E={};if(!N)throw new Error("invalid nodes data!");return N&&N.forEach(function(y,m){E[y.id]=m;var g=[];x.push(g)}),O&&O.forEach(function(y){var m=y.source,g=y.target,v=E[m],u=E[g];!v&&v!==0||!u&&u!==0||(x[v][u]=1,A||(x[u][v]=1))}),x},F=G;U.default=F},10369:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),Object.defineProperty(U,"GADDIAsync",{enumerable:!0,get:function(){return F.GADDIAsync}}),Object.defineProperty(U,"connectedComponentAsync",{enumerable:!0,get:function(){return F.connectedComponentAsync}}),U.default=void 0,Object.defineProperty(U,"detectAllCyclesAsync",{enumerable:!0,get:function(){return F.detectAllCyclesAsync}}),Object.defineProperty(U,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return F.detectAllDirectedCycleAsync}}),Object.defineProperty(U,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return F.detectAllUndirectedCycleAsync}}),Object.defineProperty(U,"detectCycleAsync",{enumerable:!0,get:function(){return F.detectCycleAsync}}),U.detectDirectedCycleAsync=void 0,Object.defineProperty(U,"dijkstraAsync",{enumerable:!0,get:function(){return F.dijkstraAsync}}),Object.defineProperty(U,"findAllPathAsync",{enumerable:!0,get:function(){return F.findAllPathAsync}}),Object.defineProperty(U,"findShortestPathAsync",{enumerable:!0,get:function(){return F.findShortestPathAsync}}),Object.defineProperty(U,"floydWarshallAsync",{enumerable:!0,get:function(){return F.floydWarshallAsync}}),Object.defineProperty(U,"getAdjMatrixAsync",{enumerable:!0,get:function(){return F.getAdjMatrixAsync}}),Object.defineProperty(U,"getDegreeAsync",{enumerable:!0,get:function(){return F.getDegreeAsync}}),Object.defineProperty(U,"getInDegreeAsync",{enumerable:!0,get:function(){return F.getInDegreeAsync}}),Object.defineProperty(U,"getNeighborsAsync",{enumerable:!0,get:function(){return F.getNeighborsAsync}}),Object.defineProperty(U,"getOutDegreeAsync",{enumerable:!0,get:function(){return F.getOutDegreeAsync}}),Object.defineProperty(U,"labelPropagationAsync",{enumerable:!0,get:function(){return F.labelPropagationAsync}}),Object.defineProperty(U,"louvainAsync",{enumerable:!0,get:function(){return F.louvainAsync}}),Object.defineProperty(U,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return F.minimumSpanningTreeAsync}}),Object.defineProperty(U,"pageRankAsync",{enumerable:!0,get:function(){return F.pageRankAsync}});var F=G(30485),Y=F.detectCycleAsync;U.detectDirectedCycleAsync=Y;var P={getAdjMatrixAsync:F.getAdjMatrixAsync,connectedComponentAsync:F.connectedComponentAsync,getDegreeAsync:F.getDegreeAsync,getInDegreeAsync:F.getInDegreeAsync,getOutDegreeAsync:F.getOutDegreeAsync,detectCycleAsync:F.detectCycleAsync,detectDirectedCycleAsync:Y,detectAllCyclesAsync:F.detectAllCyclesAsync,detectAllDirectedCycleAsync:F.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:F.detectAllUndirectedCycleAsync,dijkstraAsync:F.dijkstraAsync,findAllPathAsync:F.findAllPathAsync,findShortestPathAsync:F.findShortestPathAsync,floydWarshallAsync:F.floydWarshallAsync,labelPropagationAsync:F.labelPropagationAsync,louvainAsync:F.louvainAsync,minimumSpanningTreeAsync:F.minimumSpanningTreeAsync,pageRankAsync:F.pageRankAsync,getNeighborsAsync:F.getNeighborsAsync,GADDIAsync:F.GADDIAsync};U.default=P},83764:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=P(G(93026)),Y=G(70643);function P(x){return x&&x.__esModule?x:{default:x}}function A(x){x===void 0&&(x={});var E=x,y=function(){},m=function(){var g={};return function(v){var u=v.next,b=u;return g[b]?!1:(g[b]=!0,!0)}}();return E.allowTraversal=x.allowTraversal||m,E.enter=x.enter||y,E.leave=x.leave||y,E}var N=function(E,y,m,g){g===void 0&&(g=!0);var v=A(m),u=new F.default,b=E.edges,T=b===void 0?[]:b;u.enqueue(y);for(var D="",k=function(){var J=u.dequeue();v.enter({current:J,previous:D}),(0,Y.getNeighbors)(J,T,g?"target":void 0).forEach(function(W){v.allowTraversal({previous:D,current:J,next:W})&&u.enqueue(W)}),v.leave({current:J,previous:D}),D=J};!u.isEmpty();)k()},O=N;U.default=O},59527:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=A,U.detectStrongConnectComponents=U.detectConnectedComponents=void 0;var F=G(70643),Y=function(O){for(var x=O.nodes,E=x===void 0?[]:x,y=O.edges,m=y===void 0?[]:y,g=[],v={},u=[],b=function V(J){u.push(J),v[J.id]=!0;for(var W=(0,F.getNeighbors)(J.id,m),X=function(re){var q=W[re];if(!v[q]){var ae=E.filter(function(ue){return ue.id===q});ae.length>0&&V(ae[0])}},K=0;K<W.length;++K)X(K)},T=0;T<E.length;T++){var D=E[T];if(!v[D.id]){b(D);for(var k=[];u.length>0;)k.push(u.pop());g.push(k)}}return g};U.detectConnectedComponents=Y;var P=function(O){for(var x=O.nodes,E=x===void 0?[]:x,y=O.edges,m=y===void 0?[]:y,g=[],v={},u={},b={},T=[],D=0,k=function X(K){u[K.id]=D,b[K.id]=D,D+=1,g.push(K),v[K.id]=!0;for(var Q=(0,F.getNeighbors)(K.id,m,"target").filter(function(ce){return E.map(function(De){return De.id}).indexOf(ce)>-1}),re=function(De){var Ie=Q[De];if(!u[Ie]&&u[Ie]!==0){var Pe=E.filter(function(we){return we.id===Ie});Pe.length>0&&X(Pe[0]),b[K.id]=Math.min(b[K.id],b[Ie])}else v[Ie]&&(b[K.id]=Math.min(b[K.id],u[Ie]))},q=0;q<Q.length;q++)re(q);if(b[K.id]===u[K.id]){for(var ae=[];g.length>0;){var ue=g.pop();if(v[ue.id]=!1,ae.push(ue),ue===K)break}ae.length>0&&T.push(ae)}},V=0,J=E;V<J.length;V++){var W=J[V];!u[W.id]&&u[W.id]!==0&&k(W)}return T};U.detectStrongConnectComponents=P;function A(N,O){return O?P(N):Y(N)}},92935:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.secondReg=U.dateReg=void 0;var G=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;U.secondReg=G;var F=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;U.dateReg=F},82556:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.getOutDegree=U.getInDegree=U.default=void 0;var G=function(N){var O={},x=N.nodes,E=x===void 0?[]:x,y=N.edges,m=y===void 0?[]:y;return E.forEach(function(g){O[g.id]={degree:0,inDegree:0,outDegree:0}}),m.forEach(function(g){O[g.source].degree++,O[g.source].outDegree++,O[g.target].degree++,O[g.target].inDegree++}),O},F=G;U.default=F;var Y=function(N,O){var x=G(N);return x[O]?G(N)[O].inDegree:0};U.getInDegree=Y;var P=function(N,O){var x=G(N);return x[O]?G(N)[O].outDegree:0};U.getOutDegree=P},94282:function(pr,U,G){"use strict";function F(u){"@babel/helpers - typeof";return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},F(u)}Object.defineProperty(U,"__esModule",{value:!0}),U.detectAllUndirectedCycle=U.detectAllDirectedCycle=U.detectAllCycles=U.default=void 0;var Y=x(G(45891)),P=O(G(59527)),A=G(70643);function N(u){if(typeof WeakMap!="function")return null;var b=new WeakMap,T=new WeakMap;return(N=function(k){return k?T:b})(u)}function O(u,b){if(!b&&u&&u.__esModule)return u;if(u===null||F(u)!=="object"&&typeof u!="function")return{default:u};var T=N(b);if(T&&T.has(u))return T.get(u);var D={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in u)if(V!=="default"&&Object.prototype.hasOwnProperty.call(u,V)){var J=k?Object.getOwnPropertyDescriptor(u,V):null;J&&(J.get||J.set)?Object.defineProperty(D,V,J):D[V]=u[V]}return D.default=u,T&&T.set(u,D),D}function x(u){return u&&u.__esModule?u:{default:u}}var E=function(b){var T=null,D=b.nodes,k=D===void 0?[]:D,V={},J={},W={},X={};k.forEach(function(re){J[re.id]=re});for(var K={enter:function(q){var ae=q.current,ue=q.previous;if(W[ae]){T={};for(var ce=ae,De=ue;De!==ae;)T[ce]=De,ce=De,De=V[De];T[ce]=De}else W[ae]=ae,delete J[ae],V[ae]=ue},leave:function(q){var ae=q.current;X[ae]=ae,delete W[ae]},allowTraversal:function(q){var ae=q.next;return T?!1:!X[ae]}};Object.keys(J).length;){var Q=Object.keys(J)[0];(0,Y.default)(b,Q,K)}return T},y=function(b,T,D){var k,V;D===void 0&&(D=!0);for(var J=[],W=(0,P.default)(b,!1),X=0,K=W;X<K.length;X++){var Q=K[X];if(Q.length)for(var re=Q[0],q=re.id,ae=[re],ue=(k={},k[q]=re,k),ce=(V={},V[q]=new Set,V);ae.length>0;)for(var De=ae.pop(),Ie=De.id,Pe=(0,A.getNeighbors)(Ie,b.edges),we=function(Se){var Te,We=Pe[Se],Ge=b.nodes.find(function(gt){return gt.id===We});if(We===Ie)J.push((Te={},Te[We]=De,Te));else if(!(We in ce))ue[We]=De,ae.push(Ge),ce[We]=new Set([De]);else if(!ce[Ie].has(Ge)){for(var Je=!0,mt=[Ge,De],xt=ue[Ie];ce[We].size&&!ce[We].has(xt)&&(mt.push(xt),xt!==ue[xt.id]);)xt=ue[xt.id];if(mt.push(xt),T&&D?(Je=!1,mt.findIndex(function(gt){return T.indexOf(gt.id)>-1})>-1&&(Je=!0)):T&&!D&&mt.findIndex(function(gt){return T.indexOf(gt.id)>-1})>-1&&(Je=!1),Je){for(var Ze={},$e=1;$e<mt.length;$e+=1)Ze[mt[$e-1].id]=mt[$e];mt.length&&(Ze[mt[mt.length-1].id]=mt[0]),J.push(Ze)}ce[We].add(De)}},xe=0;xe<Pe.length;xe+=1)we(xe)}return J};U.detectAllUndirectedCycle=y;var m=function(b,T,D){D===void 0&&(D=!0);for(var k=[],V=new Set,J=[],W=[],X={},K={},Q=function(xt){for(var Ze=[xt];Ze.length>0;){var $e=Ze.pop();V.has($e)&&(V.delete($e),J[$e.id].forEach(function(gt){Ze.push(gt)}),J[$e.id].clear())}},re=function mt(xt,Ze,$e){var gt=!1;if(T&&D===!1&&T.indexOf(xt.id)>-1)return gt;k.push(xt),V.add(xt);for(var At=$e[xt.id],yt=0;yt<At.length;yt+=1){var ct=X[At[yt]];if(ct===Ze){for(var Kt={},$t=1;$t<k.length;$t+=1)Kt[k[$t-1].id]=k[$t];k.length&&(Kt[k[k.length-1].id]=k[0]),W.push(Kt),gt=!0}else V.has(ct)||mt(ct,Ze,$e)&&(gt=!0)}if(gt)Q(xt);else for(var yt=0;yt<At.length;yt+=1){var ct=X[At[yt]];J[ct.id].has(xt)||J[ct.id].add(xt)}return k.pop(),gt},q=b.nodes,ae=q===void 0?[]:q,ue=0;ue<ae.length;ue+=1){var ce=ae[ue],De=ce.id;K[De]=ue,X[ue]=ce}if(T&&D)for(var Ie=function(xt){var Ze=T[xt];K[ae[xt].id]=K[Ze],K[Ze]=0,X[0]=ae.find(function($e){return $e.id===Ze}),X[K[ae[xt].id]]=ae[xt]},ue=0;ue<T.length;ue++)Ie(ue);for(var Pe=function(xt){for(var Ze,$e,gt=1/0,At=0;At<xt.length;At+=1)for(var yt=xt[At],ct=0;ct<yt.length;ct++){var Kt=K[yt[ct].id];Kt<gt&&(gt=Kt,$e=At)}for(var $t=xt[$e],jt=[],At=0;At<$t.length;At+=1){var ir=$t[At];jt[ir.id]=[];for(var mr=0,tn=(0,A.getNeighbors)(ir.id,b.edges,"target").filter(function(Ve){return $t.map(function(Nr){return Nr.id}).indexOf(Ve)>-1});mr<tn.length;mr++){var Dr=tn[mr];Dr===ir.id&&!(D===!1&&T.indexOf(ir.id)>-1)?W.push((Ze={},Ze[ir.id]=ir,Ze)):jt[ir.id].push(K[Dr])}}return{component:$t,adjList:jt,minIdx:gt}},we=0;we<ae.length;){var xe=ae.filter(function(mt){return K[mt.id]>=we}),ve=(0,P.detectStrongConnectComponents)({nodes:xe,edges:b.edges}).filter(function(mt){return mt.length>1});if(ve.length===0)break;var Se=Pe(ve),Te=Se.minIdx,We=Se.adjList,Ge=Se.component;if(Ge.length>1){Ge.forEach(function(mt){J[mt.id]=new Set});var Je=X[Te];if(T&&D&&T.indexOf(Je.id)===-1)return W;re(Je,Je,We),we=Te+1}else break}return W};U.detectAllDirectedCycle=m;var g=function(b,T,D,k){return k===void 0&&(k=!0),T?m(b,D,k):y(b,D,k)};U.detectAllCycles=g;var v=E;U.default=v},45891:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=A;var F=G(70643);function Y(N){N===void 0&&(N={});var O=N,x=function(){},E=function(){var y={};return function(m){var g=m.next;return y[g]?!1:(y[g]=!0,!0)}}();return O.allowTraversal=N.allowTraversal||E,O.enter=N.enter||x,O.leave=N.leave||x,O}function P(N,O,x,E,y){y===void 0&&(y=!0),E.enter({current:O,previous:x});var m=N.edges,g=m===void 0?[]:m;(0,F.getNeighbors)(O,g,y?"target":void 0).forEach(function(v){E.allowTraversal({previous:x,current:O,next:v})&&P(N,v,O,E,y)}),E.leave({current:O,previous:x})}function A(N,O,x,E){E===void 0&&(E=!0),P(N,O,"",Y(x),E)}},78089:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=G(97582),Y=G(13810),P=G(70643),A=function(y,m,g){for(var v=1/0,u,b=0;b<m.length;b++){var T=m[b].id;!g[T]&&y[T]<=v&&(v=y[T],u=m[b])}return u},N=function(y,m,g,v){var u=y.nodes,b=u===void 0?[]:u,T=y.edges,D=T===void 0?[]:T,k=[],V={},J={},W={};b.forEach(function(ue,ce){var De=ue.id;k.push(De),J[De]=1/0,De===m&&(J[De]=0)});for(var X=b.length,K=function(ce){var De=A(J,b,V),Ie=De.id;if(V[Ie]=!0,J[Ie]===1/0)return"continue";var Pe=[];g?Pe=(0,P.getOutEdgesNodeId)(Ie,D):Pe=(0,P.getEdgesByNodeId)(Ie,D),Pe.forEach(function(we){var xe=we.target,ve=we.source,Se=xe===Ie?ve:xe,Te=v&&we[v]?we[v]:1;J[Se]>J[De.id]+Te?(J[Se]=J[De.id]+Te,W[Se]=[De.id]):J[Se]===J[De.id]+Te&&W[Se].push(De.id)})},Q=0;Q<X;Q++)K(Q);W[m]=[m];var re={};for(var q in J)J[q]!==1/0&&x(m,q,W,re);var ae={};for(var q in re)ae[q]=re[q][0];return{length:J,path:ae,allPath:re}},O=N;U.default=O;function x(E,y,m,g){if(E===y)return[E];if(g[y])return g[y];for(var v=[],u=0,b=m[y];u<b.length;u++){var T=b[u],D=x(E,T,m,g);if(!D)return;for(var k=0,V=D;k<V.length;k++){var J=V[k];(0,Y.isArray)(J)?v.push((0,F.__spreadArray)((0,F.__spreadArray)([],J,!0),[y],!1)):v.push([J,y])}}return g[y]=v,g[y]}},41727:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.findShortestPath=U.findAllPath=void 0;var F=P(G(78089)),Y=G(70643);function P(O){return O&&O.__esModule?O:{default:O}}var A=function(x,E,y,m,g){var v=(0,F.default)(x,E,m,g),u=v.length,b=v.path,T=v.allPath;return{length:u[y],path:b[y],allPath:T[y]}};U.findShortestPath=A;var N=function(x,E,y,m){var g;if(E===y)return[[E]];var v=x.edges,u=v===void 0?[]:v,b=[E],T=(g={},g[E]=!0,g),D=[],k=[],V=m?(0,Y.getNeighbors)(E,u,"target"):(0,Y.getNeighbors)(E,u);for(D.push(V);b.length>0&&D.length>0;){var J=D[D.length-1];if(J.length){var W=J.shift();W&&(b.push(W),T[W]=!0,V=m?(0,Y.getNeighbors)(W,u,"target"):(0,Y.getNeighbors)(W,u),D.push(V.filter(function(Q){return!T[Q]})))}else{var X=b.pop();T[X]=!1,D.pop();continue}if(b[b.length-1]===y){var K=b.map(function(re){return re});k.push(K);var X=b.pop();T[X]=!1,D.pop()}}return k};U.findAllPath=N},75033:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=Y(G(62238));function Y(N){return N&&N.__esModule?N:{default:N}}var P=function(O,x){for(var E=(0,F.default)(O,x),y=[],m=E.length,g=0;g<m;g+=1){y[g]=[];for(var v=0;v<m;v+=1)g===v?y[g][v]=0:E[g][v]===0||!E[g][v]?y[g][v]=1/0:y[g][v]=E[g][v]}for(var u=0;u<m;u+=1)for(var g=0;g<m;g+=1)for(var v=0;v<m;v+=1)y[g][v]>y[g][u]+y[u][v]&&(y[g][v]=y[g][u]+y[u][v]);return y},A=P;U.default=A},21146:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=G(13810),Y=G(68575),P=function(){function v(u,b,T,D,k){this.fromNode=u,this.toNode=b,this.nodeEdgeNodeLabel={nodeLabel1:T||Y.VACANT_NODE_LABEL,edgeLabel:D||Y.VACANT_EDGE_LABEL,nodeLabel2:k||Y.VACANT_NODE_LABEL}}return v.prototype.equalTo=function(u){return this.fromNode===u.formNode&&this.toNode===u.toNode&&this.nodeEdgeNodeLabel===u.nodeEdgeNodeLabel},v.prototype.notEqualTo=function(u){return!this.equalTo(u)},v}(),A=function(){function v(){this.rmpath=[],this.dfsEdgeList=[]}return v.prototype.equalTo=function(u){var b=this.dfsEdgeList.length,T=u.length;if(b!==T)return!1;for(var D=0;D<b;D++)if(this.dfsEdgeList[D]!==u[D])return!1;return!0},v.prototype.notEqualTo=function(u){return!this.equalTo(u)},v.prototype.pushBack=function(u,b,T,D,k){return this.dfsEdgeList.push(new P(u,b,T,D,k)),this.dfsEdgeList},v.prototype.toGraph=function(u,b){u===void 0&&(u=Y.VACANT_GRAPH_ID),b===void 0&&(b=!1);var T=new Y.Graph(u,!0,b);return this.dfsEdgeList.forEach(function(D){var k=D.fromNode,V=D.toNode,J=D.nodeEdgeNodeLabel,W=J.nodeLabel1,X=J.edgeLabel,K=J.nodeLabel2;W!==Y.VACANT_NODE_LABEL&&T.addNode(k,W),K!==Y.VACANT_NODE_LABEL&&T.addNode(V,K),W!==Y.VACANT_NODE_LABEL&&K!==W&&T.addEdge(void 0,k,V,X)}),T},v.prototype.buildRmpath=function(){this.rmpath=[];for(var u=void 0,b=this.dfsEdgeList.length,T=b-1;T>=0;T--){var D=this.dfsEdgeList[T],k=D.fromNode,V=D.toNode;k<V&&(u===void 0||V===u)&&(this.rmpath.push(T),u=k)}return this.rmpath},v.prototype.getNodeNum=function(){var u={};return this.dfsEdgeList.forEach(function(b){u[b.fromNode]||(u[b.fromNode]=!0),u[b.toNode]||(u[b.toNode]=!0)}),Object.keys(u).length},v}(),N=function(){function v(u){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!u){for(;u;){var b=u.edge;this.edges.push(b),this.nodesUsed[b.from]=1,this.nodesUsed[b.to]=1,this.edgesUsed[b.id]=1,u=u.preNode}this.edges=this.edges.reverse()}}return v.prototype.hasNode=function(u){return this.nodesUsed[u.id]===1},v.prototype.hasEdge=function(u){return this.edgesUsed[u.id]===1},v}(),O=function(){function v(u){var b=u.graphs,T=u.minSupport,D=T===void 0?2:T,k=u.minNodeNum,V=k===void 0?1:k,J=u.maxNodeNum,W=J===void 0?4:J,X=u.top,K=X===void 0?10:X,Q=u.directed,re=Q===void 0?!1:Q,q=u.verbose,ae=q===void 0?!1:q;this.graphs=b,this.dfsCode=new A,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=D,this.top=K,this.directed=re,this.counter=0,this.maxNodeNum=W,this.minNodeNum=V,this.verbose=ae,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return v.prototype.findForwardRootEdges=function(u,b){var T=this,D=[],k=u.nodeMap;return b.edges.forEach(function(V){(T.directed||b.label<=k[V.to].label)&&D.push(V)}),D},v.prototype.findBackwardEdge=function(u,b,T,D){if(!this.directed&&b===T)return null;for(var k=u.nodeMap,V=k[T.to],J=V.edges,W=J.length,X=0;X<W;X++){var K=J[X];if(!(D.hasEdge(K)||K.to!==b.from)){if(this.directed){if(k[b.from].label<k[T.to].label||k[b.from].label===k[T.to].label&&b.label<=K.label)return K}else if(b.label<K.label||b.label===K.label&&k[b.to].label<=k[T.to].label)return K}}return null},v.prototype.findForwardPureEdges=function(u,b,T,D){for(var k=[],V=b.to,J=u.nodeMap[V].edges,W=J.length,X=0;X<W;X++){var K=J[X],Q=u.nodeMap[K.to];T<=Q.label&&!D.hasNode(Q)&&k.push(K)}return k},v.prototype.findForwardRmpathEdges=function(u,b,T,D){for(var k=[],V=u.nodeMap,J=V[b.to].label,W=V[b.from],X=W.edges,K=X.length,Q=0;Q<K;Q++){var re=X[Q],q=V[re.to].label;b.to===re.to||T>q||D.hasNode(V[re.to])||(b.label<re.label||b.label===re.label&&J<=q)&&k.push(re)}return k},v.prototype.getSupport=function(u){var b={};return u.forEach(function(T){b[T.graphId]||(b[T.graphId]=!0)}),Object.keys(b).length},v.prototype.findMinLabel=function(u){var b=void 0;return Object.keys(u).forEach(function(T){var D=u[T],k=D.nodeLabel1,V=D.edgeLabel,J=D.nodeLabel2;if(!b){b={nodeLabel1:k,edgeLabel:V,nodeLabel2:J};return}(k<b.nodeLabel1||k===b.nodeLabel1&&V<b.edgeLabel||k===b.nodeLabel1&&V===b.edgeLabel&&J<b.nodeLabel2)&&(b={nodeLabel1:k,edgeLabel:V,nodeLabel2:J})}),b},v.prototype.isMin=function(){var u=this,b=this.dfsCode;if(this.verbose&&console.log("isMin checking",b),b.dfsEdgeList.length===1)return!0;var T=this.directed,D=b.toGraph(Y.VACANT_GRAPH_ID,T),k=D.nodeMap,V=new A,J={};D.nodes.forEach(function(Q){var re=u.findForwardRootEdges(D,Q);re.forEach(function(q){var ae=k[q.to],ue="".concat(Q.label,"-").concat(q.label,"-").concat(ae.label);J[ue]||(J[ue]={projected:[],nodeLabel1:Q.label,edgeLabel:q.label,nodeLabel2:ae.label});var ce={graphId:D.id,edge:q,preNode:null};J[ue].projected.push(ce)})});var W=this.findMinLabel(J);if(W){V.dfsEdgeList.push(new P(0,1,W.nodeLabel1,W.edgeLabel,W.nodeLabel2));var X=function Q(re){for(var q=V.buildRmpath(),ae=V.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,ue=V.dfsEdgeList[q[0]].toNode,ce={},De=!1,Ie=0,Pe=T?-1:0,we=function(At){if(De)return"break";re.forEach(function(yt){var ct=new N(yt),Kt=u.findBackwardEdge(D,ct.edges[q[At]],ct.edges[q[0]],ct);Kt&&(ce[Kt.label]||(ce[Kt.label]={projected:[],edgeLabel:Kt.label}),ce[Kt.label].projected.push({graphId:D.id,edge:ce,preNode:yt}),Ie=V.dfsEdgeList[q[At]].fromNode,De=!0)})},xe=q.length-1;xe>Pe;xe--){var ve=we(xe);if(ve==="break")break}if(De){var Se=u.findMinLabel(ce);V.dfsEdgeList.push(new P(ue,Ie,Y.VACANT_NODE_LABEL,Se.edgeLabel,Y.VACANT_NODE_LABEL));var Te=V.dfsEdgeList.length-1;return u.dfsCode.dfsEdgeList[Te]!==V.dfsEdgeList[Te]?!1:Q(ce[Se.edgeLabel].projected)}var We={};De=!1;var Ge=0;re.forEach(function(gt){var At=new N(gt),yt=u.findForwardPureEdges(D,At.edges[q[0]],ae,At);yt.length>0&&(De=!0,Ge=ue,yt.forEach(function(ct){var Kt="".concat(ct.label,"-").concat(k[ct.to].label);We[Kt]||(We[Kt]={projected:[],edgeLabel:ct.label,nodeLabel2:k[ct.to].label}),We[Kt].projected.push({graphId:D.id,edge:ct,preNode:gt})}))});for(var Je=q.length,mt=function(At){if(De)return"break";var yt=q[At];re.forEach(function(ct){var Kt=new N(ct),$t=u.findForwardRmpathEdges(D,Kt.edges[yt],ae,Kt);$t.length>0&&(De=!0,Ge=V.dfsEdgeList[yt].fromNode,$t.forEach(function(jt){var ir="".concat(jt.label,"-").concat(k[jt.to].label);We[ir]||(We[ir]={projected:[],edgeLabel:jt.label,nodeLabel2:k[jt.to].label}),We[ir].projected.push({graphId:D.id,edge:jt,preNode:ct})}))})},xe=0;xe<Je;xe++){var xt=mt(xe);if(xt==="break")break}if(!De)return!0;var Ze=u.findMinLabel(We);V.dfsEdgeList.push(new P(Ge,ue+1,Y.VACANT_NODE_LABEL,Ze.edgeLabel,Ze.nodeLabel2));var $e=V.dfsEdgeList.length-1;return b.dfsEdgeList[$e]!==V.dfsEdgeList[$e]?!1:Q(We["".concat(Ze.edgeLabel,"-").concat(Ze.nodeLabel2)].projected)},K="".concat(W.nodeLabel1,"-").concat(W.edgeLabel,"-").concat(W.nodeLabel2);return X(J[K].projected)}},v.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var u=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,F.clone)(u))}},v.prototype.subGraphMining=function(u){var b=this,T=this.getSupport(u);if(!(T<this.minSupport)&&this.isMin()){this.report();var D=this.dfsCode.getNodeNum(),k=this.dfsCode.buildRmpath(),V=this.dfsCode.dfsEdgeList[k[0]].toNode,J=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,W={},X={};u.forEach(function(K){for(var Q=b.graphs[K.graphId],re=Q.nodeMap,q=new N(K),ae=k.length-1;ae>=0;ae--){var ue=b.findBackwardEdge(Q,q.edges[k[ae]],q.edges[k[0]],q);if(ue){var ce="".concat(b.dfsCode.dfsEdgeList[k[ae]].fromNode,"-").concat(ue.label);X[ce]||(X[ce]={projected:[],toNodeId:b.dfsCode.dfsEdgeList[k[ae]].fromNode,edgeLabel:ue.label}),X[ce].projected.push({graphId:K.graphId,edge:ue,preNode:K})}}if(!(D>=b.maxNodeNum)){var De=b.findForwardPureEdges(Q,q.edges[k[0]],J,q);De.forEach(function(Pe){var we="".concat(V,"-").concat(Pe.label,"-").concat(re[Pe.to].label);W[we]||(W[we]={projected:[],fromNodeId:V,edgeLabel:Pe.label,nodeLabel2:re[Pe.to].label}),W[we].projected.push({graphId:K.graphId,edge:Pe,preNode:K})});for(var Ie=function(we){var xe=b.findForwardRmpathEdges(Q,q.edges[k[we]],J,q);xe.forEach(function(ve){var Se="".concat(b.dfsCode.dfsEdgeList[k[we]].fromNode,"-").concat(ve.label,"-").concat(re[ve.to].label);W[Se]||(W[Se]={projected:[],fromNodeId:b.dfsCode.dfsEdgeList[k[we]].fromNode,edgeLabel:ve.label,nodeLabel2:re[ve.to].label}),W[Se].projected.push({graphId:K.graphId,edge:ve,preNode:K})})},ae=0;ae<k.length;ae++)Ie(ae)}}),Object.keys(X).forEach(function(K){var Q=X[K],re=Q.toNodeId,q=Q.edgeLabel;b.dfsCode.dfsEdgeList.push(new P(V,re,"-1",q,"-1")),b.subGraphMining(X[K].projected),b.dfsCode.dfsEdgeList.pop()}),Object.keys(W).forEach(function(K){var Q=W[K],re=Q.fromNodeId,q=Q.edgeLabel,ae=Q.nodeLabel2;b.dfsCode.dfsEdgeList.push(new P(re,V+1,Y.VACANT_NODE_LABEL,q,ae)),b.subGraphMining(W[K].projected),b.dfsCode.dfsEdgeList.pop()})}},v.prototype.generate1EdgeFrequentSubGraphs=function(){var u=this.graphs,b=this.directed,T=this.minSupport,D=this.frequentSize1Subgraphs,k={},V={},J={},W={};return Object.keys(u).forEach(function(X){var K=u[X],Q=K.nodeMap;K.nodes.forEach(function(re,q){var ae=re.label,ue="".concat(X,"-").concat(ae);if(!J[ue]){var ce=k[ae]||0;ce++,k[ae]=ce}J[ue]={graphKey:X,label:ae},re.edges.forEach(function(De){var Ie=ae,Pe=Q[De.to].label;if(!b&&Ie>Pe){var we=Pe;Pe=Ie,Ie=we}var xe=De.label,ve="".concat(X,"-").concat(Ie,"-").concat(xe,"-").concat(Pe),Se="".concat(Ie,"-").concat(xe,"-").concat(Pe);if(!V[Se]){var Te=V[Se]||0;Te++,V[Se]=Te}W[ve]={graphId:X,nodeLabel1:Ie,edgeLabel:xe,nodeLabel2:Pe}})})}),Object.keys(k).forEach(function(X){var K=k[X];if(!(K<T)){var Q={nodes:[],edges:[]};Q.nodes.push({id:"0",label:X}),D.push(Q)}}),D},v.prototype.run=function(){var u=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var b=this.graphs,T=this.directed,D={};Object.keys(b).forEach(function(k){var V=b[k],J=V.nodeMap;V.nodes.forEach(function(W){var X=u.findForwardRootEdges(V,W);X.forEach(function(K){var Q=J[K.to],re="".concat(W.label,"-").concat(K.label,"-").concat(Q.label);D[re]||(D[re]={projected:[],nodeLabel1:W.label,edgeLabel:K.label,nodeLabel2:Q.label});var q={graphId:k,edge:K,preNode:null};D[re].projected.push(q)})})}),Object.keys(D).forEach(function(k){var V=D[k],J=V.projected,W=V.nodeLabel1,X=V.edgeLabel,K=V.nodeLabel2;u.dfsCode.dfsEdgeList.push(new P(0,1,W,X,K)),u.subGraphMining(J),u.dfsCode.dfsEdgeList.pop()})}},v}(),x=function(u,b,T,D){var k={};return Object.keys(u).forEach(function(V,J){var W=u[V],X=new Y.Graph(J,!0,b),K={};W.nodes.forEach(function(Q,re){X.addNode(re,Q[T]),K[Q.id]=re}),W.edges.forEach(function(Q,re){var q=K[Q.source],ae=K[Q.target];X.addEdge(-1,q,ae,Q[D])}),X&&X.getNodeNum()&&(k[X.id]=X)}),k},E=function(u,b,T){var D=[];return u.forEach(function(k){var V={nodes:[],edges:[]};k.nodes.forEach(function(J){var W;V.nodes.push((W={id:"".concat(J.id)},W[b]=J.label,W))}),k.edges.forEach(function(J){var W;V.edges.push((W={source:"".concat(J.from),target:"".concat(J.to)},W[T]=J.label,W))}),D.push(V)}),D},y="cluster",m=function(u){var b=u.graphs,T=u.directed,D=T===void 0?!1:T,k=u.nodeLabelProp,V=k===void 0?y:k,J=u.edgeLabelProp,W=J===void 0?y:J,X=x(b,D,V,W),K=u.minSupport,Q=u.maxNodeNum,re=u.minNodeNum,q=u.verbose,ae=u.top,ue={graphs:X,minSupport:K,maxNodeNum:Q,minNodeNum:re,top:ae,verbose:q,directed:D},ce=new O(ue);ce.run();var De=E(ce.frequentSubgraphs,V,W);return De},g=m;U.default=g},68575:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.VACANT_NODE_LABEL=U.VACANT_NODE_ID=U.VACANT_GRAPH_ID=U.VACANT_EDGE_LABEL=U.VACANT_EDGE_ID=U.Node=U.Graph=U.Edge=U.AUTO_EDGE_ID=void 0;var G=-1;U.VACANT_EDGE_ID=G;var F=-1;U.VACANT_NODE_ID=F;var Y="-1";U.VACANT_EDGE_LABEL=Y;var P="-1";U.VACANT_NODE_LABEL=P;var A=-1;U.VACANT_GRAPH_ID=A;var N="-1";U.AUTO_EDGE_ID=N;var O=function(){function y(m,g,v,u){m===void 0&&(m=G),g===void 0&&(g=F),v===void 0&&(v=F),u===void 0&&(u=Y),this.id=m,this.from=g,this.to=v,this.label=u}return y}();U.Edge=O;var x=function(){function y(m,g){m===void 0&&(m=F),g===void 0&&(g=P),this.id=m,this.label=g,this.edges=[],this.edgeMap={}}return y.prototype.addEdge=function(m){this.edges.push(m),this.edgeMap[m.id]=m},y}();U.Node=x;var E=function(){function y(m,g,v){m===void 0&&(m=F),g===void 0&&(g=!0),v===void 0&&(v=!1),this.id=m,this.edgeIdAutoIncrease=g,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=v}return y.prototype.getNodeNum=function(){return this.nodes.length},y.prototype.addNode=function(m,g){if(!this.nodeMap[m]){var v=new x(m,g);this.nodes.push(v),this.nodeMap[m]=v,this.nodeLabelMap[g]||(this.nodeLabelMap[g]=[]),this.nodeLabelMap[g].push(m)}},y.prototype.addEdge=function(m,g,v,u){if((this.edgeIdAutoIncrease||m===void 0)&&(m=this.counter++),!(this.nodeMap[g]&&this.nodeMap[v]&&this.nodeMap[v].edgeMap[m])){var b=new O(m,g,v,u);if(this.edges.push(b),this.edgeMap[m]=b,this.nodeMap[g].addEdge(b),this.edgeLabelMap[u]||(this.edgeLabelMap[u]=[]),this.edgeLabelMap[u].push(b),!this.directed){var T=new O(m,v,g,u);this.nodeMap[v].addEdge(T),this.edgeLabelMap[u].push(T)}}},y}();U.Graph=E},82812:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=G(97582),Y=O(G(75033)),P=O(G(21146)),A=O(G(78089)),N=G(70643);function O(W){return W&&W.__esModule?W:{default:W}}var x=function(X,K,Q,re){Q===void 0&&(Q="cluster"),re===void 0&&(re=2);var q=[],ae=X.nodes;return K.forEach(function(ue,ce){q.push(E(ae,ue,ce,Q,re))}),q},E=function(X,K,Q,re,q){var ae=[Q],ue=[],ce={};return K.forEach(function(De,Ie){if(De<=q&&Q!==Ie){ae.push(Ie),ue.push(X[Ie]);var Pe=X[Ie][re];ce[Pe]?(ce[Pe].count++,ce[Pe].dists.push(De)):ce[Pe]={count:1,dists:[De]}}}),Object.keys(ce).forEach(function(De){ce[De].dists=ce[De].dists.sort(function(Ie,Pe){return Ie-Pe})}),{nodeIdx:Q,nodeId:X[Q].id,nodeIdxs:ae,neighbors:ue,neighborNum:ae.length-1,nodeLabelCountMap:ce}},y=function(X,K,Q,re,q){var ae=Math.ceil(Q/K),ue={},ce=0;return re.forEach(function(De,Ie){for(var Pe=0,we=0,xe=De.nodeIdxs,ve=De.neighborNum-1;Pe<ae;){for(var Se=xe[1+Math.floor(Math.random()*ve)],Te=0;(ue["".concat(Ie,"-").concat(Se)]||ue["".concat(Se,"-").concat(Ie)])&&(Se=Math.floor(Math.random()*K),Te++,!(Te>2*K)););if(Te<2*K&&(ue["".concat(Ie,"-").concat(Se)]={start:Ie,end:Se,distance:q[Ie][Se]},Pe++,ce++,ce>=Q))return ue;if(we++,we>2*K)break}if(Pe<ae){var We=ae-Pe;ae=(ae+We)/(K-Ie-1)}}),ue},m=function(X,K,Q,re){var q=Q.nodes;return re||(re={}),Object.keys(X).forEach(function(ae){var ue,ce;if(!(re&&re[ae])){re[ae]={nodes:[],edges:[]};var De=X[ae],Ie=(ue=K[De.start])===null||ue===void 0?void 0:ue.nodeIdxs,Pe=(ce=K[De.end])===null||ce===void 0?void 0:ce.nodeIdxs;if(!(!Ie||!Pe)){var we=new Set(Pe),xe=Ie.filter(function(Ge){return we.has(Ge)});if(!(!xe||!xe.length)){for(var ve={},Se=xe.length,Te=0;Te<Se;Te++){var We=q[xe[Te]];re[ae].nodes.push(We),ve[We.id]=!0}Q.edges.forEach(function(Ge){ve[Ge.source]&&ve[Ge.target]&&re[ae].edges.push(Ge)})}}}}),re},g=function(X,K,Q,re){var q,ae,ue={};X.nodes.forEach(function(De){ue[De.id]=De});var ce=0;return!(!((q=K==null?void 0:K.edges)===null||q===void 0)&&q.length)||((ae=K==null?void 0:K.nodes)===null||ae===void 0?void 0:ae.length)<2?0:(X.edges.forEach(function(De){var Ie=ue[De.source][Q],Pe=ue[De.target][Q],we=K==null?void 0:K.nodes[0][Q],xe=K==null?void 0:K.nodes[1][Q],ve=K==null?void 0:K.edges[0][re];De[re]===ve&&(Ie===we&&Pe===xe||Ie===xe&&Pe===we)&&ce++}),ce)},v=function(X,K,Q){for(var re=1/0,q=0,ae=function(De){var Ie=X[De],Pe=Object.keys(Ie).sort(function(Ge,Je){return Ie[Ge]-Ie[Je]}),we=10,xe=[];Pe.forEach(function(Ge,Je){xe[Je%we]||(xe[Je%we]={graphs:[],totalCount:0,aveCount:0}),xe[Je%we].graphs.push(Ge),xe[Je%we].totalCount+=Ie[Ge]});var ve=0,Se=[];xe.forEach(function(Ge){var Je=Ge.totalCount/Ge.graphs.length;Ge.aveCount=Je,Se.push(Je);var mt=0,xt=Ge.length;Ge.graphs.forEach(function(Ze,$e){var gt=Ie[Ze];Ge.graphs.forEach(function(At,yt){$e!==yt&&(mt+=Math.abs(gt-Ie[At]))})}),mt/=xt*(xt-1)/2,ve+=mt}),ve/=xe.length;var Te=0;Se.forEach(function(Ge,Je){Se.forEach(function(mt,xt){Je!==xt&&(Te+=Math.abs(Ge-mt))}),Te/=Se.length*(Se.length-1)/2});var We=Te-ve;re<We&&(re=We,q=De)},ue=0;ue<K;ue++)ae(ue);return{structure:Q[q],structureCountMap:X[q]}},u=function(X,K){var Q={},re={};return X.forEach(function(q,ae){Q[q.id]={idx:ae,node:q,degree:0,inDegree:0,outDegree:0};var ue=q[K];re[ue]||(re[ue]=[]),re[ue].push(q)}),{nodeMap:Q,nodeLabelMap:re}},b=function(X,K,Q){var re={},q={};return X.forEach(function(ae,ue){re["".concat(N.uniqueId)]={idx:ue,edge:ae};var ce=ae[K];q[ce]||(q[ce]=[]),q[ce].push(ae);var De=Q[ae.source];De&&(De.degree++,De.outDegree++);var Ie=Q[ae.target];Ie&&(Ie.degree++,Ie.inDegree++)}),{edgeMap:re,edgeLabelMap:q}},T=function(X,K,Q){var re=K.length,q={};return K.forEach(function(ae,ue){for(var ce=Q?0:ue+1,De=X[ue].id,Ie=ce;Ie<re;Ie++)if(ue!==Ie){var Pe=X[Ie].id,we=ae[Ie];q["".concat(De,"-").concat(Pe)]=we,Q||(q["".concat(Pe,"-").concat(De)]=we)}}),q},D=function(X,K,Q,re,q,ae,ue,ce,De,Ie,Pe){var we,xe="".concat(K.id,"-").concat(Q.id);if(Ie&&Ie[xe])return Ie[xe];var ve=Pe?Pe[xe]:void 0;if(!ve){var Se=(we={},we[xe]={start:re[K.id].idx,end:re[Q.id].idx,distance:q},we);Pe=m(Se,ae,X,Pe),ve=Pe[xe]}return g(ve,ue,ce,De)},k=function(X,K,Q,re){var q,ae,ue,ce=(q=X[K])===null||q===void 0?void 0:q.degree,De=(ae=X[K])===null||ae===void 0?void 0:ae.inDegree,Ie=(ue=X[K])===null||ue===void 0?void 0:ue.outDegree;return X[K]===void 0&&(ce=1/0,De=1/0,Ie=1/0,re[K].forEach(function(Pe){var we=Q[Pe.id].degree;ce>we&&(ce=we);var xe=Q[Pe.id].inDegree;De>xe&&(De=xe);var ve=Q[Pe.id].outDegree;Ie>ve&&(Ie=ve)}),X[K]={degree:ce,inDegree:De,outDegree:Ie}),{minPatternNodeLabelDegree:ce,minPatternNodeLabelInDegree:De,minPatternNodeLabelOutDegree:Ie}},V=function(X,K,Q,re,q,ae,ue){var ce;if(Q===void 0&&(Q=!1),ae===void 0&&(ae="cluster"),ue===void 0&&(ue="cluster"),!(!X||!X.nodes)){var De=X.nodes.length;if(De){var Ie=(0,Y.default)(X,Q),Pe=(0,Y.default)(K,Q),we=T(X.nodes,Ie,Q),xe=T(K.nodes,Pe,Q),ve=u(X.nodes,ae),Se=ve.nodeMap,Te=ve.nodeLabelMap,We=u(K.nodes,ae),Ge=We.nodeMap,Je=We.nodeLabelMap;b(X.edges,ue,Se);var mt=b(K.edges,ue,Ge).edgeLabelMap,xt=[];Pe==null||Pe.forEach(function(mn){xt=xt.concat(mn)}),q||(q=Math.max.apply(Math,(0,F.__spreadArray)((0,F.__spreadArray)([],xt,!1),[2],!1))),re||(re=q);var Ze=x(X,Ie,ae,re),$e=x(K,Pe,ae,re),gt=Math.min(100,De*(De-1)/2),At=y(re,De,gt,Ze,Ie),yt=m(At,Ze,X),ct=10,Kt=1,$t=1,jt=4,ir={graphs:yt,nodeLabelProp:ae,edgeLabelProp:ue,minSupport:Kt,minNodeNum:$t,maxNodeNum:jt,directed:Q},mr=(0,P.default)(ir).slice(0,ct),tn=mr.length,Dr=[];mr.forEach(function(mn,jn){Dr[jn]={},Object.keys(yt).forEach(function(Jn){var Ln=yt[Jn],ma=g(Ln,mn,ae,ue);Dr[jn][Jn]=ma})});var Dn=v(Dr,tn,mr),Ve=Dn.structure,Nr=Dn.structureCountMap,Fn=K.nodes[0],Vn=[],va=(ce=K.nodes[0])===null||ce===void 0?void 0:ce[ae],aa=-1/0;K.nodes.forEach(function(mn){var jn=mn[ae],Jn=Te[jn];(Jn==null?void 0:Jn.length)>aa&&(aa=Jn.length,Vn=Jn,va=jn,Fn=mn)});var Ya={},la={},Qa={},Wa={},Da={},ar={};Object.keys(Je).forEach(function(mn,jn){Da[mn]=[],Q&&(ar[mn]=[]);var Jn=-1/0,Ln=Je[mn],ma={};Ln.forEach(function(Ft){var Ir=xe["".concat(Fn.id,"-").concat(Ft.id)];if(Ir&&Da[mn].push(Ir),Jn<Ir&&(Jn=Ir),ma["".concat(Fn.id,"-").concat(Ft.id)]={start:0,end:Ge[Ft.id].idx,distance:Ir},Q){var Sr=xe["".concat(Ft.id,"-").concat(Fn.id)];Sr&&ar[mn].push(Sr)}}),Da[mn]=Da[mn].sort(function(Ft,Ir){return Ft-Ir}),Q&&(ar[mn]=ar[mn].sort(function(Ft,Ir){return Ft-Ir})),la=m(ma,$e,K,la);var Z=[];if(Object.keys(ma).forEach(function(Ft){if(Qa[Ft]){Z.push(Qa[Ft]);return}var Ir=la[Ft];Qa[Ft]=g(Ir,Ve,ae,ue),Z.push(Qa[Ft])}),Z=Z.sort(function(Ft,Ir){return Ir-Ft}),Wa["".concat(Fn.id,"-").concat(mn)]=Z,mn!==va)for(var Gt=(Vn==null?void 0:Vn.length)||0,lt=function(Ir){var Sr=Vn[Ir],nn=Ze[Se[Sr.id].idx],an=nn.nodeLabelCountMap[mn],qr=Je[mn].length;if(!an||an.count<qr)return Vn.splice(Ir,1),"continue";for(var le=!1,ge=0;ge<qr;ge++)if(an.dists[ge]>Da[mn][ge]){le=!0;break}if(le)return Vn.splice(Ir,1),"continue";var B={};nn.neighbors.forEach(function($){var Ee=we["".concat(Sr.id,"-").concat($.id)];B["".concat(Sr.id,"-").concat($.id)]={start:Se[Sr.id].idx,end:Se[$.id].idx,distance:Ee}}),yt=m(B,Ze,X,yt);var _=[];Object.keys(B).forEach(function($){if(Nr[$]){_.push(Nr[$]);return}var Ee=yt[$];Nr[$]=g(Ee,Ve,ae,ue),_.push(Nr[$])}),_=_.sort(function($,Ee){return Ee-$});for(var M=!1,ge=0;ge<qr;ge++)if(_[ge]<Z[ge]){M=!0;break}if(M)return Vn.splice(Ir,1),"continue"},Ht=Gt-1;Ht>=0;Ht--)lt(Ht)});var Or=[];Vn==null||Vn.forEach(function(mn){for(var jn=Se[mn.id].idx,Jn=E(X.nodes,Ie[jn],jn,ae,q),Ln=Jn.neighbors,ma=Ln.length,Z=!1,Gt=ma-1;Gt>=0;Gt--){if(Ln.length+1<K.nodes.length){Z=!0;return}var lt=Ln[Gt],Ht=lt[ae];if(!Je[Ht]||!Je[Ht].length){Ln.splice(Gt,1);continue}if(!Da[Ht]||!Da[Ht].length){Ln.splice(Gt,1);continue}var Ft="".concat(mn.id,"-").concat(lt.id),Ir=we[Ft],Sr=Da[Ht].length-1,nn=Da[Ht][Sr];if(Ir>nn){Ln.splice(Gt,1);continue}if(Q){var an="".concat(lt.id,"-").concat(mn.id),qr=we[an];Sr=ar[Ht].length-1;var le=ar[Ht][Sr];if(qr>le){Ln.splice(Gt,1);continue}}var ge=Nr[Ft]?Nr[Ft]:D(X,mn,lt,Se,Ir,Ze,Ve,ae,ue,Nr,yt),B="".concat(Fn.id,"-").concat(Ht),_=Wa[B][Wa[B].length-1];if(ge<_){Ln.splice(Gt,1);continue}var M=k(Ya,Ht,Ge,Je),$=M.minPatternNodeLabelDegree,Ee=M.minPatternNodeLabelInDegree,Ne=M.minPatternNodeLabelOutDegree;if(Se[lt.id].degree<$){Ln.splice(Gt,1);continue}}Z||Or.push({nodes:[mn].concat(Ln)})});var Qr=(0,A.default)(K,Fn.id,!1).length,wn={};Q?(Object.keys(Qr).forEach(function(mn){var jn=Ge[mn].node[ae];wn[jn]?wn[jn].push(Qr[mn]):wn[jn]=[Qr[mn]]}),Object.keys(wn).forEach(function(mn){wn[mn].sort(function(jn,Jn){return jn-Jn})})):wn=Da;for(var On=Or.length,Gn=function(jn){var Jn=Or[jn],Ln=Jn.nodes[0],ma={},Z={};Jn.nodes.forEach(function(Fr,He){Z[Fr.id]={idx:He,node:Fr,degree:0,inDegree:0,outDegree:0};var Ae=Fr[ae];ma[Ae]?ma[Ae]++:ma[Ae]=1});var Gt=[],lt={};X.edges.forEach(function(Fr){Z[Fr.source]&&Z[Fr.target]&&(Gt.push(Fr),lt[Fr[ue]]?lt[Fr[ue]]++:lt[Fr[ue]]=1,Z[Fr.source].degree++,Z[Fr.target].degree++,Z[Fr.source].outDegree++,Z[Fr.target].inDegree++)});for(var Ht=Object.keys(mt).length,Ft=!1,Ir=0;Ir<Ht;Ir++){var Sr=Object.keys(mt)[Ir];if(!lt[Sr]||lt[Sr]<mt[Sr].length){Ft=!0;break}}if(Ft)return Or.splice(jn,1),"continue";var nn=Gt.length;if(nn<K.edges.length)return Or.splice(jn,1),"break";for(var an=!1,qr=function(He){var Ae=Gt[He],Qe=Ae[ue],ft=mt[Qe];if(!ft||!ft.length)return lt[Qe]--,ft&&lt[Qe]<ft.length?(an=!0,"break"):(Gt.splice(He,1),Z[Ae.source].degree--,Z[Ae.target].degree--,Z[Ae.source].outDegree--,Z[Ae.target].inDegree--,"continue");var ut=Z[Ae.source].node[ae],St=Z[Ae.target].node[ae],Qt=!1;if(ft.forEach(function(qt){var Xr=Ge[qt.source].node,vn=Ge[qt.target].node;Xr[ae]===ut&&vn[ae]===St&&(Qt=!0),!Q&&Xr[ae]===St&&vn[ae]===ut&&(Qt=!0)}),!Qt)return lt[Qe]--,ft&&lt[Qe]<ft.length?(an=!0,"break"):(Gt.splice(He,1),Z[Ae.source].degree--,Z[Ae.target].degree--,Z[Ae.source].outDegree--,Z[Ae.target].inDegree--,"continue")},Ir=nn-1;Ir>=0;Ir--){var le=qr(Ir);if(le==="break")break}if(an)return Or.splice(jn,1),"continue";Jn.edges=Gt;var ge=(0,A.default)(Jn,Jn.nodes[0].id,!1).length;if(Object.keys(ge).reverse().forEach(function(Fr){if(!(Fr===Jn.nodes[0].id||an)){if(ge[Fr]===1/0){var He=Z[Fr].node[ae];if(ma[He]--,ma[He]<Je[He].length){an=!0;return}var Ae=Jn.nodes.indexOf(Z[Fr].node);Jn.nodes.splice(Ae,1),Z[Fr]=void 0;return}var Qe=Se[Fr].node[ae];if(!wn[Qe]||!wn[Qe].length||ge[Fr]>wn[Qe][wn[Qe].length-1]){var He=Z[Fr].node[ae];if(ma[He]--,ma[He]<Je[He].length){an=!0;return}var Ae=Jn.nodes.indexOf(Z[Fr].node);Jn.nodes.splice(Ae,1),Z[Fr]=void 0}}}),an)return Or.splice(jn,1),"continue";for(var B=!0,_=0;B&&!an;){B=!1;var M=Q?Z[Ln.id].degree<Ge[Fn.id].degree||Z[Ln.id].inDegree<Ge[Fn.id].inDegree||Z[Ln.id].outDegree<Ge[Fn.id].outDegree:Z[Ln.id].degree<Ge[Fn.id].degree;if(M){an=!0;break}if(ma[Ln[ae]]<Je[Ln[ae]].length){an=!0;break}for(var $=Jn.nodes.length,Ee=$-1;Ee>=0;Ee--){var Ne=Jn.nodes[Ee],Le=Z[Ne.id].degree,Ye=Z[Ne.id].inDegree,Ot=Z[Ne.id].outDegree,Et=Ne[ae],Zt=k(Ya,Et,Ge,Je),Lr=Zt.minPatternNodeLabelDegree,or=Zt.minPatternNodeLabelInDegree,$r=Zt.minPatternNodeLabelOutDegree,Sn=Q?Le<Lr||Ye<or||Ot<$r:Le<Lr;if(Sn){if(ma[Ne[ae]]--,ma[Ne[ae]]<Je[Ne[ae]].length){an=!0;break}Jn.nodes.splice(Ee,1),Z[Ne.id]=void 0,B=!0}}if(an||!B&&_!==0)break;nn=Gt.length;for(var kt=nn-1;kt>=0;kt--){var nr=Gt[kt];if(!Z[nr.source]||!Z[nr.target]){Gt.splice(kt,1);var _r=nr[ue];if(lt[_r]--,Z[nr.source]&&(Z[nr.source].degree--,Z[nr.source].outDegree--),Z[nr.target]&&(Z[nr.target].degree--,Z[nr.target].inDegree--),mt[_r]&&lt[_r]<mt[_r].length){an=!0;break}B=!0}}_++}if(an||an||Jn.nodes.length<K.nodes.length||Gt.length<K.edges.length)return Or.splice(jn,1),"continue"},qn=On-1;qn>=0;qn--){var oa=Gn(qn);if(oa==="break")break}for(var ya=Or.length,Ka=function(jn){var Jn=Or[jn],Ln={};Jn.edges.forEach(function(Gt){var lt="".concat(Gt.source,"-").concat(Gt.target,"-").concat(Gt.label);Ln[lt]?Ln[lt]++:Ln[lt]=1});for(var ma=function(lt){var Ht=Or[lt],Ft={};Ht.edges.forEach(function(Sr){var nn="".concat(Sr.source,"-").concat(Sr.target,"-").concat(Sr.label);Ft[nn]?Ft[nn]++:Ft[nn]=1});var Ir=!0;Object.keys(Ft).length!==Object.keys(Ln).length?Ir=!1:Object.keys(Ln).forEach(function(Sr){Ft[Sr]!==Ln[Sr]&&(Ir=!1)}),Ir&&Or.splice(lt,1)},Z=ya-1;Z>jn;Z--)ma(Z);ya=Or.length},qn=0;qn<=ya-1;qn++)Ka(qn);return Or}}},J=V;U.default=J},5170:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=P(G(62238)),Y=G(70643);function P(O){return O&&O.__esModule?O:{default:O}}var A=function(x,E,y,m){E===void 0&&(E=!1),y===void 0&&(y="weight"),m===void 0&&(m=1e3);var g=x.nodes,v=g===void 0?[]:g,u=x.edges,b=u===void 0?[]:u,T={},D={};v.forEach(function(ae,ue){var ce=(0,Y.uniqueId)();ae.clusterId=ce,T[ce]={id:ce,nodes:[ae]},D[ae.id]={node:ae,idx:ue}});var k=(0,F.default)(x,E),V=[],J={};k.forEach(function(ae,ue){var ce=0,De=v[ue].id;J[De]={},ae.forEach(function(Ie,Pe){if(Ie){ce+=Ie;var we=v[Pe].id;J[De][we]=Ie}}),V.push(ce)});for(var W=0,X=function(){var ue=!1;if(v.forEach(function(ce){var De={};Object.keys(J[ce.id]).forEach(function(We){var Ge=J[ce.id][We],Je=D[We].node,mt=Je.clusterId;De[mt]||(De[mt]=0),De[mt]+=Ge});var Ie=-1/0,Pe=[];if(Object.keys(De).forEach(function(We){Ie<De[We]?(Ie=De[We],Pe=[We]):Ie===De[We]&&Pe.push(We)}),!(Pe.length===1&&Pe[0]===ce.clusterId)){var we=Pe.indexOf(ce.clusterId);if(we>=0&&Pe.splice(we,1),Pe&&Pe.length){ue=!0;var xe=T[ce.clusterId],ve=xe.nodes.indexOf(ce);xe.nodes.splice(ve,1);var Se=Math.floor(Math.random()*Pe.length),Te=T[Pe[Se]];Te.nodes.push(ce),ce.clusterId=Te.id}}}),!ue)return"break";W++};W<m;){var K=X();if(K==="break")break}Object.keys(T).forEach(function(ae){var ue=T[ae];(!ue.nodes||!ue.nodes.length)&&delete T[ae]});var Q=[],re={};b.forEach(function(ae){var ue=ae.source,ce=ae.target,De=ae[y]||1,Ie=D[ue].node.clusterId,Pe=D[ce].node.clusterId,we="".concat(Ie,"---").concat(Pe);if(re[we])re[we].weight+=De,re[we].count++;else{var xe={source:Ie,target:Pe,weight:De,count:1};re[we]=xe,Q.push(xe)}});var q=[];return Object.keys(T).forEach(function(ae){q.push(T[ae])}),{clusters:q,clusterEdges:Q}},N=A;U.default=N},35179:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=G(13810),Y=O(G(62238)),P=O(G(29741)),A=G(3665),N=G(26838);function O(g){return g&&g.__esModule?g:{default:g}}var x=function(v,u,b,T){for(var D=u.length,k=2*T,V=0,J=0;J<D;J++)for(var W=v[J].clusterId,X=0;X<D;X++){var K=v[X].clusterId;if(W===K){var Q=u[J][X]||0,re=b[J]||0,q=b[X]||0;V+=Q-re*q/k}}return V*=1/k,V},E=function(v,u){v===void 0&&(v=[]);for(var b=v.length,T=new P.default([]),D=0;D<b;D++)T=T.add(new P.default(u[D]));var k=T.avg(b);k.normalize();for(var V=0,D=0;D<b;D++){var J=new P.default(u[D]),W=J.squareEuclideanDistance(k);V+=W}var X=[];v.forEach(function(){X.push([])});for(var D=0;D<b;D++){var J=new P.default(u[D]);v[D].clusterInertial=0;for(var K=0;K<b;K++){if(D===K){X[D][K]=0;continue}var Q=new P.default(u[K]);X[D][K]=J.squareEuclideanDistance(Q),v[D].clusterInertial+=X[D][K]}}for(var re=0,q=2*b*V,D=0;D<b;D++)for(var ae=v[D].clusterId,K=0;K<b;K++){var ue=v[K].clusterId;if(!(D===K||ae!==ue)){var ce=v[D].clusterInertial*v[K].clusterInertial/Math.pow(q,2)-X[D][K]/q;re+=ce}}return Number(re.toFixed(4))},y=function(v,u,b,T,D,k,V,J,W){u===void 0&&(u=!1),b===void 0&&(b="weight"),T===void 0&&(T=1e-4),D===void 0&&(D=!1),k===void 0&&(k=void 0),V===void 0&&(V=[]),J===void 0&&(J=["id"]),W===void 0&&(W=1);var X=v.nodes,K=X===void 0?[]:X,Q=v.edges,re=Q===void 0?[]:Q,q=[];if(D){K.forEach(function(yt,ct){yt.properties=yt.properties||{},yt.originIndex=ct});var ae=[];K.every(function(yt){return yt.hasOwnProperty("nodeType")})&&(ae=Array.from(new Set(K.map(function(yt){return yt.nodeType}))),K.forEach(function(yt){yt.properties.nodeType=ae.findIndex(function(ct){return ct===yt.nodeType})}));var ue=(0,A.getAllProperties)(K,k);q=(0,N.oneHot)(ue,V,J)}var ce=1,De={},Ie={};K.forEach(function(yt,ct){var Kt=String(ce++);yt.clusterId=Kt,De[Kt]={id:Kt,nodes:[yt]},Ie[yt.id]={node:yt,idx:ct}});var Pe=(0,Y.default)(v,u),we=[],xe={},ve=0;Pe.forEach(function(yt,ct){var Kt=0,$t=K[ct].id;xe[$t]={},yt.forEach(function(jt,ir){if(jt){Kt+=jt;var mr=K[ir].id;xe[$t][mr]=jt,ve+=jt}}),we.push(Kt)}),ve/=2;for(var Se=1/0,Te=1/0,We=0,Ge=[],Je={};;){D&&K.every(function(yt){return yt.hasOwnProperty("properties")})?Se=x(K,Pe,we,ve)+E(K,q)*W:Se=x(K,Pe,we,ve),We===0&&(Te=Se,Ge=K,Je=De);var mt=Se>0&&Se>Te&&Se-Te<T;if(Se>Te&&(Ge=K.map(function(yt){return{node:yt,clusterId:yt.clusterId}}),Je=(0,F.clone)(De),Te=Se),mt||We>100)break;We++,Object.keys(De).forEach(function(yt){var ct=0;re.forEach(function(Kt){var $t=Kt.source,jt=Kt.target,ir=Ie[$t].node.clusterId,mr=Ie[jt].node.clusterId;(ir===yt&&mr!==yt||mr===yt&&ir!==yt)&&(ct=ct+(Kt[b]||1))}),De[yt].sumTot=ct}),K.forEach(function(yt,ct){var Kt=De[yt.clusterId],$t=0,jt,ir=we[ct]/(2*ve),mr=0,tn=Kt.nodes;tn.forEach(function(la){var Qa=Ie[la.id].idx;mr+=Pe[ct][Qa]||0});var Dr=mr-Kt.sumTot*ir,Dn=tn.filter(function(la){return la.id!==yt.id}),Ve=[];Dn.forEach(function(la,Qa){Ve[Qa]=q[la.originIndex]});var Nr=E(Dn,q)*W,Fn=xe[yt.id];if(Object.keys(Fn).forEach(function(la){var Qa=Ie[la].node,Wa=Qa.clusterId;if(Wa!==yt.clusterId){var Da=De[Wa],ar=Da.nodes;if(!(!ar||!ar.length)){var Or=0;ar.forEach(function(oa){var ya=Ie[oa.id].idx;Or+=Pe[ct][ya]||0});var Qr=Or-Da.sumTot*ir,wn=ar.concat([yt]),On=[];wn.forEach(function(oa,ya){On[ya]=q[oa.originIndex]});var Gn=E(wn,q)*W,qn=Qr-Dr;D&&(qn=Qr+Gn-(Dr+Nr)),qn>$t&&($t=qn,jt=Da)}}}),$t>0){jt.nodes.push(yt);var Vn=yt.clusterId;yt.clusterId=jt.id;var va=Kt.nodes.indexOf(yt);Kt.nodes.splice(va,1);var aa=0,Ya=0;re.forEach(function(la){var Qa=la.source,Wa=la.target,Da=Ie[Qa].node.clusterId,ar=Ie[Wa].node.clusterId;(Da===jt.id&&ar!==jt.id||ar===jt.id&&Da!==jt.id)&&(aa=aa+(la[b]||1)),(Da===Vn&&ar!==Vn||ar===Vn&&Da!==Vn)&&(Ya=Ya+(la[b]||1))}),jt.sumTot=aa,Kt.sumTot=Ya}})}var xt={},Ze=0;Object.keys(Je).forEach(function(yt){var ct=Je[yt];if(!ct.nodes||!ct.nodes.length){delete Je[yt];return}var Kt=String(Ze+1);Kt!==yt&&(ct.id=Kt,ct.nodes=ct.nodes.map(function($t){return{id:$t.id,clusterId:Kt}}),Je[Kt]=ct,xt[yt]=Kt,delete Je[yt],Ze++)}),Ge.forEach(function(yt){var ct=yt.node,Kt=yt.clusterId;ct&&(ct.clusterId=Kt,ct.clusterId&&xt[ct.clusterId]&&(ct.clusterId=xt[ct.clusterId]))});var $e=[],gt={};re.forEach(function(yt){var ct=yt.source,Kt=yt.target,$t=yt[b]||1,jt=Ie[ct].node.clusterId,ir=Ie[Kt].node.clusterId;if(!(!jt||!ir)){var mr="".concat(jt,"---").concat(ir);if(gt[mr])gt[mr].weight+=$t,gt[mr].count++;else{var tn={source:jt,target:ir,weight:$t,count:1};gt[mr]=tn,$e.push(tn)}}});var At=[];return Object.keys(Je).forEach(function(yt){At.push(Je[yt])}),{clusters:At,clusterEdges:$e}},m=y;U.default=m},89454:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=A(G(38823)),Y=A(G(57085)),P=G(70643);function A(y){return y&&y.__esModule?y:{default:y}}var N=function(m,g){var v=[],u=m.nodes,b=u===void 0?[]:u,T=m.edges,D=T===void 0?[]:T;if(b.length===0)return v;var k=b[0],V=new Set;V.add(k);var J=function(q,ae){return g?q.weight-ae.weight:0},W=new Y.default(J);for((0,P.getEdgesByNodeId)(k.id,D).forEach(function(re){W.insert(re)});!W.isEmpty();){var X=W.delMin(),K=X.source,Q=X.target;V.has(K)&&V.has(Q)||(v.push(X),V.has(K)||(V.add(K),(0,P.getEdgesByNodeId)(K,D).forEach(function(re){W.insert(re)})),V.has(Q)||(V.add(Q),(0,P.getEdgesByNodeId)(Q,D).forEach(function(re){W.insert(re)})))}return v},O=function(m,g){var v=[],u=m.nodes,b=u===void 0?[]:u,T=m.edges,D=T===void 0?[]:T;if(b.length===0)return v;var k=D.map(function(K){return K});g&&k.sort(function(K,Q){return K.weight-Q.weight});for(var V=new F.default(b.map(function(K){return K.id}));k.length>0;){var J=k.shift(),W=J.source,X=J.target;V.connected(W,X)||(v.push(J),V.union(W,X))}return v},x=function(m,g,v){var u={prim:N,kruskal:O};return v?u[v](m,g):O(m,g)},E=x;U.default=E},74926:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=P(G(82556)),Y=G(70643);function P(O){return O&&O.__esModule?O:{default:O}}var A=function(x,E,y){typeof E!="number"&&(E=1e-6),typeof y!="number"&&(y=.85);for(var m=1,g=0,v=1e3,u=x.nodes,b=u===void 0?[]:u,T=x.edges,D=T===void 0?[]:T,k=b.length,V,J={},W={},X=0;X<k;++X){var K=b[X],Q=K.id;J[Q]=1/k,W[Q]=1/k}for(var re=(0,F.default)(x);v>0&&m>E;){g=0;for(var X=0;X<k;++X){var K=b[X],Q=K.id;if(V=0,re[K.id].inDegree===0)J[Q]=0;else{for(var q=(0,Y.getNeighbors)(Q,D,"source"),ae=0;ae<q.length;++ae){var ue=q[ae],ce=re[ue].outDegree;ce>0&&(V+=W[ue]/ce)}J[Q]=y*V,g+=J[Q]}}g=(1-g)/k,m=0;for(var X=0;X<k;++X){var K=b[X],Q=K.id;V=J[Q]+g,m+=Math.abs(V-W[Q]),W[Q]=V}v-=1}return W},N=A;U.default=N},57085:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var G=function(A,N){return A-N},F=function(){function P(A){A===void 0&&(A=G),this.compareFn=A,this.list=[]}return P.prototype.getLeft=function(A){return 2*A+1},P.prototype.getRight=function(A){return 2*A+2},P.prototype.getParent=function(A){return A===0?null:Math.floor((A-1)/2)},P.prototype.isEmpty=function(){return this.list.length<=0},P.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},P.prototype.delMin=function(){var A=this.top(),N=this.list.pop();return this.list.length>0&&(this.list[0]=N,this.moveDown(0)),A},P.prototype.insert=function(A){if(A!==null){this.list.push(A);var N=this.list.length-1;return this.moveUp(N),!0}return!1},P.prototype.moveUp=function(A){for(var N=this.getParent(A);A&&A>0&&this.compareFn(this.list[N],this.list[A])>0;){var O=this.list[N];this.list[N]=this.list[A],this.list[A]=O,A=N,N=this.getParent(A)}},P.prototype.moveDown=function(A){var N,O=A,x=this.getLeft(A),E=this.getRight(A),y=this.list.length;x!==null&&x<y&&this.compareFn(this.list[O],this.list[x])>0?O=x:E!==null&&E<y&&this.compareFn(this.list[O],this.list[E])>0&&(O=E),A!==O&&(N=[this.list[O],this.list[A]],this.list[A]=N[0],this.list[O]=N[1],this.moveDown(O))},P}(),Y=F;U.default=Y},88481:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=U.LinkedListNode=void 0;var G=function(N,O){return N===O},F=function(){function A(N,O){O===void 0&&(O=null),this.value=N,this.next=O}return A.prototype.toString=function(N){return N?N(this.value):"".concat(this.value)},A}();U.LinkedListNode=F;var Y=function(){function A(N){N===void 0&&(N=G),this.head=null,this.tail=null,this.compare=N}return A.prototype.prepend=function(N){var O=new F(N,this.head);return this.head=O,this.tail||(this.tail=O),this},A.prototype.append=function(N){var O=new F(N);return this.head?(this.tail.next=O,this.tail=O,this):(this.head=O,this.tail=O,this)},A.prototype.delete=function(N){if(!this.head)return null;for(var O=null;this.head&&this.compare(this.head.value,N);)O=this.head,this.head=this.head.next;var x=this.head;if(x!==null)for(;x.next;)this.compare(x.next.value,N)?(O=x.next,x.next=x.next.next):x=x.next;return this.compare(this.tail.value,N)&&(this.tail=x),O},A.prototype.find=function(N){var O=N.value,x=O===void 0?void 0:O,E=N.callback,y=E===void 0?void 0:E;if(!this.head)return null;for(var m=this.head;m;){if(y&&y(m.value)||x!==void 0&&this.compare(m.value,x))return m;m=m.next}return null},A.prototype.deleteTail=function(){var N=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,N;for(var O=this.head;O.next;)O.next.next?O=O.next:O.next=null;return this.tail=O,N},A.prototype.deleteHead=function(){if(!this.head)return null;var N=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),N},A.prototype.fromArray=function(N){var O=this;return N.forEach(function(x){return O.append(x)}),this},A.prototype.toArray=function(){for(var N=[],O=this.head;O;)N.push(O),O=O.next;return N},A.prototype.reverse=function(){for(var N=this.head,O=null,x=null;N;)x=N.next,N.next=O,O=N,N=x;this.tail=this.head,this.head=O},A.prototype.toString=function(N){return N===void 0&&(N=void 0),this.toArray().map(function(O){return O.toString(N)}).toString()},A}(),P=Y;U.default=P},93026:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=Y(G(88481));function Y(N){return N&&N.__esModule?N:{default:N}}var P=function(){function N(){this.linkedList=new F.default}return N.prototype.isEmpty=function(){return!this.linkedList.head},N.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},N.prototype.enqueue=function(O){this.linkedList.append(O)},N.prototype.dequeue=function(){var O=this.linkedList.deleteHead();return O?O.value:null},N.prototype.toString=function(O){return this.linkedList.toString(O)},N}(),A=P;U.default=A},38823:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var G=function(){function Y(P){this.count=P.length,this.parent={};for(var A=0,N=P;A<N.length;A++){var O=N[A];this.parent[O]=O}}return Y.prototype.find=function(P){for(;this.parent[P]!==P;)P=this.parent[P];return P},Y.prototype.union=function(P,A){var N=this.find(P),O=this.find(A);N!==O&&(N<O?(this.parent[A]!==A&&this.union(this.parent[A],P),this.parent[A]=this.parent[P]):(this.parent[P]!==P&&this.union(this.parent[P],A),this.parent[P]=this.parent[A]))},Y.prototype.connected=function(P,A){return this.find(P)===this.find(A)},Y}(),F=G;U.default=F},17892:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.DistanceType=void 0;var G;U.DistanceType=G,function(F){F.EuclideanDistance="euclideanDistance"}(G||(U.DistanceType=G={}))},70643:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.uniqueId=U.getOutEdgesNodeId=U.getNeighbors=U.getEdgesByNodeId=void 0;var G=function(N,O,x){O===void 0&&(O=[]);var E=O.filter(function(v){return v.source===N||v.target===N});if(x==="target"){var y=function(u){return u.source===N};return E.filter(y).map(function(v){return v.target})}if(x==="source"){var m=function(u){return u.target===N};return E.filter(m).map(function(v){return v.source})}var g=function(u){return u.source===N?u.target:u.source};return E.map(g)};U.getNeighbors=G;var F=function(N,O){return O.filter(function(x){return x.source===N})};U.getOutEdgesNodeId=F;var Y=function(N,O){return O.filter(function(x){return x.source===N||x.target===N})};U.getEdgesByNodeId=Y;var P=function(N){N===void 0&&(N=0);var O="".concat(Math.random()).split(".")[1].substr(0,5),x="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(N,"-").concat(O).concat(x)};U.uniqueId=P},26838:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.oneHot=U.getDistance=U.getAllKeyValueMap=U.default=void 0;var F=G(13810),Y=G(17892),P=A(G(29741));function A(y){return y&&y.__esModule?y:{default:y}}var N=function(m,g,v){var u=[];g!=null&&g.length?u=g:(m.forEach(function(T){u=u.concat(Object.keys(T))}),u=(0,F.uniq)(u));var b={};return u.forEach(function(T){var D=[];m.forEach(function(k){k[T]!==void 0&&k[T]!==""&&D.push(k[T])}),D.length&&!(v!=null&&v.includes(T))&&(b[T]=(0,F.uniq)(D))}),b};U.getAllKeyValueMap=N;var O=function(m,g,v){var u=N(m,g,v),b=[];if(!Object.keys(u).length)return b;var T=Object.values(u),D=T.every(function(k){return k.every(function(V){return typeof V=="number"})});return m.forEach(function(k,V){var J=[];Object.keys(u).forEach(function(W){var X=k[W],K=u[W],Q=K.findIndex(function(ae){return X===ae}),re=[];if(D)re.push(X);else for(var q=0;q<K.length;q++)q===Q?re.push(1):re.push(0);J=J.concat(re)}),b[V]=J}),b};U.oneHot=O;var x=function(m,g,v,u){v===void 0&&(v=Y.DistanceType.EuclideanDistance);var b=0;switch(v){case Y.DistanceType.EuclideanDistance:b=new P.default(m).euclideanDistance(new P.default(g));break;default:break}return b};U.getDistance=x;var E={getAllKeyValueMap:N,oneHot:O,getDistance:x};U.default=E},3665:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.getPropertyWeight=U.getAllSortProperties=U.getAllProperties=U.default=void 0;var F=G(92935),Y=function(E,y){E===void 0&&(E=[]),y===void 0&&(y=100);var m={};E.forEach(function(v){v.properties&&Object.keys(v.properties).forEach(function(u){if(u==="id"||!"".concat(v.properties[u]).match(F.secondReg)&&!"".concat(v.properties[u]).match(F.dateReg)&&isNaN(Number(v.properties[u]))){m.hasOwnProperty(u)&&delete m[u];return}m.hasOwnProperty(u)?m[u]+=1:m[u]=1})});var g=Object.keys(m).sort(function(v,u){return m[u]-m[v]});return g.length<y?g:g.slice(0,y)};U.getAllSortProperties=Y;var P=function(E,y){return y.map(function(m){return E.hasOwnProperty(m)?E[m]:0})},A=function(E){for(var y=Y(E),m=[],g=0;g<E.length;g++)m[g]=P(E[g].properties,y);return m};U.getPropertyWeight=A;var N=function(E,y){y===void 0&&(y=void 0);var m=[];return E.forEach(function(g){y===void 0&&m.push(g),g[y]!==void 0&&m.push(g[y])}),m};U.getAllProperties=N;var O={getAllSortProperties:Y,getPropertyWeight:A,getAllProperties:N};U.default=O},29741:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=G(13810),Y=function(){function A(N){this.arr=N}return A.prototype.getArr=function(){return this.arr||[]},A.prototype.add=function(N){var O,x=N.arr;if(!(!((O=this.arr)===null||O===void 0)&&O.length))return new A(x);if(!(x!=null&&x.length))return new A(this.arr);if(this.arr.length===x.length){var E=[];for(var y in this.arr)E[y]=this.arr[y]+x[y];return new A(E)}},A.prototype.subtract=function(N){var O,x=N.arr;if(!(!((O=this.arr)===null||O===void 0)&&O.length))return new A(x);if(!(x!=null&&x.length))return new A(this.arr);if(this.arr.length===x.length){var E=[];for(var y in this.arr)E[y]=this.arr[y]-x[y];return new A(E)}},A.prototype.avg=function(N){var O=[];if(N!==0)for(var x in this.arr)O[x]=this.arr[x]/N;return new A(O)},A.prototype.negate=function(){var N=[];for(var O in this.arr)N[O]=-this.arr[O];return new A(N)},A.prototype.squareEuclideanDistance=function(N){var O,x=N.arr;if(!(!((O=this.arr)===null||O===void 0)&&O.length)||!(x!=null&&x.length))return 0;if(this.arr.length===x.length){var E=0;for(var y in this.arr)E+=Math.pow(this.arr[y]-N.arr[y],2);return E}},A.prototype.euclideanDistance=function(N){var O,x=N.arr;if(!(!((O=this.arr)===null||O===void 0)&&O.length)||!(x!=null&&x.length))return 0;if(this.arr.length===x.length){var E=0;for(var y in this.arr)E+=Math.pow(this.arr[y]-N.arr[y],2);return Math.sqrt(E)}else console.error("The two vectors are unequal in length.")},A.prototype.normalize=function(){var N=[],O=(0,F.clone)(this.arr);O.sort(function(m,g){return m-g});var x=O[O.length-1],E=O[0];for(var y in this.arr)N[y]=(this.arr[y]-E)/(x-E);return new A(N)},A.prototype.norm2=function(){var N;if(!(!((N=this.arr)===null||N===void 0)&&N.length))return 0;var O=0;for(var x in this.arr)O+=Math.pow(this.arr[x],2);return Math.sqrt(O)},A.prototype.dot=function(N){var O,x=N.arr;if(!(!((O=this.arr)===null||O===void 0)&&O.length)||!(x!=null&&x.length))return 0;if(this.arr.length===x.length){var E=0;for(var y in this.arr)E+=this.arr[y]*N.arr[y];return E}else console.error("The two vectors are unequal in length.")},A.prototype.equal=function(N){var O,x=N.arr;if(((O=this.arr)===null||O===void 0?void 0:O.length)!==(x==null?void 0:x.length))return!1;for(var E in this.arr)if(this.arr[E]!==x[E])return!1;return!0},A}(),P=Y;U.default=P},31656:function(pr,U,G){"use strict";function F(W){"@babel/helpers - typeof";return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},F(W)}Object.defineProperty(U,"__esModule",{value:!0}),Object.defineProperty(U,"GADDI",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(U,"breadthFirstSearch",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(U,"connectedComponent",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(U,"depthFirstSearch",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(U,"detectCycle",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(U,"dijkstra",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(U,"findAllPath",{enumerable:!0,get:function(){return y.findAllPath}}),Object.defineProperty(U,"findShortestPath",{enumerable:!0,get:function(){return y.findShortestPath}}),Object.defineProperty(U,"floydWarshall",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(U,"getAdjMatrix",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(U,"getDegree",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(U,"getInDegree",{enumerable:!0,get:function(){return N.getInDegree}}),Object.defineProperty(U,"getNeighbors",{enumerable:!0,get:function(){return D.getNeighbors}}),Object.defineProperty(U,"getOutDegree",{enumerable:!0,get:function(){return N.getOutDegree}}),Object.defineProperty(U,"labelPropagation",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(U,"louvain",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(U,"minimumSpanningTree",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(U,"pageRank",{enumerable:!0,get:function(){return b.default}});var Y=J(G(62238)),P=J(G(83764)),A=J(G(59527)),N=V(G(82556)),O=J(G(94282)),x=J(G(45891)),E=J(G(78089)),y=G(41727),m=J(G(75033)),g=J(G(5170)),v=J(G(35179)),u=J(G(89454)),b=J(G(74926)),T=J(G(82812)),D=G(70643);function k(W){if(typeof WeakMap!="function")return null;var X=new WeakMap,K=new WeakMap;return(k=function(re){return re?K:X})(W)}function V(W,X){if(!X&&W&&W.__esModule)return W;if(W===null||F(W)!=="object"&&typeof W!="function")return{default:W};var K=k(X);if(K&&K.has(W))return K.get(W);var Q={},re=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var q in W)if(q!=="default"&&Object.prototype.hasOwnProperty.call(W,q)){var ae=re?Object.getOwnPropertyDescriptor(W,q):null;ae&&(ae.get||ae.set)?Object.defineProperty(Q,q,ae):Q[q]=W[q]}return Q.default=W,K&&K.set(W,Q),Q}function J(W){return W&&W.__esModule?W:{default:W}}},66044:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.MESSAGE=U.ALGORITHM=void 0;var G={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};U.ALGORITHM=G;var F={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};U.MESSAGE=F},70585:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var F=G(66044),Y=P(G(12067));function P(O){return O&&O.__esModule?O:{default:O}}var A=function(x){return function(){for(var E=[],y=0;y<arguments.length;y++)E[y]=arguments[y];return new Promise(function(m,g){var v=new Y.default;v.postMessage({_algorithmType:x,data:E}),v.onmessage=function(u){var b=u.data,T=b.data,D=b._algorithmType;F.MESSAGE.SUCCESS===D?m(T):g(),v.terminate()}})}},N=A;U.default=N},30485:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.pageRankAsync=U.minimumSpanningTreeAsync=U.louvainAsync=U.labelPropagationAsync=U.getOutDegreeAsync=U.getNeighborsAsync=U.getInDegreeAsync=U.getDegreeAsync=U.getAdjMatrixAsync=U.floydWarshallAsync=U.findShortestPathAsync=U.findAllPathAsync=U.dijkstraAsync=U.detectCycleAsync=U.detectAllUndirectedCycleAsync=U.detectAllDirectedCycleAsync=U.detectAllCyclesAsync=U.connectedComponentAsync=U.GADDIAsync=void 0;var F=P(G(70585)),Y=G(66044);function P(Q){return Q&&Q.__esModule?Q:{default:Q}}var A=function(re,q){return(0,F.default)(Y.ALGORITHM.getAdjMatrix).apply(void 0,[re,q])};U.getAdjMatrixAsync=A;var N=function(re,q){return(0,F.default)(Y.ALGORITHM.connectedComponent).apply(void 0,[re,q])};U.connectedComponentAsync=N;var O=function(re){return(0,F.default)(Y.ALGORITHM.getDegree)(re)};U.getDegreeAsync=O;var x=function(re,q){return(0,F.default)(Y.ALGORITHM.getInDegree)(re,q)};U.getInDegreeAsync=x;var E=function(re,q){return(0,F.default)(Y.ALGORITHM.getOutDegree)(re,q)};U.getOutDegreeAsync=E;var y=function(re){return(0,F.default)(Y.ALGORITHM.detectCycle)(re)};U.detectCycleAsync=y;var m=function(re){return(0,F.default)(Y.ALGORITHM.detectAllCycles)(re)};U.detectAllCyclesAsync=m;var g=function(re){return(0,F.default)(Y.ALGORITHM.detectAllDirectedCycle)(re)};U.detectAllDirectedCycleAsync=g;var v=function(re){return(0,F.default)(Y.ALGORITHM.detectAllUndirectedCycle)(re)};U.detectAllUndirectedCycleAsync=v;var u=function(re,q,ae,ue){return(0,F.default)(Y.ALGORITHM.dijkstra).apply(void 0,[re,q,ae,ue])};U.dijkstraAsync=u;var b=function(re,q,ae,ue){return(0,F.default)(Y.ALGORITHM.findAllPath).apply(void 0,[re,q,ae,ue])};U.findAllPathAsync=b;var T=function(re,q,ae,ue,ce){return(0,F.default)(Y.ALGORITHM.findShortestPath).apply(void 0,[re,q,ae,ue,ce])};U.findShortestPathAsync=T;var D=function(re,q){return(0,F.default)(Y.ALGORITHM.floydWarshall).apply(void 0,[re,q])};U.floydWarshallAsync=D;var k=function(re,q,ae,ue){return ue===void 0&&(ue=1e3),(0,F.default)(Y.ALGORITHM.labelPropagation)(re,q,ae,ue)};U.labelPropagationAsync=k;var V=function(re,q,ae,ue){return(0,F.default)(Y.ALGORITHM.louvain)(re,q,ae,ue)};U.louvainAsync=V;var J=function(re,q,ae){return(0,F.default)(Y.ALGORITHM.minimumSpanningTree).apply(void 0,[re,q,ae])};U.minimumSpanningTreeAsync=J;var W=function(re,q,ae){return(0,F.default)(Y.ALGORITHM.pageRank).apply(void 0,[re,q,ae])};U.pageRankAsync=W;var X=function(re,q,ae){return(0,F.default)(Y.ALGORITHM.getNeighbors).apply(void 0,[re,q,ae])};U.getNeighborsAsync=X;var K=function(re,q,ae,ue,ce,De,Ie){return ae===void 0&&(ae=!1),De===void 0&&(De="cluster"),Ie===void 0&&(Ie="cluster"),(0,F.default)(Y.ALGORITHM.GADDI).apply(void 0,[re,q,ae,ue,ce,De,Ie])};U.GADDIAsync=K},12067:function(pr,U,G){"use strict";function F(E){"@babel/helpers - typeof";return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},F(E)}Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var Y=N(G(31656)),P=G(66044);function A(E){if(typeof WeakMap!="function")return null;var y=new WeakMap,m=new WeakMap;return(A=function(v){return v?m:y})(E)}function N(E,y){if(!y&&E&&E.__esModule)return E;if(E===null||F(E)!=="object"&&typeof E!="function")return{default:E};var m=A(y);if(m&&m.has(E))return m.get(E);var g={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in E)if(u!=="default"&&Object.prototype.hasOwnProperty.call(E,u)){var b=v?Object.getOwnPropertyDescriptor(E,u):null;b&&(b.get||b.set)?Object.defineProperty(g,u,b):g[u]=E[u]}return g.default=E,m&&m.set(E,g),g}var O=typeof self!="undefined"?self:{};O.onmessage=function(E){var y=E.data,m=y._algorithmType,g=y.data;if(m){if(typeof Y[m]=="function"){var v=Y[m].apply(Y,g);O.postMessage({_algorithmType:P.MESSAGE.SUCCESS,data:v});return}O.postMessage({_algorithmType:P.MESSAGE.FAILURE})}};var x=null;U.default=x},1029:function(pr,U,G){"use strict";G.r(U),G.d(U,{Kernel:function(){return De},World:function(){return ma}});var F=G(15861),Y=G(4942),P=G(15671),A=G(43144),N=G(36719),O=G.n(N),x=G(81763),E=G.n(x),y=G(1469),m=G.n(y),g=G(64687),v=G.n(g),u=null,b=1;function T(){return b++}var D=null,k=null,V;(function(Z){Z[Z.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",Z[Z.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",Z[Z.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",Z[Z.POINTS=0]="POINTS",Z[Z.LINES=1]="LINES",Z[Z.LINE_LOOP=2]="LINE_LOOP",Z[Z.LINE_STRIP=3]="LINE_STRIP",Z[Z.TRIANGLES=4]="TRIANGLES",Z[Z.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",Z[Z.TRIANGLE_FAN=6]="TRIANGLE_FAN",Z[Z.ZERO=0]="ZERO",Z[Z.ONE=1]="ONE",Z[Z.SRC_COLOR=768]="SRC_COLOR",Z[Z.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",Z[Z.SRC_ALPHA=770]="SRC_ALPHA",Z[Z.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",Z[Z.DST_ALPHA=772]="DST_ALPHA",Z[Z.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",Z[Z.DST_COLOR=774]="DST_COLOR",Z[Z.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",Z[Z.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",Z[Z.FUNC_ADD=32774]="FUNC_ADD",Z[Z.BLEND_EQUATION=32777]="BLEND_EQUATION",Z[Z.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",Z[Z.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",Z[Z.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",Z[Z.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",Z[Z.MAX_EXT=32776]="MAX_EXT",Z[Z.MIN_EXT=32775]="MIN_EXT",Z[Z.BLEND_DST_RGB=32968]="BLEND_DST_RGB",Z[Z.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",Z[Z.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",Z[Z.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",Z[Z.CONSTANT_COLOR=32769]="CONSTANT_COLOR",Z[Z.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",Z[Z.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",Z[Z.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",Z[Z.BLEND_COLOR=32773]="BLEND_COLOR",Z[Z.ARRAY_BUFFER=34962]="ARRAY_BUFFER",Z[Z.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",Z[Z.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",Z[Z.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",Z[Z.STREAM_DRAW=35040]="STREAM_DRAW",Z[Z.STATIC_DRAW=35044]="STATIC_DRAW",Z[Z.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",Z[Z.BUFFER_SIZE=34660]="BUFFER_SIZE",Z[Z.BUFFER_USAGE=34661]="BUFFER_USAGE",Z[Z.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",Z[Z.FRONT=1028]="FRONT",Z[Z.BACK=1029]="BACK",Z[Z.FRONT_AND_BACK=1032]="FRONT_AND_BACK",Z[Z.CULL_FACE=2884]="CULL_FACE",Z[Z.BLEND=3042]="BLEND",Z[Z.DITHER=3024]="DITHER",Z[Z.STENCIL_TEST=2960]="STENCIL_TEST",Z[Z.DEPTH_TEST=2929]="DEPTH_TEST",Z[Z.SCISSOR_TEST=3089]="SCISSOR_TEST",Z[Z.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",Z[Z.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",Z[Z.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",Z[Z.NO_ERROR=0]="NO_ERROR",Z[Z.INVALID_ENUM=1280]="INVALID_ENUM",Z[Z.INVALID_VALUE=1281]="INVALID_VALUE",Z[Z.INVALID_OPERATION=1282]="INVALID_OPERATION",Z[Z.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",Z[Z.CW=2304]="CW",Z[Z.CCW=2305]="CCW",Z[Z.LINE_WIDTH=2849]="LINE_WIDTH",Z[Z.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",Z[Z.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",Z[Z.CULL_FACE_MODE=2885]="CULL_FACE_MODE",Z[Z.FRONT_FACE=2886]="FRONT_FACE",Z[Z.DEPTH_RANGE=2928]="DEPTH_RANGE",Z[Z.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",Z[Z.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",Z[Z.DEPTH_FUNC=2932]="DEPTH_FUNC",Z[Z.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",Z[Z.STENCIL_FUNC=2962]="STENCIL_FUNC",Z[Z.STENCIL_FAIL=2964]="STENCIL_FAIL",Z[Z.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",Z[Z.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",Z[Z.STENCIL_REF=2967]="STENCIL_REF",Z[Z.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",Z[Z.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",Z[Z.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",Z[Z.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",Z[Z.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",Z[Z.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",Z[Z.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",Z[Z.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",Z[Z.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",Z[Z.VIEWPORT=2978]="VIEWPORT",Z[Z.SCISSOR_BOX=3088]="SCISSOR_BOX",Z[Z.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",Z[Z.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",Z[Z.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",Z[Z.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",Z[Z.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",Z[Z.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",Z[Z.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",Z[Z.RED_BITS=3410]="RED_BITS",Z[Z.GREEN_BITS=3411]="GREEN_BITS",Z[Z.BLUE_BITS=3412]="BLUE_BITS",Z[Z.ALPHA_BITS=3413]="ALPHA_BITS",Z[Z.DEPTH_BITS=3414]="DEPTH_BITS",Z[Z.STENCIL_BITS=3415]="STENCIL_BITS",Z[Z.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",Z[Z.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",Z[Z.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",Z[Z.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",Z[Z.SAMPLES=32937]="SAMPLES",Z[Z.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",Z[Z.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",Z[Z.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",Z[Z.DONT_CARE=4352]="DONT_CARE",Z[Z.FASTEST=4353]="FASTEST",Z[Z.NICEST=4354]="NICEST",Z[Z.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",Z[Z.BYTE=5120]="BYTE",Z[Z.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",Z[Z.SHORT=5122]="SHORT",Z[Z.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",Z[Z.INT=5124]="INT",Z[Z.UNSIGNED_INT=5125]="UNSIGNED_INT",Z[Z.FLOAT=5126]="FLOAT",Z[Z.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",Z[Z.ALPHA=6406]="ALPHA",Z[Z.RGB=6407]="RGB",Z[Z.RGBA=6408]="RGBA",Z[Z.LUMINANCE=6409]="LUMINANCE",Z[Z.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",Z[Z.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",Z[Z.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",Z[Z.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",Z[Z.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",Z[Z.VERTEX_SHADER=35633]="VERTEX_SHADER",Z[Z.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",Z[Z.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",Z[Z.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",Z[Z.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",Z[Z.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",Z[Z.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",Z[Z.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",Z[Z.SHADER_TYPE=35663]="SHADER_TYPE",Z[Z.DELETE_STATUS=35712]="DELETE_STATUS",Z[Z.LINK_STATUS=35714]="LINK_STATUS",Z[Z.VALIDATE_STATUS=35715]="VALIDATE_STATUS",Z[Z.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",Z[Z.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",Z[Z.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",Z[Z.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",Z[Z.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",Z[Z.NEVER=512]="NEVER",Z[Z.LESS=513]="LESS",Z[Z.EQUAL=514]="EQUAL",Z[Z.LEQUAL=515]="LEQUAL",Z[Z.GREATER=516]="GREATER",Z[Z.NOTEQUAL=517]="NOTEQUAL",Z[Z.GEQUAL=518]="GEQUAL",Z[Z.ALWAYS=519]="ALWAYS",Z[Z.KEEP=7680]="KEEP",Z[Z.REPLACE=7681]="REPLACE",Z[Z.INCR=7682]="INCR",Z[Z.DECR=7683]="DECR",Z[Z.INVERT=5386]="INVERT",Z[Z.INCR_WRAP=34055]="INCR_WRAP",Z[Z.DECR_WRAP=34056]="DECR_WRAP",Z[Z.VENDOR=7936]="VENDOR",Z[Z.RENDERER=7937]="RENDERER",Z[Z.VERSION=7938]="VERSION",Z[Z.NEAREST=9728]="NEAREST",Z[Z.LINEAR=9729]="LINEAR",Z[Z.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",Z[Z.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",Z[Z.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",Z[Z.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",Z[Z.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",Z[Z.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",Z[Z.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",Z[Z.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",Z[Z.TEXTURE_2D=3553]="TEXTURE_2D",Z[Z.TEXTURE=5890]="TEXTURE",Z[Z.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",Z[Z.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",Z[Z.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",Z[Z.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",Z[Z.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",Z[Z.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",Z[Z.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",Z[Z.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",Z[Z.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",Z[Z.TEXTURE0=33984]="TEXTURE0",Z[Z.TEXTURE1=33985]="TEXTURE1",Z[Z.TEXTURE2=33986]="TEXTURE2",Z[Z.TEXTURE3=33987]="TEXTURE3",Z[Z.TEXTURE4=33988]="TEXTURE4",Z[Z.TEXTURE5=33989]="TEXTURE5",Z[Z.TEXTURE6=33990]="TEXTURE6",Z[Z.TEXTURE7=33991]="TEXTURE7",Z[Z.TEXTURE8=33992]="TEXTURE8",Z[Z.TEXTURE9=33993]="TEXTURE9",Z[Z.TEXTURE10=33994]="TEXTURE10",Z[Z.TEXTURE11=33995]="TEXTURE11",Z[Z.TEXTURE12=33996]="TEXTURE12",Z[Z.TEXTURE13=33997]="TEXTURE13",Z[Z.TEXTURE14=33998]="TEXTURE14",Z[Z.TEXTURE15=33999]="TEXTURE15",Z[Z.TEXTURE16=34e3]="TEXTURE16",Z[Z.TEXTURE17=34001]="TEXTURE17",Z[Z.TEXTURE18=34002]="TEXTURE18",Z[Z.TEXTURE19=34003]="TEXTURE19",Z[Z.TEXTURE20=34004]="TEXTURE20",Z[Z.TEXTURE21=34005]="TEXTURE21",Z[Z.TEXTURE22=34006]="TEXTURE22",Z[Z.TEXTURE23=34007]="TEXTURE23",Z[Z.TEXTURE24=34008]="TEXTURE24",Z[Z.TEXTURE25=34009]="TEXTURE25",Z[Z.TEXTURE26=34010]="TEXTURE26",Z[Z.TEXTURE27=34011]="TEXTURE27",Z[Z.TEXTURE28=34012]="TEXTURE28",Z[Z.TEXTURE29=34013]="TEXTURE29",Z[Z.TEXTURE30=34014]="TEXTURE30",Z[Z.TEXTURE31=34015]="TEXTURE31",Z[Z.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",Z[Z.REPEAT=10497]="REPEAT",Z[Z.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",Z[Z.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",Z[Z.FLOAT_VEC2=35664]="FLOAT_VEC2",Z[Z.FLOAT_VEC3=35665]="FLOAT_VEC3",Z[Z.FLOAT_VEC4=35666]="FLOAT_VEC4",Z[Z.INT_VEC2=35667]="INT_VEC2",Z[Z.INT_VEC3=35668]="INT_VEC3",Z[Z.INT_VEC4=35669]="INT_VEC4",Z[Z.BOOL=35670]="BOOL",Z[Z.BOOL_VEC2=35671]="BOOL_VEC2",Z[Z.BOOL_VEC3=35672]="BOOL_VEC3",Z[Z.BOOL_VEC4=35673]="BOOL_VEC4",Z[Z.FLOAT_MAT2=35674]="FLOAT_MAT2",Z[Z.FLOAT_MAT3=35675]="FLOAT_MAT3",Z[Z.FLOAT_MAT4=35676]="FLOAT_MAT4",Z[Z.SAMPLER_2D=35678]="SAMPLER_2D",Z[Z.SAMPLER_CUBE=35680]="SAMPLER_CUBE",Z[Z.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",Z[Z.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",Z[Z.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",Z[Z.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",Z[Z.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",Z[Z.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",Z[Z.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",Z[Z.COMPILE_STATUS=35713]="COMPILE_STATUS",Z[Z.LOW_FLOAT=36336]="LOW_FLOAT",Z[Z.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",Z[Z.HIGH_FLOAT=36338]="HIGH_FLOAT",Z[Z.LOW_INT=36339]="LOW_INT",Z[Z.MEDIUM_INT=36340]="MEDIUM_INT",Z[Z.HIGH_INT=36341]="HIGH_INT",Z[Z.FRAMEBUFFER=36160]="FRAMEBUFFER",Z[Z.RENDERBUFFER=36161]="RENDERBUFFER",Z[Z.RGBA4=32854]="RGBA4",Z[Z.RGB5_A1=32855]="RGB5_A1",Z[Z.RGB565=36194]="RGB565",Z[Z.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",Z[Z.STENCIL_INDEX=6401]="STENCIL_INDEX",Z[Z.STENCIL_INDEX8=36168]="STENCIL_INDEX8",Z[Z.DEPTH_STENCIL=34041]="DEPTH_STENCIL",Z[Z.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",Z[Z.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",Z[Z.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",Z[Z.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",Z[Z.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",Z[Z.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",Z[Z.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",Z[Z.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",Z[Z.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",Z[Z.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",Z[Z.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",Z[Z.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",Z[Z.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",Z[Z.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",Z[Z.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",Z[Z.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",Z[Z.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",Z[Z.NONE=0]="NONE",Z[Z.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",Z[Z.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",Z[Z.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",Z[Z.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",Z[Z.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",Z[Z.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",Z[Z.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",Z[Z.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",Z[Z.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",Z[Z.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",Z[Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",Z[Z.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",Z[Z.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",Z[Z.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",Z[Z.COPY_SRC=1]="COPY_SRC",Z[Z.COPY_DST=2]="COPY_DST",Z[Z.SAMPLED=4]="SAMPLED",Z[Z.STORAGE=8]="STORAGE",Z[Z.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(V||(V={}));var J=function(){function Z(){(0,P.Z)(this,Z),this.config=void 0}return(0,A.Z)(Z,[{key:"get",value:function(){return this.config}},{key:"set",value:function(lt){this.config=lt}}]),Z}(),W=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),X;(function(Z){Z.Void="Void",Z.Boolean="Boolean",Z.Float="Float",Z.Uint32="Uint32",Z.Int32="Int32",Z.Vector="Vector",Z.Vector2Float="vec2<f32>",Z.Vector3Float="vec3<f32>",Z.Vector4Float="vec4<f32>",Z.Vector2Boolean="vec2<bool>",Z.Vector3Boolean="vec3<bool>",Z.Vector4Boolean="vec4<bool>",Z.Vector2Uint="vec2<u32>",Z.Vector3Uint="vec3<u32>",Z.Vector4Uint="vec4<u32>",Z.Vector2Int="vec2<i32>",Z.Vector3Int="vec3<i32>",Z.Vector4Int="vec4<i32>",Z.Matrix="Matrix",Z.Matrix3x3Float="mat3x3<f32>",Z.Matrix4x4Float="mat4x4<i32>",Z.Struct="Struct",Z.FloatArray="Float[]",Z.Vector4FloatArray="vec4<f32>[]"})(X||(X={}));var K;(function(Z){Z.Program="Program",Z.Identifier="Identifier",Z.VariableDeclaration="VariableDeclaration",Z.BlockStatement="BlockStatement",Z.ReturnStatement="ReturnStatement",Z.FunctionDeclaration="FunctionDeclaration",Z.VariableDeclarator="VariableDeclarator",Z.AssignmentExpression="AssignmentExpression",Z.LogicalExpression="LogicalExpression",Z.BinaryExpression="BinaryExpression",Z.ArrayExpression="ArrayExpression",Z.UnaryExpression="UnaryExpression",Z.UpdateExpression="UpdateExpression",Z.FunctionExpression="FunctionExpression",Z.MemberExpression="MemberExpression",Z.ConditionalExpression="ConditionalExpression",Z.ExpressionStatement="ExpressionStatement",Z.CallExpression="CallExpression",Z.NumThreadStatement="NumThreadStatement",Z.StorageStatement="StorageStatement",Z.DoWhileStatement="DoWhileStatement",Z.WhileStatement="WhileStatement",Z.ForStatement="ForStatement",Z.BreakStatement="BreakStatement",Z.ContinueStatement="ContinueStatement",Z.IfStatement="IfStatement",Z.ImportedFunctionStatement="ImportedFunctionStatement"})(K||(K={}));var Q;(function(Z){Z.Input="Input",Z.Output="Output",Z.Uniform="Uniform",Z.Workgroup="Workgroup",Z.UniformConstant="UniformConstant",Z.Image="Image",Z.StorageBuffer="StorageBuffer",Z.Private="Private",Z.Function="Function"})(Q||(Q={}));var re;(function(Z){Z.GLSL100="GLSL100",Z.GLSL450="GLSL450",Z.WGSL="WGSL"})(re||(re={}));var q="__DefineValuePlaceholder__";function ae(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ue(Z,Gt){var lt=Object.keys(Z);if(Object.getOwnPropertySymbols){var Ht=Object.getOwnPropertySymbols(Z);Gt&&(Ht=Ht.filter(function(Ft){return Object.getOwnPropertyDescriptor(Z,Ft).enumerable})),lt.push.apply(lt,Ht)}return lt}function ce(Z){for(var Gt=1;Gt<arguments.length;Gt++){var lt=arguments[Gt]!=null?arguments[Gt]:{};Gt%2?ue(Object(lt),!0).forEach(function(Ht){(0,Y.Z)(Z,Ht,lt[Ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(lt)):ue(Object(lt)).forEach(function(Ht){Object.defineProperty(Z,Ht,Object.getOwnPropertyDescriptor(lt,Ht))})}return Z}var De=function(){function Z(Gt,lt){(0,P.Z)(this,Z),this.engine=Gt,this.configService=lt,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,A.Z)(Z,[{key:"init",value:function(){var lt=this.configService.get(),Ht=lt.canvas,Ft=lt.engineOptions;this.initPromise=this.engine.init(ce({canvas:Ht||ae(),antialiasing:!1},Ft))}},{key:"setBundle",value:function(lt){this.compiledBundle=JSON.parse(JSON.stringify(lt))}},{key:"setDispatch",value:function(lt){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=lt),this}},{key:"setMaxIteration",value:function(lt){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=lt),this}},{key:"setBinding",value:function(lt,Ht){var Ft=this;if(typeof lt=="string"){var Ir=E()(Ht)||O()(Ht)||m()(Ht);if(this.compiledBundle&&this.compiledBundle.context){var Sr=this.compiledBundle.context.defines.find(function(an){return an.name===lt});if(Sr)return Sr.value=Ht,this;var nn=this.compiledBundle.context.uniforms.find(function(an){return an.name===lt});nn&&(Ir?(nn.data=Ht,nn.isReferer=!1,nn.storageClass===Q.Uniform?this.model&&this.model.updateUniform(lt,Ht):this.model&&this.model.updateBuffer(lt,Ht)):(nn.isReferer=!0,nn.data=Ht))}}else Object.keys(lt).forEach(function(an){Ft.setBinding(an,lt[an])});return this}},{key:"execute",value:function(){var Gt=(0,F.Z)(v().mark(function Ht(){var Ft=this,Ir,Sr,nn=arguments;return v().wrap(function(qr){for(;;)switch(qr.prev=qr.next){case 0:if(Ir=nn.length>0&&nn[0]!==void 0?nn[0]:1,!this.dirty){qr.next=6;break}return this.compiledBundle.context&&(Ir>1?this.compiledBundle.context.maxIteration=Ir:this.compiledBundle.context.maxIteration++),qr.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(le){var ge=le.isReferer;return ge}).forEach(function(le){var ge=le.data,B=le.name;Ft.model.confirmInput(ge.model,B)}),Sr=0;Sr<Ir;Sr++)this.model.run();return this.engine.endFrame(),qr.abrupt("return",this);case 12:case"end":return qr.stop()}},Ht,this)}));function lt(){return Gt.apply(this,arguments)}return lt}()},{key:"getOutput",value:function(){var Gt=(0,F.Z)(v().mark(function Ht(){return v().wrap(function(Ir){for(;;)switch(Ir.prev=Ir.next){case 0:return Ir.abrupt("return",this.model.readData());case 1:case"end":return Ir.stop()}},Ht,this)}));function lt(){return Gt.apply(this,arguments)}return lt}()},{key:"compile",value:function(){var Gt=(0,F.Z)(v().mark(function Ht(){var Ft,Ir,Sr;return v().wrap(function(an){for(;;)switch(an.prev=an.next){case 0:return an.next=2,this.initPromise;case 2:return Ft=ce({},this.compiledBundle.context),Ir=this.engine.supportWebGPU?this.engine.useWGSL?re.WGSL:re.GLSL450:re.GLSL100,Sr=this.compiledBundle.shaders[Ir],Ft.defines.filter(function(qr){return qr.runtime}).forEach(function(qr){var le="".concat(q).concat(qr.name);Sr=Sr.replace(le,"".concat(qr.value))}),Ft.shader=Sr,Ft.uniforms.forEach(function(qr){if(!qr.data&&qr.storageClass===Q.StorageBuffer){var le=1;qr.type===X.FloatArray?le=1:qr.type===X.Vector4FloatArray&&(le=4),qr.data=new Float32Array(Ft.output.length*le).fill(0)}}),this.compiledBundle.context=Ft,an.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=an.sent;case 12:case"end":return an.stop()}},Ht,this)}));function lt(){return Gt.apply(this,arguments)}return lt}()}]),Z}(),Ie=G(81550),Pe=G.n(Ie),we=function(){function Z(Gt,lt){(0,P.Z)(this,Z),this.attribute=void 0,this.buffer=void 0;var Ht=lt.buffer,Ft=lt.offset,Ir=lt.stride,Sr=lt.normalized,nn=lt.size,an=lt.divisor;this.buffer=Ht,this.attribute={buffer:Ht.get(),offset:Ft||0,stride:Ir||0,normalized:Sr||!1,divisor:an||0},nn&&(this.attribute.size=nn)}return(0,A.Z)(Z,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(lt){this.buffer.subData(lt)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),Z}(),xe,ve,Se,Te,We,Ge,Je,mt,xt,Ze,$e,gt,At,yt,ct=(xe={},(0,Y.Z)(xe,V.POINTS,"points"),(0,Y.Z)(xe,V.LINES,"lines"),(0,Y.Z)(xe,V.LINE_LOOP,"line loop"),(0,Y.Z)(xe,V.LINE_STRIP,"line strip"),(0,Y.Z)(xe,V.TRIANGLES,"triangles"),(0,Y.Z)(xe,V.TRIANGLE_FAN,"triangle fan"),(0,Y.Z)(xe,V.TRIANGLE_STRIP,"triangle strip"),xe),Kt=(ve={},(0,Y.Z)(ve,V.STATIC_DRAW,"static"),(0,Y.Z)(ve,V.DYNAMIC_DRAW,"dynamic"),(0,Y.Z)(ve,V.STREAM_DRAW,"stream"),ve),$t=(Se={},(0,Y.Z)(Se,V.BYTE,"int8"),(0,Y.Z)(Se,V.UNSIGNED_INT,"int16"),(0,Y.Z)(Se,V.INT,"int32"),(0,Y.Z)(Se,V.UNSIGNED_BYTE,"uint8"),(0,Y.Z)(Se,V.UNSIGNED_SHORT,"uint16"),(0,Y.Z)(Se,V.UNSIGNED_INT,"uint32"),(0,Y.Z)(Se,V.FLOAT,"float"),Se),jt=(Te={},(0,Y.Z)(Te,V.ALPHA,"alpha"),(0,Y.Z)(Te,V.LUMINANCE,"luminance"),(0,Y.Z)(Te,V.LUMINANCE_ALPHA,"luminance alpha"),(0,Y.Z)(Te,V.RGB,"rgb"),(0,Y.Z)(Te,V.RGBA,"rgba"),(0,Y.Z)(Te,V.RGBA4,"rgba4"),(0,Y.Z)(Te,V.RGB5_A1,"rgb5 a1"),(0,Y.Z)(Te,V.RGB565,"rgb565"),(0,Y.Z)(Te,V.DEPTH_COMPONENT,"depth"),(0,Y.Z)(Te,V.DEPTH_STENCIL,"depth stencil"),Te),ir=(We={},(0,Y.Z)(We,V.DONT_CARE,"dont care"),(0,Y.Z)(We,V.NICEST,"nice"),(0,Y.Z)(We,V.FASTEST,"fast"),We),mr=(Ge={},(0,Y.Z)(Ge,V.NEAREST,"nearest"),(0,Y.Z)(Ge,V.LINEAR,"linear"),(0,Y.Z)(Ge,V.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,Y.Z)(Ge,V.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,Y.Z)(Ge,V.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,Y.Z)(Ge,V.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Ge),tn=(Je={},(0,Y.Z)(Je,V.REPEAT,"repeat"),(0,Y.Z)(Je,V.CLAMP_TO_EDGE,"clamp"),(0,Y.Z)(Je,V.MIRRORED_REPEAT,"mirror"),Je),Dr=(mt={},(0,Y.Z)(mt,V.NONE,"none"),(0,Y.Z)(mt,V.BROWSER_DEFAULT_WEBGL,"browser"),mt),Dn=(xt={},(0,Y.Z)(xt,V.NEVER,"never"),(0,Y.Z)(xt,V.ALWAYS,"always"),(0,Y.Z)(xt,V.LESS,"less"),(0,Y.Z)(xt,V.LEQUAL,"lequal"),(0,Y.Z)(xt,V.GREATER,"greater"),(0,Y.Z)(xt,V.GEQUAL,"gequal"),(0,Y.Z)(xt,V.EQUAL,"equal"),(0,Y.Z)(xt,V.NOTEQUAL,"notequal"),xt),Ve=(Ze={},(0,Y.Z)(Ze,V.FUNC_ADD,"add"),(0,Y.Z)(Ze,V.MIN_EXT,"min"),(0,Y.Z)(Ze,V.MAX_EXT,"max"),(0,Y.Z)(Ze,V.FUNC_SUBTRACT,"subtract"),(0,Y.Z)(Ze,V.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Ze),Nr=($e={},(0,Y.Z)($e,V.ZERO,"zero"),(0,Y.Z)($e,V.ONE,"one"),(0,Y.Z)($e,V.SRC_COLOR,"src color"),(0,Y.Z)($e,V.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,Y.Z)($e,V.SRC_ALPHA,"src alpha"),(0,Y.Z)($e,V.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,Y.Z)($e,V.DST_COLOR,"dst color"),(0,Y.Z)($e,V.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,Y.Z)($e,V.DST_ALPHA,"dst alpha"),(0,Y.Z)($e,V.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,Y.Z)($e,V.CONSTANT_COLOR,"constant color"),(0,Y.Z)($e,V.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,Y.Z)($e,V.CONSTANT_ALPHA,"constant alpha"),(0,Y.Z)($e,V.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,Y.Z)($e,V.SRC_ALPHA_SATURATE,"src alpha saturate"),$e),Fn=(gt={},(0,Y.Z)(gt,V.NEVER,"never"),(0,Y.Z)(gt,V.ALWAYS,"always"),(0,Y.Z)(gt,V.LESS,"less"),(0,Y.Z)(gt,V.LEQUAL,"lequal"),(0,Y.Z)(gt,V.GREATER,"greater"),(0,Y.Z)(gt,V.GEQUAL,"gequal"),(0,Y.Z)(gt,V.EQUAL,"equal"),(0,Y.Z)(gt,V.NOTEQUAL,"notequal"),gt),Vn=(At={},(0,Y.Z)(At,V.ZERO,"zero"),(0,Y.Z)(At,V.KEEP,"keep"),(0,Y.Z)(At,V.REPLACE,"replace"),(0,Y.Z)(At,V.INVERT,"invert"),(0,Y.Z)(At,V.INCR,"increment"),(0,Y.Z)(At,V.DECR,"decrement"),(0,Y.Z)(At,V.INCR_WRAP,"increment wrap"),(0,Y.Z)(At,V.DECR_WRAP,"decrement wrap"),At),va=(yt={},(0,Y.Z)(yt,V.FRONT,"front"),(0,Y.Z)(yt,V.BACK,"back"),yt),aa=function(){function Z(Gt,lt){(0,P.Z)(this,Z),this.buffer=void 0;var Ht=lt.data,Ft=lt.usage,Ir=lt.type;this.buffer=Gt.buffer({data:Ht,usage:Kt[Ft||V.STATIC_DRAW],type:$t[Ir||V.UNSIGNED_BYTE]})}return(0,A.Z)(Z,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(lt){var Ht=lt.data,Ft=lt.offset;this.buffer.subdata(Ht,Ft)}}]),Z}(),Ya=G(74902);function la(Z,Gt){var lt=Object.keys(Z);if(Object.getOwnPropertySymbols){var Ht=Object.getOwnPropertySymbols(Z);Gt&&(Ht=Ht.filter(function(Ft){return Object.getOwnPropertyDescriptor(Z,Ft).enumerable})),lt.push.apply(lt,Ht)}return lt}function Qa(Z){for(var Gt=1;Gt<arguments.length;Gt++){var lt=arguments[Gt]!=null?arguments[Gt]:{};Gt%2?la(Object(lt),!0).forEach(function(Ht){(0,Y.Z)(Z,Ht,lt[Ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(lt)):la(Object(lt)).forEach(function(Ht){Object.defineProperty(Z,Ht,Object.getOwnPropertyDescriptor(lt,Ht))})}return Z}var Wa=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Da=0,ar=!1,Or=function(){function Z(Gt,lt){var Ht=this;(0,P.Z)(this,Z),this.reGl=Gt,this.context=lt,this.entity=T(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var Ft={};this.context.uniforms.forEach(function(qr){var le=qr.name,ge=qr.type,B=qr.data,_=qr.isReferer,M=qr.storageClass;if(M===Q.StorageBuffer){if(_)Ht.textureCache[le]={data:void 0},Ft["".concat(le,"Size")]=function(){return B.compiledBundle.context.output.textureSize};else{Ht.textureCache[le]=Ht.calcDataTexture(le,ge,B);var $=Ht.textureCache[le],Ee=$.textureWidth,Ne=$.isOutput;Ft["".concat(le,"Size")]=[Ee,Ee],Ne&&(Ht.outputTextureName=le,Ht.context.needPingpong&&(Ht.outputTextureName="".concat(le,"Output"),Ht.textureCache[Ht.outputTextureName]=Ht.calcDataTexture(le,ge,B)))}Ft[le]=function(){return ar&&console.log("[".concat(Ht.entity,"]: ").concat(le," ").concat(Ht.textureCache[le].id)),Ht.textureCache[le].texture}}else if(M===Q.Uniform){if(B&&(Array.isArray(B)||O()(B))&&B.length>16)throw new Error("invalid data type ".concat(ge));Ft[le]=function(){return qr.data}}});var Ir=this.getOuputDataTexture(),Sr=Ir.textureWidth,nn=Ir.texelCount;Ft.u_OutputTextureSize=[Sr,Sr],Ft.u_OutputTexelCount=nn,this.context.output.textureSize=[Sr,Sr];var an={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:Ft,vert:Wa,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(an)}return(0,A.Z)(Z,[{key:"run",value:function(){var lt=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){lt.computeCommand()}),ar&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var Gt=(0,F.Z)(v().mark(function Ht(){var Ft=this,Ir,Sr,nn,an,qr,le,ge,B;return v().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){Ir=Ft.reGl.read()}),!Ir){M.next=6;break}if(Sr=this.getOuputDataTexture(),nn=Sr.originalDataLength,an=Sr.elementsPerTexel,qr=Sr.typedArrayConstructor,le=qr===void 0?Float32Array:qr,ge=[],an!==4)for(B=0;B<Ir.length;B+=4)an===1?ge.push(Ir[B]):an===2?ge.push(Ir[B],Ir[B+1]):ge.push(Ir[B],Ir[B+1],Ir[B+2]);else ge=Ir;return M.abrupt("return",new le(ge.slice(0,nn)));case 6:return M.abrupt("return",new Float32Array);case 7:case"end":return M.stop()}},Ht,this)}));function lt(){return Gt.apply(this,arguments)}return lt}()},{key:"confirmInput",value:function(lt,Ht){var Ft;this.entity===lt.entity?(this.dynamicPingpong=!0,Ft=this):Ft=lt,this.textureCache[Ht].id=Ft.getOuputDataTexture().id,this.textureCache[Ht].texture=Ft.getOuputDataTexture().texture,ar&&console.log("[".concat(this.entity,"]: confirm input ").concat(Ht," from model ").concat(Ft.entity,", ").concat(Ft.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(lt,Ht){var Ft=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Ir=this.context.uniforms.find(function(qr){var le=qr.name;return le===lt});if(Ir){var Sr=this.calcDataTexture(lt,Ir.type,Ht),nn=Sr.texture,an=Sr.data;this.textureCache[lt].data=an,this.textureCache[lt].texture=nn}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var lt=this.context.output.name;this.textureCache[lt].id=this.getOuputDataTexture().id,this.textureCache[lt].texture=this.getOuputDataTexture().texture}var Ht=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=Ht,ar&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var lt=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=lt}},{key:"cloneDataTexture",value:function(lt){var Ht=lt.data,Ft=lt.textureWidth;return Qa(Qa({},lt),{},{id:Da++,texture:this.reGl.texture({width:Ft,height:Ft,data:Ht,type:"float"})})}},{key:"calcDataTexture",value:function(lt,Ht,Ft){var Ir=1;Ht===X.Vector4FloatArray&&(Ir=4);for(var Sr=[],nn=0;nn<Ft.length;nn+=Ir)Ir===1?Sr.push(Ft[nn],0,0,0):Ir===2?Sr.push(Ft[nn],Ft[nn+1],0,0):Ir===3?Sr.push(Ft[nn],Ft[nn+1],Ft[nn+2],0):Ir===4&&Sr.push(Ft[nn],Ft[nn+1],Ft[nn+2],Ft[nn+3]);var an=Ft.length,qr=Math.ceil(an/Ir),le=Math.ceil(Math.sqrt(qr)),ge=le*le;qr<ge&&Sr.push.apply(Sr,(0,Ya.Z)(new Array((ge-qr)*4).fill(0)));var B=this.reGl.texture({width:le,height:le,data:Sr,type:"float"});return{id:Da++,data:Sr,originalDataLength:an,typedArrayConstructor:O()(Ft)?Ft.constructor:void 0,textureWidth:le,texture:B,texelCount:qr,elementsPerTexel:Ir,isOutput:lt===this.context.output.name}}}]),Z}(),Qr=function(){function Z(Gt,lt){(0,P.Z)(this,Z),this.elements=void 0;var Ht=lt.data,Ft=lt.usage,Ir=lt.type,Sr=lt.count;this.elements=Gt.elements({data:Ht,usage:Kt[Ft||V.STATIC_DRAW],type:$t[Ir||V.UNSIGNED_BYTE],count:Sr})}return(0,A.Z)(Z,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(lt){var Ht=lt.data;this.elements.subdata(Ht)}},{key:"destroy",value:function(){this.elements.destroy()}}]),Z}(),wn=function(){function Z(Gt,lt){(0,P.Z)(this,Z),this.framebuffer=void 0;var Ht=lt.width,Ft=lt.height,Ir=lt.color,Sr=lt.colors,nn=lt.depth,an=lt.stencil,qr={width:Ht,height:Ft};Array.isArray(Sr)&&(qr.colors=Sr.map(function(le){return le.get()})),Ir&&typeof Ir!="boolean"&&(qr.color=Ir.get()),this.framebuffer=Gt.framebuffer(qr)}return(0,A.Z)(Z,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(lt){var Ht=lt.width,Ft=lt.height;this.framebuffer.resize(Ht,Ft)}}]),Z}(),On=G(71002),Gn=G(68630),qn=G.n(Gn);function oa(Z){var Gt={};return Object.keys(Z).forEach(function(lt){ya(lt,Z[lt],Gt,"")}),Gt}function ya(Z,Gt,lt,Ht){if(Gt===null||typeof Gt=="number"||typeof Gt=="boolean"||Array.isArray(Gt)&&typeof Gt[0]=="number"||O()(Gt)||Gt===""||Gt.resize!==void 0){lt["".concat(Ht&&Ht+".").concat(Z)]=Gt;return}qn()(Gt)&&Object.keys(Gt).forEach(function(Ft){ya(Ft,Gt[Ft],lt,"".concat(Ht&&Ht+".").concat(Z))}),Array.isArray(Gt)&&Gt.forEach(function(Ft,Ir){Object.keys(Ft).forEach(function(Sr){ya(Sr,Ft[Sr],lt,"".concat(Ht&&Ht+".").concat(Z,"[").concat(Ir,"]"))})})}function Ka(Z,Gt){var lt=Object.keys(Z);if(Object.getOwnPropertySymbols){var Ht=Object.getOwnPropertySymbols(Z);Gt&&(Ht=Ht.filter(function(Ft){return Object.getOwnPropertyDescriptor(Z,Ft).enumerable})),lt.push.apply(lt,Ht)}return lt}function mn(Z){for(var Gt=1;Gt<arguments.length;Gt++){var lt=arguments[Gt]!=null?arguments[Gt]:{};Gt%2?Ka(Object(lt),!0).forEach(function(Ht){(0,Y.Z)(Z,Ht,lt[Ht])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(lt)):Ka(Object(lt)).forEach(function(Ht){Object.defineProperty(Z,Ht,Object.getOwnPropertyDescriptor(lt,Ht))})}return Z}var jn=function(){function Z(Gt,lt){(0,P.Z)(this,Z),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=Gt;var Ht=lt.vs,Ft=lt.fs,Ir=lt.defines,Sr=lt.attributes,nn=lt.uniforms,an=lt.primitive,qr=lt.count,le=lt.elements,ge=lt.depth,B=lt.blend,_=lt.stencil,M=lt.cull,$=lt.instances,Ee=lt.scissor,Ne=lt.viewport,Le={};nn&&(this.uniforms=oa(nn),Object.keys(nn).forEach(function(Zt){Le[Zt]=Gt.prop(Zt)}));var Ye={};Object.keys(Sr).forEach(function(Zt){Ye[Zt]=Sr[Zt].get()});var Ot=Ir&&this.generateDefines(Ir)||"",Et={attributes:Ye,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(Ot,`
`).concat(Ft),uniforms:Le,vert:`
`.concat(Ot,`
`).concat(Ht),primitive:ct[an===void 0?V.TRIANGLES:an]};$&&(Et.instances=$),qr&&(Et.count=qr),le&&(Et.elements=le.get()),Ee&&(Et.scissor=Ee),Ne&&(Et.viewport=Ne),this.initDepthDrawParams({depth:ge},Et),this.initBlendDrawParams({blend:B},Et),this.initStencilDrawParams({stencil:_},Et),this.initCullDrawParams({cull:M},Et),this.drawCommand=Gt(Et)}return(0,A.Z)(Z,[{key:"addUniforms",value:function(lt){this.uniforms=mn(mn({},this.uniforms),oa(lt))}},{key:"draw",value:function(lt){var Ht=mn(mn({},this.uniforms),oa(lt.uniforms||{})),Ft={};Object.keys(Ht).forEach(function(Ir){var Sr=(0,On.Z)(Ht[Ir]);Sr==="boolean"||Sr==="number"||Array.isArray(Ht[Ir])||Ht[Ir].BYTES_PER_ELEMENT?Ft[Ir]=Ht[Ir]:Sr==="string"||(Ft[Ir]=Ht[Ir].get())}),this.drawCommand(Ft)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(lt,Ht){var Ft=lt.depth;Ft&&(Ht.depth={enable:Ft.enable===void 0?!0:!!Ft.enable,mask:Ft.mask===void 0?!0:!!Ft.mask,func:Dn[Ft.func||V.LESS],range:Ft.range||[0,1]})}},{key:"initBlendDrawParams",value:function(lt,Ht){var Ft=lt.blend;if(Ft){var Ir=Ft.enable,Sr=Ft.func,nn=Ft.equation,an=Ft.color,qr=an===void 0?[0,0,0,0]:an;Ht.blend={enable:!!Ir,func:{srcRGB:Nr[Sr&&Sr.srcRGB||V.SRC_ALPHA],srcAlpha:Nr[Sr&&Sr.srcAlpha||V.SRC_ALPHA],dstRGB:Nr[Sr&&Sr.dstRGB||V.ONE_MINUS_SRC_ALPHA],dstAlpha:Nr[Sr&&Sr.dstAlpha||V.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Ve[nn&&nn.rgb||V.FUNC_ADD],alpha:Ve[nn&&nn.alpha||V.FUNC_ADD]},color:qr}}}},{key:"initStencilDrawParams",value:function(lt,Ht){var Ft=lt.stencil;if(Ft){var Ir=Ft.enable,Sr=Ft.mask,nn=Sr===void 0?-1:Sr,an=Ft.func,qr=an===void 0?{cmp:V.ALWAYS,ref:0,mask:-1}:an,le=Ft.opFront,ge=le===void 0?{fail:V.KEEP,zfail:V.KEEP,zpass:V.KEEP}:le,B=Ft.opBack,_=B===void 0?{fail:V.KEEP,zfail:V.KEEP,zpass:V.KEEP}:B;Ht.stencil={enable:!!Ir,mask:nn,func:mn(mn({},qr),{},{cmp:Fn[qr.cmp]}),opFront:{fail:Vn[ge.fail],zfail:Vn[ge.zfail],zpass:Vn[ge.zpass]},opBack:{fail:Vn[_.fail],zfail:Vn[_.zfail],zpass:Vn[_.zpass]}}}}},{key:"initCullDrawParams",value:function(lt,Ht){var Ft=lt.cull;if(Ft){var Ir=Ft.enable,Sr=Ft.face,nn=Sr===void 0?V.BACK:Sr;Ht.cull={enable:!!Ir,face:va[nn]}}}},{key:"generateDefines",value:function(lt){return Object.keys(lt).map(function(Ht){return"#define ".concat(Ht," ").concat(Number(lt[Ht]))}).join(`
`)}}]),Z}(),Jn=function(){function Z(Gt,lt){(0,P.Z)(this,Z),this.texture=void 0,this.width=void 0,this.height=void 0;var Ht=lt.data,Ft=lt.type,Ir=Ft===void 0?V.UNSIGNED_BYTE:Ft,Sr=lt.width,nn=lt.height,an=lt.flipY,qr=an===void 0?!1:an,le=lt.format,ge=le===void 0?V.RGBA:le,B=lt.mipmap,_=B===void 0?!1:B,M=lt.wrapS,$=M===void 0?V.CLAMP_TO_EDGE:M,Ee=lt.wrapT,Ne=Ee===void 0?V.CLAMP_TO_EDGE:Ee,Le=lt.aniso,Ye=Le===void 0?0:Le,Ot=lt.alignment,Et=Ot===void 0?1:Ot,Zt=lt.premultiplyAlpha,Lr=Zt===void 0?!1:Zt,or=lt.mag,$r=or===void 0?V.NEAREST:or,Sn=lt.min,kt=Sn===void 0?V.NEAREST:Sn,nr=lt.colorSpace,_r=nr===void 0?V.BROWSER_DEFAULT_WEBGL:nr;this.width=Sr,this.height=nn;var Fr={width:Sr,height:nn,type:$t[Ir],format:jt[ge],wrapS:tn[$],wrapT:tn[Ne],mag:mr[$r],min:mr[kt],alignment:Et,flipY:qr,colorSpace:Dr[_r],premultiplyAlpha:Lr,aniso:Ye};Ht&&(Fr.data=Ht),typeof _=="number"?Fr.mipmap=ir[_]:typeof _=="boolean"&&(Fr.mipmap=_),this.texture=Gt.texture(Fr)}return(0,A.Z)(Z,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(lt){var Ht=lt.width,Ft=lt.height;this.texture.resize(Ht,Ft),this.width=Ht,this.height=Ft}},{key:"destroy",value:function(){this.texture.destroy()}}]),Z}(),Ln=function(){function Z(){var Gt=this;(0,P.Z)(this,Z),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var lt=(0,F.Z)(v().mark(function Ht(Ft){return v().wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:if(!Ft.uniforms){Sr.next=3;break}return Sr.next=3,Promise.all(Object.keys(Ft.uniforms).map(function(){var nn=(0,F.Z)(v().mark(function an(qr){var le;return v().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!(Ft.uniforms[qr]&&Ft.uniforms[qr].load!==void 0)){B.next=5;break}return B.next=3,Ft.uniforms[qr].load();case 3:le=B.sent,Ft.uniforms[qr]=le;case 5:case"end":return B.stop()}},an)}));return function(an){return nn.apply(this,arguments)}}()));case 3:return Sr.abrupt("return",new jn(Gt.gl,Ft));case 4:case"end":return Sr.stop()}},Ht)}));return function(Ht){return lt.apply(this,arguments)}}(),this.createAttribute=function(lt){return new we(Gt.gl,lt)},this.createBuffer=function(lt){return new aa(Gt.gl,lt)},this.createElements=function(lt){return new Qr(Gt.gl,lt)},this.createTexture2D=function(lt){return new Jn(Gt.gl,lt)},this.createFramebuffer=function(lt){return new wn(Gt.gl,lt)},this.useFramebuffer=function(lt,Ht){Gt.gl({framebuffer:lt?lt.get():null})(Ht)},this.createComputeModel=function(){var lt=(0,F.Z)(v().mark(function Ht(Ft){return v().wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:return Sr.abrupt("return",new Or(Gt.gl,Ft));case 1:case"end":return Sr.stop()}},Ht)}));return function(Ht){return lt.apply(this,arguments)}}(),this.clear=function(lt){var Ht=lt.color,Ft=lt.depth,Ir=lt.stencil,Sr=lt.framebuffer,nn=Sr===void 0?null:Sr,an={color:Ht,depth:Ft,stencil:Ir};an.framebuffer=nn===null?nn:nn.get(),Gt.gl.clear(an)},this.setScissor=function(lt){Gt.gl&&Gt.gl._gl&&(lt.enable&&lt.box?(Gt.gl._gl.enable(V.SCISSOR_TEST),Gt.gl._gl.scissor(lt.box.x,lt.box.y,lt.box.width,lt.box.height)):Gt.gl._gl.disable(V.SCISSOR_TEST),Gt.gl._refresh())},this.viewport=function(lt){var Ht=lt.x,Ft=lt.y,Ir=lt.width,Sr=lt.height;Gt.gl&&Gt.gl._gl&&(Gt.gl._gl.viewport(Ht,Ft,Ir,Sr),Gt.gl._refresh())},this.readPixels=function(lt){var Ht=lt.framebuffer,Ft=lt.x,Ir=lt.y,Sr=lt.width,nn=lt.height,an={x:Ft,y:Ir,width:Sr,height:nn};return Ht&&(an.framebuffer=Ht.get()),Gt.gl.read(an)},this.getCanvas=function(){return Gt.$canvas},this.getGLContext=function(){return Gt.gl._gl},this.destroy=function(){Gt.gl&&(Gt.gl.destroy(),Gt.inited=!1)}}return(0,A.Z)(Z,[{key:"init",value:function(){var Gt=(0,F.Z)(v().mark(function Ht(Ft){return v().wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:if(!this.inited){Sr.next=2;break}return Sr.abrupt("return");case 2:return this.$canvas=Ft.canvas,Sr.next=5,new Promise(function(nn,an){Pe()({canvas:Ft.canvas,attributes:{alpha:!0,antialias:Ft.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(le,ge){(le||!ge)&&an(le),nn(ge)}})});case 5:this.gl=Sr.sent,this.inited=!0;case 7:case"end":return Sr.stop()}},Ht,this)}));function lt(Ht){return Gt.apply(this,arguments)}return lt}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),Z}(),ma=function(){function Z(){(0,P.Z)(this,Z),this.engine=void 0,this.configService=new J}return(0,A.Z)(Z,[{key:"setConfig",value:function(lt){this.configService.set(lt)}},{key:"setEngine",value:function(lt){this.engine=lt}},{key:"createEntity",value:function(){return T()}},{key:"createKernel",value:function(lt){var Ht=new De(this.engine,this.configService);return typeof lt=="string"?Ht.setBundle(JSON.parse(lt)):Ht.setBundle(lt),Ht.init(),Ht}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ht=new Z;return Ht.setConfig(lt),Ht.setEngine(new Ln),Ht}}]),Z}()},16198:function(pr,U,G){"use strict";G.d(U,{ZP:function(){return Tg}});var F={};G.r(F),G.d(F,{GADDI:function(){return Eo},Stack:function(){return qa},breadthFirstSearch:function(){return ve},connectedComponent:function(){return We},cosineSimilarity:function(){return Ft},default:function(){return fs},depthFirstSearch:function(){return gt},detectAllCycles:function(){return Kt},detectAllDirectedCycle:function(){return ct},detectAllUndirectedCycle:function(){return yt},detectCycle:function(){return $t},detectDirectedCycle:function(){return Qi},dijkstra:function(){return mr},findAllPath:function(){return Dn},findShortestPath:function(){return Dr},floydWarshall:function(){return Nr},getAdjMatrix:function(){return X},getDegree:function(){return Je},getInDegree:function(){return mt},getNeighbors:function(){return ce},getOutDegree:function(){return xt},iLouvain:function(){return Jn},kCore:function(){return ma},kMeans:function(){return lt},labelPropagation:function(){return Vn},louvain:function(){return mn},minimumSpanningTree:function(){return $},nodesCosineSimilarity:function(){return Sr},pageRank:function(){return Ne}});var Y={};G.r(Y),G.d(Y,{Line:function(){return co},applyMatrix:function(){return Ni},compare:function(){return cs},distance:function(){return mi},floydWarshall:function(){return Ms},fractionToLine:function(){return Go},getAdjMatrix:function(){return Cs},getBBoxBoundLine:function(){return Bi},getCircleCenterByPoints:function(){return ls},getCircleIntersectByPoint:function(){return Fo},getDegree:function(){return Is},getEllipseIntersectByPoint:function(){return Ui},getLineIntersect:function(){return bo},getPointsCenter:function(){return Oa},getRectIntersectByPoint:function(){return Ho},intersectBBox:function(){return fo},invertMatrix:function(){return _s},isPointInPolygon:function(){return Ji},isPointsOverlap:function(){return Wi},isPolygonsIntersect:function(){return As},itemIntersectByLine:function(){return hs},lerp:function(){return Ja},lerpArray:function(){return eo},move:function(){return uo},pointLineDistance:function(){return vs},pointLineSquareDist:function(){return no},pointRectSquareDist:function(){return ts},rotate:function(){return ds},scale:function(){return Ts},scaleMatrix:function(){return qi},squareDist:function(){return Zo},translate:function(){return Lo}});var P={};G.r(P),G.d(P,{cloneBesidesImg:function(){return io},getAnimateCfgWithCallback:function(){return is},getBBox:function(){return ns},getComboBBox:function(){return Ds},getLabelPosition:function(){return Bs},getLetterWidth:function(){return bu},getLoopCfgs:function(){return gs},getTextSize:function(){return ru},plainCombosToTrees:function(){return Gs},reconstructTree:function(){return Ls},shouldRefreshEdge:function(){return xu},traverseTree:function(){return li},traverseTreeUp:function(){return Xo},truncateLabelByLength:function(){return as}});var A={};G.r(A),G.d(A,{calculationItemsBBox:function(){return Ko},cloneEvent:function(){return Su},formatPadding:function(){return Vs},isNaN:function(){return Po},isViewportChanged:function(){return _u},processParallelEdges:function(){return Mu},uniqueId:function(){return Xs}});var N={};G.r(N),G.d(N,{getClosedSpline:function(){return uu},getControlPoint:function(){return Yo},getSpline:function(){return su},getStarPath:function(){return hf},paddedHull:function(){return Hs},pathToPoints:function(){return Au},pointsToPolygon:function(){return Hu},roundedHull:function(){return Zu}});var O={};G.r(O),G.d(O,{defaultSubjectColors:function(){return pc}});var x={};G.r(x),G.d(x,{isForce:function(){return Ef}});var E={};G.r(E),G.d(E,{getColorSetsBySubjectColors:function(){return $f},getColorsWithSubjectColor:function(){return af},mixColor:function(){return ki}});var y={};G.r(y),G.d(y,{arrayToTextureData:function(){return ml},attributesToTextureData:function(){return rl},buildTextureData:function(){return el},buildTextureDataWithOneEdgeAttr:function(){return tl},buildTextureDataWithTwoEdgeAttr:function(){return yl},proccessToFunc:function(){return Jc},radialLayout:function(){return yo}});var m={};G.r(m),G.d(m,{gpuDetector:function(){return Dc}});var g={};G.r(g),G.d(g,{getBrowserName:function(){return zu}});var v=G(97582),u=G(13810),b={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(t){return Object.assign(this,t),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(t){var e=this,r=this.events;this.graph=t,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&t.get("canvas").set("draggable",!0),(0,u.each)(r,function(n,a){t.on(a,n)}),document.addEventListener("visibilitychange",function(){e.keydown=!1})},unbind:function(t){var e=this.events,r=t.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&t.get("canvas").set("draggable",!1),(0,u.each)(e,function(n,a){t.off(a,n)}),t.get("canvas").set("draggable",r)},get:function(t){return this[t]},set:function(t,e){return this[t]=e,this}},T=function(){function f(){}return f.registerBehavior=function(t,e){if(!e)throw new Error("please specify handler for this behavior: ".concat(t));var r=(0,u.clone)(b);Object.assign(r,e);var n=function(i){var o=this;Object.assign(this,this.getDefaultCfg(),i);var s=this.getEvents();this.events=null;var l={};s&&((0,u.each)(s,function(d,p){l[p]=(0,u.wrapBehavior)(o,d)}),this.events=l)};n.prototype=r,f.types[t]=n},f.hasBehavior=function(t){return!!f.types[t]},f.getBehavior=function(t){return f.types[t]},f.types={},f}(),D=T,k=D,V=G(90494),J=G(31506),W=function(t,e){var r=t.nodes,n=t.edges,a=[],i={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(o,s){i[o.id]=s;var l=[];a.push(l)}),n&&n.forEach(function(o){var s=o.source,l=o.target,d=i[s],p=i[l];!d&&d!==0||!p&&p!==0||(a[d][p]=1,e||(a[p][d]=1))}),a},X=W,K=function(t,e){return t===e},Q=function(){function f(t,e){e===void 0&&(e=null),this.value=t,this.next=e}return f.prototype.toString=function(t){return t?t(this.value):"".concat(this.value)},f}(),re=function(){function f(t){t===void 0&&(t=K),this.head=null,this.tail=null,this.compare=t}return f.prototype.prepend=function(t){var e=new Q(t,this.head);return this.head=e,this.tail||(this.tail=e),this},f.prototype.append=function(t){var e=new Q(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},f.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare(this.head.value,t);)e=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,t)?(e=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,t)&&(this.tail=r),e},f.prototype.find=function(t){var e=t.value,r=e===void 0?void 0:e,n=t.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var i=this.head;i;){if(a&&a(i.value)||r!==void 0&&this.compare(i.value,r))return i;i=i.next}return null},f.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},f.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},f.prototype.fromArray=function(t){var e=this;return t.forEach(function(r){return e.append(r)}),this},f.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},f.prototype.reverse=function(){for(var t=this.head,e=null,r=null;t;)r=t.next,t.next=e,e=t,t=r;this.tail=this.head,this.head=e},f.prototype.toString=function(t){return t===void 0&&(t=void 0),this.toArray().map(function(e){return e.toString(t)}).toString()},f}(),q=re,ae=function(){function f(){this.linkedList=new q}return f.prototype.isEmpty=function(){return!this.linkedList.head},f.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},f.prototype.enqueue=function(t){this.linkedList.append(t)},f.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},f.prototype.toString=function(t){return this.linkedList.toString(t)},f}(),ue=ae,ce=function(t,e,r){e===void 0&&(e=[]);var n=e.filter(function(s){return s.source===t||s.target===t});if(r==="target"){var a=function(l){return l.source===t};return n.filter(a).map(function(s){return s.target})}if(r==="source"){var i=function(l){return l.target===t};return n.filter(i).map(function(s){return s.source})}var o=function(l){return l.source===t?l.target:l.source};return n.map(o)},De=function(t,e){return e.filter(function(r){return r.source===t})},Ie=function(t,e){return e.filter(function(r){return r.source===t||r.target===t})},Pe=function(t){t===void 0&&(t=0);var e="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(t,"-").concat(e).concat(r)};function we(f){f===void 0&&(f={});var t=f,e=function(){},r=function(){var n={};return function(a){var i=a.next,o=i;return n[o]?!1:(n[o]=!0,!0)}}();return t.allowTraversal=f.allowTraversal||r,t.enter=f.enter||e,t.leave=f.leave||e,t}var xe=function(t,e,r,n){n===void 0&&(n=!0);var a=we(r),i=new ue,o=t.edges,s=o===void 0?[]:o;i.enqueue(e);for(var l="",d=function(){var C=i.dequeue();a.enter({current:C,previous:l}),ce(C,s,n?"target":void 0).forEach(function(S){a.allowTraversal({previous:l,current:C,next:S})&&i.enqueue(S)}),a.leave({current:C,previous:l}),l=C};!i.isEmpty();)d()},ve=xe,Se=function(t){for(var e=t.nodes,r=e===void 0?[]:e,n=t.edges,a=n===void 0?[]:n,i=[],o={},s=[],l=function S(L){s.push(L),o[L.id]=!0;for(var z=ce(L.id,a),H=function(se){var ye=z[se];if(!o[ye]){var Ce=r.filter(function(Re){return Re.id===ye});Ce.length>0&&S(Ce[0])}},ee=0;ee<z.length;++ee)H(ee)},d=0;d<r.length;d++){var p=r[d];if(!o[p.id]){l(p);for(var C=[];s.length>0;)C.push(s.pop());i.push(C)}}return i},Te=function(t){for(var e=t.nodes,r=e===void 0?[]:e,n=t.edges,a=n===void 0?[]:n,i=[],o={},s={},l={},d=[],p=0,C=function H(ee){s[ee.id]=p,l[ee.id]=p,p+=1,i.push(ee),o[ee.id]=!0;for(var ie=ce(ee.id,a,"target").filter(function(ke){return r.map(function(et){return et.id}).indexOf(ke)>-1}),se=function(et){var vt=ie[et];if(!s[vt]&&s[vt]!==0){var at=r.filter(function(Mt){return Mt.id===vt});at.length>0&&H(at[0]),l[ee.id]=Math.min(l[ee.id],l[vt])}else o[vt]&&(l[ee.id]=Math.min(l[ee.id],s[vt]))},ye=0;ye<ie.length;ye++)se(ye);if(l[ee.id]===s[ee.id]){for(var Ce=[];i.length>0;){var Re=i.pop();if(o[Re.id]=!1,Ce.push(Re),Re===ee)break}Ce.length>0&&d.push(Ce)}},S=0,L=r;S<L.length;S++){var z=L[S];!s[z.id]&&s[z.id]!==0&&C(z)}return d};function We(f,t){return t?Te(f):Se(f)}var Ge=function(t){var e={},r=t.nodes,n=r===void 0?[]:r,a=t.edges,i=a===void 0?[]:a;return n.forEach(function(o){e[o.id]={degree:0,inDegree:0,outDegree:0}}),i.forEach(function(o){e[o.source].degree++,e[o.source].outDegree++,e[o.target].degree++,e[o.target].inDegree++}),e},Je=Ge,mt=function(t,e){var r=Ge(t);return r[e]?Ge(t)[e].inDegree:0},xt=function(t,e){var r=Ge(t);return r[e]?Ge(t)[e].outDegree:0};function Ze(f){f===void 0&&(f={});var t=f,e=function(){},r=function(){var n={};return function(a){var i=a.next;return n[i]?!1:(n[i]=!0,!0)}}();return t.allowTraversal=f.allowTraversal||r,t.enter=f.enter||e,t.leave=f.leave||e,t}function $e(f,t,e,r,n){n===void 0&&(n=!0),r.enter({current:t,previous:e});var a=f.edges,i=a===void 0?[]:a;ce(t,i,n?"target":void 0).forEach(function(o){r.allowTraversal({previous:e,current:t,next:o})&&$e(f,o,t,r,n)}),r.leave({current:t,previous:e})}function gt(f,t,e,r){r===void 0&&(r=!0),$e(f,t,"",Ze(e),r)}var At=function(t){var e=null,r=t.nodes,n=r===void 0?[]:r,a={},i={},o={},s={};n.forEach(function(p){i[p.id]=p});for(var l={enter:function(C){var S=C.current,L=C.previous;if(o[S]){e={};for(var z=S,H=L;H!==S;)e[z]=H,z=H,H=a[H];e[z]=H}else o[S]=S,delete i[S],a[S]=L},leave:function(C){var S=C.current;s[S]=S,delete o[S]},allowTraversal:function(C){var S=C.next;return e?!1:!s[S]}};Object.keys(i).length;){var d=Object.keys(i)[0];gt(t,d,l)}return e},yt=function(t,e,r){var n,a;r===void 0&&(r=!0);for(var i=[],o=We(t,!1),s=0,l=o;s<l.length;s++){var d=l[s];if(d.length)for(var p=d[0],C=p.id,S=[p],L=(n={},n[C]=p,n),z=(a={},a[C]=new Set,a);S.length>0;)for(var H=S.pop(),ee=H.id,ie=ce(ee,t.edges),se=function(Re){var ke,et=ie[Re],vt=t.nodes.find(function(kr){return kr.id===et});if(et===ee)i.push((ke={},ke[et]=H,ke));else if(!(et in z))L[et]=H,S.push(vt),z[et]=new Set([H]);else if(!z[ee].has(vt)){for(var at=!0,Mt=[vt,H],zt=L[ee];z[et].size&&!z[et].has(zt)&&(Mt.push(zt),zt!==L[zt.id]);)zt=L[zt.id];if(Mt.push(zt),e&&r?(at=!1,Mt.findIndex(function(kr){return e.indexOf(kr.id)>-1})>-1&&(at=!0)):e&&!r&&Mt.findIndex(function(kr){return e.indexOf(kr.id)>-1})>-1&&(at=!1),at){for(var Cr={},jr=1;jr<Mt.length;jr+=1)Cr[Mt[jr-1].id]=Mt[jr];Mt.length&&(Cr[Mt[Mt.length-1].id]=Mt[0]),i.push(Cr)}z[et].add(H)}},ye=0;ye<ie.length;ye+=1)se(ye)}return i},ct=function(t,e,r){r===void 0&&(r=!0);for(var n=[],a=new Set,i=[],o=[],s={},l={},d=function(zt){for(var Cr=[zt];Cr.length>0;){var jr=Cr.pop();a.has(jr)&&(a.delete(jr),i[jr.id].forEach(function(kr){Cr.push(kr)}),i[jr.id].clear())}},p=function Mt(zt,Cr,jr){var kr=!1;if(e&&r===!1&&e.indexOf(zt.id)>-1)return kr;n.push(zt),a.add(zt);for(var yr=jr[zt.id],dn=0;dn<yr.length;dn+=1){var un=s[yr[dn]];if(un===Cr){for(var br={},zr=1;zr<n.length;zr+=1)br[n[zr-1].id]=n[zr];n.length&&(br[n[n.length-1].id]=n[0]),o.push(br),kr=!0}else a.has(un)||Mt(un,Cr,jr)&&(kr=!0)}if(kr)d(zt);else for(var dn=0;dn<yr.length;dn+=1){var un=s[yr[dn]];i[un.id].has(zt)||i[un.id].add(zt)}return n.pop(),kr},C=t.nodes,S=C===void 0?[]:C,L=0;L<S.length;L+=1){var z=S[L],H=z.id;l[H]=L,s[L]=z}if(e&&r)for(var ee=function(zt){var Cr=e[zt];l[S[zt].id]=l[Cr],l[Cr]=0,s[0]=S.find(function(jr){return jr.id===Cr}),s[l[S[zt].id]]=S[zt]},L=0;L<e.length;L++)ee(L);for(var ie=function(zt){for(var Cr,jr,kr=1/0,yr=0;yr<zt.length;yr+=1)for(var dn=zt[yr],un=0;un<dn.length;un++){var br=l[dn[un].id];br<kr&&(kr=br,jr=yr)}for(var zr=zt[jr],en=[],yr=0;yr<zr.length;yr+=1){var Jr=zr[yr];en[Jr.id]=[];for(var yn=0,An=ce(Jr.id,t.edges,"target").filter(function(yi){return zr.map(function($a){return $a.id}).indexOf(yi)>-1});yn<An.length;yn++){var wa=An[yn];wa===Jr.id&&!(r===!1&&e.indexOf(Jr.id)>-1)?o.push((Cr={},Cr[Jr.id]=Jr,Cr)):en[Jr.id].push(l[wa])}}return{component:zr,adjList:en,minIdx:kr}},se=0;se<S.length;){var ye=S.filter(function(Mt){return l[Mt.id]>=se}),Ce=Te({nodes:ye,edges:t.edges}).filter(function(Mt){return Mt.length>1});if(Ce.length===0)break;var Re=ie(Ce),ke=Re.minIdx,et=Re.adjList,vt=Re.component;if(vt.length>1){vt.forEach(function(Mt){i[Mt.id]=new Set});var at=s[ke];if(e&&r&&e.indexOf(at.id)===-1)return o;p(at,at,et),se=ke+1}else break}return o},Kt=function(t,e,r,n){return n===void 0&&(n=!0),e?ct(t,r,n):yt(t,r,n)},$t=At,jt=function(t,e,r){for(var n=1/0,a,i=0;i<e.length;i++){var o=e[i].id;!r[o]&&t[o]<=n&&(n=t[o],a=e[i])}return a},ir=function(t,e,r,n){var a=t.nodes,i=a===void 0?[]:a,o=t.edges,s=o===void 0?[]:o,l=[],d={},p={},C={};i.forEach(function(se,ye){var Ce=se.id;l.push(Ce),p[Ce]=1/0,Ce===e&&(p[Ce]=0)});for(var S=i.length,L=function(ye){var Ce=jt(p,i,d),Re=Ce.id;if(d[Re]=!0,p[Re]===1/0)return"continue";var ke=[];r?ke=De(Re,s):ke=Ie(Re,s),ke.forEach(function(et){var vt=et.target,at=et.source,Mt=vt===Re?at:vt,zt=n&&et[n]?et[n]:1;p[Mt]>p[Ce.id]+zt?(p[Mt]=p[Ce.id]+zt,C[Mt]=[Ce.id]):p[Mt]===p[Ce.id]+zt&&C[Mt].push(Ce.id)})},z=0;z<S;z++)L(z);C[e]=[e];var H={};for(var ee in p)p[ee]!==1/0&&tn(e,ee,C,H);var ie={};for(var ee in H)ie[ee]=H[ee][0];return{length:p,path:ie,allPath:H}},mr=ir;function tn(f,t,e,r){if(f===t)return[f];if(r[t])return r[t];for(var n=[],a=0,i=e[t];a<i.length;a++){var o=i[a],s=tn(f,o,e,r);if(!s)return;for(var l=0,d=s;l<d.length;l++){var p=d[l];(0,u.isArray)(p)?n.push((0,v.__spreadArray)((0,v.__spreadArray)([],p,!0),[t],!1)):n.push([p,t])}}return r[t]=n,r[t]}var Dr=function(t,e,r,n,a){var i=mr(t,e,n,a),o=i.length,s=i.path,l=i.allPath;return{length:o[r],path:s[r],allPath:l[r]}},Dn=function(t,e,r,n){var a;if(e===r)return[[e]];var i=t.edges,o=i===void 0?[]:i,s=[e],l=(a={},a[e]=!0,a),d=[],p=[],C=n?ce(e,o,"target"):ce(e,o);for(d.push(C);s.length>0&&d.length>0;){var S=d[d.length-1];if(S.length){var L=S.shift();L&&(s.push(L),l[L]=!0,C=n?ce(L,o,"target"):ce(L,o),d.push(C.filter(function(ee){return!l[ee]})))}else{var z=s.pop();l[z]=!1,d.pop();continue}if(s[s.length-1]===r){var H=s.map(function(ie){return ie});p.push(H);var z=s.pop();l[z]=!1,d.pop()}}return p},Ve=function(t,e){for(var r=X(t,e),n=[],a=r.length,i=0;i<a;i+=1){n[i]=[];for(var o=0;o<a;o+=1)i===o?n[i][o]=0:r[i][o]===0||!r[i][o]?n[i][o]=1/0:n[i][o]=r[i][o]}for(var s=0;s<a;s+=1)for(var i=0;i<a;i+=1)for(var o=0;o<a;o+=1)n[i][o]>n[i][s]+n[s][o]&&(n[i][o]=n[i][s]+n[s][o]);return n},Nr=Ve,Fn=function(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var a=t.nodes,i=a===void 0?[]:a,o=t.edges,s=o===void 0?[]:o,l={},d={};i.forEach(function(ye,Ce){var Re=Pe();ye.clusterId=Re,l[Re]={id:Re,nodes:[ye]},d[ye.id]={node:ye,idx:Ce}});var p=X(t,e),C=[],S={};p.forEach(function(ye,Ce){var Re=0,ke=i[Ce].id;S[ke]={},ye.forEach(function(et,vt){if(et){Re+=et;var at=i[vt].id;S[ke][at]=et}}),C.push(Re)});for(var L=0,z=function(){var Ce=!1;if(i.forEach(function(Re){var ke={};Object.keys(S[Re.id]).forEach(function(kr){var yr=S[Re.id][kr],dn=d[kr].node,un=dn.clusterId;ke[un]||(ke[un]=0),ke[un]+=yr});var et=-1/0,vt=[];if(Object.keys(ke).forEach(function(kr){et<ke[kr]?(et=ke[kr],vt=[kr]):et===ke[kr]&&vt.push(kr)}),!(vt.length===1&&vt[0]===Re.clusterId)){var at=vt.indexOf(Re.clusterId);if(at>=0&&vt.splice(at,1),vt&&vt.length){Ce=!0;var Mt=l[Re.clusterId],zt=Mt.nodes.indexOf(Re);Mt.nodes.splice(zt,1);var Cr=Math.floor(Math.random()*vt.length),jr=l[vt[Cr]];jr.nodes.push(Re),Re.clusterId=jr.id}}}),!Ce)return"break";L++};L<n;){var H=z();if(H==="break")break}Object.keys(l).forEach(function(ye){var Ce=l[ye];(!Ce.nodes||!Ce.nodes.length)&&delete l[ye]});var ee=[],ie={};s.forEach(function(ye){var Ce=ye.source,Re=ye.target,ke=ye[r]||1,et=d[Ce].node.clusterId,vt=d[Re].node.clusterId,at="".concat(et,"---").concat(vt);if(ie[at])ie[at].weight+=ke,ie[at].count++;else{var Mt={source:et,target:vt,weight:ke,count:1};ie[at]=Mt,ee.push(Mt)}});var se=[];return Object.keys(l).forEach(function(ye){se.push(l[ye])}),{clusters:se,clusterEdges:ee}},Vn=Fn,va=function(){function f(t){this.arr=t}return f.prototype.getArr=function(){return this.arr||[]},f.prototype.add=function(t){var e,r=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return new f(r);if(!(r!=null&&r.length))return new f(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]+r[a];return new f(n)}},f.prototype.subtract=function(t){var e,r=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return new f(r);if(!(r!=null&&r.length))return new f(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]-r[a];return new f(n)}},f.prototype.avg=function(t){var e=[];if(t!==0)for(var r in this.arr)e[r]=this.arr[r]/t;return new f(e)},f.prototype.negate=function(){var t=[];for(var e in this.arr)t[e]=-this.arr[e];return new f(t)},f.prototype.squareEuclideanDistance=function(t){var e,r=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-t.arr[a],2);return n}},f.prototype.euclideanDistance=function(t){var e,r=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-t.arr[a],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},f.prototype.normalize=function(){var t=[],e=(0,u.clone)(this.arr);e.sort(function(i,o){return i-o});var r=e[e.length-1],n=e[0];for(var a in this.arr)t[a]=(this.arr[a]-n)/(r-n);return new f(t)},f.prototype.norm2=function(){var t;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return 0;var e=0;for(var r in this.arr)e+=Math.pow(this.arr[r],2);return Math.sqrt(e)},f.prototype.dot=function(t){var e,r=t.arr;if(!(!((e=this.arr)===null||e===void 0)&&e.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=this.arr[a]*t.arr[a];return n}else console.error("The two vectors are unequal in length.")},f.prototype.equal=function(t){var e,r=t.arr;if(((e=this.arr)===null||e===void 0?void 0:e.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},f}(),aa=va,Ya=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,la=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,Qa=function(t,e){t===void 0&&(t=[]),e===void 0&&(e=100);var r={};t.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(i){if(i==="id"||!"".concat(a.properties[i]).match(Ya)&&!"".concat(a.properties[i]).match(la)&&isNaN(Number(a.properties[i]))){r.hasOwnProperty(i)&&delete r[i];return}r.hasOwnProperty(i)?r[i]+=1:r[i]=1})});var n=Object.keys(r).sort(function(a,i){return r[i]-r[a]});return n.length<e?n:n.slice(0,e)},Wa=function(t,e){return e.map(function(r){return t.hasOwnProperty(r)?t[r]:0})},Da=function(t){for(var e=Qa(t),r=[],n=0;n<t.length;n++)r[n]=Wa(t[n].properties,e);return r},ar=function(t,e){e===void 0&&(e=void 0);var r=[];return t.forEach(function(n){e===void 0&&r.push(n),n[e]!==void 0&&r.push(n[e])}),r},Or={getAllSortProperties:Qa,getPropertyWeight:Da,getAllProperties:ar},Qr;(function(f){f.EuclideanDistance="euclideanDistance"})(Qr||(Qr={}));var wn=function(t,e,r){var n=[];e!=null&&e.length?n=e:(t.forEach(function(i){n=n.concat(Object.keys(i))}),n=(0,u.uniq)(n));var a={};return n.forEach(function(i){var o=[];t.forEach(function(s){s[i]!==void 0&&s[i]!==""&&o.push(s[i])}),o.length&&!(r!=null&&r.includes(i))&&(a[i]=(0,u.uniq)(o))}),a},On=function(t,e,r){var n=wn(t,e,r),a=[];if(!Object.keys(n).length)return a;var i=Object.values(n),o=i.every(function(s){return s.every(function(l){return typeof l=="number"})});return t.forEach(function(s,l){var d=[];Object.keys(n).forEach(function(p){var C=s[p],S=n[p],L=S.findIndex(function(ee){return C===ee}),z=[];if(o)z.push(C);else for(var H=0;H<S.length;H++)H===L?z.push(1):z.push(0);d=d.concat(z)}),a[l]=d}),a},Gn=function(t,e,r,n){r===void 0&&(r=Qr.EuclideanDistance);var a=0;switch(r){case Qr.EuclideanDistance:a=new aa(t).euclideanDistance(new aa(e));break;default:break}return a},qn={getAllKeyValueMap:wn,oneHot:On,getDistance:Gn},oa=function(t,e,r,n){for(var a=e.length,i=2*n,o=0,s=0;s<a;s++)for(var l=t[s].clusterId,d=0;d<a;d++){var p=t[d].clusterId;if(l===p){var C=e[s][d]||0,S=r[s]||0,L=r[d]||0;o+=C-S*L/i}}return o*=1/i,o},ya=function(t,e){t===void 0&&(t=[]);for(var r=t.length,n=new aa([]),a=0;a<r;a++)n=n.add(new aa(e[a]));var i=n.avg(r);i.normalize();for(var o=0,a=0;a<r;a++){var s=new aa(e[a]),l=s.squareEuclideanDistance(i);o+=l}var d=[];t.forEach(function(){d.push([])});for(var a=0;a<r;a++){var s=new aa(e[a]);t[a].clusterInertial=0;for(var p=0;p<r;p++){if(a===p){d[a][p]=0;continue}var C=new aa(e[p]);d[a][p]=s.squareEuclideanDistance(C),t[a].clusterInertial+=d[a][p]}}for(var S=0,L=2*r*o,a=0;a<r;a++)for(var z=t[a].clusterId,p=0;p<r;p++){var H=t[p].clusterId;if(!(a===p||z!==H)){var ee=t[a].clusterInertial*t[p].clusterInertial/Math.pow(L,2)-d[a][p]/L;S+=ee}}return Number(S.toFixed(4))},Ka=function(t,e,r,n,a,i,o,s,l){e===void 0&&(e=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=!1),i===void 0&&(i=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),l===void 0&&(l=1);var d=t.nodes,p=d===void 0?[]:d,C=t.edges,S=C===void 0?[]:C,L=[];if(a){p.forEach(function(br,zr){br.properties=br.properties||{},br.originIndex=zr});var z=[];p.every(function(br){return br.hasOwnProperty("nodeType")})&&(z=Array.from(new Set(p.map(function(br){return br.nodeType}))),p.forEach(function(br){br.properties.nodeType=z.findIndex(function(zr){return zr===br.nodeType})}));var H=ar(p,i);L=On(H,o,s)}var ee=1,ie={},se={};p.forEach(function(br,zr){var en=String(ee++);br.clusterId=en,ie[en]={id:en,nodes:[br]},se[br.id]={node:br,idx:zr}});var ye=X(t,e),Ce=[],Re={},ke=0;ye.forEach(function(br,zr){var en=0,Jr=p[zr].id;Re[Jr]={},br.forEach(function(yn,An){if(yn){en+=yn;var wa=p[An].id;Re[Jr][wa]=yn,ke+=yn}}),Ce.push(en)}),ke/=2;for(var et=1/0,vt=1/0,at=0,Mt=[],zt={};;){a&&p.every(function(br){return br.hasOwnProperty("properties")})?et=oa(p,ye,Ce,ke)+ya(p,L)*l:et=oa(p,ye,Ce,ke),at===0&&(vt=et,Mt=p,zt=ie);var Cr=et>0&&et>vt&&et-vt<n;if(et>vt&&(Mt=p.map(function(br){return{node:br,clusterId:br.clusterId}}),zt=(0,u.clone)(ie),vt=et),Cr||at>100)break;at++,Object.keys(ie).forEach(function(br){var zr=0;S.forEach(function(en){var Jr=en.source,yn=en.target,An=se[Jr].node.clusterId,wa=se[yn].node.clusterId;(An===br&&wa!==br||wa===br&&An!==br)&&(zr=zr+(en[r]||1))}),ie[br].sumTot=zr}),p.forEach(function(br,zr){var en=ie[br.clusterId],Jr=0,yn,An=Ce[zr]/(2*ke),wa=0,Sa=en.nodes;Sa.forEach(function(Ao){var Oo=se[Ao.id].idx;wa+=ye[zr][Oo]||0});var yi=wa-en.sumTot*An,$a=Sa.filter(function(Ao){return Ao.id!==br.id}),Ci=[];$a.forEach(function(Ao,Oo){Ci[Oo]=L[Ao.originIndex]});var xi=ya($a,L)*l,Vi=Re[br.id];if(Object.keys(Vi).forEach(function(Ao){var Oo=se[Ao].node,Js=Oo.clusterId;if(Js!==br.clusterId){var Jo=ie[Js],xs=Jo.nodes;if(!(!xs||!xs.length)){var La=0;xs.forEach(function(Pa){var Ba=se[Pa.id].idx;La+=ye[zr][Ba]||0});var ri=La-Jo.sumTot*An,Ia=xs.concat([br]),ni=[];Ia.forEach(function(Pa,Ba){ni[Ba]=L[Pa.originIndex]});var wi=ya(Ia,L)*l,Wn=ri-yi;a&&(Wn=ri+wi-(yi+xi)),Wn>Jr&&(Jr=Wn,yn=Jo)}}}),Jr>0){yn.nodes.push(br);var Ti=br.clusterId;br.clusterId=yn.id;var pu=en.nodes.indexOf(br);en.nodes.splice(pu,1);var Io=0,yu=0;S.forEach(function(Ao){var Oo=Ao.source,Js=Ao.target,Jo=se[Oo].node.clusterId,xs=se[Js].node.clusterId;(Jo===yn.id&&xs!==yn.id||xs===yn.id&&Jo!==yn.id)&&(Io=Io+(Ao[r]||1)),(Jo===Ti&&xs!==Ti||xs===Ti&&Jo!==Ti)&&(yu=yu+(Ao[r]||1))}),yn.sumTot=Io,en.sumTot=yu}})}var jr={},kr=0;Object.keys(zt).forEach(function(br){var zr=zt[br];if(!zr.nodes||!zr.nodes.length){delete zt[br];return}var en=String(kr+1);en!==br&&(zr.id=en,zr.nodes=zr.nodes.map(function(Jr){return{id:Jr.id,clusterId:en}}),zt[en]=zr,jr[br]=en,delete zt[br],kr++)}),Mt.forEach(function(br){var zr=br.node,en=br.clusterId;zr&&(zr.clusterId=en,zr.clusterId&&jr[zr.clusterId]&&(zr.clusterId=jr[zr.clusterId]))});var yr=[],dn={};S.forEach(function(br){var zr=br.source,en=br.target,Jr=br[r]||1,yn=se[zr].node.clusterId,An=se[en].node.clusterId;if(!(!yn||!An)){var wa="".concat(yn,"---").concat(An);if(dn[wa])dn[wa].weight+=Jr,dn[wa].count++;else{var Sa={source:yn,target:An,weight:Jr,count:1};dn[wa]=Sa,yr.push(Sa)}}});var un=[];return Object.keys(zt).forEach(function(br){un.push(zt[br])}),{clusters:un,clusterEdges:yr}},mn=Ka,jn=function(t,e,r,n,a,i,o,s){return e===void 0&&(e=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=void 0),i===void 0&&(i=[]),o===void 0&&(o=["id"]),s===void 0&&(s=1),mn(t,e,r,n,!0,a,i,o,s)},Jn=jn,Ln=function(t,e){var r;e===void 0&&(e=1);for(var n=(0,u.clone)(t),a=n.nodes,i=a===void 0?[]:a,o=n.edges,s=o===void 0?[]:o,l=function(){var C=Je({nodes:i,edges:s}),S=Object.keys(C);S.sort(function(H,ee){var ie,se;return((ie=C[H])===null||ie===void 0?void 0:ie.degree)-((se=C[ee])===null||se===void 0?void 0:se.degree)});var L=S[0];if(!i.length||((r=C[L])===null||r===void 0?void 0:r.degree)>=e)return"break";var z=i.findIndex(function(H){return H.id===L});i.splice(z,1),s=s.filter(function(H){return!(H.source===L||H.target===L)})};;){var d=l();if(d==="break")break}return{nodes:i,edges:s}},ma=Ln,Z=function(t,e,r){var n=[];switch(t){case Qr.EuclideanDistance:n=e[r];break;default:n=[];break}return n},Gt=function(t,e,r,n,a,i){e===void 0&&(e=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=["id"]),i===void 0&&(i=Qr.EuclideanDistance);var o=t.nodes,s=o===void 0?[]:o,l=t.edges,d=l===void 0?[]:l,p={clusters:[{id:"0",nodes:s}],clusterEdges:[]};if(i===Qr.EuclideanDistance&&!s.every(function(en){return en.hasOwnProperty(r)}))return p;var C=[],S=[];if(i===Qr.EuclideanDistance&&(C=ar(s,r),S=On(C,n,a)),!S.length)return p;for(var L=(0,u.uniq)(S.map(function(en){return en.join("")})),z=Math.min(e,s.length,L.length),H=0;H<s.length;H++)s[H].originIndex=H;for(var ee=[],ie=[],se=[],H=0;H<z;H++)if(H===0){var ye=Math.floor(Math.random()*s.length);switch(i){case Qr.EuclideanDistance:ee[H]=S[ye];break;default:ee[H]=[];break}ie.push(ye),se[H]=[s[ye]],s[ye].clusterId=String(H)}else{for(var Ce=-1/0,Re=0,ke=function(yn){if(!ie.includes(yn)){for(var An=0,wa=0;wa<ee.length;wa++){var Sa=0;switch(i){case Qr.EuclideanDistance:Sa=Gn(S[s[yn].originIndex],ee[wa],i);break;default:break}An+=Sa}var yi=An/ee.length;yi>Ce&&!ee.find(function($a){return(0,u.isEqual)($a,Z(i,S,s[yn].originIndex))})&&(Ce=yi,Re=yn)}},et=0;et<s.length;et++)ke(et);ee[H]=Z(i,S,Re),ie.push(Re),se[H]=[s[Re]],s[Re].clusterId=String(H)}for(var vt=0;;){for(var H=0;H<s.length;H++){var at=0,Mt=1/0;if(!(vt===0&&ie.includes(H))){for(var zt=0;zt<ee.length;zt++){var Cr=0;switch(i){case Qr.EuclideanDistance:Cr=Gn(S[H],ee[zt],i);break;default:break}Cr<Mt&&(Mt=Cr,at=zt)}if(s[H].clusterId!==void 0)for(var jr=se[Number(s[H].clusterId)].length-1;jr>=0;jr--)se[Number(s[H].clusterId)][jr].id===s[H].id&&se[Number(s[H].clusterId)].splice(jr,1);s[H].clusterId=String(at),se[at].push(s[H])}}for(var kr=!1,H=0;H<se.length;H++){for(var yr=se[H],dn=new aa([]),zt=0;zt<yr.length;zt++)dn=dn.add(new aa(S[yr[zt].originIndex]));var un=dn.avg(yr.length);un.equal(new aa(ee[H]))||(kr=!0,ee[H]=un.getArr())}if(vt++,s.every(function(en){return en.clusterId!==void 0})&&kr||vt>=1e3)break}var br=[],zr={};return d.forEach(function(en){var Jr,yn,An=en.source,wa=en.target,Sa=(Jr=s.find(function(xi){return xi.id===An}))===null||Jr===void 0?void 0:Jr.clusterId,yi=(yn=s.find(function(xi){return xi.id===wa}))===null||yn===void 0?void 0:yn.clusterId,$a="".concat(Sa,"---").concat(yi);if(zr[$a])zr[$a].count++;else{var Ci={source:Sa,target:yi,count:1};zr[$a]=Ci,br.push(Ci)}}),{clusters:se,clusterEdges:br}},lt=Gt,Ht=function(t,e){var r=new aa(e),n=r.norm2(),a=new aa(t),i=a.norm2(),o=r.dot(a),s=n*i,l=s?o/s:0;return l},Ft=Ht,Ir=function(t,e,r,n,a){t===void 0&&(t=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=[]);var i=(0,u.clone)(t.filter(function(C){return C.id!==e.id})),o=t.findIndex(function(C){return C.id===e.id}),s=ar(t,r),l=On(s,n,a),d=l[o],p=[];return i.forEach(function(C,S){if(C.id!==e.id){var L=l[S],z=Ft(L,d);p.push(z),C.cosineSimilarity=z}}),i.sort(function(C,S){return S.cosineSimilarity-C.cosineSimilarity}),{allCosineSimilarity:p,similarNodes:i}},Sr=Ir,nn=function(){function f(t){this.count=t.length,this.parent={};for(var e=0,r=t;e<r.length;e++){var n=r[e];this.parent[n]=n}}return f.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},f.prototype.union=function(t,e){var r=this.find(t),n=this.find(e);r!==n&&(r<n?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},f.prototype.connected=function(t,e){return this.find(t)===this.find(e)},f}(),an=nn,qr=function(t,e){return t-e},le=function(){function f(t){t===void 0&&(t=qr),this.compareFn=t,this.list=[]}return f.prototype.getLeft=function(t){return 2*t+1},f.prototype.getRight=function(t){return 2*t+2},f.prototype.getParent=function(t){return t===0?null:Math.floor((t-1)/2)},f.prototype.isEmpty=function(){return this.list.length<=0},f.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},f.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},f.prototype.insert=function(t){if(t!==null){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},f.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var r=this.list[e];this.list[e]=this.list[t],this.list[t]=r,t=e,e=this.getParent(t)}},f.prototype.moveDown=function(t){var e,r=t,n=this.getLeft(t),a=this.getRight(t),i=this.list.length;n!==null&&n<i&&this.compareFn(this.list[r],this.list[n])>0?r=n:a!==null&&a<i&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),t!==r&&(e=[this.list[r],this.list[t]],this.list[t]=e[0],this.list[r]=e[1],this.moveDown(r))},f}(),ge=le,B=function(t,e){var r=[],n=t.nodes,a=n===void 0?[]:n,i=t.edges,o=i===void 0?[]:i;if(a.length===0)return r;var s=a[0],l=new Set;l.add(s);var d=function(H,ee){return e?H.weight-ee.weight:0},p=new ge(d);for(Ie(s.id,o).forEach(function(z){p.insert(z)});!p.isEmpty();){var C=p.delMin(),S=C.source,L=C.target;l.has(S)&&l.has(L)||(r.push(C),l.has(S)||(l.add(S),Ie(S,o).forEach(function(z){p.insert(z)})),l.has(L)||(l.add(L),Ie(L,o).forEach(function(z){p.insert(z)})))}return r},_=function(t,e){var r=[],n=t.nodes,a=n===void 0?[]:n,i=t.edges,o=i===void 0?[]:i;if(a.length===0)return r;var s=o.map(function(S){return S});e&&s.sort(function(S,L){return S.weight-L.weight});for(var l=new an(a.map(function(S){return S.id}));s.length>0;){var d=s.shift(),p=d.source,C=d.target;l.connected(p,C)||(r.push(d),l.union(p,C))}return r},M=function(t,e,r){var n={prim:B,kruskal:_};return r?n[r](t,e):_(t,e)},$=M,Ee=function(t,e,r){typeof e!="number"&&(e=1e-6),typeof r!="number"&&(r=.85);for(var n=1,a=0,i=1e3,o=t.nodes,s=o===void 0?[]:o,l=t.edges,d=l===void 0?[]:l,p=s.length,C,S={},L={},z=0;z<p;++z){var H=s[z],ee=H.id;S[ee]=1/p,L[ee]=1/p}for(var ie=Je(t);i>0&&n>e;){a=0;for(var z=0;z<p;++z){var H=s[z],ee=H.id;if(C=0,ie[H.id].inDegree===0)S[ee]=0;else{for(var se=ce(ee,d,"source"),ye=0;ye<se.length;++ye){var Ce=se[ye],Re=ie[Ce].outDegree;Re>0&&(C+=L[Ce]/Re)}S[ee]=r*C,a+=S[ee]}}a=(1-a)/p,n=0;for(var z=0;z<p;++z){var H=s[z],ee=H.id;C=S[ee]+a,n+=Math.abs(C-L[ee]),L[ee]=C}i-=1}return L},Ne=Ee,Le=-1,Ye=-1,Ot="-1",Et="-1",Zt=-1,Lr="-1",or=function(){function f(t,e,r,n){t===void 0&&(t=Le),e===void 0&&(e=Ye),r===void 0&&(r=Ye),n===void 0&&(n=Ot),this.id=t,this.from=e,this.to=r,this.label=n}return f}(),$r=function(){function f(t,e){t===void 0&&(t=Ye),e===void 0&&(e=Et),this.id=t,this.label=e,this.edges=[],this.edgeMap={}}return f.prototype.addEdge=function(t){this.edges.push(t),this.edgeMap[t.id]=t},f}(),Sn=function(){function f(t,e,r){t===void 0&&(t=Ye),e===void 0&&(e=!0),r===void 0&&(r=!1),this.id=t,this.edgeIdAutoIncrease=e,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return f.prototype.getNodeNum=function(){return this.nodes.length},f.prototype.addNode=function(t,e){if(!this.nodeMap[t]){var r=new $r(t,e);this.nodes.push(r),this.nodeMap[t]=r,this.nodeLabelMap[e]||(this.nodeLabelMap[e]=[]),this.nodeLabelMap[e].push(t)}},f.prototype.addEdge=function(t,e,r,n){if((this.edgeIdAutoIncrease||t===void 0)&&(t=this.counter++),!(this.nodeMap[e]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[t])){var a=new or(t,e,r,n);if(this.edges.push(a),this.edgeMap[t]=a,this.nodeMap[e].addEdge(a),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(a),!this.directed){var i=new or(t,r,e,n);this.nodeMap[r].addEdge(i),this.edgeLabelMap[n].push(i)}}},f}(),kt=function(){function f(t,e,r,n,a){this.fromNode=t,this.toNode=e,this.nodeEdgeNodeLabel={nodeLabel1:r||Et,edgeLabel:n||Ot,nodeLabel2:a||Et}}return f.prototype.equalTo=function(t){return this.fromNode===t.formNode&&this.toNode===t.toNode&&this.nodeEdgeNodeLabel===t.nodeEdgeNodeLabel},f.prototype.notEqualTo=function(t){return!this.equalTo(t)},f}(),nr=function(){function f(){this.rmpath=[],this.dfsEdgeList=[]}return f.prototype.equalTo=function(t){var e=this.dfsEdgeList.length,r=t.length;if(e!==r)return!1;for(var n=0;n<e;n++)if(this.dfsEdgeList[n]!==t[n])return!1;return!0},f.prototype.notEqualTo=function(t){return!this.equalTo(t)},f.prototype.pushBack=function(t,e,r,n,a){return this.dfsEdgeList.push(new kt(t,e,r,n,a)),this.dfsEdgeList},f.prototype.toGraph=function(t,e){t===void 0&&(t=Zt),e===void 0&&(e=!1);var r=new Sn(t,!0,e);return this.dfsEdgeList.forEach(function(n){var a=n.fromNode,i=n.toNode,o=n.nodeEdgeNodeLabel,s=o.nodeLabel1,l=o.edgeLabel,d=o.nodeLabel2;s!==Et&&r.addNode(a,s),d!==Et&&r.addNode(i,d),s!==Et&&d!==s&&r.addEdge(void 0,a,i,l)}),r},f.prototype.buildRmpath=function(){this.rmpath=[];for(var t=void 0,e=this.dfsEdgeList.length,r=e-1;r>=0;r--){var n=this.dfsEdgeList[r],a=n.fromNode,i=n.toNode;a<i&&(t===void 0||i===t)&&(this.rmpath.push(r),t=a)}return this.rmpath},f.prototype.getNodeNum=function(){var t={};return this.dfsEdgeList.forEach(function(e){t[e.fromNode]||(t[e.fromNode]=!0),t[e.toNode]||(t[e.toNode]=!0)}),Object.keys(t).length},f}(),_r=function(){function f(t){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!t){for(;t;){var e=t.edge;this.edges.push(e),this.nodesUsed[e.from]=1,this.nodesUsed[e.to]=1,this.edgesUsed[e.id]=1,t=t.preNode}this.edges=this.edges.reverse()}}return f.prototype.hasNode=function(t){return this.nodesUsed[t.id]===1},f.prototype.hasEdge=function(t){return this.edgesUsed[t.id]===1},f}(),Fr=function(){function f(t){var e=t.graphs,r=t.minSupport,n=r===void 0?2:r,a=t.minNodeNum,i=a===void 0?1:a,o=t.maxNodeNum,s=o===void 0?4:o,l=t.top,d=l===void 0?10:l,p=t.directed,C=p===void 0?!1:p,S=t.verbose,L=S===void 0?!1:S;this.graphs=e,this.dfsCode=new nr,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=d,this.directed=C,this.counter=0,this.maxNodeNum=s,this.minNodeNum=i,this.verbose=L,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return f.prototype.findForwardRootEdges=function(t,e){var r=this,n=[],a=t.nodeMap;return e.edges.forEach(function(i){(r.directed||e.label<=a[i.to].label)&&n.push(i)}),n},f.prototype.findBackwardEdge=function(t,e,r,n){if(!this.directed&&e===r)return null;for(var a=t.nodeMap,i=a[r.to],o=i.edges,s=o.length,l=0;l<s;l++){var d=o[l];if(!(n.hasEdge(d)||d.to!==e.from)){if(this.directed){if(a[e.from].label<a[r.to].label||a[e.from].label===a[r.to].label&&e.label<=d.label)return d}else if(e.label<d.label||e.label===d.label&&a[e.to].label<=a[r.to].label)return d}}return null},f.prototype.findForwardPureEdges=function(t,e,r,n){for(var a=[],i=e.to,o=t.nodeMap[i].edges,s=o.length,l=0;l<s;l++){var d=o[l],p=t.nodeMap[d.to];r<=p.label&&!n.hasNode(p)&&a.push(d)}return a},f.prototype.findForwardRmpathEdges=function(t,e,r,n){for(var a=[],i=t.nodeMap,o=i[e.to].label,s=i[e.from],l=s.edges,d=l.length,p=0;p<d;p++){var C=l[p],S=i[C.to].label;e.to===C.to||r>S||n.hasNode(i[C.to])||(e.label<C.label||e.label===C.label&&o<=S)&&a.push(C)}return a},f.prototype.getSupport=function(t){var e={};return t.forEach(function(r){e[r.graphId]||(e[r.graphId]=!0)}),Object.keys(e).length},f.prototype.findMinLabel=function(t){var e=void 0;return Object.keys(t).forEach(function(r){var n=t[r],a=n.nodeLabel1,i=n.edgeLabel,o=n.nodeLabel2;if(!e){e={nodeLabel1:a,edgeLabel:i,nodeLabel2:o};return}(a<e.nodeLabel1||a===e.nodeLabel1&&i<e.edgeLabel||a===e.nodeLabel1&&i===e.edgeLabel&&o<e.nodeLabel2)&&(e={nodeLabel1:a,edgeLabel:i,nodeLabel2:o})}),e},f.prototype.isMin=function(){var t=this,e=this.dfsCode;if(this.verbose&&console.log("isMin checking",e),e.dfsEdgeList.length===1)return!0;var r=this.directed,n=e.toGraph(Zt,r),a=n.nodeMap,i=new nr,o={};n.nodes.forEach(function(p){var C=t.findForwardRootEdges(n,p);C.forEach(function(S){var L=a[S.to],z="".concat(p.label,"-").concat(S.label,"-").concat(L.label);o[z]||(o[z]={projected:[],nodeLabel1:p.label,edgeLabel:S.label,nodeLabel2:L.label});var H={graphId:n.id,edge:S,preNode:null};o[z].projected.push(H)})});var s=this.findMinLabel(o);if(s){i.dfsEdgeList.push(new kt(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var l=function p(C){for(var S=i.buildRmpath(),L=i.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,z=i.dfsEdgeList[S[0]].toNode,H={},ee=!1,ie=0,se=r?-1:0,ye=function(dn){if(ee)return"break";C.forEach(function(un){var br=new _r(un),zr=t.findBackwardEdge(n,br.edges[S[dn]],br.edges[S[0]],br);zr&&(H[zr.label]||(H[zr.label]={projected:[],edgeLabel:zr.label}),H[zr.label].projected.push({graphId:n.id,edge:H,preNode:un}),ie=i.dfsEdgeList[S[dn]].fromNode,ee=!0)})},Ce=S.length-1;Ce>se;Ce--){var Re=ye(Ce);if(Re==="break")break}if(ee){var ke=t.findMinLabel(H);i.dfsEdgeList.push(new kt(z,ie,Et,ke.edgeLabel,Et));var et=i.dfsEdgeList.length-1;return t.dfsCode.dfsEdgeList[et]!==i.dfsEdgeList[et]?!1:p(H[ke.edgeLabel].projected)}var vt={};ee=!1;var at=0;C.forEach(function(yr){var dn=new _r(yr),un=t.findForwardPureEdges(n,dn.edges[S[0]],L,dn);un.length>0&&(ee=!0,at=z,un.forEach(function(br){var zr="".concat(br.label,"-").concat(a[br.to].label);vt[zr]||(vt[zr]={projected:[],edgeLabel:br.label,nodeLabel2:a[br.to].label}),vt[zr].projected.push({graphId:n.id,edge:br,preNode:yr})}))});for(var Mt=S.length,zt=function(dn){if(ee)return"break";var un=S[dn];C.forEach(function(br){var zr=new _r(br),en=t.findForwardRmpathEdges(n,zr.edges[un],L,zr);en.length>0&&(ee=!0,at=i.dfsEdgeList[un].fromNode,en.forEach(function(Jr){var yn="".concat(Jr.label,"-").concat(a[Jr.to].label);vt[yn]||(vt[yn]={projected:[],edgeLabel:Jr.label,nodeLabel2:a[Jr.to].label}),vt[yn].projected.push({graphId:n.id,edge:Jr,preNode:br})}))})},Ce=0;Ce<Mt;Ce++){var Cr=zt(Ce);if(Cr==="break")break}if(!ee)return!0;var jr=t.findMinLabel(vt);i.dfsEdgeList.push(new kt(at,z+1,Et,jr.edgeLabel,jr.nodeLabel2));var kr=i.dfsEdgeList.length-1;return e.dfsEdgeList[kr]!==i.dfsEdgeList[kr]?!1:p(vt["".concat(jr.edgeLabel,"-").concat(jr.nodeLabel2)].projected)},d="".concat(s.nodeLabel1,"-").concat(s.edgeLabel,"-").concat(s.nodeLabel2);return l(o[d].projected)}},f.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var t=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,u.clone)(t))}},f.prototype.subGraphMining=function(t){var e=this,r=this.getSupport(t);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),i=this.dfsCode.dfsEdgeList[a[0]].toNode,o=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,s={},l={};t.forEach(function(d){for(var p=e.graphs[d.graphId],C=p.nodeMap,S=new _r(d),L=a.length-1;L>=0;L--){var z=e.findBackwardEdge(p,S.edges[a[L]],S.edges[a[0]],S);if(z){var H="".concat(e.dfsCode.dfsEdgeList[a[L]].fromNode,"-").concat(z.label);l[H]||(l[H]={projected:[],toNodeId:e.dfsCode.dfsEdgeList[a[L]].fromNode,edgeLabel:z.label}),l[H].projected.push({graphId:d.graphId,edge:z,preNode:d})}}if(!(n>=e.maxNodeNum)){var ee=e.findForwardPureEdges(p,S.edges[a[0]],o,S);ee.forEach(function(se){var ye="".concat(i,"-").concat(se.label,"-").concat(C[se.to].label);s[ye]||(s[ye]={projected:[],fromNodeId:i,edgeLabel:se.label,nodeLabel2:C[se.to].label}),s[ye].projected.push({graphId:d.graphId,edge:se,preNode:d})});for(var ie=function(ye){var Ce=e.findForwardRmpathEdges(p,S.edges[a[ye]],o,S);Ce.forEach(function(Re){var ke="".concat(e.dfsCode.dfsEdgeList[a[ye]].fromNode,"-").concat(Re.label,"-").concat(C[Re.to].label);s[ke]||(s[ke]={projected:[],fromNodeId:e.dfsCode.dfsEdgeList[a[ye]].fromNode,edgeLabel:Re.label,nodeLabel2:C[Re.to].label}),s[ke].projected.push({graphId:d.graphId,edge:Re,preNode:d})})},L=0;L<a.length;L++)ie(L)}}),Object.keys(l).forEach(function(d){var p=l[d],C=p.toNodeId,S=p.edgeLabel;e.dfsCode.dfsEdgeList.push(new kt(i,C,"-1",S,"-1")),e.subGraphMining(l[d].projected),e.dfsCode.dfsEdgeList.pop()}),Object.keys(s).forEach(function(d){var p=s[d],C=p.fromNodeId,S=p.edgeLabel,L=p.nodeLabel2;e.dfsCode.dfsEdgeList.push(new kt(C,i+1,Et,S,L)),e.subGraphMining(s[d].projected),e.dfsCode.dfsEdgeList.pop()})}},f.prototype.generate1EdgeFrequentSubGraphs=function(){var t=this.graphs,e=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,a={},i={},o={},s={};return Object.keys(t).forEach(function(l){var d=t[l],p=d.nodeMap;d.nodes.forEach(function(C,S){var L=C.label,z="".concat(l,"-").concat(L);if(!o[z]){var H=a[L]||0;H++,a[L]=H}o[z]={graphKey:l,label:L},C.edges.forEach(function(ee){var ie=L,se=p[ee.to].label;if(!e&&ie>se){var ye=se;se=ie,ie=ye}var Ce=ee.label,Re="".concat(l,"-").concat(ie,"-").concat(Ce,"-").concat(se),ke="".concat(ie,"-").concat(Ce,"-").concat(se);if(!i[ke]){var et=i[ke]||0;et++,i[ke]=et}s[Re]={graphId:l,nodeLabel1:ie,edgeLabel:Ce,nodeLabel2:se}})})}),Object.keys(a).forEach(function(l){var d=a[l];if(!(d<r)){var p={nodes:[],edges:[]};p.nodes.push({id:"0",label:l}),n.push(p)}}),n},f.prototype.run=function(){var t=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var e=this.graphs,r=this.directed,n={};Object.keys(e).forEach(function(a){var i=e[a],o=i.nodeMap;i.nodes.forEach(function(s){var l=t.findForwardRootEdges(i,s);l.forEach(function(d){var p=o[d.to],C="".concat(s.label,"-").concat(d.label,"-").concat(p.label);n[C]||(n[C]={projected:[],nodeLabel1:s.label,edgeLabel:d.label,nodeLabel2:p.label});var S={graphId:a,edge:d,preNode:null};n[C].projected.push(S)})})}),Object.keys(n).forEach(function(a){var i=n[a],o=i.projected,s=i.nodeLabel1,l=i.edgeLabel,d=i.nodeLabel2;t.dfsCode.dfsEdgeList.push(new kt(0,1,s,l,d)),t.subGraphMining(o),t.dfsCode.dfsEdgeList.pop()})}},f}(),He=function(t,e,r,n){var a={};return Object.keys(t).forEach(function(i,o){var s=t[i],l=new Sn(o,!0,e),d={};s.nodes.forEach(function(p,C){l.addNode(C,p[r]),d[p.id]=C}),s.edges.forEach(function(p,C){var S=d[p.source],L=d[p.target];l.addEdge(-1,S,L,p[n])}),l&&l.getNodeNum()&&(a[l.id]=l)}),a},Ae=function(t,e,r){var n=[];return t.forEach(function(a){var i={nodes:[],edges:[]};a.nodes.forEach(function(o){var s;i.nodes.push((s={id:"".concat(o.id)},s[e]=o.label,s))}),a.edges.forEach(function(o){var s;i.edges.push((s={source:"".concat(o.from),target:"".concat(o.to)},s[r]=o.label,s))}),n.push(i)}),n},Qe="cluster",ft=function(t){var e=t.graphs,r=t.directed,n=r===void 0?!1:r,a=t.nodeLabelProp,i=a===void 0?Qe:a,o=t.edgeLabelProp,s=o===void 0?Qe:o,l=He(e,n,i,s),d=t.minSupport,p=t.maxNodeNum,C=t.minNodeNum,S=t.verbose,L=t.top,z={graphs:l,minSupport:d,maxNodeNum:p,minNodeNum:C,top:L,verbose:S,directed:n},H=new Fr(z);H.run();var ee=Ae(H.frequentSubgraphs,i,s);return ee},ut=ft,St=function(t,e,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var a=[],i=t.nodes;return e.forEach(function(o,s){a.push(Qt(i,o,s,r,n))}),a},Qt=function(t,e,r,n,a){var i=[r],o=[],s={};return e.forEach(function(l,d){if(l<=a&&r!==d){i.push(d),o.push(t[d]);var p=t[d][n];s[p]?(s[p].count++,s[p].dists.push(l)):s[p]={count:1,dists:[l]}}}),Object.keys(s).forEach(function(l){s[l].dists=s[l].dists.sort(function(d,p){return d-p})}),{nodeIdx:r,nodeId:t[r].id,nodeIdxs:i,neighbors:o,neighborNum:i.length-1,nodeLabelCountMap:s}},qt=function(t,e,r,n,a){var i=Math.ceil(r/e),o={},s=0;return n.forEach(function(l,d){for(var p=0,C=0,S=l.nodeIdxs,L=l.neighborNum-1;p<i;){for(var z=S[1+Math.floor(Math.random()*L)],H=0;(o["".concat(d,"-").concat(z)]||o["".concat(z,"-").concat(d)])&&(z=Math.floor(Math.random()*e),H++,!(H>2*e)););if(H<2*e&&(o["".concat(d,"-").concat(z)]={start:d,end:z,distance:a[d][z]},p++,s++,s>=r))return o;if(C++,C>2*e)break}if(p<i){var ee=i-p;i=(i+ee)/(e-d-1)}}),o},Xr=function(t,e,r,n){var a=r.nodes;return n||(n={}),Object.keys(t).forEach(function(i){var o,s;if(!(n&&n[i])){n[i]={nodes:[],edges:[]};var l=t[i],d=(o=e[l.start])===null||o===void 0?void 0:o.nodeIdxs,p=(s=e[l.end])===null||s===void 0?void 0:s.nodeIdxs;if(!(!d||!p)){var C=new Set(p),S=d.filter(function(ie){return C.has(ie)});if(!(!S||!S.length)){for(var L={},z=S.length,H=0;H<z;H++){var ee=a[S[H]];n[i].nodes.push(ee),L[ee.id]=!0}r.edges.forEach(function(ie){L[ie.source]&&L[ie.target]&&n[i].edges.push(ie)})}}}}),n},vn=function(t,e,r,n){var a,i,o={};t.nodes.forEach(function(l){o[l.id]=l});var s=0;return!(!((a=e==null?void 0:e.edges)===null||a===void 0)&&a.length)||((i=e==null?void 0:e.nodes)===null||i===void 0?void 0:i.length)<2?0:(t.edges.forEach(function(l){var d=o[l.source][r],p=o[l.target][r],C=e==null?void 0:e.nodes[0][r],S=e==null?void 0:e.nodes[1][r],L=e==null?void 0:e.edges[0][n];l[n]===L&&(d===C&&p===S||d===S&&p===C)&&s++}),s)},fn=function(t,e,r){for(var n=1/0,a=0,i=function(l){var d=t[l],p=Object.keys(d).sort(function(ie,se){return d[ie]-d[se]}),C=10,S=[];p.forEach(function(ie,se){S[se%C]||(S[se%C]={graphs:[],totalCount:0,aveCount:0}),S[se%C].graphs.push(ie),S[se%C].totalCount+=d[ie]});var L=0,z=[];S.forEach(function(ie){var se=ie.totalCount/ie.graphs.length;ie.aveCount=se,z.push(se);var ye=0,Ce=ie.length;ie.graphs.forEach(function(Re,ke){var et=d[Re];ie.graphs.forEach(function(vt,at){ke!==at&&(ye+=Math.abs(et-d[vt]))})}),ye/=Ce*(Ce-1)/2,L+=ye}),L/=S.length;var H=0;z.forEach(function(ie,se){z.forEach(function(ye,Ce){se!==Ce&&(H+=Math.abs(ie-ye))}),H/=z.length*(z.length-1)/2});var ee=H-L;n<ee&&(n=ee,a=l)},o=0;o<e;o++)i(o);return{structure:r[a],structureCountMap:t[a]}},Hn=function(t,e){var r={},n={};return t.forEach(function(a,i){r[a.id]={idx:i,node:a,degree:0,inDegree:0,outDegree:0};var o=a[e];n[o]||(n[o]=[]),n[o].push(a)}),{nodeMap:r,nodeLabelMap:n}},kn=function(t,e,r){var n={},a={};return t.forEach(function(i,o){n["".concat(Pe)]={idx:o,edge:i};var s=i[e];a[s]||(a[s]=[]),a[s].push(i);var l=r[i.source];l&&(l.degree++,l.outDegree++);var d=r[i.target];d&&(d.degree++,d.inDegree++)}),{edgeMap:n,edgeLabelMap:a}},da=function(t,e,r){var n=e.length,a={};return e.forEach(function(i,o){for(var s=r?0:o+1,l=t[o].id,d=s;d<n;d++)if(o!==d){var p=t[d].id,C=i[d];a["".concat(l,"-").concat(p)]=C,r||(a["".concat(p,"-").concat(l)]=C)}}),a},ka=function(t,e,r,n,a,i,o,s,l,d,p){var C,S="".concat(e.id,"-").concat(r.id);if(d&&d[S])return d[S];var L=p?p[S]:void 0;if(!L){var z=(C={},C[S]={start:n[e.id].idx,end:n[r.id].idx,distance:a},C);p=Xr(z,i,t,p),L=p[S]}return vn(L,o,s,l)},Ra=function(t,e,r,n){var a,i,o,s=(a=t[e])===null||a===void 0?void 0:a.degree,l=(i=t[e])===null||i===void 0?void 0:i.inDegree,d=(o=t[e])===null||o===void 0?void 0:o.outDegree;return t[e]===void 0&&(s=1/0,l=1/0,d=1/0,n[e].forEach(function(p){var C=r[p.id].degree;s>C&&(s=C);var S=r[p.id].inDegree;l>S&&(l=S);var L=r[p.id].outDegree;d>L&&(d=L)}),t[e]={degree:s,inDegree:l,outDegree:d}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:d}},Aa=function(t,e,r,n,a,i,o){var s;if(r===void 0&&(r=!1),i===void 0&&(i="cluster"),o===void 0&&(o="cluster"),!(!t||!t.nodes)){var l=t.nodes.length;if(l){var d=Nr(t,r),p=Nr(e,r),C=da(t.nodes,d,r),S=da(e.nodes,p,r),L=Hn(t.nodes,i),z=L.nodeMap,H=L.nodeLabelMap,ee=Hn(e.nodes,i),ie=ee.nodeMap,se=ee.nodeLabelMap;kn(t.edges,o,z);var ye=kn(e.edges,o,ie).edgeLabelMap,Ce=[];p==null||p.forEach(function(La){Ce=Ce.concat(La)}),a||(a=Math.max.apply(Math,(0,v.__spreadArray)((0,v.__spreadArray)([],Ce,!1),[2],!1))),n||(n=a);var Re=St(t,d,i,n),ke=St(e,p,i,n),et=Math.min(100,l*(l-1)/2),vt=qt(n,l,et,Re,d),at=Xr(vt,Re,t),Mt=10,zt=1,Cr=1,jr=4,kr={graphs:at,nodeLabelProp:i,edgeLabelProp:o,minSupport:zt,minNodeNum:Cr,maxNodeNum:jr,directed:r},yr=ut(kr).slice(0,Mt),dn=yr.length,un=[];yr.forEach(function(La,ri){un[ri]={},Object.keys(at).forEach(function(Ia){var ni=at[Ia],wi=vn(ni,La,i,o);un[ri][Ia]=wi})});var br=fn(un,dn,yr),zr=br.structure,en=br.structureCountMap,Jr=e.nodes[0],yn=[],An=(s=e.nodes[0])===null||s===void 0?void 0:s[i],wa=-1/0;e.nodes.forEach(function(La){var ri=La[i],Ia=H[ri];(Ia==null?void 0:Ia.length)>wa&&(wa=Ia.length,yn=Ia,An=ri,Jr=La)});var Sa={},yi={},$a={},Ci={},xi={},Vi={};Object.keys(se).forEach(function(La,ri){xi[La]=[],r&&(Vi[La]=[]);var Ia=-1/0,ni=se[La],wi={};ni.forEach(function(Ua){var Za=S["".concat(Jr.id,"-").concat(Ua.id)];if(Za&&xi[La].push(Za),Ia<Za&&(Ia=Za),wi["".concat(Jr.id,"-").concat(Ua.id)]={start:0,end:ie[Ua.id].idx,distance:Za},r){var Yi=S["".concat(Ua.id,"-").concat(Jr.id)];Yi&&Vi[La].push(Yi)}}),xi[La]=xi[La].sort(function(Ua,Za){return Ua-Za}),r&&(Vi[La]=Vi[La].sort(function(Ua,Za){return Ua-Za})),yi=Xr(wi,ke,e,yi);var Wn=[];if(Object.keys(wi).forEach(function(Ua){if($a[Ua]){Wn.push($a[Ua]);return}var Za=yi[Ua];$a[Ua]=vn(Za,zr,i,o),Wn.push($a[Ua])}),Wn=Wn.sort(function(Ua,Za){return Za-Ua}),Ci["".concat(Jr.id,"-").concat(La)]=Wn,La!==An)for(var Pa=(yn==null?void 0:yn.length)||0,Ba=function(Za){var Yi=yn[Za],eu=Re[z[Yi.id].idx],mo=eu.nodeLabelCountMap[La],zc=se[La].length;if(!mo||mo.count<zc)return yn.splice(Za,1),"continue";for(var cl=!1,ws=0;ws<zc;ws++)if(mo.dists[ws]>xi[La][ws]){cl=!0;break}if(cl)return yn.splice(Za,1),"continue";var mu={};eu.neighbors.forEach(function(Ss){var Uu=C["".concat(Yi.id,"-").concat(Ss.id)];mu["".concat(Yi.id,"-").concat(Ss.id)]={start:z[Yi.id].idx,end:z[Ss.id].idx,distance:Uu}}),at=Xr(mu,Re,t,at);var of=[];Object.keys(mu).forEach(function(Ss){if(en[Ss]){of.push(en[Ss]);return}var Uu=at[Ss];en[Ss]=vn(Uu,zr,i,o),of.push(en[Ss])}),of=of.sort(function(Ss,Uu){return Uu-Ss});for(var ac=!1,ws=0;ws<zc;ws++)if(of[ws]<Wn[ws]){ac=!0;break}if(ac)return yn.splice(Za,1),"continue"},Si=Pa-1;Si>=0;Si--)Ba(Si)});var Ti=[];yn==null||yn.forEach(function(La){for(var ri=z[La.id].idx,Ia=Qt(t.nodes,d[ri],ri,i,a),ni=Ia.neighbors,wi=ni.length,Wn=!1,Pa=wi-1;Pa>=0;Pa--){if(ni.length+1<e.nodes.length){Wn=!0;return}var Ba=ni[Pa],Si=Ba[i];if(!se[Si]||!se[Si].length){ni.splice(Pa,1);continue}if(!xi[Si]||!xi[Si].length){ni.splice(Pa,1);continue}var Ua="".concat(La.id,"-").concat(Ba.id),Za=C[Ua],Yi=xi[Si].length-1,eu=xi[Si][Yi];if(Za>eu){ni.splice(Pa,1);continue}if(r){var mo="".concat(Ba.id,"-").concat(La.id),zc=C[mo];Yi=Vi[Si].length-1;var cl=Vi[Si][Yi];if(zc>cl){ni.splice(Pa,1);continue}}var ws=en[Ua]?en[Ua]:ka(t,La,Ba,z,Za,Re,zr,i,o,en,at),mu="".concat(Jr.id,"-").concat(Si),of=Ci[mu][Ci[mu].length-1];if(ws<of){ni.splice(Pa,1);continue}var ac=Ra(Sa,Si,ie,se),Ss=ac.minPatternNodeLabelDegree,Uu=ac.minPatternNodeLabelInDegree,If=ac.minPatternNodeLabelOutDegree;if(z[Ba.id].degree<Ss){ni.splice(Pa,1);continue}}Wn||Ti.push({nodes:[La].concat(ni)})});var pu=mr(e,Jr.id,!1).length,Io={};r?(Object.keys(pu).forEach(function(La){var ri=ie[La].node[i];Io[ri]?Io[ri].push(pu[La]):Io[ri]=[pu[La]]}),Object.keys(Io).forEach(function(La){Io[La].sort(function(ri,Ia){return ri-Ia})})):Io=xi;for(var yu=Ti.length,Ao=function(ri){var Ia=Ti[ri],ni=Ia.nodes[0],wi={},Wn={};Ia.nodes.forEach(function(zi,tu){Wn[zi.id]={idx:tu,node:zi,degree:0,inDegree:0,outDegree:0};var Bo=zi[i];wi[Bo]?wi[Bo]++:wi[Bo]=1});var Pa=[],Ba={};t.edges.forEach(function(zi){Wn[zi.source]&&Wn[zi.target]&&(Pa.push(zi),Ba[zi[o]]?Ba[zi[o]]++:Ba[zi[o]]=1,Wn[zi.source].degree++,Wn[zi.target].degree++,Wn[zi.source].outDegree++,Wn[zi.target].inDegree++)});for(var Si=Object.keys(ye).length,Ua=!1,Za=0;Za<Si;Za++){var Yi=Object.keys(ye)[Za];if(!Ba[Yi]||Ba[Yi]<ye[Yi].length){Ua=!0;break}}if(Ua)return Ti.splice(ri,1),"continue";var eu=Pa.length;if(eu<e.edges.length)return Ti.splice(ri,1),"break";for(var mo=!1,zc=function(tu){var Bo=Pa[tu],sf=Bo[o],Uc=ye[sf];if(!Uc||!Uc.length)return Ba[sf]--,Uc&&Ba[sf]<Uc.length?(mo=!0,"break"):(Pa.splice(tu,1),Wn[Bo.source].degree--,Wn[Bo.target].degree--,Wn[Bo.source].outDegree--,Wn[Bo.target].inDegree--,"continue");var Zd=Wn[Bo.source].node[i],Kd=Wn[Bo.target].node[i],td=!1;if(Uc.forEach(function($d){var Qd=ie[$d.source].node,qd=ie[$d.target].node;Qd[i]===Zd&&qd[i]===Kd&&(td=!0),!r&&Qd[i]===Kd&&qd[i]===Zd&&(td=!0)}),!td)return Ba[sf]--,Uc&&Ba[sf]<Uc.length?(mo=!0,"break"):(Pa.splice(tu,1),Wn[Bo.source].degree--,Wn[Bo.target].degree--,Wn[Bo.source].outDegree--,Wn[Bo.target].inDegree--,"continue")},Za=eu-1;Za>=0;Za--){var cl=zc(Za);if(cl==="break")break}if(mo)return Ti.splice(ri,1),"continue";Ia.edges=Pa;var ws=mr(Ia,Ia.nodes[0].id,!1).length;if(Object.keys(ws).reverse().forEach(function(zi){if(!(zi===Ia.nodes[0].id||mo)){if(ws[zi]===1/0){var tu=Wn[zi].node[i];if(wi[tu]--,wi[tu]<se[tu].length){mo=!0;return}var Bo=Ia.nodes.indexOf(Wn[zi].node);Ia.nodes.splice(Bo,1),Wn[zi]=void 0;return}var sf=z[zi].node[i];if(!Io[sf]||!Io[sf].length||ws[zi]>Io[sf][Io[sf].length-1]){var tu=Wn[zi].node[i];if(wi[tu]--,wi[tu]<se[tu].length){mo=!0;return}var Bo=Ia.nodes.indexOf(Wn[zi].node);Ia.nodes.splice(Bo,1),Wn[zi]=void 0}}}),mo)return Ti.splice(ri,1),"continue";for(var mu=!0,of=0;mu&&!mo;){mu=!1;var ac=r?Wn[ni.id].degree<ie[Jr.id].degree||Wn[ni.id].inDegree<ie[Jr.id].inDegree||Wn[ni.id].outDegree<ie[Jr.id].outDegree:Wn[ni.id].degree<ie[Jr.id].degree;if(ac){mo=!0;break}if(wi[ni[i]]<se[ni[i]].length){mo=!0;break}for(var Ss=Ia.nodes.length,Uu=Ss-1;Uu>=0;Uu--){var If=Ia.nodes[Uu],jd=Wn[If.id].degree,Ig=Wn[If.id].inDegree,Ag=Wn[If.id].outDegree,Og=If[i],ed=Ra(Sa,Og,ie,se),Hd=ed.minPatternNodeLabelDegree,Lg=ed.minPatternNodeLabelInDegree,Dg=ed.minPatternNodeLabelOutDegree,Ng=r?jd<Hd||Ig<Lg||Ag<Dg:jd<Hd;if(Ng){if(wi[If[i]]--,wi[If[i]]<se[If[i]].length){mo=!0;break}Ia.nodes.splice(Uu,1),Wn[If.id]=void 0,mu=!0}}if(mo||!mu&&of!==0)break;eu=Pa.length;for(var Fl=eu-1;Fl>=0;Fl--){var Af=Pa[Fl];if(!Wn[Af.source]||!Wn[Af.target]){Pa.splice(Fl,1);var Gl=Af[o];if(Ba[Gl]--,Wn[Af.source]&&(Wn[Af.source].degree--,Wn[Af.source].outDegree--),Wn[Af.target]&&(Wn[Af.target].degree--,Wn[Af.target].inDegree--),ye[Gl]&&Ba[Gl]<ye[Gl].length){mo=!0;break}mu=!0}}of++}if(mo||mo||Ia.nodes.length<e.nodes.length||Pa.length<e.edges.length)return Ti.splice(ri,1),"continue"},Oo=yu-1;Oo>=0;Oo--){var Js=Ao(Oo);if(Js==="break")break}for(var Jo=Ti.length,xs=function(ri){var Ia=Ti[ri],ni={};Ia.edges.forEach(function(Pa){var Ba="".concat(Pa.source,"-").concat(Pa.target,"-").concat(Pa.label);ni[Ba]?ni[Ba]++:ni[Ba]=1});for(var wi=function(Ba){var Si=Ti[Ba],Ua={};Si.edges.forEach(function(Yi){var eu="".concat(Yi.source,"-").concat(Yi.target,"-").concat(Yi.label);Ua[eu]?Ua[eu]++:Ua[eu]=1});var Za=!0;Object.keys(Ua).length!==Object.keys(ni).length?Za=!1:Object.keys(ni).forEach(function(Yi){Ua[Yi]!==ni[Yi]&&(Za=!1)}),Za&&Ti.splice(Ba,1)},Wn=Jo-1;Wn>ri;Wn--)wi(Wn);Jo=Ti.length},Oo=0;Oo<=Jo-1;Oo++)xs(Oo);return Ti}}},Eo=Aa,_i=function(){function f(t){t===void 0&&(t=10),this.linkedList=new q,this.maxStep=t}return Object.defineProperty(f.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),f.prototype.isEmpty=function(){return!this.linkedList.head},f.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},f.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},f.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},f.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},f.prototype.toArray=function(){return this.linkedList.toArray().map(function(t){return t.value})},f.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},f}(),qa=_i,Qi=$t,fs={getAdjMatrix:X,breadthFirstSearch:ve,connectedComponent:We,getDegree:Je,getInDegree:mt,getOutDegree:xt,detectCycle:$t,detectDirectedCycle:Qi,detectAllCycles:Kt,detectAllDirectedCycle:ct,detectAllUndirectedCycle:yt,depthFirstSearch:gt,dijkstra:mr,findAllPath:Dn,findShortestPath:Dr,floydWarshall:Nr,labelPropagation:Vn,louvain:mn,iLouvain:Jn,kCore:ma,kMeans:lt,cosineSimilarity:Ft,nodesCosineSimilarity:Sr,minimumSpanningTree:$,pageRank:Ne,getNeighbors:ce,Stack:qa,GADDI:Eo},oo=G(77160),so=G(35600),Tr=G(31437),ro=J.vs,cs=function(t){return function(e,r){return e[t]-r[t]}},ja=function(t,e,r){return t>=e&&t<=r},bo=function(t,e,r,n){var a=1e-4,i={x:r.x-t.x,y:r.y-t.y},o={x:e.x-t.x,y:e.y-t.y},s={x:n.x-r.x,y:n.y-r.y},l=o.x*s.y-o.y*s.x,d=l*l,p=1/l,C=o.x*o.x+o.y*o.y,S=s.x*s.x+s.y*s.y;if(d>a*C*S){var L=(i.x*s.y-i.y*s.x)*p,z=(i.x*o.y-i.y*o.x)*p;return!ja(L,0,1)||!ja(z,0,1)?null:{x:t.x+L*o.x,y:t.y+L*o.y}}return null},Ho=function(t,e){var r=t.x,n=t.y,a=t.width,i=t.height,o=r+a/2,s=n+i/2,l=[],d={x:o,y:s};l.push({x:r,y:n}),l.push({x:r+a,y:n}),l.push({x:r+a,y:n+i}),l.push({x:r,y:n+i}),l.push({x:r,y:n});for(var p=null,C=1;C<l.length&&(p=bo(l[C-1],l[C],d,e),!p);C++);return p},Fo=function(t,e){var r=t.x,n=t.y,a=t.r,i=e.x,o=e.y,s=i-r,l=o-n;if(s*s+l*l<a*a)return null;var d=Math.atan(l/s);return{x:r+Math.abs(a*Math.cos(d))*Math.sign(s),y:n+Math.abs(a*Math.sin(d))*Math.sign(l)}},Ui=function(t,e){var r=t.rx,n=t.ry,a=t.x,i=t.y,o=e.x-a,s=e.y-i,l=Math.atan2(s/n,o/r);return l<0&&(l+=2*Math.PI),{x:a+r*Math.cos(l),y:i+n*Math.sin(l)}},Ni=function(t,e,r){r===void 0&&(r=1);var n=[t.x,t.y,r];return(!e||isNaN(e[0]))&&(e=[1,0,0,0,1,0,0,0,1]),oo.transformMat3(n,n,e),{x:n[0],y:n[1]}},_s=function(t,e,r){r===void 0&&(r=1),(!e||isNaN(e[0]))&&(e=[1,0,0,0,1,0,0,0,1]);var n=so.invert([1,0,0,0,1,0,0,0,1],e);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[t.x,t.y,r];return oo.transformMat3(a,a,n),{x:a[0],y:a[1]}},ls=function(t,e,r){var n=t.x-e.x,a=t.y-e.y,i=t.x-r.x,o=t.y-r.y,s=(t.x*t.x-e.x*e.x-e.y*e.y+t.y*t.y)/2,l=(t.x*t.x-r.x*r.x-r.y*r.y+t.y*t.y)/2,d=a*i-n*o;return{x:-(o*s-a*l)/d,y:-(n*l-i*s)/d}},mi=function(t,e){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)},qi=function(t,e){var r=[];return t.forEach(function(n){var a=[];n.forEach(function(i){a.push(i*e)}),r.push(a)}),r},Ms=function(t){for(var e=[],r=t.length,n=0;n<r;n+=1){e[n]=[];for(var a=0;a<r;a+=1)n===a?e[n][a]=0:t[n][a]===0||!t[n][a]?e[n][a]=1/0:e[n][a]=t[n][a]}for(var i=0;i<r;i+=1)for(var n=0;n<r;n+=1)for(var a=0;a<r;a+=1)e[n][a]>e[n][i]+e[i][a]&&(e[n][a]=e[n][i]+e[i][a]);return e},Cs=function(t,e){var r=t.nodes,n=t.edges,a=[],i={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(o,s){i[o.id]=s;var l=[];a.push(l)}),n&&n.forEach(function(o){var s=o.source,l=o.target,d=i[s],p=i[l];a[d][p]=1,e||(a[p][d]=1)}),a},Lo=function(t,e){t.translate(e.x,e.y)},uo=function(t,e,r,n){n===void 0&&(n={duration:500});var a=t.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var i=t.getCanvasBBox(),o=e.x-i.minX,s=e.y-i.minY;if(r){var l=o*a[0],d=s*a[4],p=0,C=0,S=0,L=0;t.animate(function(H){return S=l*H,L=d*H,a=ro(a,[["t",S-p,L-C]]),p=S,C=L,{matrix:a}},n)}else{var z=ro(a,[["t",o,s]]);t.setMatrix(z)}},Ts=function(t,e){var r=t.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=e;(0,u.isArray)(e)||(n=[e,e]),(0,u.isArray)(e)&&e.length===1&&(n=[e[0],e[0]]),r=ro(r,[["s",n[0],n[1]]]),t.setMatrix(r)},ds=function(t,e){var r=t.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=ro(r,[["r",e]]),t.setMatrix(r)},Is=function(t,e,r){for(var n=[],a=0;a<t;a++)n[a]=0;return r.forEach(function(i){i.source&&(n[e[i.source]]+=1),i.target&&(n[e[i.target]]+=1)}),n};function Nn(f,t,e){return(e[0]-f[0])*(t[1]-f[1])===(t[0]-f[0])*(e[1]-f[1])&&Math.min(f[0],t[0])<=e[0]&&e[0]<=Math.max(f[0],t[0])&&Math.min(f[1],t[1])<=e[1]&&e[1]<=Math.max(f[1],t[1])}var Ji=function(t,e,r){var n=!1,a=t.length,i=1e-6;function o(p){return Math.abs(p)<i?0:p<0?-1:1}if(a<=2)return!1;for(var s=0;s<a;s++){var l=t[s],d=t[(s+1)%a];if(Nn(l,d,[e,r]))return!0;o(l[1]-r)>0!=o(d[1]-r)>0&&o(e-(r-l[1])*(l[0]-d[0])/(l[1]-d[1])-l[0])<0&&(n=!n)}return n},fo=function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)},Ii=function(t,e){var r=!1;return(0,u.each)(t,function(n){if(bo(n.from,n.to,e.from,e.to))return r=!0,!1}),r},As=function(t,e){var r=function(C){var S=C.map(function(z){return z[0]}),L=C.map(function(z){return z[1]});return{minX:Math.min.apply(null,S),maxX:Math.max.apply(null,S),minY:Math.min.apply(null,L),maxY:Math.max.apply(null,L)}},n=function(C){for(var S=[],L=C.length,z=0;z<L-1;z++){var H=C[z],ee=C[z+1];S.push({from:{x:H[0],y:H[1]},to:{x:ee[0],y:ee[1]}})}if(S.length>1){var ie=C[0],se=C[L-1];S.push({from:{x:se[0],y:se[1]},to:{x:ie[0],y:ie[1]}})}return S};if(t.length<2||e.length<2)return!1;var a=r(t),i=r(e);if(!fo(a,i))return!1;var o=!1;if((0,u.each)(e,function(p){if(Ji(t,p[0],p[1]))return o=!0,!1}),o||((0,u.each)(t,function(p){if(Ji(e,p[0],p[1]))return o=!0,!1}),o))return!0;var s=n(t),l=n(e),d=!1;return(0,u.each)(l,function(p){if(Ii(s,p))return d=!0,!1}),d},co=function(){function f(t,e,r,n){this.x1=t,this.y1=e,this.x2=r,this.y2=n}return f.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:t,y:e,minX:t,minY:e,maxX:r,maxY:n,width:r-t,height:n-e};return a},f}(),Bi=function(t,e){var r={top:[t.minX,t.minY,t.maxX,t.minY],left:[t.minX,t.minY,t.minX,t.maxY],bottom:[t.minX,t.maxY,t.maxX,t.maxY],right:[t.maxX,t.minY,t.maxX,t.maxY]};return r[e]},es=function(t,e){var r=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),n=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),a=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(a){var i=r/a,o=n/a;if(i>=0&&i<=1&&o>=0&&o<=1)return i}return Number.POSITIVE_INFINITY},hs=function(t,e){for(var r=["top","left","bottom","right"],n=t.getBBox(),a=0,i=[],o=0;o<4;o++){var s=Bi(n,r[o]),l=s[0],d=s[1],p=s[2],C=s[3];i[o]=bo({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:l,y:d},{x:p,y:C}),i[o]&&(a+=1)}return[i,a]},Go=function(t,e){for(var r=["top","left","bottom","right"],n=t.getBBox(),a=Number.POSITIVE_INFINITY,i=0,o=0;o<4;o++){var s=Bi(n,r[o]),l=s[0],d=s[1],p=s[2],C=s[3],S=es(e,new co(l,d,p,C));S=Math.abs(S-.5),S>=0&&S<=1&&(i+=1,a=S<a?S:a)}return i===0?-1:a},Oa=function(t){var e=0,r=0;if(t.length>0){for(var n=0,a=t;n<a.length;n++){var i=a[n];e+=i.x,r+=i.y}e/=t.length,r/=t.length}return{x:e,y:r}},Zo=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},no=function(t,e){var r=e.x1,n=e.y1,a=e.x2-r,i=e.y2-n,o=t.x-r,s=t.y-n,l=o*a+s*i,d;l<=0?d=0:(o=a-o,s=i-s,l=o*a+s*i,l<=0?d=0:d=l*l/(a*a+i*i));var p=o*o+s*s-d;return p<0&&(p=0),p},Wi=function(t,e,r){return r===void 0&&(r=.001),Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(r,2)},ts=function(t,e){var r=t.x<e.x,n=t.x>e.x+e.width,a=t.y>e.y+e.height,i=t.y<e.y,o=r||n||a||i;if(!o)return 0;if(a&&!r&&!n)return Math.pow(e.y+e.height-t.y,2);if(i&&!r&&!n)return Math.pow(t.y-e.y,2);if(r&&!a&&!i)return Math.pow(e.x-t.x,2);if(n&&!a&&!i)return Math.pow(e.x+e.width-t.x,2);var s=Math.min(Math.abs(e.x-t.x),Math.abs(e.x+e.width-t.x)),l=Math.min(Math.abs(e.y-t.y),Math.abs(e.y+e.height-t.y));return s*s+l*l},vs=function(t,e){var r=t[0],n=t[1],a=t[2],i=t[3],o=e.x,s=e.y,l=[a-r,i-n];if(Tr.exactEquals(l,[0,0]))return NaN;var d=[-l[1],l[0]];Tr.normalize(d,d);var p=[o-r,s-n];return Math.abs(Tr.dot(p,d))},Ja=function(t,e,r){return t+(e-t)*r},eo=function(t,e,r){for(var n=Math.min(t.length,e.length),a=new Array(n),i=0;i<n;i++)a[i]=Ja(t[i],e[i],r);return a},fi="rgb(95, 149, 255)",Os="rgb(255, 255, 255)",lo="rgb(0, 0, 0)",rs="rgb(247, 250, 255)",Do="rgb(239, 244, 255)",ji="rgb(253, 253, 253)",zo="rgb(250, 250, 250)",ho="rgb(224, 224, 224)",Uo="rgb(234, 234, 234)",xo="rgb(245, 245, 245)",Ma="rgb(191, 213, 255)",Ai="#4572d9",Hi="rgb(223, 234, 255)",En={mainStroke:fi,mainFill:Do,activeStroke:fi,activeFill:rs,inactiveStroke:Ma,inactiveFill:rs,selectedStroke:fi,selectedFill:Os,highlightStroke:Ai,highlightFill:Hi,disableStroke:ho,disableFill:zo,edgeMainStroke:ho,edgeActiveStroke:fi,edgeInactiveStroke:Uo,edgeSelectedStroke:fi,edgeHighlightStroke:fi,edgeDisableStroke:xo,comboMainStroke:ho,comboMainFill:ji,comboActiveStroke:fi,comboActiveFill:rs,comboInactiveStroke:ho,comboInactiveFill:ji,comboSelectedStroke:fi,comboSelectedFill:ji,comboHighlightStroke:Ai,comboHighlightFill:ji,comboDisableStroke:Uo,comboDisableFill:zo},cn={version:"0.8.21",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:En.mainStroke,fill:Do},size:20,color:En.mainStroke,linkPoints:{size:8,lineWidth:1,fill:En.activeFill,stroke:En.activeStroke}},nodeStateStyles:{active:{fill:En.activeFill,stroke:En.activeStroke,lineWidth:2,shadowColor:En.mainStroke,shadowBlur:10},selected:{fill:En.selectedFill,stroke:En.selectedStroke,lineWidth:4,shadowColor:En.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:En.highlightFill,stroke:En.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:En.inactiveFill,stroke:En.inactiveStroke,lineWidth:1},disable:{fill:En.disableFill,stroke:En.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:lo,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:En.edgeMainStroke,lineAppendWidth:2},color:En.edgeMainStroke},edgeStateStyles:{active:{stroke:En.edgeActiveStroke,lineWidth:1},selected:{stroke:En.edgeSelectedStroke,lineWidth:2,shadowColor:En.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:En.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:En.edgeInactiveStroke,lineWidth:1},disable:{stroke:En.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:lo,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:En.comboMainFill,lineWidth:1,stroke:En.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:En.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:En.comboActiveStroke,lineWidth:1,fill:En.comboActiveFill},selected:{stroke:En.comboSelectedStroke,lineWidth:2,fill:En.comboSelectedFill,shadowColor:En.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:En.comboHighlightStroke,lineWidth:2,fill:En.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:En.comboInactiveStroke,fill:En.comboInactiveFill,lineWidth:1},disable:{stroke:En.comboDisableStroke,fill:En.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},Wo={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},oi=Math.PI,No=Math.sin,ao=Math.cos,Xa=No(oi/8),ci=ao(oi/8),ns=function(t,e){var r=t.getBBox(),n={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(e){var i=e.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]),n=Ni(n,i),a=Ni(a,i)}var o=n.x,s=n.y,l=a.x,d=a.y;return{x:o,y:s,minX:o,minY:s,maxX:l,maxY:d,width:l-o,height:d-s}},gs=function(t){var e=t.sourceNode||t.targetNode,r=e.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=e.getKeyShape(),i=a.getBBox(),o=t.loopCfg||{},s=o.dist||Math.max(i.width,i.height)*2,l=o.position||cn.defaultLoopPosition,d=[(i.minX+i.maxX)/2+n[6],(i.minY+i.maxY)/2+n[7]],p=[t.startPoint.x,t.startPoint.y],C=[t.endPoint.x,t.endPoint.y],S=i.height/2,L=i.width/2,z=S,H=S,ee=z*Xa,ie=z*ci,se=H*Xa,ye=H*ci,Ce=a.get("type"),Re=Math.min(S/2,L/2),ke=Math.min(S,L),et=o!=null&&o.pointPadding?Math.min(ke,o==null?void 0:o.pointPadding):Re;if(p[0]===C[0]&&p[1]===C[1]){switch(l){case"top":Ce==="circle"?(p=[d[0]-ee,d[1]-ie],C=[d[0]+se,d[1]-ye]):(p=[d[0]-et,d[1]-S],C=[d[0]+et,d[1]-S]);break;case"top-right":z=S,H=L,Ce==="circle"?(ee=z*Xa,ie=z*ci,se=H*Xa,ye=H*ci,p=[d[0]+ee,d[1]-ie],C=[d[0]+ye,d[1]-se]):(p=[d[0]+L-et,d[1]-S],C=[d[0]+L,d[1]-S+et]);break;case"right":z=L,H=L,Ce==="circle"?(ee=z*Xa,ie=z*ci,se=H*Xa,ye=H*ci,p=[d[0]+ie,d[1]-ee],C=[d[0]+ye,d[1]+se]):(p=[d[0]+L,d[1]-et],C=[d[0]+L,d[1]+et]);break;case"bottom-right":z=L,H=S,Ce==="circle"?(ee=z*Xa,ie=z*ci,se=H*Xa,ye=H*ci,p=[d[0]+ie,d[1]+ee],C=[d[0]+se,d[1]+ye]):(p=[d[0]+L,d[1]+S-et],C=[d[0]+L-et,d[1]+S]);break;case"bottom":z=S,H=S,Ce==="circle"?(ee=z*Xa,ie=z*ci,se=H*Xa,ye=H*ci,p=[d[0]+ee,d[1]+ie],C=[d[0]-se,d[1]+ye]):(p=[d[0]-et,d[1]+S],C=[d[0]+et,d[1]+S]);break;case"bottom-left":z=S,H=L,Ce==="circle"?(ee=z*Xa,ie=z*ci,se=H*Xa,ye=H*ci,p=[d[0]-ee,d[1]+ie],C=[d[0]-ye,d[1]+se]):(p=[d[0]-L,d[1]+S-et],C=[d[0]-L+et,d[1]+S]);break;case"left":z=L,H=L,Ce==="circle"?(ee=z*Xa,ie=z*ci,se=H*Xa,ye=H*ci,p=[d[0]-ie,d[1]+ee],C=[d[0]-ye,d[1]-se]):(p=[d[0]-L,d[1]-et],C=[d[0]-L,d[1]+et]);break;case"top-left":z=L,H=S,Ce==="circle"?(ee=z*Xa,ie=z*ci,se=H*Xa,ye=H*ci,p=[d[0]-ie,d[1]-ee],C=[d[0]-se,d[1]-ye]):(p=[d[0]-L+et,d[1]-S],C=[d[0]-L,d[1]-S+et]);break;default:z=L,H=L,ee=z*Xa,ie=z*ci,se=H*Xa,ye=H*ci,p=[d[0]-ee,d[1]-ie],C=[d[0]+se,d[1]-ye]}if(o.clockwise===!1){var vt=[p[0],p[1]];p=[C[0],C[1]],C=[vt[0],vt[1]]}}var at=[p[0]-d[0],p[1]-d[1]],Mt=(z+s)/z,zt=(H+s)/H;o.clockwise===!1&&(Mt=(H+s)/H,zt=(z+s)/z);var Cr=Tr.scale([0,0],at,Mt),jr=[d[0]+Cr[0],d[1]+Cr[1]],kr=[C[0]-d[0],C[1]-d[1]],yr=Tr.scale([0,0],kr,zt),dn=[d[0]+yr[0],d[1]+yr[1]];return t.startPoint={x:p[0],y:p[1]},t.endPoint={x:C[0],y:C[1]},t.controlPoints=[{x:jr[0],y:jr[1]},{x:dn[0],y:dn[1]}],t},Bs=function(t,e,r,n,a){var i=1e-4,o=[],s=t==null?void 0:t.getPoint(e);if(!s)return{x:0,y:0,angle:0};if(e<i)o=t.getStartTangent().reverse();else if(e>1-i)o=t.getEndTangent();else{var l=t==null?void 0:t.getPoint(e+i);o.push([s.x,s.y]),o.push([l.x,l.y])}var d=Math.atan2(o[1][1]-o[0][1],o[1][0]-o[0][0]);if(d<0&&(d+=oi*2),r&&(s.x+=ao(d)*r,s.y+=No(d)*r),n){var p=d-oi/2;d>1/2*oi&&d<3*1/2*oi&&(p-=oi),s.x+=ao(p)*n,s.y+=No(p)*n}var C={x:s.x,y:s.y,angle:d};return a?(d>.5*oi&&d<1.5*oi&&(d-=oi),(0,v.__assign)({rotate:d},C)):C},Eu=function f(t,e,r,n){if(n(t,e,r)===!1)return!1;if(t&&t.children){for(var a=t.children.length-1;a>=0;a--)if(!f(t.children[a],t,a,n))return!1}return!0},Fs=function f(t,e,r,n){if(t&&t.children){for(var a=t.children.length-1;a>=0;a--)if(!f(t.children[a],t,a,n))return}return n(t,e,r)!==!1},li=function(t,e){typeof e=="function"&&Eu(t,null,-1,e)},Xo=function(t,e){typeof e=="function"&&Fs(t,null,-1,e)},bu=function(t,e){return e*(Wo[t]||1)},ru=function(t,e){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return t.split("").forEach(function(a){n.test(a)?r+=e:r+=bu(a,e)}),[r,e]},as=function(t,e){return typeof e!="number"||e<=0||e>=t.length?t:t.substring(0,e)+"..."},Gs=function(t,e){var r=[],n={},a={};t.forEach(function(s){a[s.id]=s}),t.forEach(function(s,l){var d=(0,u.clone)(s);d.itemType="combo",d.children=void 0,d.parentId===d.id?(console.warn("The parentId for combo ".concat(d.id," can not be the same as the combo's id")),delete d.parentId):d.parentId&&!a[d.parentId]&&(console.warn("The parent combo for combo ".concat(d.id," does not exist!")),delete d.parentId);var p=n[d.id];if(p){if(d.children=p.children,n[d.id]=d,p=d,!p.parentId){r.push(p);return}var C=n[p.parentId];if(C)C.children?C.children.push(d):C.children=[d];else{var S={id:p.parentId,children:[p]};n[p.parentId]=S,n[d.id]=d}return}if((0,u.isString)(s.parentId)){var L=n[s.parentId];if(L)L.children?L.children.push(d):L.children=[d],n[d.id]=d;else{var z={id:s.parentId,children:[d]};n[z.id]=z,n[d.id]=d}}else r.push(d),n[d.id]=d});var i={};(e||[]).forEach(function(s){i[s.id]=s;var l=n[s.comboId];if(l){var d={id:s.id,comboId:s.comboId};l.children?l.children.push(d):l.children=[d],d.itemType="node",n[s.id]=d}});var o=0;return r.forEach(function(s){s.depth=o+10,li(s,function(l){var d,p=n[l.id].itemType;p==="node"?d=n[l.comboId]:d=n[l.parentId],d&&p==="node"?l.depth=o+1:l.depth=o+10,o<l.depth&&(o=l.depth);var C=i[l.id];return C&&(C.depth=l.depth),!0})}),r},Ls=function(t,e,r){var n,a=t,i,o={root:{children:t}},s=!1,l="root";(t||[]).forEach(function(L){if(!s){if(L.id===e){i=L,L.itemType==="combo"?i.parentId=r:i.comboId=r,s=!0;return}li(L,function(z){var H;return o[z.id]={children:(z==null?void 0:z.children)||[]},a=(H=o[z.parentId||z.comboId||"root"])===null||H===void 0?void 0:H.children,z&&(z.removed||e===z.id)&&a?(l=z.parentId||z.comboId||"root",i=z,z.itemType==="combo"?i.parentId=r:i.comboId=r,s=!0,!1):!0})}}),a=(n=o[l])===null||n===void 0?void 0:n.children;var d=a?a.indexOf(i):-1;if(d>-1&&a.splice(d,1),s||(i={id:e,itemType:"node",comboId:r},o[e]={children:void 0}),e){var p=!1;if(r){var C=0;(t||[]).forEach(function(L){p||li(L,function(z){return r===z.id?(p=!0,z.children?z.children.push(i):z.children=[i],C=z.depth,i.itemType==="node"?i.depth=C+2:i.depth=C+1,!1):!0})})}else(!r||!p)&&i.itemType!=="node"&&t.push(i);var S=i.depth;li(i,function(L){return L.itemType==="node"?S+=2:S+=1,L.depth=S,!0})}return t},Ds=function(t,e,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!t||t.length===0){var a=r==null?void 0:r.getModel(),i=a||{},o=i.x,s=i.y,l=i.fixSize,d=i.collapsed,p=i.fixCollapseSize,C=d?p:l,S=(0,u.isArray)(C)?C:[C,C],L=S[0],z=S[1],H=[L/2,z/2];return{minX:o-H[0],minY:s-H[1],maxX:o+H[0],maxY:s+H[1],x:o,y:s,width:L,height:z}}return t.forEach(function(ee){var ie=e.findById(ee.id);if(!(!ie||!ie.isVisible())){ie.set("bboxCanvasCache",void 0);var se=ie.getCanvasBBox();se.x&&n.minX>se.minX&&(n.minX=se.minX),se.y&&n.minY>se.minY&&(n.minY=se.minY),se.x&&n.maxX<se.maxX&&(n.maxX=se.maxX),se.y&&n.maxY<se.maxY&&(n.maxY=se.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(ee){(n[ee]===1/0||n[ee]===-1/0)&&(n[ee]=void 0)}),n},xu=function(t){var e=(0,u.isNumber)(t.x)||(0,u.isNumber)(t.y)||t.type||t.anchorPoints||t.size;return t.style&&(e=e||(0,u.isNumber)(t.style.r)||(0,u.isNumber)(t.style.width)||(0,u.isNumber)(t.style.height)||(0,u.isNumber)(t.style.rx)||(0,u.isNumber)(t.style.ry)),e},io=function(t){var e={};return Object.keys(t).forEach(function(r){var n=t[r];if(!(r==="img"&&!(0,u.isString)(n)))if((0,u.isObject)(n)&&!(0,u.isArray)(n)){var a={};Object.keys(n).forEach(function(i){var o=n[i];i==="img"&&!(0,u.isString)(o)||(a[i]=(0,u.clone)(o))}),e[r]=a}else e[r]=(0,u.clone)(n)}),e},is=function(t){var e=t.animateCfg,r=t.callback,n;if(!e)n={duration:500,callback:r};else if(n=(0,u.clone)(e),e.callback){var a=e.callback;n.callback=function(){r(),a()}}else n.callback=r;return n},zs=function(t){if(!t)return console.error("G6 Error Tips: the data must be defined"),!1;var e=t.nodes,r=t.edges,n=t.combos,a=n===void 0?[]:n;if(!e&&!r){var i=!0;return li(t,function(C){return(0,u.isString)(C.id)?!0:(i=!1,!1)}),i}var o=(e||[]).find(function(C){return!(0,u.isString)(C.id)});if(o)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(o.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var s=(e||[]).map(function(C){return C.id}),l=a==null?void 0:a.map(function(C){return C.id}),d=(0,v.__spreadArray)((0,v.__spreadArray)([],s,!0),l,!0),p=(r||[]).find(function(C){return!d.includes(C.source)||!d.includes(C.target)});return p?(console.warn("G6 Warning Tips: The source %c".concat(p.source,"%c or the target %c").concat(p.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},wu=function(t,e){if(t==="node"||t==="combo"){if(e.id&&!(0,u.isString)(e.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(e.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(t==="edge"&&(!e.source||!e.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},nu=function(){function f(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return f.prototype.formatModes=function(){var t=this.modes;(0,u.each)(t,function(e){(0,u.each)(e,function(r,n){(0,u.isString)(r)&&(e[n]={type:r})})})},f.prototype.setBehaviors=function(t){var e=this.graph,r=this.modes[t],n=[],a;(0,u.each)(r||[],function(i){var o=D.getBehavior(i.type||i);o&&(a=new o(i),a&&(a.bind(e),n.push(a)))}),this.currentBehaves=n},f.mergeBehaviors=function(t,e){return(0,u.each)(e,function(r){t.indexOf(r)<0&&((0,u.isString)(r)&&(r={type:r}),t.push(r))}),t},f.filterBehaviors=function(t,e){var r=[];return t.forEach(function(n){var a="";(0,u.isString)(n)?a=n:a=n.type,e.indexOf(a)<0&&r.push(n)}),r},f.prototype.setMode=function(t){var e=this,r=e.modes,n=e.graph,a=t,i=r[a];i&&(n.emit("beforemodechange",{mode:t}),(0,u.each)(this.currentBehaves,function(o){o.delegate&&o.delegate.remove(),o.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:t}),this.mode=t)},f.prototype.getMode=function(){return this.mode},f.prototype.manipulateBehaviors=function(t,e,r){var n=this,a;if((0,u.isArray)(t)?a=t:a=[t],(0,u.isArray)(e))return(0,u.each)(e,function(o){n.modes[o]?r?n.modes[o]=f.mergeBehaviors(n.modes[o]||[],a):n.modes[o]=f.filterBehaviors(n.modes[o]||[],a):r&&(n.modes[o]=a)}),this;var i=e;return e||(i=this.mode),this.modes[i]||r&&(this.modes[i]=a),r?this.modes[i]=f.mergeBehaviors(this.modes[i]||[],a):this.modes[i]=f.filterBehaviors(this.modes[i]||[],a),this.formatModes(),this.setMode(this.mode),this},f.prototype.updateBehavior=function(t,e,r){(0,u.isString)(t)&&(t={type:t});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,i=0;i<a;i++){var o=n[i];if(o.type===t.type)return o.updateCfg(e),this;i===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var s=n.length,i=0;i<s;i++){var o=n[i];if(o.type===t.type||o===t.type)return o===t.type&&(o={type:o}),Object.assign(o,e),n[i]=o,this;i===s-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},f.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},f}(),Us=nu,ps=G(98190),Ws=function(f){(0,v.__extends)(t,f);function t(e,r){var n=f.call(this,e,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return t}(ps.Event),Xs=function(t){return"".concat(t,"-").concat(Math.random()).concat(Date.now())},Vs=function(t){if((0,u.isArray)(t))switch(t.length){case 4:return t;case 3:return t.push(t[1]),t;case 2:return t.concat(t);case 1:return[t[0],t[0],t[0],t[0]];default:return[0,0,0,0]}if((0,u.isNumber)(t))return[t,t,t,t];if((0,u.isString)(t)){var e=parseInt(t,10);return[e,e,e,e]}return[0,0,0,0]},Su=function(t){var e=new Ws(t.type,t);return e.clientX=t.clientX,e.clientY=t.clientY,e.x=t.x,e.y=t.y,e.target=t.target,e.currentTarget=t.currentTarget,e.bubbles=!0,e.item=t.item,e},_u=function(t){if(!t)return!1;for(var e=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<e;n++)if(t[n]!==r[n])return!0;return!1},Po=function(t){return Number.isNaN(Number(t))},Ko=function(t){for(var e=1/0,r=-1/0,n=1/0,a=-1/0,i=0;i<t.length;i++){var o=t[i],s=o.getBBox(),l=s.minX,d=s.minY,p=s.maxX,C=s.maxY;l<e&&(e=l),d<n&&(n=d),p>r&&(r=p),C>a&&(a=C)}var S=Math.floor(e),L=Math.floor(n),z=Math.ceil(r)-Math.floor(e),H=Math.ceil(a)-Math.floor(n);return{x:S,y:L,width:z,height:H,minX:e,minY:n,maxX:r,maxY:a}},Mu=function(t,e,r,n,a){e===void 0&&(e=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),a===void 0&&(a=void 0);for(var i=t.length,o=e*2,s=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],l={},d=[],p={},C=0;C<i;C++){var S=t[C],L=S.source,z=S.target,H="".concat(L,"-").concat(z);if(!d[C]){l[H]||(l[H]=[]),d[C]=!0,l[H].push(S);for(var ee=0;ee<i;ee++)if(C!==ee){var ie=t[ee],se=ie.source,ye=ie.target;d[ee]||(L===ye&&z===se?(l[H].push(ie),d[ee]=!0,p["".concat(se,"|").concat(ye,"|").concat(l[H].length-1)]=!0):L===se&&z===ye&&(l[H].push(ie),d[ee]=!0))}}}for(var Ce in l)for(var Re=l[Ce],ke=Re.length,et=0;et<ke;et++){var vt=Re[et];if(vt.source===vt.target){a&&(vt.type=a),vt.loopCfg={position:s[et%8],dist:Math.floor(et/8)*20+50};continue}if(ke===1&&n&&vt.source!==vt.target){vt.type=n;continue}vt.type=r;var at=(et%2===0?1:-1)*(p["".concat(vt.source,"|").concat(vt.target,"|").concat(et)]?-1:1);ke%2===1?vt.curveOffset=at*Math.ceil(et/2)*o:vt.curveOffset=at*(Math.floor(et/2)*o+e)}return t},ys=G(31278),vo=function(){function f(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}return f.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,r=this.graph.get("width"),n=e.get("height");return{x:(r-t[1]-t[3])/2+t[3],y:(n-t[0]-t[2])/2+t[0]}},f.prototype.fitCenter=function(t,e){var r=this.graph,n=r.get("group"),a,i=r.getNodes();if(i.length>r.get("optimizeThreshold")){var o=1/0,s=1/0,l=-1/0,d=-1/0;i.forEach(function(ye){var Ce=ye.getModel(),Re=Ce.x,ke=Ce.y;o>Re&&(o=Re),s>ke&&(s=ke),l<Re&&(l=Re),d<ke&&(d=ke)});var p=n.getMatrix()||[1,0,0,0,1,0,0,0,1],C=Ni({x:o,y:s},p),S=C.x,L=C.y,z=Ni({x:l,y:d},p),H=z.x,ee=z.y;a={minX:S,maxX:H,minY:L,maxY:ee,width:H-S,height:ee-L,x:S,y:L}}else a=n.getCanvasBBox();if(!(a.width===0||a.height===0)){var ie=this.getViewCenter(),se={x:a.x+a.width/2,y:a.y+a.height/2};r.translate(ie.x-se.x,ie.y-se.y,t,e)}},f.prototype.animatedFitView=function(t,e,r,n,a,i,o,s){var l=this.graph;r=r||{duration:500,easing:"easeCubic"};var d=[1,0,0,0,1,0,0,0,1],p=n.x+a.x-i.x-n.minX,C=n.y+a.y-i.y-n.minY;if(!(Po(p)||Po(C))){var S=(0,ys.vs)(d,[["t",p,C]]);if(!s){var L=is({animateCfg:r,callback:function(){l.emit("viewportchange",{action:"translate",matrix:S})}});t.animate(function(ye){return{matrix:eo(e,S,ye)}},L);return}var z=l.get("minZoom"),H=l.get("maxZoom"),ee=o;z&&o<z?(ee=z,console.warn("fitview failed, ratio out of range, ratio: %f",o,"graph minzoom has been used instead")):H&&o>H&&(ee=H,console.warn("fitview failed, ratio out of range, ratio: %f",o,"graph maxzoom has been used instead"));var ie=(0,ys.vs)(S,[["t",-a.x,-a.y],["s",ee,ee],["t",a.x,a.y]]),se=is({animateCfg:r,callback:function(){t.setMatrix(ie),l.emit("viewportchange",{action:"translate",matrix:S}),l.emit("viewportchange",{action:"zoom",matrix:ie})}});t.stopAnimate(),t.setMatrix(e),t.animate(function(ye){return{matrix:eo(e,ie,ye)}},se)}},f.prototype.fitView=function(t,e){var r=this.graph,n=this.getFormatPadding(),a=r.get("width"),i=r.get("height"),o=r.get("group"),s=o.getMatrix()||[1,0,0,0,1,0,0,0,1];o.resetMatrix();var l,d=r.getNodes();if(d.length>r.get("optimizeThreshold")){var p=1/0,C=1/0,S=-1/0,L=-1/0;d.forEach(function(Re){var ke=Re.getModel(),et=ke.x,vt=ke.y;p>et&&(p=et),C>vt&&(C=vt),S<et&&(S=et),L<vt&&(L=vt)}),l={minX:p,maxX:S,minY:C,maxY:L,width:S-p,height:L-C,x:p,y:C}}else l=o.getCanvasBBox();if(!(l.width===0||l.height===0)){var z=this.getViewCenter(),H={x:l.x+l.width/2,y:l.y+l.height/2},ee=(a-n[1]-n[3])/l.width,ie=(i-n[0]-n[2])/l.height,se=ee;if(ee>ie&&(se=ie),t)this.animatedFitView(o,s,e,l,z,H,se,!0);else{var ye=z.x-H.x,Ce=z.y-H.y;if(Po(ye)||Po(Ce))return;r.translate(ye,Ce),r.zoom(se,z)||console.warn("zoom failed, ratio out of range, ratio: %f",se)}}},f.prototype.fitViewByRules=function(t,e,r){var n=t.onlyOutOfViewPort,a=n===void 0?!1:n,i=t.direction,o=i===void 0?"both":i,s=t.ratioRule,l=s===void 0?"min":s,d=this.graph,p=this.getFormatPadding(),C=d.get("width"),S=d.get("height"),L=d.get("group"),z=L.getMatrix()||[1,0,0,0,1,0,0,0,1];L.resetMatrix();var H,ee=d.getNodes();if(ee.length>d.get("optimizeThreshold")){var ie=1/0,se=1/0,ye=-1/0,Ce=-1/0;ee.forEach(function(jr){var kr=jr.getModel(),yr=kr.x,dn=kr.y;ie>yr&&(ie=yr),se>dn&&(se=dn),ye<yr&&(ye=yr),Ce<dn&&(Ce=dn)}),H={minX:ie,maxX:ye,minY:se,maxY:Ce,width:ye-ie,height:Ce-se,x:ie,y:se}}else H=L.getCanvasBBox();if(!(H.width===0||H.height===0)){var Re=this.getViewCenter(),ke={x:H.x+H.width/2,y:H.y+H.height/2},et=(C-p[1]-p[3])/H.width,vt=(S-p[0]-p[2])/H.height,at;if(o==="x"?at=et:o==="y"?at=vt:at=l==="max"?Math.max(et,vt):Math.min(et,vt),a&&(at=at<1?at:1),e)this.animatedFitView(L,z,r,H,Re,ke,at,!0);else{var Mt=d.getZoom(),zt=Mt*at,Cr=d.get("minZoom");zt<Cr&&(zt=Cr,console.warn("fitview failed, ratio out of range, ratio: %f",at,"graph minzoom has been used instead")),d.translate(Re.x-ke.x,Re.y-ke.y),d.zoomTo(zt,Re)}}},f.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return Vs(t)},f.prototype.focusPoint=function(t,e,r){var n=this,a=this.getViewCenter(),i=this.getPointByCanvas(a.x,a.y),o=this.graph.get("group").getMatrix();if(o||(o=[1,0,0,0,1,0,0,0,1]),e){var s=(i.x-t.x)*o[0],l=(i.y-t.y)*o[4],d=0,p=0,C=0,S=0;this.graph.get("canvas").animate(function(L){C=s*L,S=l*L,n.graph.translate(C-d,S-p),d=C,p=S},(0,v.__assign)({},r))}else this.graph.translate((i.x-t.x)*o[0],(i.y-t.y)*o[4])},f.prototype.getPointByCanvas=function(t,e){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=_s({x:t,y:e},r);return n},f.prototype.getPointByClient=function(t,e){var r=this.graph.get("canvas"),n=r.getPointByClient(t,e);return this.getPointByCanvas(n.x,n.y)},f.prototype.getClientByPoint=function(t,e){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(t,e),a=r.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},f.prototype.getCanvasByPoint=function(t,e){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),Ni({x:t,y:e},r)},f.prototype.focus=function(t,e,r){if((0,u.isString)(t)&&(t=this.graph.findById(t)),t){var n=0,a=0;if(t.getType&&t.getType()==="edge"){var i=t.getSource().get("group").getMatrix(),o=t.getTarget().get("group").getMatrix();i&&o?(n=(i[6]+o[6])/2,a=(i[7]+o[7])/2):(i||o)&&(n=i?i[6]:o[6],a=i?i[7]:o[7])}else{var s=t.get("group"),l=s.getMatrix();l||(l=[1,0,0,0,1,0,0,0,1]),n=l[6],a=l[7]}this.focusPoint({x:n,y:a},e,r)}},f.prototype.focusItems=function(t,e,r,n){if(t.length){var a=this.graph,i=this.getFormatPadding(),o=a.get("width"),s=a.get("height"),l=a.get("group"),d=l.getMatrix()||[1,0,0,0,1,0,0,0,1];l.resetMatrix();for(var p={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},C=0,S=t;C<S.length;C++){var L=S[C],z=L.getBBox();z.minX<p.minX&&(p.minX=z.minX),z.minY<p.minY&&(p.minY=z.minY),z.maxX>p.maxX&&(p.maxX=z.maxX),z.maxY>p.maxY&&(p.maxY=z.maxY)}if(p.x=p.minX,p.y=p.minY,p.width=p.maxX-p.minX,p.height=p.maxY-p.minY,!(p.width===0||p.height===0)){var H=this.getViewCenter(),ee={x:p.x+p.width/2,y:p.y+p.height/2},ie=(o-i[1]-i[3])/p.width,se=(s-i[0]-i[2])/p.height,ye=ie;ie>se&&(ye=se),r?this.animatedFitView(l,d,n,p,H,ee,ye,e):(a.translate(H.x-ee.x,H.y-ee.y),e&&!a.zoom(ye,H)&&console.warn("zoom failed, ratio out of range, ratio: %f",ye))}}},f.prototype.changeSize=function(t,e){var r=this.graph;if(!(0,u.isNumber)(t)||!(0,u.isNumber)(e))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:t,height:e});var n=r.get("canvas");n.changeSize(t,e);var a=r.get("plugins");a.forEach(function(i){i.get("gridContainer")&&i.positionInit()})},f.prototype.destroy=function(){this.graph=null,this.destroyed=!1},f}(),Wu=vo;function Cu(f){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cu(f)}function Xu(f){if(typeof f!="string")return f;var t=function(ke){if(typeof ke!="string")return ke;try{return JSON.parse(ke.trim())}catch(et){return ke.trim()}},e=t(f);if(typeof e!="string")return e;for(var r=function(ke){return ke[ke.length-1]},n=f.trim(),a=[],i=[],o=function(){for(var ke=[],et=0;et<arguments.length;et++)ke[et]=arguments[et];return ke.some(function(vt){return r(i)===vt})},s=function(){return r(a)},l=null,d=0,p="";d<n.length;){var C=n[d],S=o('"',"'");if(!S&&!C.trim()){d+=1;continue}var L=n[d-1]==="\\",z=o("}"),H=o("]"),ee=o(","),ie=s();if(S)if(r(i)===C&&!L){i.pop();var se=t(p);ie.push(se),l=se,p=""}else p+=C;else if(H&&C===",")p&&(ie.push(t(p)),p="");else if(z&&C===":")i.push(","),p&&(ie.push(p),p="");else if(ee&&C===",")p&&(ie.push(t(p)),p=""),i.pop();else if(C==="}"&&(z||ee)){p&&(ie.push(t(p)),p=""),ee&&i.pop();for(var ye={},Ce=1;Ce<ie.length;Ce+=2)ye[ie[Ce-1]]=ie[Ce];a.pop(),a.length&&r(a).push(ye),i.pop(),l=ye}else C==="]"&&H?(p&&(ie.push(t(p)),p=""),a.pop(),a.length&&r(a).push(ie),i.pop(),l=ie):C==="{"?(a.push([]),i.push("}")):C==="["?(a.push([]),i.push("]")):C==='"'?i.push('"'):C==="'"?i.push("'"):p+=C;d+=1}return l||p}var au=function(t){return t.split("-").reduce(function(e,r){return e+r.charAt(0).toUpperCase()+r.slice(1)})},uf=function(t){return function(e){for(var r=t.length,n=[],a=0,i="";a<r;)if(t[a]==="{"&&t[a+1]==="{")n.push(i),i="",a+=2;else if(t[a]==="}"&&t[a+1]==="}"){if(n.length){var o=n.pop();i=(0,u.get)(e,i,o.endsWith("=")?'"{'.concat(i,'}"'):i),n.push(o+i)}a+=2,i=""}else i+=t[a],a+=1;return n.push(i),n.map(function(s,l){return n[l-1]&&n[l-1].endsWith("=")?'"{'.concat(s,'}"'):s}).join("")}};function c(f,t){var e={},r=f.getAttributeNames&&f.getAttributeNames()||[],n=f.children&&Array.from(f.children).map(function(o){return c(o,t)}),a={},i=f.tagName?f.tagName.toLowerCase():"group";return i==="text"&&(e.text=f.innerText),a.type=i,i==="img"&&(a.type="image"),Array.from(r).forEach(function(o){var s=au(o),l=f.getAttribute(o);try{if(s==="style"||s==="attrs"){var d=Xu(l);e=(0,v.__assign)((0,v.__assign)({},e),d)}else a[s]=Xu(l)}catch(p){if(s==="style")throw p;a[s]=l}}),a.attrs=e,t&&t.style&&a.name&&Cu(t.style[a.name])==="object"&&(a.attrs=(0,v.__assign)((0,v.__assign)({},a.attrs),t.style[a.name])),t&&t.style&&a.keyshape&&(a.attrs=(0,v.__assign)((0,v.__assign)({},a.attrs),t.style)),n.length&&(a.children=n),a}function I(f,t,e){var r=f.attrs,n=r===void 0?{}:r,a={x:t.x||0,y:t.y||0,width:e.width||0,height:e.height||0},i,o;switch(f.type){case"maker":case"circle":n.r&&(o=2*n.r,i=2*n.r);break;case"text":n.text&&(o=ru(n.text,n.fontSize||12)[0],i=16,a.y+=i,a.height=i,a.width=o,f.attrs=(0,v.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(o=n.width),n.height&&(i=n.height)}return i>=0&&(a.height=i),o>=0&&(a.width=o),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function fe(f,t){var e;t===void 0&&(t={x:0,y:0});var r=(0,v.__assign)({x:0,y:0,width:0,height:0},t);if(!((e=f.children)===null||e===void 0)&&e.length){var n=f.attrs,a=n===void 0?{}:n,i=a.marginTop,o=(0,v.__assign)({},t);i&&(o.y+=i);for(var s=0;s<f.children.length;s++){f.children[s].attrs.key="".concat(a.key||"root"," -").concat(s," ");var l=fe(f.children[s],o);if(l.bbox){var d=l.bbox;l.attrs.next==="inline"?o.x+=l.bbox.width:o.y+=l.bbox.height,d.width+d.x>r.width&&(r.width=d.width+d.x),d.height+d.y>r.height&&(r.height=d.height+d.y)}}}return f.bbox=I(f,t,r),f.attrs=(0,v.__assign)((0,v.__assign)({},f.attrs),f.bbox),f}function be(f,t){var e,r,n,a,i=(f||{}).type,o=((t==null?void 0:t.attrs)||{}).key;if(o&&f&&(f.attrs.key=o),!f&&t)return{action:"delete",val:t,type:i,key:o};if(f&&!t)return{action:"add",val:f,type:i};if(!f&&!t)return{action:"same",type:i};var s=[];if(((e=f.children)===null||e===void 0?void 0:e.length)>0||((r=t.children)===null||r===void 0?void 0:r.length)>0)for(var l=Math.max((n=f.children)===null||n===void 0?void 0:n.length,(a=t.children)===null||a===void 0?void 0:a.length),d=t.children||[],p=f.children||[],C=0;C<l;C+=1)s.push(be(p[C],d[C]));var S=Object.keys(t.attrs),L=Object.keys(f.attrs);return t.type!==f.type?{action:"restructure",nowTarget:f,formerTarget:t,key:o,children:s}:S.filter(function(z){return z!=="children"}).some(function(z){return f.attrs[z]!==t.attrs[z]||!L.includes(z)})?{action:"change",val:f,children:s,type:i,key:o}:{action:"same",children:s,type:i,key:o}}function Oe(f){var t={},e=function(n){var a=typeof f=="function"?f(n):f,i=uf(a)(n),o=document.createElement("div");o.innerHTML=i;var s=o.children[0],l=fe(c(s,n));return o.remove(),l};return{draw:function(n,a){var i=e(n),o=a,s=function l(d){var p=d.attrs,C=p===void 0?{}:p,S=d.bbox,L=d.type,z=d.children,H=(0,v.__rest)(d,["attrs","bbox","type","children"]);if(d.type!=="group"){var ee=a.addShape(d.type,(0,v.__assign)({attrs:C,origin:{bbox:S,type:L,children:z}},H));d.keyshape&&(o=ee)}d.children&&d.children.forEach(function(ie){return l(ie)})};return s(i),t[n.id]=[i],o},update:function(n,a){t[n.id]||(t[n.id]=[]);var i=a.getContainer(),o=i.get("children"),s=e(n),l=t[n.id].pop(),d=be(s,l),p=function L(z){var H;z.type!=="group"&&i.addShape(z.type,{attrs:z.attrs}),!((H=z.children)===null||H===void 0)&&H.length&&z.children.map(function(ee){return L(ee)})},C=function L(z){var H,ee=o.find(function(ie){return ie.attrs.key===z.attrs.key});ee&&i.removeChild(ee),!((H=z.children)===null||H===void 0)&&H.length&&z.children.map(function(ie){return L(ie)})},S=function L(z){var H=z.key;if(z.type!=="group"){var ee=o.find(function(se){return se.attrs.key===H});switch(z.action){case"change":if(ee){var ie=z.val.keyshape?a.getOriginStyle():{};ee.attr((0,v.__assign)((0,v.__assign)({},ie),z.val.attrs))}break;case"add":p(z.val);break;case"delete":C(z.val);break;case"restructure":C(z.formerTarget),p(z.nowTarget);break;default:break}}z.children&&z.children.forEach(function(se){return L(se)})};S(d),t[n.id].push(s)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var ze={};function Ue(f){return ze[f]||(ze[f]=(0,u.upperFirst)(f)),ze[f]}var nt={defaultShapeType:"defaultType",className:null,getShape:function(t){var e=this,r=e[t]||e[e.defaultShapeType]||e["simple-circle"];return r},draw:function(t,e,r){var n=this.getShape(t);r.shapeMap={};var a=n.draw(e,r);return n.afterDraw&&n.afterDraw(e,r,a),a},baseUpdate:function(t,e,r,n){var a,i,o=this.getShape(t);o.update&&(o.mergeStyle=(a=o.getOptions)===null||a===void 0?void 0:a.call(o,e,n),(i=o.update)===null||i===void 0||i.call(o,e,r,n)),o.afterUpdate&&o.afterUpdate(e,r)},setState:function(t,e,r,n){var a=this.getShape(t);a.setState(e,r,n)},shouldUpdate:function(t){var e=this.getShape(t);return!!e.update},getControlPoints:function(t,e){var r=this.getShape(t);return r.getControlPoints(e)},getAnchorPoints:function(t,e){var r=this.getShape(t);return r.getAnchorPoints(e)}},st={options:{},draw:function(t,e){return this.drawShape(t,e)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e=this.options.anchorPoints,r=t.anchorPoints||e;return r}},bt=function(){function f(){}return f.registerFactory=function(t,e){var r=Ue(t),n=nt,a=(0,v.__assign)((0,v.__assign)({},n),e);return f[r]=a,a.className=r,a},f.getFactory=function(t){var e=Ue(t);return f[e]},f.registerNode=function(t,e,r){var n=f.Node,a;if(typeof e=="string"||typeof e=="function"){var i=Oe(e);a=(0,v.__assign)((0,v.__assign)({},n.getShape("single-node")),i)}else if(e.jsx){var o=e.jsx,i=Oe(o);a=(0,v.__assign)((0,v.__assign)((0,v.__assign)({},n.getShape("single-node")),i),e)}else{n.getShape(r);var s=r?n.getShape(r):st;a=(0,v.__assign)((0,v.__assign)({},s),e)}return a.type=t,a.itemType="node",n[t]=a,a},f.registerEdge=function(t,e,r){var n=f.Edge,a=r?n.getShape(r):st,i=(0,v.__assign)((0,v.__assign)({},a),e);return i.type=t,i.itemType="edge",n[t]=i,i},f.registerCombo=function(t,e,r){var n=f.Combo,a=r?n.getShape(r):st,i=(0,v.__assign)((0,v.__assign)({},a),e);return i.type=t,i.itemType="combo",n[t]=i,i},f}(),It=bt;bt.registerFactory("node",{defaultShapeType:"circle"}),bt.registerFactory("edge",{defaultShapeType:"line"}),bt.registerFactory("combo",{defaultShapeType:"circle"});var fr="bboxCache",vr="bboxCanvasCache",lr=null,Ur=function(){function f(t){this._cfg={},this.destroyed=!1,this.optimize=!1;var e={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(e,this.getDefaultCfg(),t);var r=this.get("model"),n=r.id,a=this.get("type");typeof n=="undefined"?n=Xs(a):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var i=t.group;i&&(i.set("item",this),i.set("id",n)),this.init(),this.draw();var o=r.shape||r.type||(a==="edge"?"line":"circle"),s=this.get("shapeFactory");if(s&&s[o]){var l=s[o].options;if(l&&l.stateStyles){var d=this.get("styles")||r.stateStyles;d=(0,u.deepMix)({},l.stateStyles,d),this.set("styles",d)}}}return f.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group"),r=ns(t,e);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},f.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),r=ns(t,e);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},f.prototype.drawInner=function(){var t=this,e=t.get("shapeFactory"),r=t.get("group"),n=t.get("model");r.clear();var a=n.visible;if(a!==void 0&&!a&&t.changeVisibility(a),!!e){t.updatePosition(n);var i=t.getShapeCfg(n),o=i.type,s=e.draw(o,i,r);s&&(t.set("keyShape",s),s.set("isKeyShape",!0),s.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",o),this.restoreStates(e,o)}},f.prototype.setOriginStyle=function(){var t=this.get("group"),e=t.get("children"),r=this.getKeyShape(),n=this,a=r.get("name");if(this.get("originStyle")){var S=this.get("originStyle");a&&!S[a]&&(S[a]={});for(var L=this.getCurrentStatesStyle(),z=function(ee){var ie=e[ee],se=ie.get("name"),ye=ie.attr();if(se&&se!==a){var Ce=L[se];S[se]||(S[se]={}),Ce?Object.keys(ye).forEach(function(et){var vt=ye[et];vt!==Ce[et]&&(S[se][et]=vt)}):S[se]=ie.get("type")!=="image"?(0,u.clone)(ye):n.getShapeStyleByName(se)}else{var Re=ie.attr(),ke={};Object.keys(L).forEach(function(et){var vt=L[et];(et===a||!(0,u.isPlainObject)(vt))&&(ke[et]=vt)}),Object.keys(Re).forEach(function(et){var vt=Re[et];ke[et]!==vt&&(a?S[a][et]=vt:S[et]=vt)})}},o=0;o<e.length;o++)z(o);delete S.path,delete S.matrix,delete S.x,delete S.y,S[a]&&(delete S[a].x,delete S[a].y,delete S[a].matrix,delete S[a].path),n.set("originStyle",S)}else{for(var i={},o=0;o<e.length;o++){var s=e[o],l=s.get("type"),d=s.get("name");if(d&&d!==a)i[d]=l!=="image"?(0,u.clone)(s.attr()):n.getShapeStyleByName(d),l==="text"&&i[d]&&(delete i[d].x,delete i[d].y,delete i[d].matrix);else{var p=n.getShapeStyleByName();if(delete p.path,delete p.matrix,!a)Object.assign(i,p);else if(d)i[a]=p;else{var C=Xs("shape");s.set("name",C),t.shapeMap[C]=s,i[C]=l!=="image"?(0,u.clone)(s.attr()):n.getShapeStyleByName(d)}}}n.set("originStyle",i)}},f.prototype.restoreStates=function(t,e){var r=this,n=r.get("states");(0,u.each)(n,function(a){t.setState(e,a,!0,r)})},f.prototype.init=function(){var t=It.getFactory(this.get("type"));this.set("shapeFactory",t)},f.prototype.get=function(t){return this._cfg[t]},f.prototype.set=function(t,e){(0,u.isPlainObject)(t)?this._cfg=(0,v.__assign)((0,v.__assign)({},this._cfg),t):this._cfg[t]=e},f.prototype.getDefaultCfg=function(){return{}},f.prototype.clearCache=function(){this.set(fr,null),this.set(vr,null)},f.prototype.beforeDraw=function(){},f.prototype.afterDraw=function(){},f.prototype.afterUpdate=function(){},f.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},f.prototype.getShapeStyleByName=function(t){var e=this.get("group"),r;if(t?r=e.shapeMap[t]||e.find(function(a){return a.get("name")===t}):r=this.getKeyShape(),r){var n={};return(0,u.each)(r.attr(),function(a,i){(i!=="img"||(0,u.isString)(a))&&(n[i]=a)}),n}return{}},f.prototype.getShapeCfg=function(t,e){var r=this.get("styles");if(r){var n=t;return n.style=(0,v.__assign)((0,v.__assign)({},r),t.style),n}return t},f.prototype.getStateStyle=function(t){var e=this.get("styles"),r=e&&e[t];return r},f.prototype.getOriginStyle=function(){return this.get("originStyle")},f.prototype.getCurrentStatesStyle=function(){var t=this,e={},r=t.getStates();return!r||!r.length?this.get("originStyle"):((0,u.each)(t.getStates(),function(n){e=Object.assign(e,t.getStateStyle(n))}),e)},f.prototype.setState=function(t,e){var r=this.get("states"),n=this.get("shapeFactory"),a=t,i=t;(0,u.isString)(e)&&(a="".concat(t,":").concat(e),i="".concat(t,":"));var o=r;if((0,u.isBoolean)(e)){var s=r.indexOf(i);if(e){if(s>-1)return;r.push(a)}else s>-1&&r.splice(s,1)}else if((0,u.isString)(e)){var l=r.filter(function(C){return C.includes(i)});l.length>0&&this.clearStates(l),o=o.filter(function(C){return!C.includes(i)}),o.push(a),this.set("states",o)}if(n){var d=this.get("model"),p=d.type;n.setState(p,t,e,this)}},f.prototype.clearStates=function(t){var e=this,r=e.getStates(),n=e.get("shapeFactory"),a=e.get("model"),i=a.type;t||(t=r),(0,u.isString)(t)&&(t=[t]);var o=r.filter(function(s){return t.indexOf(s)===-1});e.set("states",o),t.forEach(function(s){n.setState(i,s,!1,e)})},f.prototype.setOptimize=function(t){this.optimize=t},f.prototype.getContainer=function(){return this.get("group")},f.prototype.getKeyShape=function(){return this.get("keyShape")},f.prototype.getModel=function(){return this.get("model")},f.prototype.getType=function(){return this.get("type")},f.prototype.getID=function(){return this.get("id")},f.prototype.isItem=function(){return!0},f.prototype.getStates=function(){return this.get("states")},f.prototype.hasState=function(t){var e=this.getStates();return e.indexOf(t)>=0},f.prototype.refresh=function(t){var e=this.get("model");this.updatePosition(e),this.updateShape(t),this.afterUpdate(),this.clearCache()},f.prototype.getUpdateType=function(t){},f.prototype.update=function(t,e){e===void 0&&(e=void 0);var r=this.get("model");if(e==="move")this.updatePosition(t);else{var n=r.visible,a=t.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var i={x:r.x,y:r.y};t.x=isNaN(+t.x)?r.x:+t.x,t.y=isNaN(+t.y)?r.y:+t.y;var o=this.get("styles");if(t.stateStyles){var s=t.stateStyles;(0,u.mix)(o,s),delete t.stateStyles}Object.assign(r,t),(i.x!==t.x||i.y!==t.y)&&this.updatePosition(t),this.updateShape(e)}this.afterUpdate(),this.clearCache()},f.prototype.updateShape=function(t){var e=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(e.shouldUpdate(n)&&n===this.get("currentShape")){var a=this.getShapeCfg(r,t);e.baseUpdate(n,a,this,t),t!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(e,n)},f.prototype.updatePosition=function(t){var e=this.get("model"),r=isNaN(+t.x)?+e.x:+t.x,n=isNaN(+t.y)?+e.y:+t.y,a=this.get("group");if(isNaN(r)||isNaN(n))return!1;e.x=r,e.y=n;var i=a.getMatrix();return i&&i[6]===r&&i[7]===n?!1:(a.resetMatrix(),Lo(a,{x:r,y:n}),this.clearCache(),!0)},f.prototype.getBBox=function(){var t=this.get(fr);return t||(t=this.calculateBBox(),this.set(fr,t)),t},f.prototype.getCanvasBBox=function(){var t=this.get(vr);return t||(t=this.calculateCanvasBBox(),this.set(vr,t)),t},f.prototype.toFront=function(){var t=this.get("group");t.toFront()},f.prototype.toBack=function(){var t=this.get("group");t.toBack()},f.prototype.show=function(){this.changeVisibility(!0)},f.prototype.hide=function(){this.changeVisibility(!1)},f.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},f.prototype.isVisible=function(){return this.get("visible")},f.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},f.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),e.shapeMap={},this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0}},f}(),Zr=Ur,Er={source:"start",target:"end"},sn="Node",Kn="Point",ua="Anchor",$n=function(f){(0,v.__extends)(t,f);function t(){return f!==null&&f.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},t.prototype.setEnd=function(e,r){var n=Er[e]+Kn,a=e+sn,i=this.get(a);i&&!i.destroyed&&i.removeEdge(this),(0,u.isPlainObject)(r)?(this.set(n,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(n,null))},t.prototype.getLinkPoint=function(e,r,n){var a=Er[e]+Kn,i=e+sn,o=this.get(a);if(!o){var s=this.get(i),l=e+ua,d=this.getPrePoint(e,n),p=r[l];(0,u.isNil)(p)||(o=s.getLinkPointByAnchor(p)),o=o||s.getLinkPoint(d),(0,u.isNil)(o.index)||this.set("".concat(e,"AnchorIndex"),o.index)}return o},t.prototype.getPrePoint=function(e,r){if(r&&r.length){var n=e==="source"?0:r.length-1;return r[n]}var a=e==="source"?"target":"source";return this.getEndPoint(a)},t.prototype.getEndPoint=function(e){var r=e+sn,n=Er[e]+Kn,a=this.get(r);return a&&!a.destroyed?a.get("model"):this.get(n)},t.prototype.getControlPointsByCenter=function(e){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),i=e.type;return a.getControlPoints(i,{startPoint:r,endPoint:n})},t.prototype.getEndCenter=function(e){var r=e+sn,n=Er[e]+Kn,a=this.get(r);if(a){var i=a.getBBox();return{x:i.centerX,y:i.centerY}}return this.get(n)},t.prototype.init=function(){f.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},t.prototype.getShapeCfg=function(e,r){var n=this,a=n.get("linkCenter"),i=r!=null&&r.includes("move")?e:f.prototype.getShapeCfg.call(this,e);if(a)i.startPoint=n.getEndCenter("source"),i.endPoint=n.getEndCenter("target");else{var o=i.controlPoints||n.getControlPointsByCenter(i);i.startPoint=n.getLinkPoint("source",e,o),i.endPoint=n.getLinkPoint("target",e,o)}return i.sourceNode=n.get("sourceNode"),i.targetNode=n.get("targetNode"),i},t.prototype.getModel=function(){var e=this.get("model"),r=this.get("source".concat(sn)),n=this.get("target".concat(sn));return r?delete e["source".concat(sn)]:e.source=this.get("start".concat(Kn)),n?delete e["target".concat(sn)]:e.target=this.get("end".concat(Kn)),!(0,u.isString)(e.source)&&!(0,u.isPlainObject)(e.source)&&(e.source=e.source.getID()),!(0,u.isString)(e.target)&&!(0,u.isPlainObject)(e.target)&&(e.target=e.target.getID()),e},t.prototype.setSource=function(e){this.setEnd("source",e),this.set("source",e)},t.prototype.setTarget=function(e){this.setEnd("target",e),this.set("target",e)},t.prototype.getSource=function(){return this.get("source")},t.prototype.getTarget=function(){return this.get("target")},t.prototype.updatePosition=function(){return!1},t.prototype.update=function(e,r){r===void 0&&(r=void 0);var n=this.get("model"),a=n.visible,i=e.visible;a!==i&&i!==void 0&&this.changeVisibility(i);var o=this.get("source"),s=this.get("target");if(!(!o||o.destroyed||!s||s.destroyed)){var l=this.get("styles");if(e.stateStyles){var d=e.stateStyles;(0,u.mix)(l,d),delete e.stateStyles}Object.assign(n,e),this.updateShape(r),this.afterUpdate(),this.clearCache()}},t.prototype.destroy=function(){var e=this.get("source".concat(sn)),r=this.get("target".concat(sn));e&&!e.destroyed&&e.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),f.prototype.destroy.call(this)},t}(Zr),Rn=$n,Xn="anchorPointsCache",Mi="bboxCache",Ei=function(f){(0,v.__extends)(t,f);function t(){return f!==null&&f.apply(this,arguments)||this}return t.prototype.getNearestPoint=function(e,r){for(var n=0,a=e[0],i=mi(e[0],r),o=0;o<e.length;o++){var s=e[o],l=mi(s,r);l<i&&(a=s,i=l,n=o)}return a.anchorIndex=n,a},t.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getInEdges=function(){var e=this;return this.get("edges").filter(function(r){return r.get("target")===e})},t.prototype.getOutEdges=function(){var e=this;return this.get("edges").filter(function(r){return r.get("source")===e})},t.prototype.getNeighbors=function(e){var r=this,n=this.get("edges");if(e==="target"){var a=function(l){return l.getSource()===r};return n.filter(a).map(function(s){return s.getTarget()})}if(e==="source"){var i=function(l){return l.getTarget()===r};return n.filter(i).map(function(s){return s.getSource()})}var o=function(l){return l.getSource()===r?l.getTarget():l.getSource()};return n.map(o)},t.prototype.getLinkPointByAnchor=function(e){var r=this.getAnchorPoints();return r[e]},t.prototype.getLinkPoint=function(e){var r=this.get("keyShape"),n=r.get("type"),a=this.get("type"),i,o,s=this.getBBox();a==="combo"?(i=s.centerX||(s.maxX+s.minX)/2,o=s.centerY||(s.maxY+s.minY)/2):(i=s.centerX,o=s.centerY);var l=this.getAnchorPoints(),d;switch(n){case"circle":d=Fo({x:i,y:o,r:s.width/2},e);break;case"ellipse":d=Ui({x:i,y:o,rx:s.width/2,ry:s.height/2},e);break;default:d=Ho(s,e)}var p=d;return l.length&&(p||(p=e),p=this.getNearestPoint(l,p)),p||(p={x:i,y:o}),p},t.prototype.getAnchorPoints=function(){var e=this.get(Xn);if(!e){e=[];var r=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),i=this.getShapeCfg(a),o=a.type,s=r.getAnchorPoints(o,i)||[];(0,u.each)(s,function(l,d){var p={x:n.minX+l[0]*n.width,y:n.minY+l[1]*n.height,anchorIndex:d};e.push(p)}),this.set(Xn,e)}return e},t.prototype.addEdge=function(e){this.get("edges").push(e)},t.prototype.lock=function(){this.set("locked",!0)},t.prototype.unlock=function(){this.set("locked",!1)},t.prototype.hasLocked=function(){return this.get("locked")},t.prototype.removeEdge=function(e){var r=this.getEdges(),n=r.indexOf(e);n>-1&&r.splice(n,1)},t.prototype.clearCache=function(){this.set(Mi,null),this.set(Xn,null)},t.prototype.getUpdateType=function(e){var r,n,a,i,o;if(e){var s=!(0,u.isNil)(e.x),l=!(0,u.isNil)(e.y),d=Object.keys(e);if(d.length===1&&(s||l)||d.length===2&&s&&l)return"move";if((0,u.isNumber)(e.x)||(0,u.isNumber)(e.y)||e.type||e.anchorPoints||e.size||e!=null&&e.style&&(!((r=e==null?void 0:e.style)===null||r===void 0)&&r.r||!((n=e==null?void 0:e.style)===null||n===void 0)&&n.width||!((a=e==null?void 0:e.style)===null||a===void 0)&&a.height||!((i=e==null?void 0:e.style)===null||i===void 0)&&i.rx||!((o=e==null?void 0:e.style)===null||o===void 0)&&o.ry))return"bbox|label";var p=d.includes("label")||d.includes("labelCfg");return p?"style|label":"style"}},t.prototype.setState=function(e,r){var n=this;if(this.optimize){f.prototype.setState.call(this,e,r);return}this.runWithBBoxAffected(function(){return f.prototype.setState.call(n,e,r)})},t.prototype.clearStates=function(e){var r=this;if(this.optimize){f.prototype.clearStates.call(this,e);return}this.runWithBBoxAffected(function(){return f.prototype.clearStates.call(r,e)})},t.prototype.runWithBBoxAffected=function(e){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(l){r.includes(l)&&(a[l]=n[l])}),e();for(var i=this.getKeyShape().attr(),o=0;o<r.length;o++){var s=r[o];if(i[s]!==a[s]){this.clearCache(),this.getEdges().forEach(function(l){return l.refresh()});break}}},t}(Zr),ai=Ei,di="bboxCache",hi="bboxCanvasCache",vi="sizeCache",Pi="anchorPointsCache",Ea=function(f){(0,v.__extends)(t,f);function t(){return f!==null&&f.apply(this,arguments)||this}return t.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},t.prototype.getShapeCfg=function(e){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var a=e,i=(0,u.isNumber)(e.size)?[e.size,e.size]:e.size,o=(0,u.isNumber)(e.fixSize)?[e.fixSize,e.fixSize]:e.fixSize,s=i||o||cn.defaultCombo.size,l={r:(Math.max(n.width,n.height)||Math.max(s[0],s[1]))/2,width:n.width||s[0],height:n.height||s[1]};a.style=(0,v.__assign)((0,v.__assign)((0,v.__assign)({},r),e.style),l);var d=e.padding||cn.defaultCombo.padding;return(0,u.isNumber)(d)?(l.r+=d,l.width+=d*2,l.height+=d*2):(l.r=l.r+Math.max.apply(Math,d),l.width+=d[1]+d[3]||d[1]*2,l.height+=d[0]+d[2]||d[0]*2),this.set(vi,l),a}return e},t.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var e=this.get("keyShape"),r=this.get("group"),n=this.get(di)||{},a=n.x,i=n.x,o=this.get(vi),s=ns(e,r);if(s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2,o){o.width=Math.max(o.width,s.width),o.height=Math.max(o.height,s.height),this.set(vi,o);var l=e.get("type");l==="circle"?(s.width=o.r*2,s.height=o.r*2):(s.width=o.width,s.height=o.height),s.minX=s.centerX-s.width/2,s.minY=s.centerY-s.height/2,s.maxX=s.centerX+s.width/2,s.maxY=s.centerY+s.height/2}else s.width=s.maxX-s.minX,s.height=s.maxY-s.minY,s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2;return s.x=s.minX,s.y=s.minY,(s.x!==a||s.y!==i)&&this.set(Pi,null),s}},t.prototype.getChildren=function(){var e=this;return{nodes:e.getNodes(),combos:e.getCombos()}},t.prototype.getNodes=function(){var e=this;return e.get("nodes")},t.prototype.getCombos=function(){var e=this;return e.get("combos")},t.prototype.addChild=function(e){var r=this,n=e.getType();switch(n){case"node":r.addNode(e);break;case"combo":r.addCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.addCombo=function(e){var r=this;return r.get("combos").push(e),!0},t.prototype.addNode=function(e){var r=this;return r.get("nodes").push(e),!0},t.prototype.removeChild=function(e){var r=this,n=e.getType();switch(n){case"node":r.removeNode(e);break;case"combo":r.removeCombo(e);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},t.prototype.removeCombo=function(e){if(e){var r=this.getCombos(),n=r.indexOf(e);return n>-1?(r.splice(n,1),!0):!1}},t.prototype.removeNode=function(e){if(e){var r=this.getNodes(),n=r.indexOf(e);return n>-1?(r.splice(n,1),!0):!1}},t.prototype.getUpdateType=function(e){},t.prototype.getBBox=function(){this.set(hi,null);var e=this.calculateCanvasBBox();return e},t.prototype.clearCache=function(){this.set(di,null),this.set(hi,null),this.set(Pi,null)},t.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),r=this.get("group");e&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(vi,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},t}(ai),Ha=Ea,$o="node",Vo="edge",wo="vedge",os="combo",Of="default",Lf="Mapper",ms="stateStyles",ic=function(){function f(t){var e=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,u.throttle)(function(r){var n=e.graph;if(!(!n||n.get("destroyed"))){var a=e.edgeToBeUpdateMap;if(a){var i=Object.values(a);i.length&&(i.forEach(function(o){var s=o.edge;if(!(!s||s.destroyed)){var l=s.getSource(),d=s.getTarget();!l||l.destroyed||!d||d.destroyed||s.refresh(o.updateType)}}),e.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=t,this.destroyed=!1}return f.prototype.addItem=function(t,e){var r=this.graph,n=t===wo?Vo:t,a=r.get("".concat(n,"Group"))||r.get("group"),i=(0,u.upperFirst)(n),o=null,s=r.get(n+(0,u.upperFirst)(ms))||{},l=r.get(Of+i);e[ms]&&(s=e[ms]),l&&(0,u.each)(l,function(Re,ke){(0,u.isObject)(Re)&&!(0,u.isArray)(Re)?e[ke]=(0,u.deepMix)({},Re,e[ke]):(0,u.isArray)(Re)?e[ke]=e[ke]||(0,u.clone)(l[ke]):e[ke]=e[ke]||l[ke]});var d=r.get(n+Lf);if(d){var p=d(e);p[ms]&&(s=p[ms],delete p[ms]),(0,u.each)(p,function(Re,ke){(0,u.isObject)(Re)&&!(0,u.isArray)(Re)?e[ke]=(0,u.deepMix)({},e[ke],Re):e[ke]=p[ke]||e[ke]})}if(r.emit("beforeadditem",{type:t,model:e}),t===Vo||t===wo){var C=void 0,S=void 0;if(C=e.source,S=e.target,C&&(0,u.isString)(C)&&(C=r.findById(C)),S&&(0,u.isString)(S)&&(S=r.findById(S)),!C||!S){console.warn("The source or target node of edge ".concat(e.id," does not exist!"));return}C.getType&&C.getType()==="combo"&&(e.isComboEdge=!0),S.getType&&S.getType()==="combo"&&(e.isComboEdge=!0),o=new Rn({model:e,source:C,target:S,styles:s,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(t===$o)o=new ai({model:e,styles:s,group:a.addGroup()});else if(t===os){var L=e.children,z=Ds(L,r),H=void 0,ee=void 0;if(isNaN(z.x)?isNaN(e.x)&&(H=Math.random()*100):H=z.x,isNaN(z.y)?isNaN(e.y)&&(ee=Math.random()*100):ee=z.y,isNaN(e.x)||isNaN(e.y))e.x=H,e.y=ee;else{var ie=e.x-H,se=e.y-ee;this.updateComboSucceeds(e.id,ie,se,L)}var ye=a.addGroup();ye.setZIndex(e.depth),o=new Ha({model:e,styles:s,animate:r.get("animate"),bbox:e.collapsed?Ds([],r):z,group:ye}),!e.collapsed&&o.getKeyShape().get("type")==="circle"&&(z.width=Math.hypot(z.height,z.width),z.height=z.width,o.set("bbox",z),o.refresh());var Ce=o.getModel();(L||[]).forEach(function(Re){var ke=r.findById(Re.id);o.addChild(ke),Re.depth=Ce.depth+2})}if(o)return o.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(t,"s")).push(o),r.get("itemMap")[o.get("id")]=o,r.emit("afteradditem",{item:o,model:e}),o},f.prototype.updateItem=function(t,e){var r=this,n,a,i=this.graph;if((0,u.isString)(t)&&(t=i.findById(t)),!(!t||t.destroyed)){var o="";t.getType&&(o=t.getType());var s=i.get(o+Lf),l=t.getModel(),d=l.x,p=l.y,C=t.getUpdateType(e);if(s){var S=(0,u.deepMix)({},l,e),L=s(S),z=(0,u.deepMix)({},l,L,e);L[ms]&&(t.set("styles",z[ms]),delete z[ms]),(0,u.each)(z,function(at,Mt){e[Mt]=at})}else(0,u.each)(e,function(at,Mt){l[Mt]&&(0,u.isObject)(at)&&!(0,u.isArray)(at)&&(e[Mt]=(0,v.__assign)((0,v.__assign)({},l[Mt]),e[Mt]))});if(i.emit("beforeupdateitem",{item:t,cfg:e}),o===Vo){if(e.source){var H=e.source;(0,u.isString)(H)&&(H=i.findById(H)),t.setSource(H)}if(e.target){var ee=e.target;(0,u.isString)(ee)&&(ee=i.findById(ee)),t.setTarget(ee)}t.update(e)}else if(o===$o){t.update(e,C);var ie=t.getEdges();C==="move"?(0,u.each)(ie,function(at){r.edgeToBeUpdateMap[at.getID()]={edge:at,updateType:C},r.throttleRefresh()}):C!=null&&C.includes("bbox")&&(0,u.each)(ie,function(at){at.refresh(C)})}else if(o===os){if(t.update(e,C),!isNaN(e.x)||!isNaN(e.y)){var se=e.x-d||0,ye=e.y-p||0;this.updateComboSucceeds(l.id,se,ye)}var Ce=t.getEdges(),Re=(C==null?void 0:C.includes("bbox"))||C==="move";if(Re&&o===os){var ke=t.get("shapeFactory"),et=l.type||"circle",vt=l.animate===void 0||e.animate===void 0?(a=(n=ke[et])===null||n===void 0?void 0:n.options)===null||a===void 0?void 0:a.animate:l.animate||e.animate;vt?setTimeout(function(){if(!(!t||t.destroyed)){var at=t.getKeyShape();!at||at.destroyed||(0,u.each)(Ce,function(Mt){Mt&&!Mt.destroyed&&Mt.refresh()})}},201):(0,u.each)(Ce,function(at){at.refresh()})}}t.setOptimize(i.getNodes().length>i.get("optimizeThreshold")),i.emit("afterupdateitem",{item:t,cfg:e})}},f.prototype.updateCombo=function(t,e,r){var n=this,a,i,o=this.graph;if((0,u.isString)(t)&&(t=o.findById(t)),!(!t||t.destroyed)){var s=t.getModel(),l=Ds(e,o,t),d=l.x,p=l.y;t.set("bbox",l);var C=d,S=p;r?(C=isNaN(s.x)?d:s.x,S=isNaN(s.y)?p:s.y):(C=isNaN(d)?s.x:d,S=isNaN(p)?s.y:p),t.update({x:C,y:S});var L=t.get("shapeFactory"),z=s.type||"circle",H=s.animate===void 0?(i=(a=L[z])===null||a===void 0?void 0:a.options)===null||i===void 0?void 0:i.animate:s.animate;H?setTimeout(function(){if(!(!t||t.destroyed)){var ee=t.getKeyShape();!ee||ee.destroyed||(t.getShapeCfg(s),n.updateComboEdges(t))}},201):this.updateComboEdges(t)}},f.prototype.updateComboEdges=function(t){for(var e,r,n=t.getEdges()||[],a=0;a<n.length;a++){var i=n[a];!(i!=null&&i.destroyed)&&!(!((e=i==null?void 0:i.getSource())===null||e===void 0)&&e.destroyed)&&!(!((r=i==null?void 0:i.getTarget())===null||r===void 0)&&r.destroyed)&&i.refresh()}},f.prototype.collapseCombo=function(t,e){e===void 0&&(e=!0);var r=this.graph;(0,u.isString)(t)&&(t=r.findById(t));var n=t.getChildren();n.nodes.forEach(function(a){r.hideItem(a,e)}),n.combos.forEach(function(a){r.hideItem(a,e)})},f.prototype.updateComboSucceeds=function(t,e,r,n){var a=this;n===void 0&&(n=[]);var i=this.graph;if(!(!e&&!r)){var o=n;if(!(o!=null&&o.length)){var s=i.get("comboTrees");s==null||s.forEach(function(l){li(l,function(d){return d.id===t?(o=d.children,!1):!0})})}o==null||o.forEach(function(l){var d=i.findById(l.id);if(d){var p=d.getModel();a.updateItem(l.id,{x:(p.x||0)+e,y:(p.y||0)+r})}})}},f.prototype.expandCombo=function(t,e){e===void 0&&(e=!0);var r=this.graph;(0,u.isString)(t)&&(t=r.findById(t));var n=t.getChildren(),a=new Set;n.nodes.forEach(function(i){r.showItem(i,e),i.getEdges().forEach(function(o){return a.add(o)})}),n.combos.forEach(function(i){i.getModel().collapsed?i.show():r.showItem(i,e),i.getEdges().forEach(function(o){return a.add(o)})}),a.forEach(function(i){return i.refresh()})},f.prototype.removeItem=function(t){var e=this,r=this.graph;if((0,u.isString)(t)&&(t=r.findById(t)),!(!t||t.destroyed)){var n=(0,u.clone)(t.getModel()),a="";t.getType&&(a=t.getType()),r.emit("beforeremoveitem",{item:n,type:a});var i=r.get("".concat(a,"s")),o=i.indexOf(t);if(o>-1&&i.splice(o,1),a===Vo){var s=r.get("v".concat(a,"s")),l=s.indexOf(t);l>-1&&s.splice(l,1)}var d=t.get("id"),p=r.get("itemMap");delete p[d];var C=r.get("comboTrees"),S=t.get("id");if(a===$o){var L=t.getModel().comboId;if(C&&L){var z=C,H=!1;C.forEach(function(Re){H||li(Re,function(ke){if(ke.id===S&&z){var et=z.indexOf(ke);return z.splice(et,1),H=!0,!1}return z=ke.children,!0})})}for(var ee=t.getEdges(),ie=ee.length-1;ie>=0;ie--)r.removeItem(ee[ie],!1);L&&r.updateCombo(L)}else if(a===os){var se=t.getModel().parentId,ye,Ce=!1;(C||[]).forEach(function(ke){Ce||li(ke,function(et){return et.id===S?(ye=et,Ce=!0,!1):!0})}),ye.removed=!0,ye&&ye.children&&ye.children.forEach(function(ke){e.removeItem(ke.id)});for(var ee=t.getEdges(),ie=ee.length;ie>=0;ie--)r.removeItem(ee[ie],!1);se&&r.updateCombo(se)}t.destroy(),r.emit("afterremoveitem",{item:n,type:a})}},f.prototype.setItemState=function(t,e,r){var n=this.graph,a=e;(0,u.isString)(r)&&(a="".concat(e,":").concat(r)),!(t.hasState(a)===r&&r||(0,u.isString)(r)&&t.hasState(a))&&(n.emit("beforeitemstatechange",{item:t,state:a,enabled:r}),t.setState(e,r),n.autoPaint(),n.emit("afteritemstatechange",{item:t,state:a,enabled:r}))},f.prototype.priorityState=function(t,e){var r=this.graph,n=t;(0,u.isString)(t)&&(n=r.findById(t)),this.setItemState(n,e,!1),this.setItemState(n,e,!0)},f.prototype.clearItemStates=function(t,e){var r=this.graph;(0,u.isString)(t)&&(t=r.findById(t)),r.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),r.emit("afteritemstatesclear",{item:t,states:e})},f.prototype.refreshItem=function(t){var e=this.graph;(0,u.isString)(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},f.prototype.addCombos=function(t,e){var r=this,n=this.graph;(t||[]).forEach(function(i){Xo(i,function(o){var s;return e.forEach(function(l){l.id===o.id&&(l.children=o.children,l.depth=o.depth,s=l)}),s&&r.addItem("combo",s),!0})});var a=n.get("comboGroup");a&&a.sort()},f.prototype.changeItemVisibility=function(t,e){var r=this,n=this.graph;if((0,u.isString)(t)&&(t=n.findById(t)),!t){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&t.getType()===$o){var a=t.getEdges();(0,u.each)(a,function(d){e&&!(d.get("source").isVisible()&&d.get("target").isVisible())||r.changeItemVisibility(d,e)})}else if(t.getType&&t.getType()===os){var i=n.get("comboTrees"),o=t.get("id"),s=[],l=!1;(i||[]).forEach(function(p){l||!p.children||p.children.length===0||li(p,function(C){return C.id===o?(s=C.children,l=!0,!1):!0})}),s&&(!e||e&&!t.getModel().collapsed)&&s.forEach(function(p){var C=n.findById(p.id);r.changeItemVisibility(C,e)});var a=t.getEdges();(0,u.each)(a,function(p){e&&!(p.get("source").isVisible()&&p.get("target").isVisible())||r.changeItemVisibility(p,e)})}return n.emit("afteritemvisibilitychange",{item:t,visible:e}),t},f.prototype.destroy=function(){this.graph=null,this.destroyed=!0},f}(),oc=ic,ff=function(){function f(t){this.graph=t,this.destroyed=!1}return f.prototype.updateState=function(t,e,r){var n=this.graph.get("states"),a=e;(0,u.isString)(r)&&(a="".concat(e,":").concat(r)),n[a]||(n[a]=[]),r?n[a].push(t):n[a]=n[a].filter(function(i){return i!==t}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},f.prototype.updateStates=function(t,e,r){var n=this.graph.get("states"),a=(0,u.isString)(e)?[e]:e;a.forEach(function(i){var o=i;n[o]||(n[o]=[]),(0,u.isString)(r)&&(o="".concat(i,":").concat(r)),r?n[o].push(t):n[o]=n[o].filter(function(s){return s!==t})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:e})},f.prototype.destroy=function(){this.graph=null,this.destroyed=!0},f}(),Df=ff,sc=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,iu=/[^\s\,]+/ig;function uc(f){var t=f||[];if(isArray(t))return t;if(isString(t))return t=t.match(sc),each(t,function(e,r){if(e=e.match(iu),e[0].length>1){var n=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=n}each(e,function(a,i){isNaN(a)||(e[i]=+a)}),t[r]=e}),t}var Wc=null;function Ys(f,t,e,r){var n=[],a=!!r,i,o,s,l,d,p,C;if(a){s=r[0],l=r[1];for(var S=0,L=f.length;S<L;S+=1){var z=f[S];s=Tr.min([0,0],s,z),l=Tr.max([0,0],l,z)}}for(var S=0,H=f.length;S<H;S+=1){var z=f[S];if(S===0&&!e)C=z;else if(S===H-1&&!e)p=z,n.push(C),n.push(p);else{var ee=[S?S-1:H-1,S-1][e?0:1];i=f[ee],o=f[e?(S+1)%H:S+1];var ie=[0,0];ie=Tr.sub(ie,o,i),ie=Tr.scale(ie,ie,t);var se=Tr.distance(z,i),ye=Tr.distance(z,o),Ce=se+ye;Ce!==0&&(se/=Ce,ye/=Ce);var Re=Tr.scale([0,0],ie,-se),ke=Tr.scale([0,0],ie,ye);p=Tr.add([0,0],z,Re),d=Tr.add([0,0],z,ke),d=Tr.min([0,0],d,Tr.max([0,0],o,z)),d=Tr.max([0,0],d,Tr.min([0,0],o,z)),Re=Tr.sub([0,0],d,z),Re=Tr.scale([0,0],Re,-se/ye),p=Tr.add([0,0],z,Re),p=Tr.min([0,0],p,Tr.max([0,0],i,z)),p=Tr.max([0,0],p,Tr.min([0,0],i,z)),ke=Tr.sub([0,0],z,p),ke=Tr.scale([0,0],ke,ye/se),d=Tr.add([0,0],z,ke),a&&(p=Tr.max([0,0],p,s),p=Tr.min([0,0],p,l),d=Tr.max([0,0],d,s),d=Tr.min([0,0],d,l)),n.push(C),n.push(p),C=d}}return e&&n.push(n.shift()),n}function Nf(f,t,e){t===void 0&&(t=!1),e===void 0&&(e=[[0,0],[1,1]]);for(var r=!!t,n=[],a=0,i=f.length;a<i;a+=2)n.push([f[a],f[a+1]]);for(var o=Ys(n,.4,r,e),s=n.length,l=[],d,p,C,a=0;a<s-1;a+=1)d=o[a*2],p=o[a*2+1],C=n[a+1],l.push(["C",d[0],d[1],p[0],p[1],C[0],C[1]]);return r&&(d=o[s],p=o[s+1],C=n[0],l.push(["C",d[0],d[1],p[0],p[1],C[0],C[1]])),l}var ln=Nf;function ou(f,t,e){var r=null,n=e;return t<n&&(n=t,r="add"),f<n&&(n=f,r="del"),{type:r,min:n}}var Ca=function(f,t){var e=f.length,r=t.length,n,a,i=0;if(e===0||r===0)return null;for(var o=[],s=0;s<=e;s++)o[s]=[],o[s][0]={min:s};for(var l=0;l<=r;l++)o[0][l]={min:l};for(var s=1;s<=e;s++){n=f[s-1];for(var l=1;l<=r;l++){a=t[l-1],isEqual(n,a)?i=0:i=1;var d=o[s-1][l].min+1,p=o[s][l-1].min+1,C=o[s-1][l-1].min+i;o[s][l]=ou(d,p,C)}}return o};function Vu(f,t){var e=Ca(f,t),r=f.length,n=t.length,a=[],i=1,o=1;if(e[r][n]!==r){for(var s=1;s<=r;s++){var l=e[s][s].min;o=s;for(var d=i;d<=n;d++)e[s][d].min<l&&(l=e[s][d].min,o=d);i=o,e[s][i].type&&a.push({index:s-1,type:e[s][i].type})}for(var s=a.length-1;s>=0;s--)i=a[s].index,a[s].type==="add"?f.splice(i,0,[].concat(f[i])):f.splice(i,1)}if(r=f.length,r<n)for(var s=0;s<n-r;s++)f[r-1][0]==="z"||f[r-1][0]==="Z"?f.splice(r-2,0,f[r-2]):f.push(f[r-1]);return f}var js=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Ns=new RegExp("([a-z])["+js+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+js+"]*,?["+js+"]*)+)","ig"),cf=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+js+"]*,?["+js+"]*","ig");function Tu(f){if(!f)return null;if((0,u.isArray)(f))return f;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(f).replace(Ns,function(r,n,a){var i=[],o=n.toLowerCase();if(a.replace(cf,function(s,l){l&&i.push(+l)}),o==="m"&&i.length>2&&(e.push([n].concat(i.splice(0,2))),o="l",n=n==="m"?"l":"L"),o==="o"&&i.length===1&&e.push([n,i[0]]),o==="r")e.push([n].concat(i));else for(;i.length>=t[o]&&(e.push([n].concat(i.splice(0,t[o]))),!!t[o]););return""}),e}var Yu=/[a-z]/;function lf(f,t){return[t[0]+(t[0]-f[0]),t[1]+(t[1]-f[1])]}function Pf(f){var t=parsePathString(f);if(!t||!t.length)return[["M",0,0]];for(var e=!1,r=0;r<t.length;r++){var n=t[r][0];if(Yu.test(n)||["V","H","T","S"].indexOf(n)>=0){e=!0;break}}if(!e)return t;var a=[],i=0,o=0,s=0,l=0,d=0,p,C,S=t[0];(S[0]==="M"||S[0]==="m")&&(i=+S[1],o=+S[2],s=i,l=o,d++,a[0]=["M",i,o]);for(var r=d,L=t.length;r<L;r++){var z=t[r],H=a[r-1],ee=[],n=z[0],ie=n.toUpperCase();if(n!==ie)switch(ee[0]=ie,ie){case"A":ee[1]=z[1],ee[2]=z[2],ee[3]=z[3],ee[4]=z[4],ee[5]=z[5],ee[6]=+z[6]+i,ee[7]=+z[7]+o;break;case"V":ee[1]=+z[1]+o;break;case"H":ee[1]=+z[1]+i;break;case"M":s=+z[1]+i,l=+z[2]+o,ee[1]=s,ee[2]=l;break;default:for(var se=1,ye=z.length;se<ye;se++)ee[se]=+z[se]+(se%2?i:o)}else ee=t[r];switch(ie){case"Z":i=+s,o=+l;break;case"H":i=ee[1],ee=["L",i,o];break;case"V":o=ee[1],ee=["L",i,o];break;case"T":i=ee[1],o=ee[2];var Ce=lf([H[1],H[2]],[H[3],H[4]]);ee=["Q",Ce[0],Ce[1],i,o];break;case"S":i=ee[ee.length-2],o=ee[ee.length-1];var Re=H.length,ke=lf([H[Re-4],H[Re-3]],[H[Re-2],H[Re-1]]);ee=["C",ke[0],ke[1],ee[1],ee[2],i,o];break;case"M":s=ee[ee.length-2],l=ee[ee.length-1];break;default:i=ee[ee.length-2],o=ee[ee.length-1]}a.push(ee)}return a}var go=Math.PI*2,ju=function(f,t,e,r,n,a,i){var o=f.x,s=f.y;o*=t,s*=e;var l=r*o-n*s,d=n*o+r*s;return{x:l+a,y:d+i}},te=function(f,t){var e=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),r=Math.cos(f),n=Math.sin(f),a=Math.cos(f+t),i=Math.sin(f+t);return[{x:r-n*e,y:n+r*e},{x:a+i*e,y:i-a*e},{x:a,y:i}]},de=function(f,t,e,r){var n=f*r-t*e<0?-1:1,a=f*e+t*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},Me=function(f,t,e,r,n,a,i,o,s,l,d,p){var C=Math.pow(n,2),S=Math.pow(a,2),L=Math.pow(d,2),z=Math.pow(p,2),H=C*S-C*z-S*L;H<0&&(H=0),H/=C*z+S*L,H=Math.sqrt(H)*(i===o?-1:1);var ee=H*n/a*p,ie=H*-a/n*d,se=l*ee-s*ie+(f+e)/2,ye=s*ee+l*ie+(t+r)/2,Ce=(d-ee)/n,Re=(p-ie)/a,ke=(-d-ee)/n,et=(-p-ie)/a,vt=de(1,0,Ce,Re),at=de(Ce,Re,ke,et);return o===0&&at>0&&(at-=go),o===1&&at<0&&(at+=go),[se,ye,vt,at]},Fe=function(f){var t=f.px,e=f.py,r=f.cx,n=f.cy,a=f.rx,i=f.ry,o=f.xAxisRotation,s=o===void 0?0:o,l=f.largeArcFlag,d=l===void 0?0:l,p=f.sweepFlag,C=p===void 0?0:p,S=[];if(a===0||i===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var L=Math.sin(s*go/360),z=Math.cos(s*go/360),H=z*(t-r)/2+L*(e-n)/2,ee=-L*(t-r)/2+z*(e-n)/2;if(H===0&&ee===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),i=Math.abs(i);var ie=Math.pow(H,2)/Math.pow(a,2)+Math.pow(ee,2)/Math.pow(i,2);ie>1&&(a*=Math.sqrt(ie),i*=Math.sqrt(ie));var se=Me(t,e,r,n,a,i,d,C,L,z,H,ee),ye=se[0],Ce=se[1],Re=se[2],ke=se[3],et=Math.abs(ke)/(go/4);Math.abs(1-et)<1e-7&&(et=1);var vt=Math.max(Math.ceil(et),1);ke/=vt;for(var at=0;at<vt;at++)S.push(te(Re,ke)),Re+=ke;return S.map(function(Mt){var zt=ju(Mt[0],a,i,z,L,ye,Ce),Cr=zt.x,jr=zt.y,kr=ju(Mt[1],a,i,z,L,ye,Ce),yr=kr.x,dn=kr.y,un=ju(Mt[2],a,i,z,L,ye,Ce),br=un.x,zr=un.y;return{x1:Cr,y1:jr,x2:yr,y2:dn,x:br,y:zr}})};function tt(f,t,e,r,n,a,i,o,s){var l=Fe({px:f,py:t,cx:o,cy:s,rx:e,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:i});return l.reduce(function(d,p){var C=p.x1,S=p.y1,L=p.x2,z=p.y2,H=p.x,ee=p.y;return d.push(C,S,L,z,H,ee),d},[])}function Dt(f,t){"TQ".indexOf(f[0])<0&&(t.qx=null,t.qy=null);var e=f.slice(1),r=e[0],n=e[1];switch(f[0]){case"M":return t.x=r,t.y=n,f;case"A":return["C"].concat(arcToCubic.apply(0,[t.x1,t.y1].concat(f.slice(1))));case"Q":return t.qx=r,t.qy=n,["C"].concat(quadToCubic.apply(0,[t.x1,t.y1].concat(f.slice(1))));case"L":return["C"].concat(lineToCubic(t.x1,t.y1,f[1],f[2]));case"H":return["C"].concat(lineToCubic(t.x1,t.y1,f[1],t.y1));case"V":return["C"].concat(lineToCubic(t.x1,t.y1,t.x1,f[1]));case"Z":return["C"].concat(lineToCubic(t.x1,t.y1,t.x,t.y));default:}return f}function Rt(f,t){t===void 0&&(t=!1);for(var e=path2Absolute(f),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",i=e.length,o,s,l=[],d=0;d<i;d+=1)e[d]&&(a=e[d][0]),n[d]=a,e[d]=segmentToCubic(e[d],r),ur(e,n,d),i=e.length,a==="Z"&&l.push(d),o=e[d],s=o.length,r.x1=+o[s-2],r.y1=+o[s-1],r.x2=+o[s-4]||r.x1,r.y2=+o[s-3]||r.y1;return t?[e,l]:e}function ur(f,t,e){if(f[e].length>7){f[e].shift();for(var r=f[e],n=e;r.length;)t[e]="A",f.splice(n+=1,0,["C"].concat(r.splice(0,6)));f.splice(e,1)}}var Pr=function(f,t,e,r,n){var a=-3*t+9*e-9*r+3*n,i=f*a+6*t-12*e+6*r;return f*i-3*t+3*e},Rr=function(f,t,e,r,n,a,i,o,s){s===null&&(s=1),s=s>1?1:s<0?0:s;for(var l=s/2,d=12,p=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],C=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],S=0,L=0;L<d;L++){var z=l*p[L]+l,H=Pr(z,f,e,n,i),ee=Pr(z,t,r,a,o),ie=H*H+ee*ee;S+=C[L]*Math.sqrt(ie)}return l*S},hn=function(f,t,e,r,n,a,i,o){for(var s=[],l=[[],[]],d,p,C,S,L=0;L<2;++L){if(L===0?(p=6*f-12*e+6*n,d=-3*f+9*e-9*n+3*i,C=3*e-3*f):(p=6*t-12*r+6*a,d=-3*t+9*r-9*a+3*o,C=3*r-3*t),Math.abs(d)<1e-12){if(Math.abs(p)<1e-12)continue;S=-C/p,S>0&&S<1&&s.push(S);continue}var z=p*p-4*C*d,H=Math.sqrt(z);if(!(z<0)){var ee=(-p+H)/(2*d);ee>0&&ee<1&&s.push(ee);var ie=(-p-H)/(2*d);ie>0&&ie<1&&s.push(ie)}}for(var se=s.length,ye=se,Ce;se--;)S=s[se],Ce=1-S,l[0][se]=Ce*Ce*Ce*f+3*Ce*Ce*S*e+3*Ce*S*S*n+S*S*S*i,l[1][se]=Ce*Ce*Ce*t+3*Ce*Ce*S*r+3*Ce*S*S*a+S*S*S*o;return l[0][ye]=f,l[1][ye]=t,l[0][ye+1]=i,l[1][ye+1]=o,l[0].length=l[1].length=ye+2,{min:{x:Math.min.apply(0,l[0]),y:Math.min.apply(0,l[1])},max:{x:Math.max.apply(0,l[0]),y:Math.max.apply(0,l[1])}}},pn=function(f,t,e,r,n,a,i,o){if(!(Math.max(f,e)<Math.min(n,i)||Math.min(f,e)>Math.max(n,i)||Math.max(t,r)<Math.min(a,o)||Math.min(t,r)>Math.max(a,o))){var s=(f*r-t*e)*(n-i)-(f-e)*(n*o-a*i),l=(f*r-t*e)*(a-o)-(t-r)*(n*o-a*i),d=(f-e)*(a-o)-(t-r)*(n-i);if(d){var p=s/d,C=l/d,S=+p.toFixed(2),L=+C.toFixed(2);if(!(S<+Math.min(f,e).toFixed(2)||S>+Math.max(f,e).toFixed(2)||S<+Math.min(n,i).toFixed(2)||S>+Math.max(n,i).toFixed(2)||L<+Math.min(t,r).toFixed(2)||L>+Math.max(t,r).toFixed(2)||L<+Math.min(a,o).toFixed(2)||L>+Math.max(a,o).toFixed(2)))return{x:p,y:C}}}},on=function(f,t,e){return t>=f.x&&t<=f.x+f.width&&e>=f.y&&e<=f.y+f.height},Yn=function(f,t,e,r){return f===null&&(f=t=e=r=0),t===null&&(t=f.y,e=f.width,r=f.height,f=f.x),{x:f,y:t,width:e,w:e,height:r,h:r,x2:f+e,y2:t+r,cx:f+e/2,cy:t+r/2,r1:Math.min(e,r)/2,r2:Math.max(e,r)/2,r0:Math.sqrt(e*e+r*r)/2,path:rectPath(f,t,e,r),vb:[f,t,e,r].join(" ")}},sa=function(f,t){return f=Yn(f),t=Yn(t),on(t,f.x,f.y)||on(t,f.x2,f.y)||on(t,f.x,f.y2)||on(t,f.x2,f.y2)||on(f,t.x,t.y)||on(f,t.x2,t.y)||on(f,t.x,t.y2)||on(f,t.x2,t.y2)||(f.x<t.x2&&f.x>t.x||t.x<f.x2&&t.x>f.x)&&(f.y<t.y2&&f.y>t.y||t.y<f.y2&&t.y>f.y)},ta=function(f,t,e,r,n,a,i,o){isArray(f)||(f=[f,t,e,r,n,a,i,o]);var s=hn.apply(null,f);return Yn(s.min.x,s.min.y,s.max.x-s.min.x,s.max.y-s.min.y)},In=function(f,t,e,r,n,a,i,o,s){var l=1-s,d=Math.pow(l,3),p=Math.pow(l,2),C=s*s,S=C*s,L=d*f+p*3*s*e+l*3*s*s*n+S*i,z=d*t+p*3*s*r+l*3*s*s*a+S*o,H=f+2*s*(e-f)+C*(n-2*e+f),ee=t+2*s*(r-t)+C*(a-2*r+t),ie=e+2*s*(n-e)+C*(i-2*n+e),se=r+2*s*(a-r)+C*(o-2*a+r),ye=l*f+s*e,Ce=l*t+s*r,Re=l*n+s*i,ke=l*a+s*o,et=90-Math.atan2(H-ie,ee-se)*180/Math.PI;return{x:L,y:z,m:{x:H,y:ee},n:{x:ie,y:se},start:{x:ye,y:Ce},end:{x:Re,y:ke},alpha:et}},ba=function(f,t,e){var r=ta(f),n=ta(t);if(!sa(r,n))return e?0:[];for(var a=Rr.apply(0,f),i=Rr.apply(0,t),o=~~(a/8),s=~~(i/8),l=[],d=[],p={},C=e?0:[],S=0;S<o+1;S++){var L=In.apply(0,f.concat(S/o));l.push({x:L.x,y:L.y,t:S/o})}for(var S=0;S<s+1;S++){var L=In.apply(0,t.concat(S/s));d.push({x:L.x,y:L.y,t:S/s})}for(var S=0;S<o;S++)for(var z=0;z<s;z++){var H=l[S],ee=l[S+1],ie=d[z],se=d[z+1],ye=Math.abs(ee.x-H.x)<.001?"y":"x",Ce=Math.abs(se.x-ie.x)<.001?"y":"x",Re=pn(H.x,H.y,ee.x,ee.y,ie.x,ie.y,se.x,se.y);if(Re){if(p[Re.x.toFixed(4)]===Re.y.toFixed(4))continue;p[Re.x.toFixed(4)]=Re.y.toFixed(4);var ke=H.t+Math.abs((Re[ye]-H[ye])/(ee[ye]-H[ye]))*(ee.t-H.t),et=ie.t+Math.abs((Re[Ce]-ie[Ce])/(se[Ce]-ie[Ce]))*(se.t-ie.t);ke>=0&&ke<=1&&et>=0&&et<=1&&(e?C++:C.push({x:Re.x,y:Re.y,t1:ke,t2:et}))}}return C},Mn=function(f,t,e){f=path2Curve(f),t=path2Curve(t);for(var r,n,a,i,o,s,l,d,p,C,S=e?0:[],L=0,z=f.length;L<z;L++){var H=f[L];if(H[0]==="M")r=o=H[1],n=s=H[2];else{H[0]==="C"?(p=[r,n].concat(H.slice(1)),r=p[6],n=p[7]):(p=[r,n,r,n,o,s,o,s],r=o,n=s);for(var ee=0,ie=t.length;ee<ie;ee++){var se=t[ee];if(se[0]==="M")a=l=se[1],i=d=se[2];else{se[0]==="C"?(C=[a,i].concat(se.slice(1)),a=C[6],i=C[7]):(C=[a,i,a,i,l,d,l,d],a=l,i=d);var ye=ba(p,C,e);if(e)S+=ye;else{for(var Ce=0,Re=ye.length;Ce<Re;Ce++)ye[Ce].segment1=L,ye[Ce].segment2=ee,ye[Ce].bez1=p,ye[Ce].bez2=C;S=S.concat(ye)}}}}}return S};function ha(f,t){return Mn(f,t)}function Zn(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Cn(f,t){return Zn(f)*Zn(t)?(f[0]*t[0]+f[1]*t[1])/(Zn(f)*Zn(t)):1}function fa(f,t){return(f[0]*t[1]<f[1]*t[0]?-1:1)*Math.acos(Cn(f,t))}function Fa(f,t){return f[0]===t[0]&&f[1]===t[1]}function ii(f,t){var e=t[1],r=t[2],n=mod(toRadian(t[3]),Math.PI*2),a=t[4],i=t[5],o=f[0],s=f[1],l=t[6],d=t[7],p=Math.cos(n)*(o-l)/2+Math.sin(n)*(s-d)/2,C=-1*Math.sin(n)*(o-l)/2+Math.cos(n)*(s-d)/2,S=p*p/(e*e)+C*C/(r*r);S>1&&(e*=Math.sqrt(S),r*=Math.sqrt(S));var L=e*e*(C*C)+r*r*(p*p),z=L?Math.sqrt((e*e*(r*r)-L)/L):1;a===i&&(z*=-1),isNaN(z)&&(z=0);var H=r?z*e*C/r:0,ee=e?z*-r*p/e:0,ie=(o+l)/2+Math.cos(n)*H-Math.sin(n)*ee,se=(s+d)/2+Math.sin(n)*H+Math.cos(n)*ee,ye=[(p-H)/e,(C-ee)/r],Ce=[(-1*p-H)/e,(-1*C-ee)/r],Re=fa([1,0],ye),ke=fa(ye,Ce);return Cn(ye,Ce)<=-1&&(ke=Math.PI),Cn(ye,Ce)>=1&&(ke=0),i===0&&ke>0&&(ke=ke-2*Math.PI),i===1&&ke<0&&(ke=ke+2*Math.PI),{cx:ie,cy:se,rx:Fa(f,[l,d])?0:e,ry:Fa(f,[l,d])?0:r,startAngle:Re,endAngle:Re+ke,xRotation:n,arcFlag:a,sweepFlag:i}}function Ga(f,t){return[t[0]+(t[0]-f[0]),t[1]+(t[1]-f[1])]}function Na(f){f=parsePath(f);for(var t=[],e=null,r=null,n=null,a=0,i=f.length,o=0;o<i;o++){var s=f[o];r=f[o+1];var l=s[0],d={command:l,prePoint:e,params:s,startTangent:null,endTangent:null};switch(l){case"M":n=[s[1],s[2]],a=o;break;case"A":var p=getArcParams(e,s);d.arcParams=p;break;default:break}if(l==="Z")e=n,r=f[a+1];else{var C=s.length;e=[s[C-2],s[C-1]]}r&&r[0]==="Z"&&(r=f[a],t[a]&&(t[a].prePoint=e)),d.currentPoint=e,t[a]&&isSamePoint(e,t[a].currentPoint)&&(t[a].prePoint=d.prePoint);var S=r?[r[r.length-2],r[r.length-1]]:null;d.nextPoint=S;var L=d.prePoint;if(["L","H","V"].includes(l))d.startTangent=[L[0]-e[0],L[1]-e[1]],d.endTangent=[e[0]-L[0],e[1]-L[1]];else if(l==="Q"){var z=[s[1],s[2]];d.startTangent=[L[0]-z[0],L[1]-z[1]],d.endTangent=[e[0]-z[0],e[1]-z[1]]}else if(l==="T"){var H=t[o-1],z=Ga(H.currentPoint,L);H.command==="Q"?(d.command="Q",d.startTangent=[L[0]-z[0],L[1]-z[1]],d.endTangent=[e[0]-z[0],e[1]-z[1]]):(d.command="TL",d.startTangent=[L[0]-e[0],L[1]-e[1]],d.endTangent=[e[0]-L[0],e[1]-L[1]])}else if(l==="C"){var ee=[s[1],s[2]],ie=[s[3],s[4]];d.startTangent=[L[0]-ee[0],L[1]-ee[1]],d.endTangent=[e[0]-ie[0],e[1]-ie[1]],d.startTangent[0]===0&&d.startTangent[1]===0&&(d.startTangent=[ee[0]-ie[0],ee[1]-ie[1]]),d.endTangent[0]===0&&d.endTangent[1]===0&&(d.endTangent=[ie[0]-ee[0],ie[1]-ee[1]])}else if(l==="S"){var H=t[o-1],ee=Ga(H.currentPoint,L),ie=[s[1],s[2]];H.command==="C"?(d.command="C",d.startTangent=[L[0]-ee[0],L[1]-ee[1]],d.endTangent=[e[0]-ie[0],e[1]-ie[1]]):(d.command="SQ",d.startTangent=[L[0]-ie[0],L[1]-ie[1]],d.endTangent=[e[0]-ie[0],e[1]-ie[1]])}else if(l==="A"){var se=.001,ye=d.arcParams||{},Ce=ye.cx,Re=Ce===void 0?0:Ce,ke=ye.cy,et=ke===void 0?0:ke,vt=ye.rx,at=vt===void 0?0:vt,Mt=ye.ry,zt=Mt===void 0?0:Mt,Cr=ye.sweepFlag,jr=Cr===void 0?0:Cr,kr=ye.startAngle,yr=kr===void 0?0:kr,dn=ye.endAngle,un=dn===void 0?0:dn;jr===0&&(se*=-1);var br=at*Math.cos(yr-se)+Re,zr=zt*Math.sin(yr-se)+et;d.startTangent=[br-n[0],zr-n[1]];var en=at*Math.cos(yr+un+se)+Re,Jr=zt*Math.sin(yr+un-se)+et;d.endTangent=[L[0]-en,L[1]-Jr]}t.push(d)}return t}function si(f){for(var t=[],e=f.length,r=0;r<e-1;r++){var n=f[r],a=f[r+1];t.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(t.length>1){var i=f[0],o=f[e-1];t.push({from:{x:o[0],y:o[1]},to:{x:i[0],y:i[1]}})}return t}function Oi(f,t){var e=!1;return each(f,function(r){if(getLineIntersect(r.from,r.to,t.from,t.to))return e=!0,!1}),e}function gi(f){var t=f.map(function(r){return r[0]}),e=f.map(function(r){return r[1]});return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,e),maxY:Math.max.apply(null,e)}}function Iu(f,t){return!(t.minX>f.maxX||t.maxX<f.minX||t.minY>f.maxY||t.maxY<f.minY)}function kf(f,t){if(f.length<2||t.length<2)return!1;var e=gi(f),r=gi(t);if(!Iu(e,r))return!1;var n=!1;if(each(t,function(s){if(isPointInPolygon(f,s[0],s[1]))return n=!0,!1}),n||(each(f,function(s){if(isPointInPolygon(t,s[0],s[1]))return n=!0,!1}),n))return!0;var a=si(f),i=si(t),o=!1;return each(i,function(s){if(Oi(a,s))return o=!0,!1}),o}var Ps=function(t,e){return!t||!e?t:t.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var a=e[n];return a===0&&(a="0"),a||""})},su=function(t){var e=[];if(t.length<2)throw new Error("point length must largn than 2, now it's ".concat(t.length));for(var r=0,n=t;r<n.length;r++){var a=n[r],i=a.x,o=a.y;e.push(i),e.push(o)}var s=ln(e);return s.unshift(["M",t[0].x,t[0].y]),s},Yo=function(t,e,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a={x:(1-r)*t.x+r*e.x,y:(1-r)*t.y+r*e.y},i=[0,0];Tr.normalize(i,[e.x-t.x,e.y-t.y]),(!i||!i[0]&&!i[1])&&(i=[0,0]);var o=[-i[1]*n,i[0]*n];return a.x+=o[0],a.y+=o[1],a},Hu=function(t,e){var r=t.length;if(!r)return"";for(var n="",a="",i=0;i<r;i++){var o=t[i];i===0?a="M{x} {y}":a="L{x} {y}",n+=Ps(a,o)}return e&&(n+="Z"),n},Au=function(t){var e=[];return t.forEach(function(r){var n=r[0];if(n!=="A")for(var a=1;a<r.length;a=a+2)e.push([r[a],r[a+1]]);else{var i=r.length;e.push([r[i-2],r[i-1]])}}),e},uu=function(t){if(t.length<2)throw new Error("point length must largn than 2, now it's ".concat(t.length));var e=t[0],r=t[1],n=t[t.length-1],a=t[t.length-2];t.unshift(n),t.unshift(a),t.push(e),t.push(r);for(var i=[],o=1;o<t.length-2;o+=1){var s=t[o-1].x,l=t[o-1].y,d=t[o].x,p=t[o].y,C=t[o+1].x,S=t[o+1].y,L=o!==t.length-2?t[o+2].x:C,z=o!==t.length-2?t[o+2].y:S,H=d+(C-s)/6,ee=p+(S-l)/6,ie=C-(L-d)/6,se=S-(z-p)/6;i.push(["C",H,ee,ie,se,C,S])}return i.unshift(["M",n.x,n.y]),i},Ou=function(t,e){return Tr.scale([0,0],Tr.normalize([0,0],t),e)},df=function(t,e){var r=[t[1]-e[1],e[0]-t[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},fu=function(t,e){return[e[0]-t[0],e[1]-t[1]]};function Zu(f,t){var e=function(p){var C=[p[0][0],p[0][1]-t],S=[p[0][0],p[0][1]+t];return"M ".concat(C," A ").concat(t,",").concat(t,",0,0,0,").concat(S," A ").concat(t,",").concat(t,",0,0,0,").concat(C)},r=function(p){var C=Tr.scale([0,0],df(p[0],p[1]),t),S=Tr.scale([0,0],C,-1),L=Tr.add([0,0],p[0],C),z=Tr.add([0,0],p[1],C),H=Tr.add([0,0],p[1],S),ee=Tr.add([0,0],p[0],S);return"M ".concat(L," L ").concat(z," A ").concat([t,t,"0,0,0",H].join(",")," L ").concat(ee," A ").concat([t,t,"0,0,0",L].join(","))};if(!f||f.length<1)return"";if(f.length===1)return e(f);if(f.length===2)return r(f);for(var n=new Array(f.length),a=0;a<n.length;++a){var i=a===0?f[f.length-1]:f[a-1],o=f[a],s=Tr.scale([0,0],df(i,o),t);n[a]=[Tr.add([0,0],i,s),Tr.add([0,0],o,s)]}var l="A ".concat([t,t,"0,0,0,"].join(","));return n=n.map(function(d,p){var C="";return p===0&&(C="M ".concat(n[n.length-1][1]," ")),C+="".concat(l+d[0]," L ").concat(d[1]),C}),n.join(" ")}function Hs(f,t){var e=f.length,r=function(d){var p=[d[0][0],d[0][1]-t],C=[d[0][0],d[0][1]+t];return"M ".concat(p," A ").concat([t,t,"0,0,0",C].join(",")," A ").concat([t,t,"0,0,0",p].join(","))},n=function(d){var p=fu(d[0],d[1]),C=Ou(p,t),S=Tr.add([0,0],d[0],Tr.scale([0,0],C,-1)),L=Tr.add([0,0],d[1],C),z=1.2*t,H=Ou(Tr.normalize([0,0],p),z),ee=Tr.scale([0,0],H,-1),ie=Tr.add([0,0],S,ee),se=Tr.add([0,0],L,ee),ye=Tr.add([0,0],S,H);return"M ".concat(S," C ").concat([ie,se,L].join(",")," S ").concat([ye,S].join(",")," Z")};if(!f||e<1)return"";if(e===1)return r(f);if(e===2)return n(f);for(var a=f.map(function(l,d){var p=f[(d+1)%e];return{p:l,v:Tr.normalize([0,0],fu(l,p))}}),i=0;i<a.length;++i){var o=i>0?i-1:e-1,s=Tr.normalize([0,0],Tr.add([0,0],a[o].v,Tr.scale([0,0],a[i].v,-1)));a[i].p=Tr.add([0,0],a[i].p,Tr.scale([0,0],s,t))}return a.map(function(l){var d=l.p;return{x:d[0],y:d[1]}})}var hf=function(t,e){for(var r=[],n=0;n<5;n++){var a=Math.cos((18+72*n)/180*Math.PI)*t,i=Math.sin((18+72*n)/180*Math.PI)*t,o=Math.cos((54+72*n)/180*Math.PI)*e,s=Math.sin((54+72*n)/180*Math.PI)*e;n===0?r.push(["M",a,-i]):r.push(["L",a,-i]),r.push(["L",o,-s])}return r.push(["Z"]),r},vf=function(t,e,r){return(t.y-r.y)*(e.x-r.x)-(t.x-r.x)*(e.y-r.y)},gf=function(t){var e=t.map(function(p){return{x:p.getModel().x,y:p.getModel().y}});e.sort(function(p,C){return p.x===C.x?p.y-C.y:p.x-C.x});for(var r={},n=e.length-1;n>=0;n--){var a=e[n],i=a.x,o=a.y;r["".concat(i,"-").concat(o)]&&e.splice(n,1),r["".concat(i,"-").concat(o)]=!0}if(e.length===1)return e;for(var s=[],n=0;n<e.length;n++){for(;s.length>=2&&vf(s[s.length-2],s[s.length-1],e[n])<=0;)s.pop();s.push(e[n])}for(var l=[],n=e.length-1;n>=0;n--){for(;l.length>=2&&vf(l[l.length-2],l[l.length-1],e[n])<=0;)l.pop();l.push(e[n])}l.pop(),s.pop();var d=s.concat(l);return d},jo={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function pf(f,t,e){var r=!1,n=function(s,l){return t.cells[s+l*t.width]},a=function(s,l){var d=0;return n(s-1,l-1)>=e&&(d+=1),n(s,l-1)>e&&(d+=2),n(s-1,l)>e&&(d+=4),n(s,l)>e&&(d+=8),d},i=function(s,l){for(var d=s,p=l,C,S,L=0;L<t.width*t.height;L++){if(C=d,S=p,f.findIndex(function(H){return H.x===d&&H.y===p})>-1){if(!(f[0].x!==d||f[0].y!==p))return!0}else f.push({x:d,y:p});var z=a(d,p);switch(z){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:d++;break;case 12:case 14:case 4:d--;break;case 6:C===0&&(S===-1?d-=1:d+=1);break;case 1:case 13:case 5:p--;break;case 9:C===1&&(S===0?p-=1:p+=1);break;case 10:case 8:case 11:p++;break;default:return console.warn("Marching squares invalid state: ".concat(z)),!0}}};this.march=function(){for(var o=0;o<t.width&&!r;o+=1)for(var s=0;s<t.height&&!r;s+=1)n(o,s)>e&&a(o,s)!==15&&(r=i(o,s));return r}}var Rf=function(t,e,r){var n=Math.ceil(t/r),a=Math.ceil(e/r),i=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:i,width:n,height:a}},ll=function(t,e,r){var n=null,a=Number.POSITIVE_INFINITY;return e.forEach(function(i){var o={x:t.getModel().x,y:t.getModel().y},s={x:i.getModel().x,y:i.getModel().y},l=Zo(o,s),d=new co(o.x,o.y,s.x,s.y),p=r.reduce(function(C,S){return Go(S,d)>0?C+1:C},0);l*Math.pow(p+1,2)<a&&(n=i,a=l*Math.pow(p+1,2))}),n},Lu=function(t,e){var r=Number.POSITIVE_INFINITY,n=null;return t.forEach(function(a){var i=Go(a,e);i>=0&&i<r&&(n=a,r=i)}),n},Ku=function(t,e,r,n){var a=[],i=[];i.push(t);for(var o=!0,s=0,l=function(S,L){var z=!1;return L.forEach(function(H){z||(Wi(S,{x:H.x1,y:H.y1})||Wi(S,{x:H.x2,y:H.y2}))&&(z=!0)}),z},d=function(S,L){for(var z=0,H=L;z<H.length;z++){var ee=H[z],ie=ee.getBBox(),se=[[ie.x,ie.y],[ie.x+ie.width,ie.y],[ie.x,ie.y+ie.height],[ie.x+ie.width,ie.y+ie.height]];if(Ji(se,S.x,S.y))return!0}return!1};o&&s<r;){o=!1;for(var p=function(){var S=i.pop(),L=Lu(e,S);if(L){var z=hs(L,S),H=z[0],ee=z[1];if(ee===2){var ie=function(ye){for(var Ce=n,Re=Bf(L,Ce,H,ye),ke=l(Re,i)||l(Re,a),et=d(Re,e);!ke&&et&&Ce>=1;)Ce/=1.5,Re=Bf(L,Ce,H,ye),ke=l(Re,i)||l(Re,a),et=d(Re,e);Re&&!ke&&(!ye||!et)&&(i.push(new co(S.x1,S.y1,Re.x,Re.y)),i.push(new co(Re.x,Re.y,S.x2,S.y2)),o=!0)};ie(!0),o||ie(!1)}}o||a.push(S),s+=1};!o&&i.length;)p()}for(;i.length;)a.push(i.pop());return a};function Xc(f,t,e,r,n){var a=ll(f,e,t);if(a===null)return[];var i=function(p){for(var C=[];p.length>0;){var S=p.pop();if(p.length===0){C.push(S);break}var L=p.pop(),z=new co(S.x1,S.y1,L.x2,L.y2),H=Lu(t,z);H?(C.push(S),p.push(L)):p.push(z)}return C},o=new co(f.getModel().x,f.getModel().y,a.getModel().x,a.getModel().y),s=Ku(o,t,r,n),l=i(s);return l}var $u=function(t,e,r){var n=Object.assign(jo,r),a=Oa(t.map(function(ie){return{x:ie.getModel().x,y:ie.getModel().y}}));t=t.sort(function(ie,se){return Zo({x:ie.getModel().x,y:ie.getModel().y},a)-Zo({x:se.getModel().x,y:se.getModel().y},a)});var i=[],o=[];t.forEach(function(ie){var se=Xc(ie,e,i,n.maxRoutingIterations,n.morphBuffer);se.forEach(function(ye){o.push(ye)}),i.push(ie)});for(var s=Vc(t,o,n.nodeR0),l=Rf(s.width,s.height,n.pixelGroupSize),d=[],p=[],C=0;C<n.maxMarchingIterations;C++)if(Qu(t,e,o,s,l,n),d=[],p=[],!!new pf(d,l,n.threshold).march()){var S=d.map(function(ie){return{x:Math.round(ie.x*n.pixelGroupSize+s.minX),y:Math.round(ie.y*n.pixelGroupSize+s.minY)}});if(S){var L=S.length;if(n.skip>1)for(L=Math.floor(S.length/n.skip);L<3&&n.skip>1;)n.skip-=1,L=Math.floor(S.length/n.skip);for(var z=0,H=0;H<L;H+=1,z+=n.skip)p.push({x:S[z].x,y:S[z].y})}var ee=function(){for(var se=0,ye=t;se<ye.length;se++){var Ce=ye[se],Re=p.map(function(ke){return[ke.x,ke.y]});if(!Ji(Re,Ce.getBBox().centerX,Ce.getBBox().centerY))return!1}return!0};if(p&&ee())return p;if(n.threshold*=.9,C<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&e.length>0)n.nonMemberInfluenceFactor*=.8;else break}return p};function Vc(f,t,e){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];f.forEach(function(s){n.push(s.getBBox())}),t.forEach(function(s){n.push(s.getBBox())});for(var a=0,i=n;a<i.length;a++){var o=i[a];r.minX=(o.minX<r.minX?o.minX:r.minX)-e,r.minY=(o.minY<r.minY?o.minY:r.minY)-e,r.maxX=(o.maxX>r.maxX?o.maxX:r.maxX)+e,r.maxY=(o.maxY>r.maxY?o.maxY:r.maxY)+e}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function Qu(f,t,e,r,n,a){function i(S,L){var z=Math.floor((S-L)/a.pixelGroupSize);return z<0?0:z}function o(S,L){return S*a.pixelGroupSize+L}var s=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),l=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),d=function(L,z){var H=Math.min(i(L.minX,z+r.minX),n.width),ee=Math.min(i(L.minY,z+r.minY),n.height),ie=Math.min(i(L.maxX,-z+r.minX),n.width),se=Math.min(i(L.maxY,-z+r.minY),n.height);return[H,ee,ie,se]},p=function(L,z){for(var H=L.getBBox(),ee=d(H,a.nodeR1),ie=ee[0],se=ee[1],ye=ee[2],Ce=ee[3],Re=se;Re<Ce;Re+=1)for(var ke=ie;ke<ye;ke+=1)if(!(z<0&&n[ke+Re*n.width]<=0)){var et=o(ke,r.minX),vt=o(Re,r.minY),at=ts({x:et,y:vt},{x:H.minX,y:H.minY,width:H.width,height:H.height});if(at<Math.pow(a.nodeR1,2)){var Mt=Math.sqrt(at)-a.nodeR1;n.cells[ke+Re*n.width]+=z*Mt*Mt}}},C=function(L,z){for(var H=L.getBBox(),ee=d(H,a.edgeR1),ie=ee[0],se=ee[1],ye=ee[2],Ce=ee[3],Re=se;Re<Ce;Re+=1)for(var ke=ie;ke<ye;ke+=1)if(!(z<0&&n.cells[ke+Re*n.width]<=0)){var et=o(ke,r.minX),vt=o(Re,r.minY),at=no({x:et,y:vt},L);if(at<Math.pow(a.edgeR1,2)){var Mt=Math.sqrt(at)-a.edgeR1;n.cells[ke+Re*n.width]+=z*Mt*Mt}}};a.nodeInfluenceFactor&&f.forEach(function(S){p(S,a.nodeInfluenceFactor/s)}),a.edgeInfluenceFactor&&e.forEach(function(S){C(S,a.edgeInfluenceFactor/l)}),a.negativeNodeInfluenceFactor&&t.forEach(function(S){p(S,a.negativeNodeInfluenceFactor/s)})}function Bf(f,t,e,r){var n=f.getBBox(),a=e[0],i=e[1],o=e[2],s=e[3],l={topLeft:{x:n.minX-t,y:n.minY-t},topRight:{x:n.maxX+t,y:n.minY-t},bottomLeft:{x:n.minX-t,y:n.maxY+t},bottomRight:{x:n.maxX+t,y:n.maxY+t}},d=n.height*n.width;function p(L,z){return n.width*((L.y-n.minY+(z.y-n.minY))*.5)}if(i){if(a)return r?l.topLeft:l.bottomRight;if(o)return r?l.bottomLeft:l.topRight;var C=p(i,s);return C<d*.5?i.y>s.y?r?l.topLeft:l.bottomRight:r?l.topRight:l.bottomLeft:i.y<s.y?r?l.bottomLeft:l.topRight:r?l.bottomRight:l.topLeft}if(s){if(a)return r?l.topRight:l.bottomLeft;if(o)return r?l.bottomRight:l.topLeft}var S=p(a,o);return S<d*.5?a.x>o.x?r?l.topLeft:l.bottomRight:r?l.bottomLeft:l.topRight:a.x<o.x?r?l.topRight:l.bottomLeft:r?l.bottomRight:l.topLeft}var fc=function(){function f(t,e){this.cfg=(0,u.deepMix)(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,u.isString)(r)?t.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,u.isString)(r)?t.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return f.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},f.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},f.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},f.prototype.calcPath=function(t,e){var r,n,a;switch(this.type){case"round-convex":r=gf(t),a=Zu(r.map(function(i){return[i.x,i.y]}),this.padding),n=Tu(a);break;case"smooth-convex":r=gf(t),r.length===2?(a=Zu(r.map(function(i){return[i.x,i.y]}),this.padding),n=Tu(a)):r.length>2&&(a=Hs(r.map(function(i){return[i.x,i.y]}),this.padding),n=uu(a));break;case"bubble":r=$u(t,e,this.cfg.bubbleCfg),n=r.length>=2&&uu(r);break;default:}return n},f.prototype.render=function(){this.group.addShape("path",{attrs:(0,v.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},f.prototype.addMember=function(t){if(t){(0,u.isString)(t)&&(t=this.graph.findById(t)),this.members.push(t);var e=this.nonMembers.indexOf(t);return e>-1&&this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},f.prototype.addNonMember=function(t){if(t){(0,u.isString)(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t);var e=this.members.indexOf(t);return e>-1&&this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},f.prototype.removeMember=function(t){if(t){(0,u.isString)(t)&&(t=this.graph.findById(t));var e=this.members.indexOf(t);return e>-1?(this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0):!1}},f.prototype.removeNonMember=function(t){if(t){(0,u.isString)(t)&&(t=this.graph.findById(t));var e=this.nonMembers.indexOf(t);return e>-1?(this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0):!1}},f.prototype.updateData=function(t,e){var r=this;this.group.findById(this.id).remove(),t&&(this.members=t.map(function(n){return(0,u.isString)(n)?r.graph.findById(n):n})),e&&(this.nonMembers=e.map(function(n){return(0,u.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},f.prototype.updateStyle=function(t){var e=this.group.findById(this.id);e.attr((0,v.__assign)({},t))},f.prototype.updateCfg=function(t){var e=this;this.cfg=(0,u.deepMix)(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map(function(r){return(0,u.isString)(r)?e.graph.findById(r):r})),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,u.isString)(r)?e.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},f.prototype.contain=function(t){var e=this,r;(0,u.isString)(t)?r=this.graph.findById(t):r=t;var n,a=r.getKeyShape();if(r.get("type")==="path")n=Au(a.attr("path"));else{var i=a.getCanvasBBox();n=[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}return n=n.map(function(o){var s=e.graph.getPointByCanvas(o[0],o[1]);return[s.x,s.y]}),As(n,Au(this.path))},f.prototype.destroy=function(){this.group.remove(),this.cfg=null},f}(),Ff=fc,Du=J.vs,cc="node",Gf=function(f){(0,v.__extends)(t,f);function t(e){var r=f.call(this)||this;return r.sortCombos=(0,u.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var a=[],i={},o=r.get("comboTrees");(o||[]).forEach(function(l){li(l,function(d){return a[d.depth]?a[d.depth].push(d.id):a[d.depth]=[d.id],i[d.id]=d.depth,!0})});var s=r.getEdges().concat(r.get("vedges"));(s||[]).forEach(function(l){var d=l.getModel(),p=i[d.source]||0,C=i[d.target]||0,S=Math.max(p,C);a[S]?a[S].push(d.id):a[S]=[d.id]}),a.forEach(function(l){if(!(!l||!l.length))for(var d=l.length-1;d>=0;d--){var p=r.findById(l[d]);p&&p.toFront()}})}},500,!1),r.cfg=(0,u.deepMix)(r.getDefaultCfg(),e),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new qa(r.cfg.maxStep),r.redoStack=new qa(r.cfg.maxStep)),r}return t.prototype.init=function(){this.initCanvas();var e=new Wu(this),r=new Us(this),n=new oc(this),a=new Df(this);this.set({viewController:e,modeController:r,itemController:n,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},t.prototype.initGroups=function(){var e=this.get("canvas");if(e){var r=e.get("el"),n=(r||{}).id,a=n===void 0?"g6":n,i=e.addGroup({id:"".concat(a,"-root"),className:cn.rootContainerClassName});if(this.get("groupByTypes")){var o=i.addGroup({id:"".concat(a,"-edge"),className:cn.edgeContainerClassName}),s=i.addGroup({id:"".concat(a,"-node"),className:cn.nodeContainerClassName}),l=i.addGroup({id:"".concat(a,"-combo"),className:cn.comboContainerClassName});l.toBack(),this.set({nodeGroup:s,edgeGroup:o,comboGroup:l})}var d=i.addGroup({id:"".concat(a,"-delegate"),className:cn.delegateContainerClassName});this.set({delegateGroup:d}),this.set("group",i)}},t.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},t.prototype.set=function(e,r){return(0,u.isPlainObject)(e)?this.cfg=(0,v.__assign)((0,v.__assign)({},this.cfg),e):this.cfg[e]=r,e==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new qa(this.cfg.maxStep),this.redoStack=new qa(this.cfg.maxStep)),this},t.prototype.get=function(e){var r;return(r=this.cfg)===null||r===void 0?void 0:r[e]},t.prototype.getGroup=function(){return this.get("group")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.getMinZoom=function(){return this.get("minZoom")},t.prototype.setMinZoom=function(e){return this.set("minZoom",e)},t.prototype.getMaxZoom=function(){return this.get("maxZoom")},t.prototype.setMaxZoom=function(e){return this.set("maxZoom",e)},t.prototype.getWidth=function(){return this.get("width")},t.prototype.getHeight=function(){return this.get("height")},t.prototype.clearItemStates=function(e,r){(0,u.isString)(e)&&(e=this.findById(e));var n=this.get("itemController");r||(r=e.get("states")),n.clearItemStates(e,r);var a=this.get("stateController");a.updateStates(e,r,!1)},t.prototype.node=function(e){typeof e=="function"&&this.set("nodeMapper",e)},t.prototype.edge=function(e){typeof e=="function"&&this.set("edgeMapper",e)},t.prototype.combo=function(e){typeof e=="function"&&this.set("comboMapper",e)},t.prototype.findById=function(e){return this.get("itemMap")[e]},t.prototype.find=function(e,r){var n,a=this.get("".concat(e,"s"));return(0,u.each)(a,function(i,o){if(r(i,o))return n=i,n}),n},t.prototype.findAll=function(e,r){var n=[];return(0,u.each)(this.get("".concat(e,"s")),function(a,i){r(a,i)&&n.push(a)}),n},t.prototype.findAllByState=function(e,r,n){return n?this.findAll(e,function(a){return a.hasState(r)&&n(a)}):this.findAll(e,function(a){return a.hasState(r)})},t.prototype.translate=function(e,r,n,a){var i=this,o=this.get("group"),s=(0,u.clone)(o.getMatrix());if(s||(s=[1,0,0,0,1,0,0,0,1]),n){var l=is({animateCfg:a,callback:function(){return i.emit("viewportchange",{action:"translate",matrix:o.getMatrix()})}});uo(o,{x:o.getCanvasBBox().x+e,y:o.getCanvasBBox().y+r},n,l||{duration:500,easing:"easeCubic"})}else s=Du(s,[["t",e,r]]),o.setMatrix(s),this.emit("viewportchange",{action:"translate",matrix:s}),this.autoPaint()},t.prototype.moveTo=function(e,r,n,a){var i=this.get("group");uo(i,{x:e,y:r},n,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:i.getMatrix()})},t.prototype.fitView=function(e,r,n,a){e&&this.set("fitViewPadding",e);var i=this.get("viewController");r?i.fitViewByRules(r,n,a):i.fitView(n,a),this.autoPaint()},t.prototype.fitCenter=function(e,r){var n=this.get("viewController");n.fitCenter(e,r),this.autoPaint()},t.prototype.addBehaviors=function(e,r){var n=this.get("modeController");return n.manipulateBehaviors(e,r,!0),this},t.prototype.removeBehaviors=function(e,r){var n=this.get("modeController");return n.manipulateBehaviors(e,r,!1),this},t.prototype.updateBehavior=function(e,r,n){var a=this.get("modeController");return a.updateBehavior(e,r,n),this},t.prototype.zoom=function(e,r,n,a){var i=this,o=this.get("group"),s=(0,u.clone)(o.getMatrix())||[1,0,0,0,1,0,0,0,1],l=this.get("minZoom"),d=this.get("maxZoom"),p=this.getZoom()||1,C=p*e,S=e,L=!1;if(l&&C<l?(S=l/p,L=!0):d&&C>d&&(S=d/p,L=!0),r?s=Du(s,[["t",-r.x,-r.y],["s",S,S],["t",r.x,r.y]]):s=Du(s,[["s",S,S]]),n){var z=(0,u.clone)(o.getMatrix());z||(z=[1,0,0,0,1,0,0,0,1]);var H=z[0],ee=H*S,ie=is({animateCfg:a,callback:function(){return i.emit("viewportchange",{action:"zoom",matrix:o.getMatrix()})}});o.animate(function(se){if(se===1)z=s;else{var ye=Ja(H,ee,se)/z[0];r?z=Du(z,[["t",-r.x,-r.y],["s",ye,ye],["t",r.x,r.y]]):z=Du(z,[["s",ye,ye]])}return{matrix:z}},ie)}else o.setMatrix(s),this.emit("viewportchange",{action:"zoom",matrix:s}),this.autoPaint();return!L},t.prototype.zoomTo=function(e,r,n,a){var i=e/this.getZoom();return this.zoom(i,r,n,a)},t.prototype.focusItem=function(e,r,n){var a=this.get("viewController"),i=!1;r?i=!0:r===void 0&&(i=this.get("animate"));var o={};n?o=n:n===void 0&&(o=this.get("animateCfg")),a.focus(e,i,o),this.autoPaint()},t.prototype.focusItems=function(e,r,n,a){var i=this.get("viewController");i.focusItems(e,r,n,a)},t.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},t.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},t.prototype.getPointByClient=function(e,r){var n=this.get("viewController");return n.getPointByClient(e,r)},t.prototype.getClientByPoint=function(e,r){var n=this.get("viewController");return n.getClientByPoint(e,r)},t.prototype.getPointByCanvas=function(e,r){var n=this.get("viewController");return n.getPointByCanvas(e,r)},t.prototype.getCanvasByPoint=function(e,r){var n=this.get("viewController");return n.getCanvasByPoint(e,r)},t.prototype.getGraphCenterPoint=function(){var e=this.get("group").getCanvasBBox();return{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2}},t.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},t.prototype.showItem=function(e,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(e,!0);if(r&&this.get("enabledStack")){var i=a.getID(),o=a.getType(),s={},l={};switch(o){case"node":s.nodes=[{id:i,visible:!1}],l.nodes=[{id:i,visible:!0}];break;case"edge":s.nodes=[{id:i,visible:!1}],l.edges=[{id:i,visible:!0}];break;case"combo":s.nodes=[{id:i,visible:!1}],l.combos=[{id:i,visible:!0}];break;default:break}this.pushStack("visible",{before:s,after:l})}},t.prototype.hideItem=function(e,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(e,!1);if(r&&this.get("enabledStack")){var i=a.getID(),o=a.getType(),s={},l={};switch(o){case"node":s.nodes=[{id:i,visible:!0}],l.nodes=[{id:i,visible:!1}];break;case"edge":s.nodes=[{id:i,visible:!0}],l.edges=[{id:i,visible:!1}];break;case"combo":s.nodes=[{id:i,visible:!0}],l.combos=[{id:i,visible:!1}];break;default:break}this.pushStack("visible",{before:s,after:l})}},t.prototype.refreshItem=function(e){var r=this.get("itemController");r.refreshItem(e)},t.prototype.setAutoPaint=function(e){var r=this;r.set("autoPaint",e);var n=r.get("canvas");n.set("autoDraw",e)},t.prototype.remove=function(e,r){r===void 0&&(r=!0),this.removeItem(e,r)},t.prototype.removeItem=function(e,r){r===void 0&&(r=!0);var n=e;if((0,u.isString)(e)&&(n=this.findById(e)),!n&&(0,u.isString)(e))console.warn("The item ".concat(e," to be removed does not exist!"));else if(n){var a="";if(n.getType&&(a=n.getType()),r&&this.get("enabledStack")){var i=(0,v.__assign)((0,v.__assign)({},n.getModel()),{itemType:a}),o={};switch(a){case"node":{o.nodes=[i],o.edges=[];for(var s=n.getEdges(),l=s.length-1;l>=0;l--)o.edges.push((0,v.__assign)((0,v.__assign)({},s[l].getModel()),{itemType:"edge"}));break}case"edge":o.edges=[i];break;case"combo":o.combos=[i];break;default:break}this.pushStack("delete",{before:o,after:{}})}if(a==="node"){var d=n.getModel();d.comboId&&this.updateComboTree(n,void 0,!1)}var p=this.get("itemController");if(p.removeItem(n),a==="combo"){var C=Ls(this.get("comboTrees"));this.set("comboTrees",C)}}},t.prototype.innerAddItem=function(e,r,n){if(!wu(e,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,i=this.get("comboTrees")||[];if(e==="combo"){var o=this.get("itemMap"),s=!1;if(i.forEach(function(L){s||Xo(L,function(z){if(r.parentId===z.id){s=!0;var H=(0,v.__assign)({id:r.id,depth:z.depth+2},r);z.children?z.children.push(H):z.children=[H],r.depth=H.depth,a=n.addItem(e,r)}var ee=o[z.id];return s&&ee&&ee.getType&&ee.getType()==="combo"&&n.updateCombo(ee,z.children),!0})}),!s){var l=(0,v.__assign)({id:r.id,depth:0},r);r.depth=l.depth,i.push(l),a=n.addItem(e,r)}this.set("comboTrees",i),r.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(e==="node"&&(0,u.isString)(r.comboId)&&i){var d=this.findById(r.comboId);d&&d.getType&&d.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=n.addItem(e,r);var p=this.get("itemMap"),C=!1,S=!1;i.forEach(function(L){S||C||Xo(L,function(z){if(z.id===r.id)return S=!0,!1;if(r.comboId===z.id&&!S){C=!0;var H=(0,u.clone)(r);H.itemType="node",z.children?z.children.push(H):z.children=[H],H.depth=z.depth+1}return C&&p[z.id].getType&&p[z.id].getType()==="combo"&&n.updateCombo(p[z.id],z.children),!0})})}else a=n.addItem(e,r);if(e==="node"&&r.comboId||e==="combo"&&r.parentId){var d=this.findById(r.comboId||r.parentId);d&&d.getType&&d.getType()==="combo"&&d.addChild(a)}return a},t.prototype.addItem=function(e,r,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var i=this.get("comboSorted");this.set("comboSorted",i&&!a);var o=this.get("itemController"),s=this.innerAddItem(e,r,o);if(s===!1||s===!0)return s;var l=this.get("combos");if(l&&l.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var d=(0,v.__assign)((0,v.__assign)({},s.getModel()),{itemType:e}),p={};switch(e){case"node":p.nodes=[d];break;case"edge":p.edges=[d];break;case"combo":p.combos=[d];break;default:break}this.pushStack("add",{before:{},after:p})}return s},t.prototype.addItems=function(e,r,n){e===void 0&&(e=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!n);for(var i=this.get("itemController"),o=[],s=0;s<e.length;s++){var l=e[s];l.type!=="edge"&&l.type!=="vedge"?o.push(this.innerAddItem(l.type,l.model,i)):o.push(void 0)}for(var s=0;s<e.length;s++){var l=e[s];(l.type==="edge"||l.type==="vedge")&&(o[s]=this.innerAddItem(l.type,l.model,i))}if(n){var d=this.get("combos");d&&d.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var p={nodes:[],edges:[],combos:[]},s=0;s<e.length;s++){var C=e[s].type,S=o[s];if(S&&S!==!0){var L=(0,v.__assign)((0,v.__assign)({},S.getModel()),{itemType:C});switch(C){case"node":p.nodes.push(L);break;case"edge":p.edges.push(L);break;case"combo":p.combos.push(L);break;default:break}}}this.pushStack("addItems",{before:{},after:p})}return o},t.prototype.add=function(e,r,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(e,r,n,a)},t.prototype.updateItem=function(e,r,n){var a=this;n===void 0&&(n=!0);var i=this.get("itemController"),o;(0,u.isString)(e)?o=this.findById(e):o=e;var s=n&&this.get("enabledStack"),l;s&&(l=(0,u.clone)(o.getModel()));var d="";o.getType&&(d=o.getType());var p=(0,v.__spreadArray)([],o.getStates(),!0);if(d==="combo"&&(0,u.each)(p,function(z){return a.setItemState(o,z,!1)}),i.updateItem(o,r),d==="combo"&&(0,u.each)(p,function(z){return a.setItemState(o,z,!0)}),s){var C={nodes:[],edges:[],combos:[]},S={nodes:[],edges:[],combos:[]},L=(0,v.__assign)({id:l.id},r);switch(d){case"node":C.nodes.push(l),S.nodes.push(L);break;case"edge":C.edges.push(l),S.edges.push(L);break;case"combo":C.combos.push(l),S.combos.push(L);break;default:break}this.pushStack("update",{before:C,after:S})}},t.prototype.update=function(e,r,n){n===void 0&&(n=!0),this.updateItem(e,r,n)},t.prototype.setItemState=function(e,r,n){(0,u.isString)(e)&&(e=this.findById(e));var a=this.get("itemController");a.setItemState(e,r,n);var i=this.get("stateController");i.updateState(e,r,n)},t.prototype.priorityState=function(e,r){var n=this.get("itemController");n.priorityState(e,r)},t.prototype.data=function(e){zs(e),this.set("data",e)},t.prototype.render=function(){var e=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,a=n===void 0?[]:n,i=r.edges,o=i===void 0?[]:i,s=r.combos,l=s===void 0?[]:s;if(this.clear(!0),this.emit("beforerender"),e.addItems(a.map(function(H){return{type:"node",model:H}}),!1,!1),(l==null?void 0:l.length)!==0){var d=Gs(l,a);this.set("comboTrees",d),e.addCombos(l)}e.addItems(o.map(function(H){return{type:"edge",model:H}}),!1,!1);var p=e.get("animate");(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",!1);var C=e.get("layoutController");if(C){if(C.layout(S),this.destroyed)return}else S();function S(){(e.get("comboTrees")||[]).forEach(function(H){Xo(H,function(ee){var ie=e.findById(ee.id);return ie.getType()==="combo"&&ee.collapsed&&(e.collapseCombo(ee.id,!1),e.updateCombo(ie)),!0})}),e.get("fitView")?e.fitView():e.get("fitCenter")&&e.fitCenter(),e.autoPaint(),e.emit("afterrender"),(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",p),setTimeout(function(){var H;(H=e.getCombos())===null||H===void 0||H.forEach(function(ee){ee.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(l&&l.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var L=this.getNodes();L.forEach(function(H){H.toFront()})}else{var z=this.getEdges();z.forEach(function(H){H.toBack()})}},t.prototype.read=function(e){this.data(e),this.render()},t.prototype.diffItems=function(e,r,n){var a=this,i,o=this.get("itemMap");(0,u.each)(n,function(s){if(i=o[s.id],i){if(a.get("animate")&&e===cc){var l=i.getContainer().getMatrix();l||(l=[1,0,0,0,1,0,0,0,1]),i.set("originAttrs",{x:l[6],y:l[7]})}a.updateItem(i,s,!1)}else i=a.addItem(e,s,!1);i&&r["".concat(e,"s")].push(i)})},t.prototype.changeData=function(e,r){var n=this,a;r===void 0&&(r=!0);var i=this,o=e||i.get("data");if(!zs(o))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.save(),after:o}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(ye){return i.clearItemStates(ye)}),this.getEdges().map(function(ye){return i.clearItemStates(ye)});var s=this.get("canvas"),l=s.get("localRefresh");s.set("localRefresh",!1),i.get("data")||(i.data(o),i.render());var d=this.get("itemMap"),p={nodes:[],edges:[]},C=o.combos;if(C){var S=Gs(C,o.nodes);this.set("comboTrees",S)}else this.set("comboTrees",[]);this.diffItems("node",p,o.nodes),(0,u.each)(d,function(ye,Ce){d[Ce].getModel().depth=0,!(ye.getType&&ye.getType()==="edge")&&(ye.getType&&ye.getType()==="combo"?(delete d[Ce],ye.destroy()):p.nodes.indexOf(ye)<0&&(delete d[Ce],i.remove(ye,!1)))});for(var L=this.getCombos(),z=L.length,H=z-1;H>=0;H--)L[H].destroyed&&L.splice(H,1);C&&(i.addCombos(C),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",p,o.edges),(0,u.each)(d,function(ye,Ce){ye.getType&&(ye.getType()==="node"||ye.getType()==="combo")||p.edges.indexOf(ye)<0&&(delete d[Ce],i.remove(ye,!1))}),(this.get("comboTrees")||[]).forEach(function(ye){Xo(ye,function(Ce){var Re=n.findById(Ce.id);return Re.getType()==="combo"&&Ce.collapsed&&n.collapseCombo(Ce.id,!1),!0})}),this.set({nodes:p.nodes,edges:p.edges});var ee=(this.get("layout")||{}).relayoutAtChangeData,ie=ee===void 0?!0:ee,se=this.get("layoutController");return ie&&se&&(se.changeData(function(){setTimeout(function(){var ye;(ye=i.getCombos())===null||ye===void 0||ye.forEach(function(Ce){Ce.set("animate",!0)})},0)}),i.get("animate")&&!se.getLayoutType()?(i.positionsAnimate(),(a=i.getCombos())===null||a===void 0||a.forEach(function(ye){return ye.set("animate",!0)})):i.autoPaint()),setTimeout(function(){s.set("localRefresh",l)},16),this.set("data",o),this.emit("afterchangedata"),this},t.prototype.addCombos=function(e){var r=this,n=r.get("comboTrees"),a=this.get("itemController");a.addCombos(n,e)},t.prototype.createCombo=function(e,r,n){var a=this;n===void 0&&(n=!0);var i=this.get("itemController");this.set("comboSorted",!1);var o="",s;if(e){if((0,u.isString)(e))o=e,s={id:e};else{if(o=e.id,!o){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}s=e}var l=n&&this.get("enabledStack"),d={nodes:[],combos:[]};l&&r.forEach(function(ee){var ie=a.findById(ee),se=ie.getType();if(!(se!=="node"&&se!=="combo")){var ye=ie.getModel();d["".concat(se,"s")].push({id:ee,parentId:se==="node"?ye.comboId:ye.parentId})}});var p=this.get("comboTrees"),C=new Set(r),S=new Map;p&&(p.forEach(function(ee){Xo(ee,function(ie,se,ye){if(C.has(ie.id)){if(se){var Ce=a.findById(se.id),Re=a.findById(ie.id);se.children.splice(ye,1),Ce.removeChild(Re),i.updateCombo(Ce,se.children)}ie.itemType==="combo"&&S.set(ie.id,ie)}return!0})}),p=p.filter(function(ee){return!C.has(ee.id)}),this.set("comboTrees",p));var L={nodes:[],combos:[]},z=r.map(function(ee){var ie=a.findById(ee),se=ie.getModel(),ye="";ie.getType&&(ye=ie.getType());var Ce=S.get(ee)||{id:ie.getID(),itemType:ye};return ye==="combo"?(Ce.parentId=o,se.parentId=o):ye==="node"&&(Ce.comboId=o,se.comboId=o),l&&L["".concat(ye,"s")].push({id:se.id,parentId:o}),Ce});s.children=z,this.addItem("combo",s,!1),this.set("comboSorted",!1),p&&(p.forEach(function(ee){li(ee,function(ie){return ie.id===o?(ie.itemType="combo",ie.children=z,!1):!0})}),this.sortCombos()),l&&(L.combos.push(s),this.pushStack("createCombo",{before:d,after:L}));var H=this.findById(o);!H.getModel().parentId&&H.getChildren().combos.length&&this.updateComboTree(H,void 0,!1),setTimeout(function(){H.set("animate",!0)},0)}},t.prototype.uncombo=function(e,r){var n=this,a,i;r===void 0&&(r=!0);var o=this,s=e;if((0,u.isString)(e)&&(s=this.findById(e)),!s||s.getType&&s.getType()!=="combo"){console.warn("The item is not a combo!");return}var l=s.getModel(),d=s.getModel().parentId,p=o.get("comboTrees");p||(p=[]);var C=this.get("itemMap"),S=s.get("id"),L,z=[],H=this.get("combos"),ee=this.findById(d),ie=r&&this.get("enabledStack"),se={};if(ie&&(se=(0,u.clone)(l),se.children=[]),p.forEach(function(ke){L||Xo(ke,function(et){var vt;if(et.id===S){L=et;var at=s.getEdges().map(function(Cr){return Cr.getID()});at.forEach(function(Cr){n.removeItem(Cr,!1)});var Mt=H.indexOf(s);H.splice(Mt,1),delete C[S];var zt=(0,u.clone)(s.getModel());s.destroy(),n.emit("afterremoveitem",{item:zt,type:"combo"})}if(d&&L&&et.id===d){ee.removeCombo(s),z=et.children;var Mt=z.indexOf(L);return Mt!==-1&&z.splice(Mt,1),(vt=L.children)===null||vt===void 0||vt.forEach(function(jr){var kr=n.findById(jr.id),yr=kr.getModel();kr.getType&&kr.getType()==="combo"?(jr.parentId=d,delete jr.comboId,yr.parentId=d,delete yr.comboId):kr.getType&&kr.getType()==="node"&&(jr.comboId=d,yr.comboId=d),ee.addChild(kr),z.push(jr)}),n.updateCombo(ee),!1}return!0})}),!d&&L){var ye=p.indexOf(L);p.splice(ye,1),(a=L.children)===null||a===void 0||a.forEach(function(ke){ke.parentId=void 0;var et=n.findById(ke.id).getModel();delete et.parentId,delete et.comboId,ke.itemType!=="node"&&p.push(ke)})}if(ie){var Ce={nodes:[],combos:[]},Re={nodes:[],combos:[]};(i=L.children)===null||i===void 0||i.forEach(function(ke){var et=n.findById(ke.id),vt=et.getType();vt!=="node"&&vt!=="combo"||(Ce["".concat(vt,"s")].push({id:ke.id,parentId:S}),Re["".concat(vt,"s")].push({id:ke.id,parentId:d}))}),Ce.combos.push(se),this.pushStack("uncombo",{before:Ce,after:Re})}},t.prototype.updateCombos=function(e){var r=this;e===void 0&&(e=!1);var n=this,a=this.get("comboTrees"),i=n.get("itemController"),o=n.get("itemMap");(a||[]).forEach(function(s){Xo(s,function(l){var d;if(!l)return!0;var p=o[l.id];if(((d=p==null?void 0:p.getType)===null||d===void 0?void 0:d.call(p))==="combo"){var C=(0,v.__spreadArray)([],p.getStates(),!0);(0,u.each)(C,function(S){return r.setItemState(p,S,!1)}),i.updateCombo(p,l.children,e),(0,u.each)(C,function(S){return r.setItemState(p,S,!0)})}return!0})}),n.sortCombos()},t.prototype.updateCombo=function(e){var r=this,n=this,a=e,i;if((0,u.isString)(e)&&(a=this.findById(e)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}i=a.get("id");var o=this.get("comboTrees"),s=n.get("itemController"),l=n.get("itemMap");(o||[]).forEach(function(d){Xo(d,function(p){if(!p)return!0;var C=l[p.id];if(i===p.id&&C&&C.getType&&C.getType()==="combo"){var S=(0,v.__spreadArray)([],C.getStates(),!0);(0,u.each)(S,function(L){C.getStateStyle(L)&&r.setItemState(C,L,!1)}),s.updateCombo(C,p.children),(0,u.each)(S,function(L){C.getStateStyle(L)&&r.setItemState(C,L,!0)}),i&&(i=p.parentId)}return!0})})},t.prototype.updateComboTree=function(e,r,n){n===void 0&&(n=!0);var a=this;this.set("comboSorted",!1);var i;(0,u.isString)(e)?i=a.findById(e):i=e;var o=i.getModel(),s=o.comboId||o.parentId,l="";if(i.getType&&(l=i.getType()),r&&l==="combo"){var d=this.get("comboTrees"),p=!0,C;if((d||[]).forEach(function(ie){C||li(ie,function(se){if(!C)return se.id===i.getID()&&(C=se),!0})}),li(C,function(ie){return ie.id===r?(p=!1,!1):!0}),!p){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var S={},L={};l==="combo"?(S.combos=[{id:o.id,parentId:o.parentId}],L.combos=[{id:o.id,parentId:r}]):l==="node"&&(S.nodes=[{id:o.id,parentId:o.comboId}],L.nodes=[{id:o.id,parentId:r}]),this.pushStack("updateComboTree",{before:S,after:L})}if(o.parentId||o.comboId){var z=this.findById(o.parentId||o.comboId);z&&z.removeChild(i)}if(l==="combo"?o.parentId=r:l==="node"&&(o.comboId=r),r){var H=this.findById(r);H&&H.addChild(i)}if(s){var H=this.findById(s);H&&H.removeChild(i)}var ee=Ls(this.get("comboTrees"),o.id,r);this.set("comboTrees",ee),this.updateCombos()},t.prototype.save=function(){var e=[],r=[],n=[];return(0,u.each)(this.get("nodes"),function(a){e.push(a.getModel())}),(0,u.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,u.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:e,edges:r,combos:n}},t.prototype.changeSize=function(e,r){var n=this.get("viewController");return n.changeSize(e,r),this},t.prototype.refresh=function(){var e=this;if(e.emit("beforegraphrefresh"),e.get("animate"))e.positionsAnimate();else{var r=e.get("nodes"),n=e.get("edges"),a=e.get("edges");(0,u.each)(r,function(i){i.refresh()}),(0,u.each)(n,function(i){i.refresh()}),(0,u.each)(a,function(i){i.refresh()})}e.emit("aftergraphrefresh"),e.autoPaint()},t.prototype.getNodes=function(){return this.get("nodes")},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getCombos=function(){return this.get("combos")},t.prototype.getComboChildren=function(e){if((0,u.isString)(e)&&(e=this.findById(e)),!e||e.getType&&e.getType()!=="combo"){console.warn("The combo does not exist!");return}return e.getChildren()},t.prototype.positionsAnimate=function(e){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),a=n.onFrame,i=e?r.getNodes().concat(r.getCombos()):r.getNodes(),o=i.map(function(l){var d=l.getModel();return{id:d.id,x:d.x,y:d.y}});r.stopAnimate();var s=r.get("canvas");r.animating=!0,setTimeout(function(){s.animate(function(l){(0,u.each)(o,function(d){var p=r.findById(d.id);if(!(!p||p.destroyed)){var C=p.get("originAttrs"),S=p.get("model"),L=p.getContainer().getMatrix();if(C==null&&(L&&(C={x:L[6],y:L[7]}),p.set("originAttrs",C||0)),a){var z=a(p,l,d,C||{x:0,y:0});p.set("model",Object.assign(S,z))}else C?(S.x=C.x+(d.x-C.x)*l,S.y=C.y+(d.y-C.y)*l):(S.x=d.x,S.y=d.y)}}),r.refreshPositions(e)},{duration:n.duration,easing:n.easing,callback:function(){(0,u.each)(i,function(d){d.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},t.prototype.refreshPositions=function(e){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),a=r.get("edges"),i=r.get("vedges"),o=r.get("combos"),s,l={},d=function(C){(0,u.each)(C,function(S){s=S.getModel();var L=S.get("originAttrs");if(!(L&&s.x===L.x&&s.y===L.y)){var z=S.updatePosition({x:s.x,y:s.y});l[s.id]=z,s.comboId&&(l[s.comboId]=l[s.comboId]||z),s.parentId&&(l[s.parentId]=l[s.parentId]||z)}})};d(o),d(n),o&&o.length!==0&&(e&&d(o),r.updateCombos()),(0,u.each)(a,function(p){var C=p.getSource().getModel(),S=p.getTarget();if(!(0,u.isPlainObject)(S)){var L=S.getModel();(l[C.id]||l[L.id]||p.getModel().isComboEdge)&&p.refresh()}}),(0,u.each)(i,function(p){p.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},t.prototype.stopAnimate=function(){var e=this.get("canvas"),r=e.cfg.timeline;r&&r.stopAllAnimations()},t.prototype.isAnimating=function(){return this.animating},t.prototype.getZoom=function(){var e=this.get("group").getMatrix();return e?e[0]:1},t.prototype.getCurrentMode=function(){var e=this.get("modeController");return e.getMode()},t.prototype.setMode=function(e){var r=this.get("modeController");return r.setMode(e),this},t.prototype.clear=function(e){var r;return e===void 0&&(e=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),e||this.emit("afterrender"),this},t.prototype.updateLayout=function(e,r,n,a){var i=this;e===void 0&&(e={}),a===void 0&&(a=!0);var o=this.get("layoutController");if((0,u.isString)(e)&&(e={type:e}),r){var s=n;s||(r==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var l=["force","gForce","fruchterman","force2"];l.includes(e.type)||!e.type&&l.includes(o==null?void 0:o.layoutType)?e.center=[s.x,s.y]:this.once("afterlayout",function(C){var S=i.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*S[0]+S[6],s.y=s.y*S[0]+S[7];var L=i.getGroup().getCanvasBBox(),z=L.minX,H=L.maxX,ee=L.minY,ie=L.maxY,se={x:(z+H)/2,y:(ee+ie)/2};r==="begin"&&(se.x=z,se.y=ee),i.translate(s.x-se.x,s.y-se.y)})}var d=(0,v.__assign)({},this.get("layout")),p={};Object.assign(p,d,e),e.pipes&&!e.type?delete p.type:!e.pipes&&p.type&&delete p.pipes,this.set("layout",p),o&&(o.isLayoutTypeSame(p)&&p.gpuEnabled===d.gpuEnabled?o.updateLayoutCfg(p):o.changeLayout(p),a&&this.get("enabledStack")&&this.pushStack("layout",{before:d,after:p}))},t.prototype.destroyLayout=function(){var e=this.get("layoutController");e==null||e.destroyLayout()},t.prototype.layout=function(){var e,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((e=r.layoutMethods)===null||e===void 0)&&e.length?r.relayout(!0):r.layout()}},t.prototype.collapseCombo=function(e,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,u.isString)(e)&&(e=this.findById(e)),!e){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"collapse",item:e});var a=e.getModel(),i=this.get("itemController");i.collapseCombo(e,r),a.collapsed=!0;var o=this.getEdges().concat(this.get("vedges")),s=[],l=this.get("comboTrees"),d=!1;(l||[]).forEach(function(C){d||li(C,function(S){if(d&&S.depth<=a.depth)return!1;if(a.id===S.id&&(d=!0),d){var L=n.findById(S.id);L&&L.getType&&L.getType()==="combo"&&(s=s.concat(L.getNodes()),s=s.concat(L.getCombos()))}return!0})});var p={};o.forEach(function(C){var S=C.getModel(),L=S.isVEdge,z=S.size,H=z===void 0?1:z;if(!(C.isVisible()&&!L)){var ee=C.getSource(),ie=C.getTarget(),se=null,ye;if(ee.getModel().id===a.id||s.includes(ee)&&!s.includes(ie)?(se=ie,ye=!1):(ie.getModel().id===a.id||!s.includes(ee)&&s.includes(ie))&&(se=ee,ye=!0),se){if(L){n.removeItem(C,!1);return}for(var Ce=se.getModel();!se.isVisible();){var Re=Ce.parentId,ke=Ce.comboId,et=Re||ke;if(se=n.findById(et),!se||!et)return;Ce=se.getModel()}var vt=Ce.id,at=ye?{source:vt,target:a.id,size:H,isVEdge:!0}:{source:a.id,target:vt,size:H,isVEdge:!0},Mt="".concat(at.source,"-").concat(at.target);if(p[Mt]){p[Mt].size+=H;return}p[Mt]=at}}}),this.addItems(Object.values(p).map(function(C){return{type:"vedge",model:C}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:e})}},t.prototype.expandCombo=function(e,r){var n=this;if(r===void 0&&(r=!0),(0,u.isString)(e)&&(e=this.findById(e)),!e||e.getType&&e.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var a=e.getModel(),i=this.get("itemController");i.expandCombo(e,r),a.collapsed=!1;var o=this.getEdges().concat(this.get("vedges")),s=[],l=this.get("comboTrees"),d=!1;(l||[]).forEach(function(C){d||li(C,function(S){if(d&&S.depth<=a.depth)return!1;if(a.id===S.id&&(d=!0),d){var L=n.findById(S.id);L&&L.getType&&L.getType()==="combo"&&(s=s.concat(L.getNodes()),s=s.concat(L.getCombos()))}return!0})});var p={};o.forEach(function(C){if(!(C.isVisible()&&!C.getModel().isVEdge)){var S=C.getSource(),L=C.getTarget(),z=S.get("id"),H=L.get("id"),ee=null,ie;if(z===a.id||s.includes(S)&&!s.includes(L)?(ee=L,ie=!1):H===a.id||!s.includes(S)&&s.includes(L)?(ee=S,ie=!0):s.includes(S)&&s.includes(L)&&S.isVisible()&&L.isVisible()&&C.show(),ee){var se=C.getModel(),ye=se.isVEdge,Ce=se.size,Re=Ce===void 0?1:Ce;if(ye){n.removeItem(C,!1);return}for(var ke=ee.getModel();!ee.isVisible();){var et=ke.parentId,vt=ke.comboId,at=et||vt;if(ee=n.findById(at),!ee||!at)return;ke=ee.getModel()}for(var Mt=ke.id,zt=ie?L:S,Cr=zt.getModel();!zt.isVisible();){var jr=Cr.parentId,kr=Cr.comboId,yr=jr||kr;if(zt=n.findById(yr),!zt||!yr)return;if(Cr.comboId===a.id||Cr.parentId===a.id)break;Cr=zt.getModel()}var dn=Cr.id;if(Mt){var un=ie?{source:Mt,target:dn,isVEdge:!0,size:Re}:{source:dn,target:Mt,isVEdge:!0,size:Re},br="".concat(un.source,"-").concat(un.target);if(p[br]){p[br].size+=Re;return}p[br]=un}}}}),this.addItems(Object.values(p).map(function(C){return{type:"vedge",model:C}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:e})},t.prototype.collapseExpandCombo=function(e,r){if(r===void 0&&(r=!0),(0,u.isString)(e)&&(e=this.findById(e)),!(!e||e.getType&&e.getType()!=="combo")){for(var n=e.getModel(),a=this.findById(n.parentId);a;){var i=a.getModel();if(i.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(i.parentId)}var o=n.collapsed;o?this.expandCombo(e,r):this.collapseCombo(e,r),this.updateCombo(e)}},t.prototype.getNeighbors=function(e,r){var n=e;return(0,u.isString)(e)&&(n=this.findById(e)),n.getNeighbors(r)},t.prototype.getNodeDegree=function(e,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var a=e;(0,u.isString)(e)&&(a=this.findById(e));var i=this.get("degrees");(!i||n)&&(i=Je(this.save()),this.set("degrees",i));var o=i[a.getID()],s=0;if(!o)return 0;switch(r){case"in":s=o.inDegree;break;case"out":s=o.outDegree;break;case"all":s=o;break;default:s=o.degree;break}return s},t.prototype.getUndoStack=function(){return this.undoStack},t.prototype.getRedoStack=function(){return this.redoStack},t.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},t.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},t.prototype.pushStack=function(e,r,n){if(e===void 0&&(e="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,u.clone)(r):{before:{},after:(0,u.clone)(this.save())};n==="redo"?this.redoStack.push({action:e,data:a}):this.undoStack.push({action:e,data:a}),this.emit("stackchange",{action:e,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},t.prototype.getAdjMatrix=function(e,r){e===void 0&&(e=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!e)&&(n=X(this.save(),r),this.set("adjMatrix",n)),n},t.prototype.getShortestPathMatrix=function(e,r){e===void 0&&(e=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!e)&&(n=X(this.save(),r),this.set("adjMatrix",n)),(!a||!e)&&(a=Nr(this.save(),r),this.set("shortestPathMatrix",a)),a},t.prototype.on=function(e,r,n){return f.prototype.on.call(this,e,r,n)},t.prototype.destroy=function(){var e,r,n,a,i;this.emit("beforedestroy"),this.clear(),this.clearStack(),(e=this.get("itemController"))===null||e===void 0||e.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(i=this.get("canvas"))===null||i===void 0||i.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},t.prototype.createHull=function(e){if(!e.members||e.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[e.id])return console.warn("Existed hull id."),n[e.id];var a=r.addGroup({id:"".concat(e.id,"-container")}),i=new Ff(this,(0,v.__assign)((0,v.__assign)({},e),{group:a})),o=i.id;return n[o]=i,i},t.prototype.getHulls=function(){return this.get("hullMap")},t.prototype.getHullById=function(e){return this.get("hullMap")[e]},t.prototype.removeHull=function(e){var r,n;(0,u.isString)(e)?n=this.getHullById(e):n=e,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},t.prototype.removeHulls=function(){var e=this.getHulls();!e||!Object.keys(e).length||(Object.keys(e).forEach(function(r){var n=e[r];n.destroy()}),this.set("hullMap",{}))},t}(V.Z),lc=Gf;function zf(f){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(f)}var Nu=J.vs,dc="-shape",Uf="-label",qu=["startArrow","endArrow"],Wf={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Yc={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},yf={edge:Yc,node:Wf,combo:Wf},Xf="-label-bg",Pu={options:{labelCfg:{style:{fontFamily:cn.windowFontFamily}},descriptionCfg:{style:{fontFamily:cn.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(t){return{}},getOptions:function(t,e){return e==="move"||e!=null&&e.includes("bbox")?t:(0,u.deepMix)({},this.options,this.getCustomConfig(t)||{},t)},draw:function(t,e){e.shapeMap={},this.mergeStyle=this.getOptions(t);var r=this.drawShape(t,e);if(r.set("className",this.itemType+dc),e.shapeMap[this.itemType+dc]=r,t.label){var n=this.drawLabel(t,e);n.set("className",this.itemType+Uf),e.shapeMap[this.itemType+Uf]=n}return r},afterDraw:function(t,e,r){},drawShape:function(t,e){return null},drawLabel:function(t,e){var r=(this.mergeStyle||this.getOptions(t)||{}).labelCfg,n=r||{},a=this.getLabelStyle(t,n,e),i=a.rotate;delete a.rotate;var o=e.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(e.shapeMap["text-shape"]=o,!isNaN(i)&&i!==""){var s=o.getBBox(),l=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":l=Nu(l,[["t",-s.width/2,-s.height/2],["r",i],["t",s.width/2,s.height/2]]);break;case"lefttop":l=Nu(l,[["t",-a.x,-a.y],["r",i],["t",a.x,a.y]]);break;case"leftcenter":l=Nu(l,[["t",-a.x,-a.y-s.height/2],["r",i],["t",a.x,a.y+s.height/2]]);break;default:l=Nu(l,[["t",-s.width/2,-s.height/2],["r",i],["t",s.width/2,s.height/2]]);break}else l=Nu(l,[["t",-a.x,-a.y-s.height/2],["r",i],["t",a.x,a.y+s.height/2]]);o.setMatrix(l)}if(a.background){var d=this.drawLabelBg(t,e,o),p=this.itemType+Xf;d.set("classname",p),e.shapeMap[p]=d,o.toFront()}return o},drawLabelBg:function(t,e,r){var n=this.options.labelCfg,a=(0,u.mix)({},n,t.labelCfg),i=this.getLabelBgStyleByPosition(r,a),o=e.addShape("rect",{name:"text-bg-shape",attrs:i,labelRelated:!0});return e.shapeMap["text-bg-shape"]=o,o},getLabelStyleByPosition:function(t,e,r){return{text:t.label}},getLabelBgStyleByPosition:function(t,e){return{}},getLabelStyle:function(t,e,r){var n=this.getLabelStyleByPosition(t,e,r),a="".concat(this.itemType,"Label"),i=cn[a]?cn[a].style:null;return(0,v.__assign)((0,v.__assign)((0,v.__assign)({},i),n),e.style)},getShapeStyle:function(t){return t.style},update:function(t,e,r){this.updateShapeStyle(t,e,r),this.updateLabel(t,e,r)},updateShapeStyle:function(t,e,r){var n,a=e.getContainer(),i=e.getKeyShape(),o=(0,u.mix)({},i.attr(),t.style),s=function(p){var C,S=o[p];if((0,u.isPlainObject)(S)){var L=((n=a.shapeMap)===null||n===void 0?void 0:n[p])||a.find(function(z){return z.get("name")===p});L==null||L.attr(S)}else i.attr((C={},C[p]=S,C))};for(var l in o)s(l)},updateLabel:function(t,e,r){var n,a,i=e.getContainer(),o=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,s=o===void 0?{}:o,l=this.itemType+Uf,d=i.shapeMap[l]||i.find(function(ye){return ye.get("className")===l}),p=this.itemType+Xf,C=i.shapeMap[p]||i.find(function(ye){return ye.get("className")===p});if(d&&t.label===void 0&&(i.removeChild(d),delete i.shapeMap[l],C&&(i.removeChild(C),delete i.shapeMap[p])),t.label||t.label==="")if(d){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(s=(0,u.deepMix)(s,t.labelCfg));var L=this.getLabelStyleByPosition(t,s,i),z=(n=t.labelCfg)===null||n===void 0?void 0:n.style,H=(0,v.__assign)((0,v.__assign)({},L),z),ee=H.rotate;if(delete H.rotate,!isNaN(ee)&&ee!==""){var ie=[1,0,0,0,1,0,0,0,1];ie=Nu(ie,[["t",-H.x,-H.y],["r",ee],["t",H.x,H.y]]),H.matrix=ie,d.attr(H)}else((a=d.getMatrix())===null||a===void 0?void 0:a[4])!==1&&d.resetMatrix(),d.attr(H);if(!C)H.background&&(C=this.drawLabelBg(t,i,d),C.set("classname",p),i.shapeMap[p]=C,d.toFront());else if(H.background){var se=this.getLabelBgStyleByPosition(d,s);C.attr(se)}else i.removeChild(C)}else{var S=this.drawLabel(t,i);S.set("className",l),i.shapeMap[l]=S}},afterUpdate:function(t,e){},setState:function(t,e,r){var n,a,i,o=r.get("keyShape");if(!(!o||o.destroyed)){var s=r.getType(),l=(0,u.isBoolean)(e)?t:"".concat(t,":").concat(e),d=this.getStateStyle(l,r),p=r.getStateStyle(l);if(!(!p&&!d)){var C=(0,u.mix)({},p||d),S=r.getContainer(),L={x:1,y:1,cx:1,cy:1,matrix:1};if(s==="combo"&&(L.r=1,L.width=1,L.height=1),e){var z=function(yr){var dn,un=C[yr];if((0,u.isPlainObject)(un)&&!qu.includes(yr)){var br=((i=S.shapeMap)===null||i===void 0?void 0:i[yr])||S.find(function(zr){return zr.get("name")===yr});br==null||br.attr(un)}else o.attr((dn={},dn[yr]=un,dn))};for(var H in C)z(H)}else{var ee=io(r.getCurrentStatesStyle()),ie=r.getModel(),se=(0,u.mix)({},ie.style,io(r.getOriginStyle())),ye=o.get("name"),Ce=o.attr(),Re={};Object.keys(Ce).forEach(function(kr){if(kr!=="img"){var yr=Ce[kr];yr&&zf(yr)==="object"?Re[kr]=(0,u.clone)(yr):Re[kr]=yr}});var ke={},et=function(yr){var dn=C[yr];if((0,u.isPlainObject)(dn)&&!qu.includes(yr)){var un=S.shapeMap[yr]||S.find(function(en){return en.get("name")===yr});if(un){var br=io(un.attr());(0,u.each)(dn,function(en,Jr){if(yr===ye&&Re[Jr]&&!L[Jr]){delete Re[Jr];var yn=se[yr][Jr]||yf[s][Jr];o.attr(Jr,yn)}else if(br[Jr]||br[Jr]===0){delete br[Jr];var An=se[yr][Jr]||yf[s][Jr];un.attr(Jr,An)}}),ke[yr]=br}}else if(Re[yr]&&!L[yr]){delete Re[yr];var zr=se[yr]||(se[ye]?se[ye][yr]:void 0)||yf[s][yr];o.attr(yr,zr)}};for(var vt in C)et(vt);ye?ke[ye]=Re:(0,u.mix)(ke,Re);for(var H in ee)if(!L[H]){var at=ee[H];(!(0,u.isPlainObject)(at)||qu.includes(H))&&(ye?((0,u.mix)(se[ye],(a={},a[H]=at,a)),delete se[H]):(0,u.mix)(se,(n={},n[H]=at,n)),delete ee[H])}var Mt={};(0,u.deepMix)(Mt,se,ke,ee);var zt=!1,Cr=function(yr){var dn,un,br=Mt[yr];if((0,u.isPlainObject)(br)&&!qu.includes(yr)){var zr=S.shapeMap[yr]||S.find(function(Jr){return Jr.get("name")===yr});zr&&((zr.get("type")==="text"||zr.get("labelRelated"))&&(delete br.x,delete br.y,delete br.matrix),yr===ye&&(s==="combo"&&(delete br.r,delete br.width,delete br.height),zt=!0),zr.attr(br))}else if(!zt){var en=br||yf[s][yr];s==="combo"?ye||o.attr((dn={},dn[yr]=en,dn)):o.attr((un={},un[yr]=en,un))}};for(var jr in Mt)Cr(jr)}}}},getStateStyle:function(t,e){var r=e.getModel(),n=e.getType(),a=this.getOptions(r),i=a.stateStyles,o=a.style,s=o===void 0?{}:o,l=r.stateStyles?r.stateStyles[t]:i&&i[t];return n==="combo"?(0,u.clone)(l):(0,u.mix)({},s,l)},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e,r,n=(t==null?void 0:t.anchorPoints)||((e=this.getCustomConfig(t))===null||e===void 0?void 0:e.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},hc={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:cn.nodeLabel.offset,getSize:function(t){var e,r=((e=this.mergeStyle)===null||e===void 0?void 0:e.size)||t.size||this.getOptions({}).size||cn.defaultNode.size;return(0,u.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,u.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(t,e){var r=e.maxLength,n=t.label;r&&(n=as(n,r));var a=e.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var i=e.offset;(0,u.isNil)(i)&&(i=this.offset);var o=this.getSize(t),s;switch(a){case"top":s={x:0,y:-o[1]/2-i,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:o[1]/2+i,textBaseline:"top",textAlign:"center"};break;case"left":s={x:-o[0]/2-i,y:0,textBaseline:"middle",textAlign:"right"};break;default:s={x:o[0]/2+i,y:0,textBaseline:"middle",textAlign:"left"};break}return s.text=n,s},getLabelBgStyleByPosition:function(t,e){var r;if(!t)return{};var n=(r=e.style)===null||r===void 0?void 0:r.background;if(!n)return{};var a=t.getBBox(),i=Vs(n.padding),o=a.width+i[1]+i[3],s=a.height+i[0]+i[2];return(0,v.__assign)((0,v.__assign)({x:a.minX-i[3],y:a.minY-i[0]},n),{width:o,height:s})},drawShape:function(t,e){var r=this.shapeType,n=this.getShapeStyle(t),a=e.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return e.shapeMap["node-shape"]=a,a},updateLinkPoints:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).linkPoints,n=e.shapeMap["link-point-left"]||e.find(function(Mt){return Mt.get("className")==="link-point-left"}),a=e.shapeMap["link-point-right"]||e.find(function(Mt){return Mt.get("className")==="link-point-right"}),i=e.shapeMap["link-point-top"]||e.find(function(Mt){return Mt.get("className")==="link-point-top"}),o=e.shapeMap["link-point-bottom"]||e.find(function(Mt){return Mt.get("className")==="link-point-bottom"}),s;n&&(s=n.attr()),a&&!s&&(s=a.attr()),i&&!s&&(s=i.attr()),o&&!s&&(s=o.attr()),s||(s=r);var l=(0,u.mix)({},s,t.linkPoints),d=l.fill,p=l.stroke,C=l.lineWidth,S=l.size/2;S||(S=l.r);var L=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},z=L.left,H=L.right,ee=L.top,ie=L.bottom,se=this.getSize(t),ye=se[0],Ce=se[1],Re={r:S,fill:d,stroke:p,lineWidth:C};if(n)!z&&z!==void 0?(n.remove(),delete e.shapeMap["link-point-left"]):n.attr((0,v.__assign)((0,v.__assign)({},Re),{x:-ye/2,y:0}));else if(z){var ke="link-point-left";e.shapeMap[ke]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},Re),{x:-ye/2,y:0}),className:ke,name:ke,isAnchorPoint:!0})}if(a)!H&&H!==void 0&&(a.remove(),delete e.shapeMap["link-point-right"]),a.attr((0,v.__assign)((0,v.__assign)({},Re),{x:ye/2,y:0}));else if(H){var et="link-point-right";e.shapeMap[et]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},Re),{x:ye/2,y:0}),className:et,name:et,isAnchorPoint:!0})}if(i)!ee&&ee!==void 0&&(i.remove(),delete e.shapeMap["link-point-top"]),i.attr((0,v.__assign)((0,v.__assign)({},Re),{x:0,y:-Ce/2}));else if(ee){var vt="link-point-top";e.shapeMap[vt]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},Re),{x:0,y:-Ce/2}),className:vt,name:vt,isAnchorPoint:!0})}if(o)!ie&&ie!==void 0?(o.remove(),delete e.shapeMap["link-point-bottom"]):o.attr((0,v.__assign)((0,v.__assign)({},Re),{x:0,y:Ce/2}));else if(ie){var at="link-point-bottom";e.shapeMap[at]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},Re),{x:0,y:Ce/2}),className:at,name:at,isAnchorPoint:!0})}},updateShape:function(t,e,r,n,a){var i=e.get("keyShape");i.attr((0,v.__assign)({},r)),this.updateLabel(t,e,a),n&&this.updateIcon(t,e)},updateIcon:function(t,e){var r=this,n=e.getContainer(),a=(this.mergeStyle||this.getOptions(t)).icon,i=t.icon?t.icon:{show:void 0,text:void 0},o=i.show,s=i.text,l=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(ee){return ee.get("name")==="".concat(r.type,"-icon")});if(l)if(o||o===void 0){var d=(0,u.mix)({},l.attr(),a),p=d.width,C=p===void 0?20:p,S=d.height,L=S===void 0?20:S;(d.fontFamily==="iconfont"||d.hasOwnProperty("text"))&&(C=0,L=0),l.attr((0,v.__assign)((0,v.__assign)({},d),{x:-C/2,y:-L/2}))}else l.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(o){var z="".concat(this.type,"-icon");if(s)n.shapeMap[z]=n.addShape("text",{attrs:(0,v.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:z,name:z});else{var C=a.width,L=a.height;n.shapeMap[z]=n.addShape("image",{attrs:(0,v.__assign)((0,v.__assign)({},a),{x:-C/2,y:-L/2}),className:z,name:z})}var H=n.shapeMap["node-label"]||n.find(function(ee){return ee.get("name")==="node-label"});H&&H.toFront()}}},_t=(0,v.__assign)((0,v.__assign)({},Pu),hc);It.registerNode("single-node",_t);var mf="edge-shape";function Ju(f){var t=f;return f==="start"?t="end":f==="end"&&(t="start"),t}var Vf={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:cn.defaultEdge.size,style:{x:0,y:0,stroke:cn.defaultEdge.style.stroke,lineAppendWidth:cn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:cn.edgeLabel.style.fill,fontSize:cn.edgeLabel.style.fontSize,fontFamily:cn.windowFontFamily}},stateStyles:(0,v.__assign)({},cn.edgeStateStyles)},getPath:function(t){var e=[];return(0,u.each)(t,function(r,n){n===0?e.push(["M",r.x,r.y]):e.push(["L",r.x,r.y])}),e},getShapeStyle:function(t){var e=this.options.style,r={stroke:t.color},n=(0,u.mix)({},e,r,t.style),a=t.size||cn.defaultEdge.size;t=this.getPathPoints(t);var i=t.startPoint,o=t.endPoint,s=this.getControlPoints(t),l=[i];s&&(l=l.concat(s)),l.push(o);var d=this.getPath(l),p=(0,u.mix)({},cn.defaultEdge.style,{stroke:cn.defaultEdge.color,lineWidth:a,path:d},n);return p},updateShapeStyle:function(t,e,r){var n,a=e.getContainer(),i=((n=e.getKeyShape)===null||n===void 0?void 0:n.call(e))||a.shapeMap["edge-shape"],o=t.size;t=this.getPathPoints(t);var s=t.startPoint,l=t.endPoint,d=this.getControlPoints(t),p=[s];d&&(p=p.concat(d)),p.push(l);var C=i.attr(),S=t.style||{};S.stroke===void 0&&(S.stroke=t.color);var L=t.sourceNode,z=t.targetNode,H={radius:S.radius};d||(H={source:L,target:z,offset:S.offset,radius:S.radius});var ee=this.getPath(p,H),ie={};r==="move"?ie={path:ee}:(C.endArrow&&S.endArrow===!1&&(t.style.endArrow={path:""}),C.startArrow&&S.startArrow===!1&&(t.style.startArrow={path:""}),ie=(0,v.__assign)({},t.style),ie.lineWidth===void 0&&(ie.lineWdith=((0,u.isNumber)(o)?o:o==null?void 0:o[0])||C.lineWidth),ie.path===void 0&&(ie.path=ee),ie.stroke===void 0&&(ie.stroke=C.stroke||t.color)),i&&i.attr(ie)},getLabelStyleByPosition:function(t,e,r){var n=e.position||this.labelPosition,a={},i=r==null?void 0:r.shapeMap[mf],o;n==="start"?o=0:n==="end"?o=1:o=.5;var s=e.refX||this.refX,l=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return a.x=t.startPoint.x+s,a.y=t.startPoint.y+l,a.text=t.label,a;var d;(0,u.isNil)(e.autoRotate)?d=this.labelAutoRotate:d=e.autoRotate;var p=Bs(i,o,s,l,d);return a.x=p.x,a.y=p.y,a.rotate=p.rotate,a.textAlign=this._getTextAlign(n,p.angle),a.text=t.label,a},getLabelBgStyleByPosition:function(t,e){if(!t)return{};var r=t.getBBox(),n=e.style&&e.style.background;if(!n)return{};var a=n.padding,i=r.width+a[1]+a[3],o=r.height+a[0]+a[2],s=(0,v.__assign)((0,v.__assign)({},n),{width:i,height:o,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),l;return(0,u.isNil)(e.autoRotate)?l=this.labelAutoRotate:l=e.autoRotate,l&&(s.matrix=t.attr("matrix")||[1,0,0,0,1,0,0,0,1]),s},_getTextAlign:function(t,e){var r="center";return e?(e=e%(Math.PI*2),t!=="center"&&(e>=0&&e<=Math.PI/2||e>=3/2*Math.PI&&e<2*Math.PI?r=t:r=Ju(t)),r):t},getControlPoints:function(t){return t.controlPoints},getPathPoints:function(t){return t},drawShape:function(t,e){var r=this.getShapeStyle(t),n=e.addShape("path",{className:mf,name:mf,attrs:r});return e.shapeMap[mf]=n,n},drawLabel:function(t,e){var r=this.options.labelCfg,n=(0,u.deepMix)({},r,t.labelCfg),a=this.getLabelStyle(t,n,e),i=a.rotate;delete a.rotate;var o=e.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0,draggable:!0});if(e.shapeMap["text-shape"]=o,!isNaN(i)&&i!==""&&o.rotateAtStart(i),a.background){var s=this.drawLabelBg(t,e,o,a,i),l=this.itemType+Xf;s.set("classname",l),e.shapeMap[l]=s,o.toFront()}return o},drawLabelBg:function(t,e,r,n,a){var i=this.options.labelCfg,o=(0,u.deepMix)({},i,t.labelCfg),s=this.getLabelBgStyleByPosition(r,o),l=e.addShape("rect",{name:"text-bg-shape",attrs:s,labelRelated:!0});return e.shapeMap["text-bg-shape"]=l,l}},jc=(0,v.__assign)((0,v.__assign)({},Pu),Vf);It.registerEdge("single-edge",jc),It.registerEdge("line",{getControlPoints:function(){}},"single-edge"),It.registerEdge("spline",{getPath:function(t){var e=su(t);return e}},"single-edge"),It.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(t){var e=t.startPoint,r=t.endPoint,n={x:(e.x+r.x)/2,y:(e.y+r.y)/2},a,i;if(t.controlPoints!==void 0){if(i=t.controlPoints[0],a=ls(e,i,r),e.x<=r.x&&e.y>r.y?this.clockwise=a.x>i.x?0:1:e.x<=r.x&&e.y<r.y?this.clockwise=a.x>i.x?1:0:e.x>r.x&&e.y<=r.y?this.clockwise=a.y<i.y?0:1:this.clockwise=a.y<i.y?1:0,(i.x-e.x)/(i.y-e.y)===(r.x-e.x)/(r.y-e.y))return[]}else{t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),(0,u.isArray)(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),t.curveOffset<0?this.clockwise=0:this.clockwise=1;var o={x:r.x-e.x,y:r.y-e.y},s=Math.atan2(o.y,o.x);i={x:t.curveOffset*Math.cos(-Math.PI/2+s)+n.x,y:t.curveOffset*Math.sin(-Math.PI/2+s)+n.y},a=ls(e,i,r)}var l=mi(e,a),d=[{x:l,y:l}];return d},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),t.length===2?e.push(["L",t[1].x,t[1].y]):e.push(["A",t[1].x,t[1].y,0,0,this.clockwise,t[2].x,t[2].y]),e}},"single-edge"),It.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(t){var e=t.controlPoints;if(!e||!e.length){var r=t.startPoint,n=t.endPoint;t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),(0,u.isArray)(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),(0,u.isArray)(t.curvePosition)&&(t.curvePosition=t.curveOffset[0]);var a=Yo(r,n,t.curvePosition,t.curveOffset);e=[a]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["Q",t[1].x,t[1].y,t[2].x,t[2].y]),e}},"single-edge"),It.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(t){var e=t.controlPoints;if(t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),(0,u.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,u.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),!e||!e.length||e.length<2){var r=t.startPoint,n=t.endPoint,a=Yo(r,n,t.curvePosition[0],t.curveOffset[0]),i=Yo(r,n,t.curvePosition[1],t.curveOffset[1]);e=[a,i]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]),e}},"single-edge"),It.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,r=t.endPoint;t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.minCurveOffset===void 0&&(t.minCurveOffset=this.minCurveOffset),(0,u.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,u.isNumber)(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),(0,u.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var n=r.y-e.y,a=[0,0];t.curveOffset?a=t.curveOffset:Math.abs(n)<Math.abs(t.minCurveOffset[0])&&(a=t.minCurveOffset);var i={x:e.x,y:e.y+n*this.curvePosition[0]+a[0]},o={x:r.x,y:r.y-n*this.curvePosition[1]+a[1]};return[i,o]}},"cubic"),It.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(t){var e=t.startPoint,r=t.endPoint;t.curvePosition===void 0&&(t.curvePosition=this.curvePosition),t.curveOffset===void 0&&(t.curveOffset=this.curveOffset),t.minCurveOffset===void 0&&(t.minCurveOffset=this.minCurveOffset),(0,u.isNumber)(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),(0,u.isNumber)(t.minCurveOffset)&&(t.minCurveOffset=[t.minCurveOffset,-t.minCurveOffset]),(0,u.isNumber)(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]);var n=r.x-e.x,a=[0,0];t.curveOffset?a=t.curveOffset:Math.abs(n)<Math.abs(t.minCurveOffset[0])&&(a=t.minCurveOffset);var i={x:e.x+n*this.curvePosition[0]+a[0],y:e.y},o={x:r.x-n*this.curvePosition[1]+a[1],y:r.y},s=[i,o];return s}},"cubic"),It.registerEdge("loop",{getPathPoints:function(t){return gs(t)},getControlPoints:function(t){return t.controlPoints},afterDraw:function(t){t.controlPoints=void 0},afterUpdate:function(t){t.controlPoints=void 0}},"cubic");var vc={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:cn.comboLabel.refX,refY:cn.comboLabel.refY,options:{style:{stroke:cn.defaultCombo.style.stroke,fill:cn.defaultCombo.style.fill,lineWidth:cn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:cn.comboLabel.style.fill,fontSize:cn.comboLabel.style.fontSize,fontFamily:cn.windowFontFamily}},stateStyles:(0,v.__assign)({},cn.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(t){var e=(0,u.clone)(t.size||this.options.size||cn.defaultCombo.size);return(0,u.isArray)(e)&&e.length===1&&(e=[e[0],e[0]]),(0,u.isArray)(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var r=e.position||this.labelPosition,n=t.style,a=t.padding||this.options.padding;(0,u.isArray)(a)&&(a=Math.max.apply(Math,a));var i=e.refX,o=e.refY;(0,u.isNil)(i)&&(i=this.refX),(0,u.isNil)(o)&&(o=this.refY);var s=this.getSize(t),l=Math.max(n.r,s[0]/2)||s[0]/2,d=l+a,p;switch(r){case"top":p={x:0,y:-d-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":p={x:0,y:d+o,textBaseline:"bottom",textAlign:"center"};break;case"left":p={x:-d+i,y:0,textAlign:"left"};break;case"center":p={x:0,y:0,text:t.label,textAlign:"center"};break;default:p={x:d+i,y:0,textAlign:"right"};break}return p.text=t.label,p},drawShape:function(t,e){var r=this.shapeType,n=this.getShapeStyle(t),a=e.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(t,e,r){var n=t.collapsed,a=t.collapsedSubstituteIcon,i=a===void 0?{}:a,o=Object.assign({},this.options.collapsedSubstituteIcon,i),s=o.show,l=o.img,d=o.width,p=o.height,C=e.getContainer(),S=C.find(function(ee){return ee.get("name")==="combo-collapsed-substitute-icon"}),L=S&&!S.destroyed,z=e.get("keyShape");if(n&&s){if(L)S.show();else{var H={width:d||r.r*2||r.width,height:p||r.r*2||r.height};S=C.addShape("image",{attrs:(0,v.__assign)({img:l,x:-H.width/2,y:-H.height/2},H),name:"combo-collapsed-substitute-icon",draggable:!0})}z.hide()}else L&&(S.hide(),z.show())},updateShape:function(t,e,r){var n=this,a=e.get("keyShape"),i=e.get("animate"),o=i&&(t.animate===void 0?this.options.animate:t.animate);o&&a.animate?(t.collapsed||this.updateCollapsedIcon(t,e,r),a.animate(r,{duration:200,easing:"easeLinear",callback:function(){t.collapsed&&n.updateCollapsedIcon(t,e,r)}})):(a.attr((0,v.__assign)({},r)),this.updateCollapsedIcon(t,e,r)),this.updateLabel(t,e)}},Hc=(0,v.__assign)((0,v.__assign)({},Pu),vc);It.registerCombo("single-combo",Hc),It.registerCombo("circle",{options:{size:[cn.defaultCombo.size[0],cn.defaultCombo.size[0]],padding:Math.max.apply(Math,cn.defaultCombo.padding),animate:!0,style:{stroke:cn.defaultCombo.style.stroke,fill:cn.defaultCombo.style.fill,lineWidth:cn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:cn.comboLabel.style.fill,fontSize:cn.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,v.__assign)({},cn.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(t,e){var r=this.getShapeStyle(t);delete r.height,delete r.width;var n=e.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(t){var e=this.options.style,r=t.padding||this.options.padding;(0,u.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:t.color},a=(0,u.mix)({},e,n,t.style),i=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize,o;if(i)o=(0,u.isNumber)(i)?i/2:i[0]/2;else{var s=this.getSize(t);!(0,u.isNumber)(a.r)||isNaN(a.r)?o=s[0]/2||cn.defaultCombo.style.r:o=Math.max(a.r,s[0]/2)||s[0]/2}a.r=o+r;var l=(0,v.__assign)({x:0,y:0},a);return t.style?t.style.r=o:t.style={r:o},l},update:function(t,e){var r=this.getSize(t),n=t.padding||this.options.padding;(0,u.isArray)(n)&&(n=Math.max.apply(Math,n));var a=(0,u.clone)(t.style),i=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize,o;i?o=(0,u.isNumber)(i)?i/2:i[0]/2:o=Math.max(a.r,r[0]/2)||r[0]/2,a.r=o+n;var s=e.get("sizeCache");s&&(s.r=a.r);var l={stroke:t.color},d=e.get("keyShape"),p=(0,u.mix)({},d.attr(),l,a);t.style?t.style.r=o:t.style={r:o},this.updateShape(t,e,p,!0)}},"single-combo"),It.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:cn.defaultCombo.style.stroke,fill:cn.defaultCombo.style.fill,lineWidth:cn.defaultCombo.style.lineWidth},labelCfg:{style:{fill:cn.comboLabel.style.fill,fontSize:cn.comboLabel.style.fontSize,fontFamily:cn.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,v.__assign)({},cn.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(t,e){var r=this.getShapeStyle(t),n=e.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(t,e){var r=e.position||this.labelPosition,n=t.style,a=t.padding||this.options.padding;(0,u.isNumber)(a)&&(a=[a,a,a,a]);var i=e.refX,o=e.refY;(0,u.isNil)(i)&&(i=this.refX),(0,u.isNil)(o)&&(o=this.refY);var s=-n.width/2-a[3],l=n.width/2+a[1],d=-n.height/2-a[0],p=n.height/2+a[2],C;switch(r){case"top":C={x:s+i,y:d+o,textBaseline:"top",textAlign:"left"};break;case"bottom":C={x:0,y:p+o,textBaseline:"top",textAlign:"center"};break;case"left":C={x:s+o,y:0,textAlign:"left"};break;case"center":C={x:0,y:0,text:t.label,textAlign:"center"};break;case"top-center":C={x:0,y:d+o,textBaseline:"top",textAlign:"center"};break;default:C={x:l+i,y:0,textAlign:"right"};break}return C.text=t.label,C},getShapeStyle:function(t){var e=this.options.style,r=t.padding||this.options.padding;(0,u.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:t.color},a=(0,u.mix)({},e,n,t.style),i=this.getSize(t),o,s,l=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;l?(0,u.isNumber)(l)?(o=l,s=l):(o=l[0],s=l[1]):(!(0,u.isNumber)(a.width)||isNaN(a.width)?o=i[0]||cn.defaultCombo.style.width:o=Math.max(a.width,i[0])||i[0],!(0,u.isNumber)(a.height)||isNaN(a.height)?s=i[1]||cn.defaultCombo.style.height:s=Math.max(a.height,i[1])||i[1]);var d=-o/2-r[3],p=-s/2-r[0];a.width=o+r[1]+r[3],a.height=s+r[0]+r[2];var C=(0,v.__assign)({x:d,y:p},a);return t.style?(t.style.width=o,t.style.height=s):t.style={width:o,height:s},C},update:function(t,e){var r=this.getSize(t),n=t.padding||this.options.padding;(0,u.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,u.clone)(t.style),i,o,s=t.collapsed&&t.fixCollapseSize?t.fixCollapseSize:t.fixSize;s?(0,u.isNumber)(s)?(i=s,o=s):(i=s[0],o=s[1]):(i=Math.max(a.width,r[0])||r[0],o=Math.max(a.height,r[1])||r[1]),a.width=i+n[1]+n[3],a.height=o+n[0]+n[2];var l=e.get("sizeCache");l&&(l.width=a.width,l.height=a.height),a.x=-i/2-n[3],a.y=-o/2-n[0];var d={stroke:t.color},p=e.get("keyShape"),C=(0,u.mix)({},p.attr(),d,a);t.style?(t.style.width=i,t.style.height=o):t.style={width:i,height:o},this.updateShape(t,e,C,!1)}},"single-combo"),It.registerNode("simple-circle",{options:{size:cn.defaultNode.size,style:{x:0,y:0,stroke:cn.defaultNode.style.stroke,fill:cn.defaultNode.style.fill,lineWidth:cn.defaultNode.style.lineWidth},labelCfg:{style:{fill:cn.nodeLabel.style.fill,fontSize:cn.nodeLabel.style.fontSize,fontFamily:cn.windowFontFamily}},stateStyles:(0,v.__assign)({},cn.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(t,e){var r=this.getShapeStyle(t),n="".concat(this.type,"-keyShape"),a=e.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return e.shapeMap[n]=a,a},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,u.deepMix)({},e,r),a=this.getSize(t),i=a[0]/2,o=(0,v.__assign)({x:0,y:0,r:i},n);return o},update:function(t,e,r){var n=this.getSize(t),a={stroke:t.color,r:n[0]/2},i=e.get("keyShape"),o=(0,u.deepMix)({},i.attr(),a,t.style);this.updateShape(t,e,o,!0,r)}},"single-node"),It.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:cn.defaultNode.style.stroke,fill:cn.defaultNode.style.fill,lineWidth:cn.defaultNode.style.lineWidth},labelCfg:{style:{fill:cn.nodeLabel.style.fill,fontSize:cn.nodeLabel.style.fontSize,fontFamily:cn.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,v.__assign)({},cn.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(t,e){var r=this.getShapeStyle(t),n=e.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,u.mix)({},e,r),a=this.getSize(t),i=n.width||a[0],o=n.height||a[1],s=(0,v.__assign)({x:-i/2,y:-o/2,width:i,height:o},n);return s},update:function(t,e,r){var n=e.getContainer(),a=(this.mergeStyle||this.getOptions(t)).style,i=this.getSize(t),o=e.get("keyShape");t.size||(i[0]=o.attr("width")||a.width,i[1]=o.attr("height")||a.height);var s={stroke:t.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},l=(0,u.mix)({},a,o.attr(),s);l=(0,u.mix)(l,t.style),this.updateShape(t,e,l,!1,r)}},"single-node"),It.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:cn.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(t,e){var r=this.shapeType,n=this.getShapeStyle(t);delete n.fill;var a=e.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(t,a),a},drawClip:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).clipCfg;if(r.show){var n=r.type,a=r.x,i=r.y,o=r.style;if(n==="circle"){var s=r.r;e.setClip({type:"circle",attrs:(0,v.__assign)({r:s,x:a,y:i},o)})}else if(n==="rect"){var l=r.width,d=r.height,p=a-l/2,C=i-d/2;e.setClip({type:"rect",attrs:(0,v.__assign)({x:p,y:C,width:l,height:d},o)})}else if(n==="ellipse"){var S=r.rx,L=r.ry;e.setClip({type:"ellipse",attrs:(0,v.__assign)({x:a,y:i,rx:S,ry:L},o)})}else if(n==="polygon"){var z=r.points;e.setClip({type:"polygon",attrs:(0,v.__assign)({points:z},o)})}else if(n==="path"){var H=r.path;e.setClip({type:"path",attrs:(0,v.__assign)({path:H},o)})}}},getShapeStyle:function(t){var e=this.mergeStyle||this.getOptions(t),r=e.style,n=e.img,a=this.getSize(t),i=a[0],o=a[1];r&&(i=r.width||a[0],o=r.height||a[1]);var s=(0,v.__assign)({x:-i/2,y:-o/2,width:i,height:o,img:n},r);return s},updateShapeStyle:function(t,e){var r=e.getContainer(),n="".concat(this.itemType,"-shape"),a=r.shapeMap[n]||r.find(function(o){return o.get("className")===n})||e.getKeyShape(),i=this.getShapeStyle(t);a&&!a.destroyed&&a.attr(i)}},"single-node");var gc={triangle:function(t,e,r){t===void 0&&(t=10),e===void 0&&(e=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+e,",-").concat(t/2," L ").concat(n+e,",").concat(t/2," Z");return a},vee:function(t,e,r){t===void 0&&(t=15),e===void 0&&(e=20),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+e,",-").concat(t/2,`
        L `).concat(n+2*e/3,",0 L ").concat(n+e,",").concat(t/2," Z");return a},circle:function(t,e){t===void 0&&(t=5),e===void 0&&(e=0);var r=e*2,n="M ".concat(r,`, 0
            a `).concat(t,",").concat(t," 0 1,0 ").concat(t*2,`,0
            a `).concat(t,",").concat(t," 0 1,0 ").concat(-t*2,",0");return n},rect:function(t,e,r){t===void 0&&(t=10),e===void 0&&(e=10),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",").concat(-t/2,` 
        L `).concat(n+e,",").concat(-t/2,` 
        L `).concat(n+e,",").concat(t/2,` 
        L `).concat(n,",").concat(t/2," Z");return a},diamond:function(t,e,r){t===void 0&&(t=15),e===void 0&&(e=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,`,0 
        L `).concat(n+e/2,",").concat(-t/2,` 
        L `).concat(n+e,`,0 
        L `).concat(n+e/2,",").concat(t/2," Z");return a},triangleRect:function(t,e,r,n,a,i){t===void 0&&(t=15),e===void 0&&(e=15),r===void 0&&(r=15),n===void 0&&(n=3),a===void 0&&(a=5),i===void 0&&(i=0);var o=i*2,s=o+e+a,l="M ".concat(o,",0 L ").concat(o+e,",-").concat(t/2," L ").concat(o+e,",").concat(t/2,` Z
            M `).concat(s,", -").concat(r/2,`
            L `).concat(s+n," -").concat(r/2,`
            L `).concat(s+n," ").concat(r/2,`
            L `).concat(s," ").concat(r/2,`
            Z`);return l}},ef={collapse:function(t,e,r){return[["M",t-r,e],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",t-r+4,e],["L",t+r-4,e]]},expand:function(t,e,r){return[["M",t-r,e],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",t-r+4,e],["L",t-r+2*r-4,e],["M",t-r+r,e-r+4],["L",t,e+r-4]]},upTriangle:function(t,e,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",t-n,e+a],["L",t+n,e+a],["L",t,e-r],["Z"]]},downTriangle:function(t,e,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",t-n,e-a],["L",t+n,e-a],["L",t,e+r],["Z"]]}},Es=It,pc=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],Ef=function(t){return t==="force"||t==="g6force"||t==="gForce"||t==="force2"},Zi=J.vs,tf=(0,v.__assign)((0,v.__assign)((0,v.__assign)((0,v.__assign)((0,v.__assign)((0,v.__assign)((0,v.__assign)({},A),P),N),Y),O),x),{transform:Zi,mat3:so}),to=tf,bf=function(){function f(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return f.prototype.initLayout=function(){},f.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},f.prototype.getLayoutCfgType=function(t){var e=t.type;if(e)return e;var r=t.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},f.prototype.isLayoutTypeSame=function(t){var e=this.getLayoutCfgType(t),r=Array.isArray(this.layoutType),n=Array.isArray(e);return r&&n?this.layoutType.every(function(a,i){return a===e[i]}):Array.isArray(e)||Array.isArray(this.layoutType)?!1:(t==null?void 0:t.type)===this.layoutType},f.prototype.refreshLayout=function(){var t=this,e=t.graph,r=t.layoutType,n=t.layoutCfg,a=n===void 0?{}:n;if(e){var i=a.animate,o=i===void 0&&(r==="force"||r==="force2"),s=Ef(r)&&(i||o);e.get("animate")&&!s?e.positionsAnimate(r==="comboCombined"):e.refreshPositions(r==="comboCombined")}},f.prototype.changeLayout=function(t){var e=t.disableTriggerLayout,r=(0,v.__rest)(t,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!e&&this.layout()},f.prototype.changeData=function(t){this.layout(t)},f.prototype.destoryLayoutMethods=function(){var t=this.layoutMethods,e=[];return t==null||t.forEach(function(r){var n,a=(n=r.getType)===null||n===void 0?void 0:n.call(r);a&&e.push(a),r.destroy()}),this.layoutMethods=[],e},f.prototype.destroyLayout=function(){this.destoryLayoutMethods();var t=this.graph;t&&!t.get("destroyed")&&t.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},f.prototype.setDataFromGraph=function(){for(var t,e=[],r=[],n=[],a=[],i=[],o=[],s=[],l=this.graph.getNodes(),d=this.graph.getEdges(),p=this.graph.getCombos(),C=l.length,S=0;S<C;S++){var L=l[S];if(!(!L||L.destroyed)){var z=L.getModel();if(!L.isVisible()){r.push(z);continue}e.push(z)}}for(var H=d.length,S=0;S<H;S++){var ee=d[S];if(!(!ee||ee.destroyed)){var z=ee.getModel();if(!ee.isVisible()){a.push(z);continue}z.isComboEdge?i.push(z):n.push(z)}}for(var ie=p.length,S=0;S<ie;S++){var se=p[S];if(!se.destroyed){var z=se.getModel();if(!se.isVisible()){s.push(z);continue}o.push(z)}}return{nodes:e,hiddenNodes:r,edges:n,hiddenEdges:a,combos:o,hiddenCombos:s,comboEdges:i,vedges:(t=this.graph.get("vedges"))===null||t===void 0?void 0:t.map(function(ye){return ye.getModel()})}},f.prototype.relayout=function(t){var e=this,r=this,n=r.graph,a=r.layoutMethods,i=r.layoutCfg;if(!(!n||n.get("destroyed"))){var o=Promise.resolve();if(t){this.data=this.setDataFromGraph();var s=this.data.nodes;if(!s)return!1;o=this.initPositions(i.center,s)}n.emit("beforelayout"),a==null||a.forEach(function(l,d){var p=i[d]||i;o=o.then(function(){var C,S=e.execLayoutMethod(p,d);return d===a.length-1&&((C=i.onAllLayoutEnd)===null||C===void 0||C.call(i)),S})})}},f.prototype.filterLayoutData=function(t,e){var r=t.nodes,n=t.edges,a=(0,v.__rest)(t,["nodes","edges"]);if(!r)return t;var i,o;(0,u.isFunction)(e==null?void 0:e.nodesFilter)?i=e.nodesFilter:i=function(){return!0};var s=r.filter(i);if((0,u.isFunction)(e==null?void 0:e.edgesFilter))o=e.edgesFilter;else{var l=s.reduce(function(d,p){return d[p.id]=!0,d},{});o=function(p){return l[p.source]&&l[p.target]}}return(0,v.__assign)({nodes:s,edges:n.filter(o)},a)},f.prototype.getLayoutBBox=function(t){var e=this.graph,r=(0,u.groupBy)(e.getNodes(),function(i){return i.getModel().layoutOrder}),n=Object.values(r).map(function(i){var o=Ko(i);return o.size=[o.width,o.height],o}),a=Object.values((0,u.groupBy)(t,"layoutOrder"));return{groupNodes:a,layoutNodes:n}},f.prototype.layoutAnimate=function(){},f.prototype.moveToZero=function(){var t=this.graph,e=t.get("data"),r=e.nodes;if(!(r[0].x===void 0||r[0].x===null||Po(r[0].x))){for(var n=[0,0],a=r.length,i=0;i<a;i++){var o=r[i];n[0]+=o.x,n[1]+=o.y}n[0]/=r.length,n[1]/=r.length;for(var i=0;i<a;i++){var o=r[i];o.x-=n[0],o.y-=n[1]}}},f.prototype.initPositions=function(t,e){var r;return(0,v.__awaiter)(this,void 0,void 0,function(){var n,a,i;return(0,v.__generator)(this,function(o){return n=this.graph,e!=null&&e.length?(a=e.filter(function(s){return Po(s.x)||Po(s.y)}),i=a?a.length:0,i?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var s=n.get("width")*.85,l=n.get("height")*.85,d=Math.ceil(Math.sqrt(i)*(s/l)),p=Math.ceil(i/d),C=s/(d-1),S=l/(p-1);(!isFinite(C)||!C)&&(C=0),(!isFinite(S)||!C)&&(S=0);for(var L=t[0]-s/2,z=t[1]-l/2,H=!0,ee=0;ee<i;ee++){var ie=a[ee];Po(+ie.x)&&(H=!1,ie.x=ee%d*C+L),Po(+ie.y)&&(H=!1,ie.y=Math.floor(ee/d)*S+z)}})]:[2]):[2,Promise.resolve()]})})},f.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},f}(),bs=bf,rf=function(){function f(t){this.graph=t,this.destroyed=!1,this.initEvents()}return f}(),cu=rf,So=Es.registerNode,ku=Es.registerEdge,Ru=Es.registerCombo,lu=k.registerBehavior,rn=cn,yc={version:cn.version,AbstractGraph:lc,BaseGlobal:rn,Util:to,Shape:Es,Node:ai,Edge:Rn,Combo:Ha,Hull:Ff,registerNode:Es.registerNode,registerEdge:Es.registerEdge,registerCombo:Es.registerCombo,registerBehavior:k.registerBehavior,Arrow:gc,Marker:ef,AbstractLayout:bs,AbstractEvent:cu},Yf=G(10369),Qo=G(70375),Bu=G(71597),mc=G(6767),ks=G.n(mc),ko=G(97234),nf=2,Ec=.16,jf=.05,bc=.05,xc=.15,wc=5,du=4,Zc=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function Sc(f,t,e){var r;return Math.round(f.h)>=60&&Math.round(f.h)<=240?r=e?Math.round(f.h)-nf*t:Math.round(f.h)+nf*t:r=e?Math.round(f.h)+nf*t:Math.round(f.h)-nf*t,r<0?r+=360:r>=360&&(r-=360),r}function Kc(f,t,e){if(f.h===0&&f.s===0)return f.s;var r;return e?r=f.s-Ec*t:t===du?r=f.s+Ec:r=f.s+jf*t,r>1&&(r=1),e&&t===wc&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function _c(f,t,e){var r;return e?r=f.v+bc*t:r=f.v-xc*t,r>1&&(r=1),Number(r.toFixed(2))}function xf(f){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=[],r=(0,ko.Z)(f),n=wc;n>0;n-=1){var a=r.toHsv(),i=(0,ko.Z)({h:Sc(a,n,!0),s:Kc(a,n,!0),v:_c(a,n,!0)}).toHexString();e.push(i)}e.push(r.toHexString());for(var o=1;o<=du;o+=1){var s=r.toHsv(),l=(0,ko.Z)({h:Sc(s,o),s:Kc(s,o),v:_c(s,o)}).toHexString();e.push(l)}return t.theme==="dark"?Zc.map(function(d){var p=d.index,C=d.opacity,S=ko.Z.mix(t.backgroundColor||"#141414",e[p],C*100).toHexString();return S}):e}var Mc={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},po={},Hf={};Object.keys(Mc).forEach(function(f){po[f]=xf(Mc[f]),po[f].primary=po[f][5],Hf[f]=xf(Mc[f],{theme:"dark",backgroundColor:"#141414"}),Hf[f].primary=Hf[f][5]});var Al=po.red,dl=po.volcano,hl=po.gold,vl=po.orange,gl=po.yellow,$c=po.lime,Zf=po.green,Cc=po.cyan,Tc=po.blue,Ic=po.geekblue,Qc=po.purple,Ac=po.magenta,Oc=po.grey,ki=function(t,e,r){var n=ks()(t),a=ks()(e);return ks()([(1-r)*n.red()+r*a.red(),(1-r)*n.green()+r*a.green(),(1-r)*n.blue()+r*a.blue()]).rgb()},Lc=function(t,e,r){e===void 0&&(e="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=ki(e,t,.05).rgb().toString(),a=ki(e,t,.1).rgb().toString(),i=ki(e,t,.2).rgb().toString(),o=ki(e,t,.4).rgb().toString(),s=ki(e,r,.02).rgb().toString(),l=ki(e,r,.05).rgb().toString(),d=ki(e,r,.1).rgb().toString(),p=ki(e,r,.2).rgb().toString(),C=ki(e,r,.3).rgb().toString(),S=xf(t,{theme:"default",backgroundColor:e}),L=ks()(t).hex().toLowerCase(),z=S.indexOf(L),H=t;return z!==-1&&(H=S[z+1]),{mainStroke:t,mainFill:a,activeStroke:t,activeFill:n,inactiveStroke:o,inactiveFill:n,selectedStroke:t,selectedFill:e,highlightStroke:H,highlightFill:i,disableStroke:C,disableFill:l,edgeMainStroke:C,edgeActiveStroke:t,edgeInactiveStroke:p,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:d,comboMainStroke:C,comboMainFill:s,comboActiveStroke:t,comboActiveFill:n,comboInactiveStroke:C,comboInactiveFill:s,comboSelectedStroke:t,comboSelectedFill:s,comboHighlightStroke:H,comboHighlightFill:s,comboDisableStroke:p,comboDisableFill:l}},Kf=function(t,e,r){e===void 0&&(e="#fff"),r===void 0&&(r="#777");var n=ki(e,t,.2).rgb().toString(),a=ki(e,t,.3).rgb().toString(),i=ki(e,t,.6).rgb().toString(),o=ki(e,t,.8).rgb().toString(),s=ki(e,r,.2).rgb().toString(),l=ki(e,r,.25).rgb().toString(),d=ki(e,r,.3).rgb().toString(),p=ki(e,r,.4).rgb().toString(),C=ki(e,r,.5).rgb().toString(),S=xf(t,{theme:"dark",backgroundColor:e}),L=ks()(t).hex().toLowerCase(),z=S.indexOf(L),H=t;return z!==-1&&(H=S[z+1]),{mainStroke:o,mainFill:n,activeStroke:t,activeFill:a,inactiveStroke:o,inactiveFill:n,selectedStroke:t,selectedFill:n,highlightStroke:t,highlightFill:i,disableStroke:C,disableFill:l,edgeMainStroke:r,edgeActiveStroke:t,edgeInactiveStroke:r,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:d,comboMainStroke:p,comboMainFill:l,comboActiveStroke:t,comboActiveFill:s,comboInactiveStroke:p,comboInactiveFill:l,comboSelectedStroke:t,comboSelectedFill:s,comboHighlightStroke:H,comboHighlightFill:l,comboDisableStroke:p,comboDisableFill:s}},af=function(t,e,r,n){return e===void 0&&(e="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?Lc(t,e,"rgb(150, 150, 150)"):Kf(t,e,"#777")},$f=function(t,e,r,n){e===void 0&&(e="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=[];return t.forEach(function(i){a.push(af(i,e,r,n))}),a},wf="rgb(95, 149, 255)",Sf="rgb(255, 255, 255)",Fu="rgb(0, 0, 0)",xa=af(wf,Sf),ss={version:"0.8.21",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:xa.mainStroke,fill:xa.mainFill},size:20,color:xa.mainStroke,linkPoints:{size:8,lineWidth:1,fill:xa.activeFill,stroke:xa.activeStroke}},nodeStateStyles:{active:{fill:xa.activeFill,stroke:xa.activeStroke,lineWidth:2,shadowColor:xa.mainStroke,shadowBlur:10},selected:{fill:xa.selectedFill,stroke:xa.selectedStroke,lineWidth:4,shadowColor:xa.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:xa.highlightFill,stroke:xa.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:xa.inactiveFill,stroke:xa.inactiveStroke,lineWidth:1},disable:{fill:xa.disableFill,stroke:xa.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:Fu,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:xa.edgeMainStroke,lineAppendWidth:2},color:xa.edgeMainStroke},edgeStateStyles:{active:{stroke:xa.edgeActiveStroke,lineWidth:1},selected:{stroke:xa.edgeSelectedStroke,lineWidth:2,shadowColor:xa.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:xa.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:xa.edgeInactiveStroke,lineWidth:1},disable:{stroke:xa.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:Fu,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:xa.comboMainFill,lineWidth:1,stroke:xa.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:xa.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:xa.comboActiveStroke,lineWidth:1,fill:xa.comboActiveFill},selected:{stroke:xa.comboSelectedStroke,lineWidth:2,fill:xa.comboSelectedFill,shadowColor:xa.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:xa.comboHighlightStroke,lineWidth:2,fill:xa.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:xa.comboInactiveStroke,fill:xa.comboInactiveFill,lineWidth:1},disable:{stroke:xa.comboDisableStroke,fill:xa.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},_f=G(57817),Mf=to.cloneEvent,Gu=to.isViewportChanged,qc=function(f){(0,v.__extends)(t,f);function t(e){var r=f.call(this,e)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=e,r.destroyed=!1,r.initEvents(),r}return t.prototype.initEvents=function(){var e=this,r=e.graph,n=e.extendEvents,a=n===void 0?[]:n,i=r.get("canvas"),o=i.get("el"),s=(0,u.wrapBehavior)(this,"onCanvasEvents"),l=(0,u.wrapBehavior)(this,"onExtendEvents"),d=(0,u.wrapBehavior)(this,"onWheelEvent");i.off("*").on("*",s),this.canvasHandler=s,a.push((0,_f.Z)(o,"wheel",d)),typeof window!="undefined"&&(a.push((0,_f.Z)(window,"keydown",l)),a.push((0,_f.Z)(window,"keyup",l)),a.push((0,_f.Z)(window,"focus",l))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,u.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},t.getItemRoot=function(e){for(;e&&!e.get("item");)e=e.get("parent");return e},t.prototype.onCanvasEvents=function(e){var r=this,n=this.graph,a=n.get("canvas"),i=e.target,o=e.type;switch(o){case"drag":this.onCanvasEvents(Object.assign({},e,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},e,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}e.canvasX=e.x,e.canvasY=e.y;var s={x:e.canvasX,y:e.canvasY},l=n.get("group"),d=l.getMatrix();if(d||(d=[1,0,0,0,1,0,0,0,1]),Gu(d)&&(s=n.getPointByClient(e.clientX,e.clientY)),e.x=s.x,e.y=s.y,e.currentTarget=n,i===a){(o==="mousemove"||o==="mouseleave")&&this.handleMouseMove(e,"canvas"),e.target=a,e.item=null,n.emit(o,e),n.emit("canvas:".concat(o),e);return}var p=t.getItemRoot(i);if(!p){n.emit(o,e);return}var C=p.get("item");if(!C.destroyed){var S=C.getType();if(e.target=i,e.item=C,e.canvasX===e.x&&e.canvasY===e.y){var L=n.getCanvasByPoint(e.x,e.y);e.canvasX=L.x,e.canvasY=L.y}e.name&&!e.name.includes(":")?(n.emit("".concat(S,":").concat(o),e),n.emit(o,e)):e.name&&n.emit(e.name,e),o==="dragstart"&&(this.dragging=!0),o==="dragend"&&(this.dragging=!1),o==="mousemove"&&this.handleMouseMove(e,S)}},t.prototype.onExtendEvents=function(e){this.graph.emit(e.type,e)},t.prototype.onWheelEvent=function(e){(0,u.isNil)(e.wheelDelta)&&(e.wheelDelta=-e.detail),this.graph.emit("wheel",e)},t.prototype.handleMouseMove=function(e,r){var n=this,a=n.graph,i=n.preItem,o=a.get("canvas"),s=e.target===o?null:e.item;e=Mf(e),i&&i!==s&&!i.destroyed&&(e.item=i,this.emitCustomEvent(i.getType(),"mouseleave",e),this.dragging&&this.emitCustomEvent(i.getType(),"dragleave",e)),s&&i!==s&&(e.item=s,this.emitCustomEvent(r,"mouseenter",e),this.dragging&&this.emitCustomEvent(r,"dragenter",e)),this.preItem=s},t.prototype.emitCustomEvent=function(e,r,n){n.type=r,this.graph.emit("".concat(e,":").concat(r),n)},t.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},t.prototype.destroy=function(){var e=this,r=e.graph,n=e.canvasHandler,a=e.extendEvents,i=r.get("canvas");i.off("*",n),(0,u.each)(a,function(o){o.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},t}(cu),Qf=qc,Ta=G(83360),pl=G(81746),qf=G.n(pl),Zs=to.traverseTree,Jc=function(t,e){var r;return t?(0,u.isNumber)(t)?r=function(a){return t}:r=t:r=function(a){return e||1},r},el=function(t,e){var r=[],n=[],a={},i=0;for(i=0;i<t.length;i++){var o=t[i];a[o.id]=i,r.push(o.x),r.push(o.y),r.push(0),r.push(0),n.push([])}for(i=0;i<e.length;i++){var s=e[i];n[a[s.source]].push(a[s.target]),n[a[s.target]].push(a[s.source])}var l=0;for(i=0;i<t.length;i++){var d=r.length,p=n[i],C=p.length;r[i*4+2]=d,r[i*4+3]=p.length,l=Math.max(l,p.length);for(var S=0;S<C;++S){var L=p[S];r.push(+L)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:l}},tl=function(t,e,r){var n=[],a=[],i={},o=0;for(o=0;o<t.length;o++){var s=t[o];i[s.id]=o,n.push(s.x),n.push(s.y),n.push(0),n.push(0),a.push([])}for(o=0;o<e.length;o++){var l=e[o];a[i[l.source]].push(i[l.target]),a[i[l.source]].push(r(l)),a[i[l.target]].push(i[l.source]),a[i[l.target]].push(r(l))}var d=0;for(o=0;o<t.length;o++){var p=n.length,C=a[o],S=C.length;n[o*4+2]=p,n[o*4+3]=S/2,d=Math.max(d,S/2);for(var L=0;L<S;++L){var z=C[L];n.push(+z)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:d}},yl=function(t,e,r,n){var a=[],i=[],o={},s=0;for(s=0;s<t.length;s++){var l=t[s];o[l.id]=s,a.push(l.x),a.push(l.y),a.push(0),a.push(0),i.push([])}for(s=0;s<e.length;s++){var d=e[s];i[o[d.source]].push(o[d.target]),i[o[d.source]].push(r(d)),i[o[d.source]].push(n(d)),i[o[d.source]].push(0),i[o[d.target]].push(o[d.source]),i[o[d.target]].push(r(d)),i[o[d.target]].push(n(d)),i[o[d.target]].push(0)}var p=0;for(s=0;s<t.length;s++){var C=a.length,S=i[s],L=S.length;a[s*4+2]=C+1048576*L/4,a[s*4+3]=0,p=Math.max(p,L/4);for(var z=0;z<L;++z){var H=S[z];a.push(+H)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:p}},rl=function(t,e){var r=[],n=t.length,a={};return e.forEach(function(i){t.forEach(function(o,s){if(a[i[o]]===void 0&&(a[i[o]]=Object.keys(a).length),r.push(a[i[o]]),s===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},ml=function(t){for(var e=[],r=t.length,n=t[0].length,a=function(s){t.forEach(function(l,d){if(e.push(l[s]),d===r-1)for(;e.length%4!==0;)e.push(0)})},i=0;i<n;i++)a(i);return new Float32Array(e)},yo=function(t,e){var r=["V","TB","BT"],n={x:1/0,y:1/0},a={x:-1/0,y:-1/0},i="x",o="y";e&&r.indexOf(e)>=0&&(o="x",i="y");var s=0;Zs(t,function(p){return s++,p.x>a.x&&(a.x=p.x),p.x<n.x&&(n.x=p.x),p.y>a.y&&(a.y=p.y),p.y<n.y&&(n.y=p.y),!0});var l=Math.PI*2/s,d=a[o]-n[o];return d===0||Zs(t,function(p){var C=(p[o]-n[o])/d*(Math.PI*2-l)+l,S=Math.abs(i==="x"?p.x-t.x:p.y-t.y);return p.x=S*Math.cos(C),p.y=S*Math.sin(C),!0}),t},Dc=function f(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl")))}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),e},addGetWebGLMessage:function(e){e=e||{};var r=e.parent!==void 0?e.parent:document.body,n=e.id!==void 0?e.id:"oldie",a=f().getWebGLErrorMessage();a.id=n,r.appendChild(a)}}},zu=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("firefox")>-1?"firefox":t.indexOf("safari")>-1?"safari":t.indexOf("opr")>-1?"opera":t.indexOf("chrome")>-1?"chrome":t.indexOf("trident")>-1?"ie 11":t.indexOf("ie")>-1?"ie":"unknown"},hu=(0,v.__assign)((0,v.__assign)((0,v.__assign)((0,v.__assign)((0,v.__assign)({},to),E),y),m),g),Rs=hu,Nc=Rs.radialLayout,Jf=function(){function f(t){this.type=t.type,this.radial=t.radial,this.config=t}return f.prototype.init=function(t){var e=this;if(this.data=t,this.radial){this.layoutMethod=function(r){var n=qf()[e.type](r,e.config);return Nc(n),n};return}this.layoutMethod=function(r){return qf()[e.type](r,e.config)}},f.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},f.prototype.layout=function(t){return this.init(t),this.execute()},f}(),nl=Jf;(0,Ta.registerLayout)("grid",Ta.GridLayout),(0,Ta.registerLayout)("random",Ta.RandomLayout),(0,Ta.registerLayout)("force",Ta.ForceLayout),(0,Ta.registerLayout)("circular",Ta.CircularLayout),(0,Ta.registerLayout)("dagre",Ta.DagreLayout),(0,Ta.registerLayout)("dagreCompound",Ta.DagreCompoundLayout),(0,Ta.registerLayout)("radial",Ta.RadialLayout),(0,Ta.registerLayout)("concentric",Ta.ConcentricLayout),(0,Ta.registerLayout)("mds",Ta.MDSLayout),(0,Ta.registerLayout)("fruchterman",Ta.FruchtermanLayout),(0,Ta.registerLayout)("fruchterman-gpu",Ta.FruchtermanGPULayout),(0,Ta.registerLayout)("gForce",Ta.GForceLayout),(0,Ta.registerLayout)("force2",Ta.Force2Layout),(0,Ta.registerLayout)("gForce-gpu",Ta.GForceGPULayout),(0,Ta.registerLayout)("comboForce",Ta.ComboForceLayout),(0,Ta.registerLayout)("comboCombined",Ta.ComboCombinedLayout),(0,Ta.registerLayout)("forceAtlas2",Ta.ForceAtlas2Layout);var Ro=function(t,e){e.isCustomLayout=!0,Ta.Layouts[t]=(0,Ta.registerLayout)(t,e)},vu=function(){function f(t,e){var r=t.toString(),n=new Blob(["importScripts('".concat(e,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return f}(),Fi=vu,_o=function(t){t===void 0&&(t="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function e(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(o){var s=o.data.type;return s===n.RUN||s===n.GPURUN}function i(o){var s=this,l=o.data.type;switch(l){case n.RUN:{var d=o.data,p=d.nodes,C=d.edges,S=d.layoutCfg,L=S===void 0?{}:S,z=L.type,H=layout.getLayoutByName(z);if(!H){this.postMessage({type:n.ERROR,message:"layout ".concat(z," not found")});break}var ee;L.onLayoutEnd=function(){s.postMessage({type:n.END,nodes:p}),ee==null||ee.destroy()},ee=new H(L),ee.init({nodes:p,edges:C}),ee.execute();break}case n.GPURUN:{var ie=o.data,se=ie.nodes,C=ie.edges,ye=ie.layoutCfg,L=ye===void 0?{}:ye,Ce=ie.canvas,z=L.type,H=layout.getLayoutByName(z);if(!H){this.postMessage({type:n.ERROR,message:"layout ".concat(z," not found")});break}if(z.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(z," does not support GPU")});break}var Re=new H(L);Re.init({nodes:se,edges:C}),Re.executeWithWorker(Ce,this);break}default:break}}onmessage=function(s){a(s)&&i(s)}}var r=new Fi(e,t);return r},Ks={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function Pc(f){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pc(f)}var kc=function(t){return setTimeout(t,16)},al=function(t){return clearTimeout(t)},ec={requestAnimationFrame:function(t){var e=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||kc;return e(t)},cancelAnimationFrame:function(t){var e=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||al;return e(t)}},il=["fruchterman","gForce"],El=["force","grid","circular"],bl=function(f){(0,v.__extends)(t,f);function t(e){var r=f.call(this,e)||this;return r.graph=e,r.layoutCfg=e.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return t.prototype.initLayout=function(){},t.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=_o(this.layoutCfg.workerScriptURL),this.worker)},t.prototype.stopWorker=function(){var e=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,e.requestId&&(ec.cancelAnimationFrame(e.requestId),e.requestId=null),e.requestId2&&(ec.cancelAnimationFrame(e.requestId2),e.requestId2=null))},t.prototype.execLayoutMethod=function(e,r){var n=this;return new Promise(function(a,i){return(0,v.__awaiter)(n,void 0,void 0,function(){var o,s,l,d,p,z,C,S,L,z,H;return(0,v.__generator)(this,function(ee){switch(ee.label){case 0:if(o=this.graph,!o||o.get("destroyed"))return[2];s=e.type,e.onLayoutEnd=function(){o.emit("aftersublayout",{type:s}),a()},s&&this.isGPU&&(Fc(s)?s="".concat(s,"-gpu"):console.warn("The '".concat(s,"' layout does not support GPU calculation for now, it will run in CPU."))),to.isForce(s)?(l=e.onTick,d=e.animate,p=d===void 0&&(s==="force"||s==="force2"),z=function(){l&&l(),(d||p)&&o.refreshPositions()},e.tick=z):(s==="comboForce"||s==="comboCombined")&&(e.comboTrees=o.get("comboTrees")),C=!1;try{S=new Ta.Layouts[s](e),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=S}catch(ie){console.warn("The layout method: '".concat(s,"' does not exist! Please specify it first.")),i()}return C=S.enableTick,C&&(L=e.onTick,z=function(){L&&L(),o.refreshPositions()},S.tick=z),H=this.filterLayoutData(this.data,e),tc(H,r),S.init(H),o.emit("beforesublayout",{type:s}),[4,S.execute()];case 1:return ee.sent(),S.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),[2]}})})})},t.prototype.updateLayoutMethod=function(e,r){var n=this;return new Promise(function(a,i){return(0,v.__awaiter)(n,void 0,void 0,function(){var o,s,l,d,p,C,S;return(0,v.__generator)(this,function(L){switch(L.label){case 0:return o=this.graph,s=r==null?void 0:r.type,r.onLayoutEnd=function(){o.emit("aftersublayout",{type:s}),a()},to.isForce(s)&&(l=r.onTick,d=r.animate,p=d===void 0&&(s==="force"||s==="force2"),C=function(){l==null||l(),(d||p)&&o.refreshPositions()},r.tick=C),S=this.filterLayoutData(this.data,r),e.init(S),e.updateCfg(r),o.emit("beforesublayout",{type:s}),[4,e.execute()];case 1:return L.sent(),e.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},t.prototype.layout=function(e){var r=this,n,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var i=this.data,o=i.nodes,s=i.hiddenNodes;if(!o)return!1;var l=a.get("width"),d=a.get("height"),p={};Object.assign(p,{width:l,height:d,center:[l/2,d/2]},this.layoutCfg),this.layoutCfg=p;var C=p.type,S=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(Ce){var Re;return S=!!(!((Re=Ce.nodes)===null||Re===void 0)&&Re.length)||S});var L=this.destoryLayoutMethods();a.emit("beforelayout");var z=Promise.resolve();S&&C&&(L==null?void 0:L.length)===1&&L[0]===C?this.tweakInit():z=this.initPositions(p.center,o);var H=this.initPositions(p.center,s);H.then(),this.isGPU=sl(p,C);var ee=p.onLayoutEnd,ie=p.layoutEndFormatted,se=p.adjust;if(ie||(p.layoutEndFormatted=!0,p.onAllLayoutEnd=function(){return(0,v.__awaiter)(r,void 0,void 0,function(){return(0,v.__generator)(this,function(Ce){switch(Ce.label){case 0:return ee&&ee(o),this.refreshLayout(),se&&p.pipes?[4,this.adjustPipesBox(this.data,se)]:[3,2];case 1:Ce.sent(),this.refreshLayout(),Ce.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),p.workerEnabled&&this.layoutWithWorker(this.data,e))return!0;var ye=!1;return p.type?(ye=!0,z=z.then(function(){return(0,v.__awaiter)(r,void 0,void 0,function(){return(0,v.__generator)(this,function(Ce){switch(Ce.label){case 0:return[4,this.execLayoutMethod(p,0)];case 1:return[2,Ce.sent()]}})})})):p.pipes&&(ye=!0,p.pipes.forEach(function(Ce,Re){z=z.then(function(){return(0,v.__awaiter)(r,void 0,void 0,function(){return(0,v.__generator)(this,function(ke){switch(ke.label){case 0:return[4,this.execLayoutMethod(Ce,Re)];case 1:return[2,ke.sent()]}})})})})),ye?z.then(function(){p.onAllLayoutEnd&&p.onAllLayoutEnd(),e&&e()}).catch(function(Ce){console.warn("graph layout failed,",Ce)}):(a.refreshPositions(),e==null||e()),!1}},t.prototype.tweakInit=function(){var e=this,r=e.data,n=e.graph,a=r.nodes,i=r.edges;if(a!=null&&a.length){var o={};a.forEach(function(d){var p=d.x,C=d.y;!isNaN(p)&&!isNaN(C)&&(o[d.id]={x:p,y:C},d.mass=d.mass||2)}),i.forEach(function(d){var p=d.source,C=d.target,S=o[p],L=o[C];!S&&L?o[p]={x:L.x+(Math.random()-.5)*80,y:L.y+(Math.random()-.5)*80}:!L&&S&&(o[C]={x:S.x+(Math.random()-.5)*80,y:S.y+(Math.random()-.5)*80})});var s=n.get("width"),l=n.get("height");a.forEach(function(d){var p=o[d.id]||{x:s/2+(Math.random()-.5)*20,y:l/2+(Math.random()-.5)*20};d.x=p.x,d.y=p.y})}},t.prototype.initWithPreset=function(e,r){var n=this;return new Promise(function(a,i){return(0,v.__awaiter)(n,void 0,void 0,function(){var o,s,l,d,p,C,S;return(0,v.__generator)(this,function(L){switch(L.label){case 0:return o=this,s=o.layoutCfg,l=o.data,d=s.preset,!(d!=null&&d.type)||!Ta.Layouts[d==null?void 0:d.type]?(r==null||r(),a(),[2,!1]):(p=sl(d,d.type),C=p?"".concat(d.type,"-gpu"):d.type,S=new Ta.Layouts[C](d),delete s.preset,S.init(l),[4,S.execute()]);case 1:return L.sent(),e==null||e(),a(),[2,!0]}})})})},t.prototype.layoutWithWorker=function(e,r){var n=this,a=this,i=a.layoutCfg,o=a.graph,s=this.getWorker(),l=this.workerData;if(!s)return!1;l.requestId=null,l.requestId2=null,l.currentTick=null,l.currentTickData=null,o.emit("beforelayout");var d=Promise.resolve(),p=!1;if(i.type)p=!0,d=d.then(function(){return n.runWebworker(s,e,i)});else if(i.pipes){p=!0;for(var C=function(ee){d=d.then(function(){return n.runWebworker(s,e,ee)})},S=0,L=i.pipes;S<L.length;S++){var z=L[S];C(z)}}return p&&d.then(function(){i.onAllLayoutEnd&&i.onAllLayoutEnd(),r==null||r()}).catch(function(H){console.error("layout failed",H)}),!0},t.prototype.runWebworker=function(e,r,n){var a=this,i=this.isGPU,o=this.filterLayoutData(r,n),s=o.nodes,l=o.edges,d=document.createElement("canvas"),p=i&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in d,C=ol(n,function(L){return typeof L!="function"});if(!p)e.postMessage({type:Ks.RUN,nodes:s,edges:l,layoutCfg:C});else{var S=d.transferControlToOffscreen();C.type="".concat(C.type,"-gpu"),e.postMessage({type:Ks.GPURUN,nodes:s,edges:l,layoutCfg:C,canvas:S},[S])}return new Promise(function(L,z){e.onmessage=function(H){a.handleWorkerMessage(L,z,H,o,n)}})},t.prototype.handleWorkerMessage=function(e,r,n,a,i){var o=this,s=o.graph,l=o.workerData,d=n.data,p=d.type,C=function(){i.onTick&&i.onTick()};switch(p){case Ks.TICK:l.currentTick=d.currentTick,l.currentTickData=d,l.requestId||(l.requestId=ec.requestAnimationFrame(function(){Rc(a,d),s.refreshPositions(),C(),d.currentTick===d.totalTicks?e():l.currentTick===d.totalTicks&&(l.requestId2=ec.requestAnimationFrame(function(){Rc(a,l.currentTickData),s.refreshPositions(),l.requestId2=null,C(),e()})),l.requestId=null}));break;case Ks.END:l.currentTick==null&&(Rc(a,d),e());break;case Ks.GPUEND:l.currentTick==null&&(Bc(a,d),e());break;case Ks.ERROR:console.warn("Web-Worker layout error!",d.message),r();break;default:r();break}},t.prototype.updateLayoutCfg=function(e){var r=this,n=this,a=n.graph,i=n.layoutMethods;if(!(!a||a.get("destroyed"))){var o=e.disableTriggerLayout,s=(0,v.__rest)(e,["disableTriggerLayout"]),l=(0,u.mix)({},this.layoutCfg,s);if(this.layoutCfg=l,!o){if(!(i!=null&&i.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(s.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var d=Promise.resolve(),p=!1;(i==null?void 0:i.length)===1?(p=!0,d=d.then(function(){return(0,v.__awaiter)(r,void 0,void 0,function(){return(0,v.__generator)(this,function(C){switch(C.label){case 0:return[4,this.updateLayoutMethod(i[0],l)];case 1:return[2,C.sent()]}})})})):i!=null&&i.length&&(p=!0,i.forEach(function(C,S){var L=l.pipes[S];d=d.then(function(){return(0,v.__awaiter)(r,void 0,void 0,function(){return(0,v.__generator)(this,function(z){switch(z.label){case 0:return[4,this.updateLayoutMethod(C,L)];case 1:return[2,z.sent()]}})})})})),p&&d.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd()}).catch(function(C){console.warn("layout failed",C)})}}}},t.prototype.adjustPipesBox=function(e,r){var n=this;return new Promise(function(a){var i=e.nodes;i!=null&&i.length||a(),El.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var o={center:n.layoutCfg.center,nodeSize:function(L){return Math.max(L.height,L.width)},preventOverlap:!0,onLayoutEnd:function(){}},s=n.getLayoutBBox(i),l=s.groupNodes,d=s.layoutNodes,p=(0,u.clone)(d);o.onLayoutEnd=function(){d==null||d.forEach(function(S,L){var z,H,ee,ie=S.x-((z=p[L])===null||z===void 0?void 0:z.x),se=S.y-((H=p[L])===null||H===void 0?void 0:H.y);(ee=l[L])===null||ee===void 0||ee.forEach(function(ye){ye.x+=ie,ye.y+=se})}),a()};var C=new Ta.Layouts[r](o);C.layout({nodes:d})})},t.prototype.destroy=function(){this.destoryLayoutMethods();var e=this.worker;e&&(e.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},t}(bs),xl=bl;function Rc(f,t){for(var e=f.nodes,r=t.nodes,n=e.length,a=0;a<n;a++){var i=e[a];i.x=r[a].x,i.y=r[a].y}}function ol(f,t){var e={};return f&&Pc(f)==="object"?(Object.keys(f).forEach(function(r){f.hasOwnProperty(r)&&t(f[r])&&(e[r]=f[r])}),e):f}function Bc(f,t){for(var e=f.nodes,r=t.vertexEdgeData,n=e.length,a=0;a<n;a++){var i=e[a],o=r[4*a],s=r[4*a+1];i.x=o,i.y=s}}function tc(f,t){var e;if(!((e=f==null?void 0:f.nodes)===null||e===void 0)&&e.length){var r=f.nodes;r.forEach(function(n){n.layoutOrder=t})}}function Fc(f){return il.includes(f)}function sl(f,t){var e=t;t&&t.split("-")[1]==="gpu"&&(e=t.split("-")[0],f.gpuEnabled=!0);var r=!1;return f.gpuEnabled&&(r=!0,Dc().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!Fc(e)&&(console.warn("The '".concat(e,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var pi=G(6056),ul=function(t){var e=t.clone();return rc(t,e),e},rc=function f(t,e){var r;t.isGroup()&&e.isGroup()&&((r=t.get("children"))===null||r===void 0||r.forEach(function(o,s){var l=e.get("children")[s];f(o,l)}));var n=t.get("type"),a=e.get("type");if(!(n!=="image"||a!=="image")){var i=t.get("clipShape");i&&e.setClip({type:i.get("type"),attrs:i.attr()})}},pe=J.vs,qe="svg",pt=function(f){(0,v.__extends)(t,f);function t(e){var r=f.call(this,e)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return t.prototype.initLayoutController=function(){var e=new xl(this);this.set({layoutController:e})},t.prototype.initEventController=function(){var e=new Qf(this);this.set({eventController:e})},t.prototype.initCanvas=function(){var e=this.get("container");if(typeof e=="string"&&(e=document.getElementById(e),this.set("container",e)),!e)throw new Error("invalid container");var r=e.clientWidth,n=e.clientHeight,a=this.get("width")||r,i=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var o=this.get("renderer"),s;if(o===qe)s=new Bu.Canvas({container:e,width:a,height:i});else{var l={container:e,width:a,height:i},d=this.get("pixelRatio");d&&(l.pixelRatio=d,window.devicePixelRatio=d),s=new Qo.Canvas(l)}this.set("canvas",s)},t.prototype.initPlugins=function(){var e=this;(0,u.each)(e.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(e)})},t.prototype.downloadImageWatermark=function(e,r,n,a){return(0,v.__awaiter)(this,void 0,void 0,function(){var i,o,s;return(0,v.__generator)(this,function(l){switch(l.label){case 0:return i=e.style.backgroundImage,o=i.slice(5,i.length-2),s=new Image,s.src=o,[4,new Promise(function(d){s.onload=function(){var p=r.createPattern(s,"repeat");r.rect(0,0,n,a),r.fillStyle=p,r.fill(),d("")}})];case 1:return l.sent(),[2]}})})},t.prototype.asyncToDataUrl=function(e,r,n,a,i,o){var s=this,l=document.querySelector(".g6-graph-watermarker"),d=this.get("canvas"),p=d.getRenderer(),C=o||d.get("el"),S="";e||(e="image/png"),setTimeout(function(){return(0,v.__awaiter)(s,void 0,void 0,function(){var L,z,H,ee,ie,se,ye,Ce,Re,ke;return(0,v.__generator)(this,function(et){switch(et.label){case 0:return p!=="svg"?[3,1]:(L=C.cloneNode(!0),z=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),H=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",z),H.replaceChild(L,H.documentElement),ee=new XMLSerializer().serializeToString(H),S="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(ee)),[3,4]);case 1:return ie=void 0,se=C.getContext("2d"),ye=a||this.get("width"),Ce=i||this.get("height"),Re=void 0,l?[4,this.downloadImageWatermark(l,se,ye,Ce)]:[3,3];case 2:et.sent(),et.label=3;case 3:if(r){ke=typeof window!="undefined"?window.devicePixelRatio:1;try{ie=se.getImageData(0,0,ye*ke,Ce*ke),Re=se.globalCompositeOperation,se.globalCompositeOperation="destination-over",se.fillStyle=r,se.fillRect(0,0,ye,Ce)}catch(vt){console.error("Download image failed. Out of memory at ImageData creation")}}S=C.toDataURL(e),r&&(se.clearRect(0,0,ye,Ce),se.putImageData(ie,0,0),se.globalCompositeOperation=Re),et.label=4;case 4:return n&&n(S),[2]}})})},16)},t.prototype.toDataURL=function(e,r){var n=this.get("canvas"),a=n.getRenderer(),i=n.get("el");e||(e="image/png");var o="";if(a==="svg"){var s=i.cloneNode(!0),l=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),d=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",l);d.replaceChild(s,d.documentElement);var p=new XMLSerializer().serializeToString(d);o="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(p))}else{var C=void 0,S=i.getContext("2d"),L=Math.max(this.get("width"),500),z=Math.max(this.get("height"),500),H=void 0;if(r){var ee=typeof window!="undefined"&&window.devicePixelRatio||1;try{C=S.getImageData(0,0,L*ee,z*ee),H=S.globalCompositeOperation,S.globalCompositeOperation="destination-over",S.fillStyle=r,S.fillRect(0,0,L,z)}catch(ie){console.error("Download image failed. Out of memory at ImageData creation")}}o=i.toDataURL(e),r&&(S.clearRect(0,0,L,z),S.putImageData(C,0,0),S.globalCompositeOperation=H)}return o},t.prototype.toFullDataURL=function(e,r,n){var a=this.get("group").getCanvasBBox(),i=a.height,o=a.width,s=this.get("renderer"),l=(0,pi.Z)('<div id="virtual-image"></div>'),d=n?n.backgroundColor:void 0,p=n?n.padding:void 0;p?(0,u.isNumber)(p)&&(p=[p,p,p,p]):p=[0,0,0,0];var C=i+p[0]+p[2],S=o+p[1]+p[3],L={container:l,height:C,width:S,quickHit:!0},z=s==="svg"?new Bu.Canvas(L):new Qo.Canvas(L),H=this.get("group"),ee=H.clone(),ie=(0,u.clone)(ee.getMatrix());ie||(ie=[1,0,0,0,1,0,0,0,1]);var se=(a.maxX+a.minX)/2,ye=(a.maxY+a.minY)/2;ie=pe(ie,[["t",-se,-ye],["t",o/2+p[3],i/2+p[0]]]),ee.resetMatrix(),ee.setMatrix(ie),z.add(ee);var Ce=z.get("el"),Re="";r||(r="image/png"),setTimeout(function(){if(s==="svg"){var ke=Ce.cloneNode(!0),et=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),vt=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",et);vt.replaceChild(ke,vt.documentElement);var at=new XMLSerializer().serializeToString(vt);Re="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(at))}else{var Mt=void 0,zt=Ce.getContext("2d"),Cr=void 0;if(d){var jr=typeof window!="undefined"?window.devicePixelRatio:1;try{Mt=zt.getImageData(0,0,S*jr,C*jr),Cr=zt.globalCompositeOperation,zt.globalCompositeOperation="destination-over",zt.fillStyle=d,zt.fillRect(0,0,S,C)}catch(kr){console.error("Download image failed. Out of memory at ImageData creation")}}Re=Ce.toDataURL(r),d&&(zt.clearRect(0,0,S,C),zt.putImageData(Mt,0,0),zt.globalCompositeOperation=Cr)}e&&e(Re)},16)},t.prototype.downloadFullImage=function(e,r,n){var a=this,i=this.get("group").getCanvasBBox(),o=i.height,s=i.width,l=this.get("renderer"),d=(0,pi.Z)('<div id="virtual-image"></div>'),p=document.querySelector(".g6-graph-watermarker"),C=n?n.backgroundColor:void 0,S=n?n.padding:void 0;S?(0,u.isNumber)(S)&&(S=[S,S,S,S]):S=[0,0,0,0];var L=o+S[0]+S[2],z=s+S[1]+S[3];if(p){var H=this.get("graphWaterMarker").cfg||{},ee=H.width,ie=H.height;L=Math.ceil(L/ie)*ie,z=Math.ceil(z/ee)*ee}var se={container:d,height:L,width:z},ye=l==="svg"?new Bu.Canvas(se):new Qo.Canvas(se),Ce=this.get("group"),Re=ul(Ce),ke=(0,u.clone)(Re.getMatrix());ke||(ke=[1,0,0,0,1,0,0,0,1]);var et=(i.maxX+i.minX)/2,vt=(i.maxY+i.minY)/2;ke=pe(ke,[["t",-et,-vt],["t",s/2+S[3],o/2+S[0]]]),Re.resetMatrix(),Re.setMatrix(ke),ye.add(Re);var at=ye.get("el");r||(r="image/png"),this.asyncToDataUrl(r,C,function(Mt){var zt=document.createElement("a"),Cr=(e||"graph")+(l==="svg"?".svg":".".concat(r.split("/")[1]));a.dataURLToImage(Mt,l,zt,Cr);var jr=document.createEvent("MouseEvents");jr.initEvent("click",!1,!1),zt.dispatchEvent(jr)},z,L,at)},t.prototype.downloadImage=function(e,r,n){var a=this,i=this;i.stopAnimate();var o=i.get("canvas"),s=o.getRenderer();r||(r="image/png");var l=(e||"graph")+(s==="svg"?".svg":r.split("/")[1]),d=document.createElement("a");i.asyncToDataUrl(r,n,function(p){a.dataURLToImage(p,s,d,l);var C=document.createEvent("MouseEvents");C.initEvent("click",!1,!1),d.dispatchEvent(C)})},t.prototype.dataURLToImage=function(e,r,n,a){if(!e||e==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var i=e.split(","),o="";if(i&&i.length>0){var s=i[0].match(/:(.*?);/);s&&s.length>=2&&(o=s[1])}for(var l=atob(i[1]),d=l.length,p=new Uint8Array(d);d--;)p[d]=l.charCodeAt(d);var C=new Blob([p],{type:o});window.navigator.msSaveBlob?window.navigator.msSaveBlob(C,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(C)})}else n.addEventListener("click",function(){n.download=a,n.href=e})},t.prototype.addPlugin=function(e){var r=this;e.destroyed||(r.get("plugins").push(e),e.initPlugin(r))},t.prototype.removePlugin=function(e){var r=this.get("plugins"),n=r.indexOf(e);n>=0&&(e.destroyPlugin(),r.splice(n,1))},t.prototype.setImageWaterMarker=function(e,r){e===void 0&&(e=ss.waterMarkerImage);var n=this.get("container");(0,u.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),i=(0,u.deepMix)({},ss.imageWaterMarkerConfig,r),o=i.width,s=i.height,l=i.compatible,d=i.image;if(!e){var p=l?n:document.querySelector(".g6-graph-watermarker");p&&(p.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var C={container:n,width:o,height:s,capture:!1},S=this.get("pixelRatio");S&&(C.pixelRatio=S,window.devicePixelRatio=S),a=new Qo.Canvas(C),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var L=a.get("context"),z=d.rotate,H=d.x,ee=d.y;L.rotate(-z*Math.PI/180);var ie=new Image;ie.crossOrigin="anonymous",ie.src=e,ie.onload=function(){if(L.drawImage(ie,H,ee,d.width,d.height),L.rotate(z*Math.PI/180),l)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var se=document.querySelector(".g6-graph-watermarker");se||(se=document.createElement("div"),se.className="g6-graph-watermarker"),se.className="g6-graph-watermarker",a.destroyed||(se.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(se))}}},t.prototype.setTextWaterMarker=function(e,r){var n=this.get("container");(0,u.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),i=(0,u.deepMix)({},ss.textWaterMarkerConfig,r),o=i.width,s=i.height,l=i.compatible,d=i.text;if(!(e!=null&&e.length)){var p=l?n:document.querySelector(".g6-graph-watermarker");p&&(p.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var C={container:n,width:o,height:s,capture:!1},S=this.get("pixelRatio");S&&(C.pixelRatio=S,window.devicePixelRatio=S),a=new Qo.Canvas(C),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var L=a.get("context"),z=d.rotate,H=d.fill,ee=d.fontFamily,ie=d.fontSize,se=d.baseline,ye=d.x,Ce=d.y,Re=d.lineHeight;L.rotate(-z*Math.PI/180),L.font="".concat(ie,"px ").concat(ee),L.fillStyle=H,L.textBaseline=se;for(var ke=(0,u.isString)(e)?[e]:e,et=ke.length-1;et>=0;et--)L.fillText(ke[et],ye,Ce+et*Re);if(L.rotate(z*Math.PI/180),l)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var vt=document.querySelector(".g6-graph-watermarker");vt||(vt=document.createElement("div"),vt.className="g6-graph-watermarker"),vt.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(vt)}},t.prototype.destroy=function(){var e,r,n,a;(0,u.each)(this.get("plugins"),function(d){d.destroyPlugin()});var i=this.get("tooltips");if(i)for(var o=0;o<i.length;o++){var s=i[o];if(s){var l=s.parentElement;l&&l.removeChild(s)}}(e=this.get("eventController"))===null||e===void 0||e.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),f.prototype.destroy.call(this)},t}(lc),rr=pt,Mr=Rs.radialLayout,er=Rs.traverseTree,hr=function(f){(0,v.__extends)(t,f);function t(e){var r=f.call(this,e)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return t.prototype.getLayout=function(){var e=this.get("layout");return e?typeof e=="function"?e:(e.type||(e.type="dendrogram"),e.direction||(e.direction=e.type==="indented"?"LR":"TB"),e.radial?function(r){var n=qf()[e.type](r,e);return Mr(n),n}:function(r){return qf()[e.type](r,e)}):null},t.indexOfChild=function(e,r){var n=-1;return(0,u.each)(e,function(a,i){if(r===a.id)return n=i,!1}),n},t.prototype.getDefaultCfg=function(){var e=f.prototype.getDefaultCfg.call(this);return e.animate=!0,e},t.prototype.innerAddChild=function(e,r,n){var a=this,i=e.data;i&&(i.x=e.x,i.y=e.y,i.depth=e.depth);var o=a.addItem("node",i,!1);if(r){if(o.set("parent",r),n){var s=r.get("originAttrs");if(s)o.set("originAttrs",s);else{var l=r.getModel();o.set("originAttrs",{x:l.x,y:l.y})}}var d=r.get("children");d?d.push(o):r.set("children",[o]),a.addItem("edge",{source:r.get("id"),target:o.get("id"),id:"".concat(r.get("id"),":").concat(o.get("id"))},!1)}return(0,u.each)(e.children||[],function(p){a.innerAddChild(p,o,n)}),a.emit("afteraddchild",{item:o,parent:r}),o},t.prototype.innerUpdateChild=function(e,r,n){var a=this,i=a.findById(e.id);if(!i){a.innerAddChild(e,r,n);return}(0,u.each)(e.children||[],function(L){a.innerUpdateChild(L,i,n)});var o=i.get("children");if(o){var s=o.length;if(s>0)for(var l=o.length-1;l>=0;l--){var d=o[l].getModel();t.indexOfChild(e.children||[],d.id)===-1&&(a.innerRemoveChild(d.id,{x:e.x,y:e.y},n),o.splice(l,1))}}var p,C;i.get("originAttrs")&&(p=i.get("originAttrs").x,C=i.get("originAttrs").y);var S=i.getModel();n&&i.set("originAttrs",{x:S.x,y:S.y}),i.set("model",Object.assign(S,e.data)),(p!==e.x||C!==e.y)&&i.updatePosition({x:e.x,y:e.y})},t.prototype.innerRemoveChild=function(e,r,n){var a=this,i=a.findById(e);if(i)if((0,u.each)(i.get("children"),function(s){a.innerRemoveChild(s.getModel().id,r,n)}),n){var o=i.getModel();i.set("to",r),i.set("originAttrs",{x:o.x,y:o.y}),a.get("removeList").push(i)}else a.removeItem(i,!1)},t.prototype.changeData=function(e,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(a){return n.clearItemStates(a)}),this.getEdges().map(function(a){return n.clearItemStates(a)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:e||n.get("data")}),e?(n.data(e),n.render(!1)):n.layout(this.get("fitView"))},t.prototype.changeLayout=function(e){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(e)},t.prototype.updateLayout=function(e,r,n,a){a===void 0&&(a=!0);var i=this;if(!e){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:i.get("layout"),after:e}),i.set("layout",e),i.set("layoutMethod",i.getLayout()),i.layout(),r){var o=n;o||(r==="begin"?o={x:0,y:0}:o={x:this.getWidth()/2,y:this.getHeight()/2}),o=this.getPointByCanvas(o.x,o.y);var s=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];o.x=o.x*s[0]+s[6],o.y=o.y*s[0]+s[7];var l=this.getGroup().getCanvasBBox(),d=l.minX,p=l.maxX,C=l.minY,S=l.maxY,L={x:(d+p)/2,y:(C+S)/2};r==="begin"&&(L.x=d,L.y=C),this.translate(o.x-L.x,o.y-L.y)}},t.prototype.refreshLayout=function(e){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(e)},t.prototype.layout=function(e){var r=this,n=this,a=n.get("data"),i=n.get("layoutMethod"),o=n.get("layout"),s=a;if(o!=null&&o.excludeInvisibles){a=(0,u.clone)(n.get("data"));var l={};er(a,function(C){var S=C.children;if(!(S!=null&&S.length))return!0;for(var L=S.length-1;L>=0;L--){var z=r.findById(S[L].id),H=z?!z.isVisible():S[L].visible===!1;H&&(l[C.id]=l[C.id]||[],l[C.id].push({idx:L,child:S.splice(L,1)[0]}))}}),s=i?i(a,n.get("layout")):a,er(s,function(C){var S=l[C.id];if(S!=null&&S.length)for(var L=S.length-1;L>=0;L--){var z=S[L],H=z.idx,ee=z.child;C.children.splice(H,0,ee)}})}else s=i?i(a,n.get("layout")):a;var d=n.get("animate");if(n.emit("beforerefreshlayout",{data:a,layoutData:s}),n.emit("beforelayout"),n.innerUpdateChild(s,void 0,d),e){var p=n.get("viewController");p.fitView()}d?n.layoutAnimate(s):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:a,layoutData:s}),n.emit("afterlayout")},t.prototype.addChild=function(e,r,n){n===void 0&&(n=!0);var a=this;a.emit("beforeaddchild",{model:e,parent:r}),(0,u.isString)(r)||(r=r.get("id"));var i=a.findDataById(r);if(i){i.children||(i.children=[]),i.children.push(e);var o=a.findById(r);o.refresh(),a.changeData(void 0,n)}},t.prototype.updateChildren=function(e,r,n){n===void 0&&(n=!0);var a=this,i=a.findById(r);if(!r||!i){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var o=a.findDataById(r);o.children=e,i.refresh(),a.changeData(void 0,n)},t.prototype.updateChild=function(e,r,n){n===void 0&&(n=!0);var a=this;if(!r||!a.findById(r)){a.changeData(e,n);return}var i=a.findDataById(r),o=a.findById(e.id);if(i.children||(i.children=[]),!o)i.children.push(e);else{var s=t.indexOfChild(i.children,e.id);s>-1&&(i.children[s]=e)}var l=a.findById(r);l==null||l.refresh(),a.changeData(void 0,n)},t.prototype.removeChild=function(e,r){r===void 0&&(r=!0);var n=this,a=n.findById(e),i;if(a?i=a==null?void 0:a.get("parent"):i=n.getNodes().find(function(p){var C=p.getModel().children||[];return!!C.find(function(S){return S.id===e})}),i&&!i.destroyed){var o=i.get("id"),s=n.findDataById(o),l=s&&s.children||[],d=t.indexOfChild(l,e);l.splice(d,1),i.refresh()}n.changeData(void 0,r)},t.prototype.findDataById=function(e,r){var n=this;if(r||(r=n.get("data")),e===r.id)return r;var a=null;return(0,u.each)(r.children||[],function(i){if(i.id===e)return a=i,!1;if(a=n.findDataById(e,i),a)return!1}),a},t.prototype.layoutAnimate=function(e,r){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:e}),n.getEdges().forEach(function(i){var o=i.get("model");o.sourceAnchor||(o.sourceAnchor=i.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(i){er(e,function(o){var s=n.findById(o.id);if(s){var l=s.get("originAttrs"),d=s.get("model");if(l||(l={x:d.x,y:d.y},s.set("originAttrs",l)),r){var p=r(s,i,l,e);s.set("model",Object.assign(d,p))}else d.x=l.x+(o.x-l.x)*i,d.y=l.y+(o.y-l.y)*i}return!0}),(0,u.each)(n.get("removeList"),function(o){var s=o.getModel(),l=o.get("originAttrs"),d=o.get("to");s.x=l.x+(d.x-l.x)*i,s.y=l.y+(d.y-l.y)*i}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,u.each)(n.getNodes(),function(o){o.set("originAttrs",null)}),(0,u.each)(n.get("removeList"),function(o){n.removeItem(o,!1)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:e})},delay:a.delay})},t.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},t.prototype.isLayoutAnimating=function(){return this.layoutAnimating},t.prototype.render=function(e){e===void 0&&(e=!0);var r=this,n=r.get("data");if(!n||!(0,u.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),e&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},t.prototype.save=function(){return this.get("data")},t.prototype.data=function(e){f.prototype.data.call(this,e),this.set("originData",JSON.parse(JSON.stringify(e)))},t}(rr),Br=hr,cr=G(45442),Wr=function(){function f(t){this._cfgs=(0,u.deepMix)(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}return f.prototype.getDefaultCfgs=function(){return{}},f.prototype.initPlugin=function(t){var e=this;e.set("graph",t);var r=e.getEvents(),n={};(0,u.each)(r,function(a,i){var o=(0,u.wrapBehavior)(e,a);n[i]=o,t.on(i,o)}),this._events=n,this.init()},f.prototype.getEvents=function(){return{}},f.prototype.get=function(t){var e;return(e=this._cfgs)===null||e===void 0?void 0:e[t]},f.prototype.set=function(t,e){this._cfgs[t]=e},f.prototype.destroy=function(){},f.prototype.destroyPlugin=function(){this.destroy();var t=this.get("graph"),e=this._events;(0,u.each)(e,function(r,n){t.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},f}(),Ar=Wr,Hr=function(){var f=function(e,r){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},f(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),h="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",w=function(f){Hr(t,f);function t(e){return f.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{img:h,follow:!0}},t.prototype.init=function(){var e=this.get("graph"),r=e.get("container"),n=e.get("canvas").get("el"),a=this.get("img")||h;a.includes("url(")||(a='url("'.concat(a,'")'));var i=(0,pi.Z)(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),o=(0,pi.Z)(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",i),this.set("gridContainer",o),this.positionInit(),i.appendChild(o),r.insertBefore(i,n)},t.prototype.positionInit=function(){var e=this.get("graph"),r=e.get("minZoom"),n=e.get("width"),a=e.get("height");(0,cr.Z)(this.get("container"),{width:"".concat(n,"px"),height:"".concat(a,"px")});var i=n*80/r,o=a*80/r;(0,cr.Z)(this.get("gridContainer"),{width:"".concat(i,"px"),height:"".concat(o,"px"),left:"-".concat(i/2,"px"),top:"-".concat(o/2,"px")})},t.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},t.prototype.updateGrid=function(e){var r=this.get("gridContainer"),n=e.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),i="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(a?n[6]:"0",", ").concat(a?n[7]:"0",")");(0,cr.Z)(r,{transform:i})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){var e=this.get("graph"),r=e.get("container"),n=this.get("container");r.removeChild(n)},t}(Ar),R=w,j=G(38186),ne=G.n(j),oe=function(){var f=function(e,r){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},f(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();typeof document!="undefined"&&ne()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var he=function(f){oe(t,f);function t(e){return f.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},t.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},t.prototype.init=function(){var e=this.get("className"),r=(0,pi.Z)("<div class=".concat(e||"g6-component-contextmenu","></div>"));(0,cr.Z)(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,u.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},t.prototype.onMenuShow=function(e){var r=this;e.preventDefault();var n=this.get("itemTypes");if(e.item){if(e.item&&e.item.getType&&n.indexOf(e.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(a(e)){var i=this.get("menu"),o=this.get("getContent"),s=this.get("graph"),l=o(e,s);(0,u.isString)(l)?i.innerHTML=l:i.innerHTML=l.outerHTML,this.removeMenuEventListener();var d=this.get("handleMenuClick");if(d){var p=function(et){d(et.target,e.item,s)};this.set("handleMenuClickWrapper",p),i.addEventListener("click",p)}var C=s.get("width"),S=s.get("height"),L=i.getBoundingClientRect(),z=this.get("offsetX")||0,H=this.get("offsetY")||0,ee=s.getContainer().offsetTop,ie=s.getContainer().offsetLeft,se=e.canvasX+ie+z,ye=e.canvasY+ee+H;se+L.width>C&&(se=e.canvasX-L.width-z+ie),ye+L.height>S&&(ye=e.canvasY-L.height-H+ee),(0,cr.Z)(i,{top:"".concat(ye,"px"),left:"".concat(se,"px"),visibility:"visible"});var Ce=this.get("trigger")==="click",Re=function(et){if(Ce){Ce=!1;return}r.onMenuHide()};document.body.addEventListener("click",Re),this.set("handler",Re)}},t.prototype.removeMenuEventListener=function(){var e=this.get("handleMenuClickWrapper"),r=this.get("handler");if(e){var n=this.get("menu");n.removeEventListener("click",e),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},t.prototype.onMenuHide=function(){var e=this.get("menu");e&&(0,cr.Z)(e,{visibility:"hidden"}),this.removeMenuEventListener()},t.prototype.destroy=function(){var e=this.get("menu");if(this.removeMenuEventListener(),e){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,u.isString)(r)&&(r=document.getElementById(r)),r.removeChild(e)}},t}(Ar),me=he,_e=function(){var f=function(e,r){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},f(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Be=function(){return Be=Object.assign||function(f){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(f[n]=t[n])}return f},Be.apply(this,arguments)},Ke=Math.max,Xe=J.vs,ht="default",Nt="keyShape",gr="delegate",Ut="svg",Vt=function(f){_e(t,f);function t(e){var r=f.call(this,e)||this;return r.handleUpdateCanvas=(0,u.debounce)(function(n){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,r=this._cfgs,n=r.size,a=r.graph;if(!this.destroyed){var i=this.get("canvas"),o=i.get("container"),s=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,l=navigator.userAgent.toLowerCase().indexOf("safari")>-1,d=(0,pi.Z)(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(l||s),`
      </div>`)),p=0,C=0,S=!1,L=0,z=0,H=0,ee=0,ie=0,se=0,ye=l||s?"mousedown":"dragstart";d.addEventListener(ye,function(et){var vt,at;if(et.dataTransfer){var Mt=new Image;Mt.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(at=(vt=et.dataTransfer).setDragImage)===null||at===void 0||at.call(vt,Mt,0,0);try{et.dataTransfer.setData("text/html","view-port-minimap")}catch(Cr){et.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,et.target===d){var zt=d.style;L=parseInt(zt.left,10),z=parseInt(zt.top,10),H=parseInt(zt.width,10),ee=parseInt(zt.height,10),!(H>n[0]||ee>n[1])&&(se=a.getZoom(),ie=e.get("ratio"),S=!0,p=et.clientX,C=et.clientY)}},!1);var Ce=function(vt){if(!(!S||(0,u.isNil)(vt.clientX)||(0,u.isNil)(vt.clientY))){var at=p-vt.clientX,Mt=C-vt.clientY;(L-at<0||L-at+H>=n[0])&&(at=0),(z-Mt<0||z-Mt+ee>=n[1])&&(Mt=0),L-=at,z-=Mt,(0,cr.Z)(d,{left:"".concat(L,"px"),top:"".concat(z,"px")}),a.translate(at*se/ie,Mt*se/ie),p=vt.clientX,C=vt.clientY}};!l&&!s&&d.addEventListener("drag",Ce,!1);var Re=function(){S=!1,r.refresh=!0},ke=l||s?"mouseup":"dragend";d.addEventListener(ke,Re,!1),o.addEventListener("mouseleave",Re),o.addEventListener("mouseup",Re),(l||s)&&o.addEventListener("mousemove",Ce,!1),this.set("viewport",d),o.appendChild(d)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),a=this.get("graph"),i=this.get("size"),o=a.get("canvas").get("el"),s=a.get("width")||o.scrollWidth||500,l=a.get("height")||o.scrollHeight||500,d=a.getPointByCanvas(0,0),p=a.getPointByCanvas(s,l),C=this.get("viewport");C||this.initViewport();var S=(p.x-d.x)*e,L=(p.y-d.y)*e,z=d.x*e+r,H=d.y*e+n,ee=z+S,ie=H+L;z<0&&(S+=z,z=0),ee>i[0]&&(S=S-(ee-i[0])),H<0&&(L+=H,H=0),ie>i[1]&&(L=L-(ie-i[1])),this.set("ratio",e);var se="".concat(z,"px"),ye="".concat(H,"px");(0,cr.Z)(C,{left:se,top:ye,width:"".concat(S,"px"),height:"".concat(L,"px")})}},t.prototype.updateGraphShapes=function(){var e=this._cfgs.graph,r=this.get("canvas"),n=e.get("group");if(!n.destroyed){r.clear();var a;this.get("hideEdge")?(a=r.addGroup(),n.get("children").forEach(function(o){o.get("id").includes("-edge")||a.add(o.clone())})):(a=n.clone(),a.resetMatrix(),r.add(a));var i=e.get("renderer");i===Ut&&this.updateVisible(a)}},t.prototype.updateVisible=function(e){var r=this;if(!e.isGroup()&&!e.get("visible"))e.hide();else{var n=e.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},t.prototype.updateKeyShapes=function(){var e=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,u.each)(r.getEdges(),function(s){e.updateOneEdgeKeyShape(s,a)}),(0,u.each)(r.getNodes(),function(s){e.updateOneNodeKeyShape(s,a)});var i=r.getCombos();if(i&&i.length){var o=a.find(function(s){return s.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){e.destroyed||((0,u.each)(i,function(s){e.updateOneComboKeyShape(s,o)}),o==null||o.sort(),o==null||o.toBack(),e.updateCanvas())},250)}this.clearDestroyedShapes()},t.prototype.updateOneComboKeyShape=function(e,r){if(!this.destroyed){var n=this.get("itemMap")||{},a=n[e.get("id")],i=e.getBBox(),o=e.get("keyShape").clone(),s=o.attr(),l={x:i.centerX,y:i.centerY};a?l=Object.assign(s,l):(a=o,r.add(a));var d=a.get("type");(d==="rect"||d==="image")&&(l.x=i.minX,l.y=i.minY),a.attr(l),e.isVisible()?a.show():a.hide(),a.exist=!0;var p=e.getModel().depth;isNaN(p)||a.set("zIndex",p),n[e.get("id")]=a,this.set("itemMap",n)}},t.prototype.updateOneNodeKeyShape=function(e,r){var n=this.get("itemMap")||{},a=n[e.get("id")],i=e.getBBox(),o=e.get("keyShape").clone(),s=o.attr(),l={x:i.centerX,y:i.centerY};a?(l=Object.assign(s,l),a.toFront()):(a=o,r.add(a));var d=a.get("type");(d==="rect"||d==="image")&&(l.x=i.minX,l.y=i.minY),a.attr(l),e.isVisible()?a.show():a.hide(),a.exist=!0;var p=e.getModel().depth;isNaN(p)||a.set("zIndex",p),n[e.get("id")]=a,this.set("itemMap",n)},t.prototype.updateDelegateShapes=function(){var e=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,u.each)(r.getEdges(),function(s){e.updateOneEdgeKeyShape(s,a)}),(0,u.each)(r.getNodes(),function(s){e.updateOneNodeDelegateShape(s,a)});var i=r.getCombos();if(i&&i.length){var o=a.find(function(s){return s.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){e.destroyed||((0,u.each)(i,function(s){e.updateOneComboKeyShape(s,o)}),o==null||o.sort(),o==null||o.toBack(),e.updateCanvas())},250)}this.clearDestroyedShapes()},t.prototype.clearDestroyedShapes=function(){var e=this.get("itemMap")||{},r=Object.keys(e);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var a=e[r[n]],i=a.exist;a.exist=!1,i||(a.remove(),delete e[r[n]])}},t.prototype.updateOneEdgeKeyShape=function(e,r){var n=this.get("itemMap")||{},a=n[e.get("id")];if(a){var i=e.get("keyShape").attr("path");a.attr("path",i)}else a=e.get("keyShape").clone(),r.add(a);e.isVisible()?a.show():a.hide(),a.exist=!0,n[e.get("id")]=a,this.set("itemMap",n)},t.prototype.updateOneNodeDelegateShape=function(e,r){var n=this.get("delegateStyle"),a=this.get("itemMap")||{},i=a[e.get("id")],o=e.getBBox();if(i){var s={x:o.minX,y:o.minY,width:o.width,height:o.height};i.attr(s),i.toFront()}else i=r.addShape("rect",{attrs:Be({x:o.minX,y:o.minY,width:o.width,height:o.height},n),name:"minimap-node-shape"});e.isVisible()?i.show():i.hide(),i.exist=!0,a[e.get("id")]=i,this.set("itemMap",a)},t.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},t.prototype.initContainer=function(){var e=this,r=e.get("graph"),n=e.get("size"),a=e.get("className"),i=e.get("container"),o=(0,pi.Z)("<div class='".concat(a,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,u.isString)(i)&&(i=document.getElementById(i)),i?i.appendChild(o):r.get("container").appendChild(o),e.set("container",o);var s=(0,pi.Z)('<div class="g6-minimap-container" style="position: relative;"></div>');o.appendChild(s),s.addEventListener("dragenter",function(p){p.preventDefault()}),s.addEventListener("dragover",function(p){p.preventDefault()});var l,d=r.get("renderer");d===Ut?l=new Bu.Canvas({container:s,width:n[0],height:n[1]}):l=new Qo.Canvas({container:s,width:n[0],height:n[1]}),e.set("canvas",l),e.updateCanvas()},t.prototype.updateCanvas=function(){if(!this.destroyed){var e=this.get("refresh");if(e){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),i=this.get("type"),o=this.get("padding");if(!a.destroyed){switch(i){case ht:this.updateGraphShapes();break;case Nt:this.updateKeyShapes();break;case gr:this.updateDelegateShapes();break;default:break}var s=a.get("children")[0];if(s){s.resetMatrix();var l=s.getCanvasBBox(),d=r.get("canvas").getCanvasBBox(),p=r.getZoom()||1,C=d.width/p,S=d.height/p;Number.isFinite(l.width)&&(C=Ke(l.width,C),S=Ke(l.height,S)),C+=2*o,S+=2*o;var L=Math.min(n[0]/C,n[1]/S),z=[1,0,0,0,1,0,0,0,1],H=0,ee=0;Number.isFinite(l.minX)&&(H=-l.minX),Number.isFinite(l.minY)&&(ee=-l.minY);var ie=(n[0]-(C-2*o)*L)/2,se=(n[1]-(S-2*o)*L)/2;z=Xe(z,[["t",H,ee],["s",L,L],["t",ie,se]]),s.setMatrix(z),this.set("ratio",L),this.set("totaldx",ie+H*L),this.set("totaldy",se+ee*L),this.set("dx",ie),this.set("dy",se),this.updateViewport()}}}}}},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){var e;(e=this.get("canvas"))===null||e===void 0||e.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},t}(Ar),Xt=Vt,Gr=function(){var f=function(e,r){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},f(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();function Kr(f,t,e){var r=f.x-t.x,n=f.y-t.y;return!e||Math.abs(r)>e||Math.abs(n)>e?Math.sqrt(r*r+n*n):e}function Yr(f,t){return f.x*t.x+f.y*t.y}function _n(f,t){var e=(t.source.y-t.target.y)/(t.source.x-t.target.x),r=(e*e*t.source.x+e*(f.y-t.source.y)+f.x)/(e*e+1),n=e*(r-t.source.x)+t.source.y;return{x:r,y:n}}var bn=function(f){Gr(t,f);function t(e){return f.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},t.prototype.init=function(){var e=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),e.refreshPositions()};this.set("tick",n)},t.prototype.bundling=function(e){var r=this;if(r.set("data",e),!r.isTicking()){var n=e.edges||[],a=e.nodes||[],i={},o=!1;if(a.forEach(function(ye){(ye.x===null||!ye.y===null||ye.x===void 0||!ye.y===void 0)&&(o=!0),i[ye.id]=ye}),o)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",i);var s=r.get("divisions"),l=r.get("divRate"),d=r.divideEdges(s);r.set("edgePoints",d);var p=r.getEdgeBundles();r.set("edgeBundles",p);for(var C=r.get("cycles"),S=r.get("iterations"),L=r.get("iterRate"),z=r.get("lambda"),H=0;H<C;H++){for(var ee=function(Ce){var Re=[];n.forEach(function(ke,et){if(ke.source!==ke.target){var vt=i[ke.source],at=i[ke.target];Re[et]=r.getEdgeForces({source:vt,target:at},et,s,z);for(var Mt=0;Mt<s+1;Mt++)d[et][Mt].x+=Re[et][Mt].x,d[et][Mt].y+=Re[et][Mt].y}})},ie=0;ie<S;ie++)ee(ie);z=z/2,s*=l,S*=L,d=r.divideEdges(s),r.set("edgePoints",d)}n.forEach(function(ye,Ce){ye.source!==ye.target&&(ye.type="polyline",ye.controlPoints=d[Ce].slice(1,d[Ce].length-1))});var se=r.get("graph");se.refresh()}},t.prototype.updateBundling=function(e){var r=this,n=e.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(e).forEach(function(i){r.set(i,e[i])}),e.onTick){var a=this.get("graph");r.set("tick",function(){e.onTick(),a.refresh()})}r.bundling(n)},t.prototype.divideEdges=function(e){var r=this,n=r.get("data").edges,a=r.get("nodeIdMap"),i=r.get("edgePoints");return(!i||i===void 0)&&(i=[]),n.forEach(function(o,s){var l;(!i[s]||i[s]===void 0)&&(i[s]=[]);var d=a[o.source],p=a[o.target];if(e===1)i[s].push({x:d.x,y:d.y}),i[s].push({x:.5*(d.x+p.x),y:.5*(d.y+p.y)}),i[s].push({x:p.x,y:p.y});else{var C=0;!((l=i[s])===null||l===void 0)&&l.length?C=r.getEdgeLength(i[s]):C=Kr({x:d.x,y:d.y},{x:p.x,y:p.y});var S=C/(e+1),L=S,z=[{x:d.x,y:d.y}];i[s].forEach(function(H,ee){if(ee!==0){for(var ie=Kr(H,i[s][ee-1]);ie>L;){var se=L/ie,ye={x:i[s][ee-1].x,y:i[s][ee-1].y};ye.x+=se*(H.x-i[s][ee-1].x),ye.y+=se*(H.y-i[s][ee-1].y),z.push(ye),ie-=L,L=S}L-=ie}}),z.push({x:p.x,y:p.y}),i[s]=z}}),i},t.prototype.getEdgeLength=function(e){var r=0;return e.forEach(function(n,a){a!==0&&(r+=Kr(n,e[a-1]))}),r},t.prototype.getEdgeBundles=function(){var e=this,r=e.get("data"),n=r.edges||[],a=e.get("bundleThreshold"),i=e.get("nodeIdMap"),o=e.get("edgeBundles");return o||(o=[]),n.forEach(function(s,l){(!o[l]||o[l]===void 0)&&(o[l]=[])}),n.forEach(function(s,l){var d=i[s.source],p=i[s.target];n.forEach(function(C,S){if(!(S<=l)){var L=i[C.source],z=i[C.target],H=e.getBundleScore({source:d,target:p},{source:L,target:z});H>=a&&(o[l].push(S),o[S].push(l))}})}),o},t.prototype.getBundleScore=function(e,r){var n=this;e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,e.length=Kr({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),r.length=Kr({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=n.getAngleScore(e,r),i=n.getScaleScore(e,r),o=n.getPositionScore(e,r),s=n.getVisibilityScore(e,r);return a*i*o*s},t.prototype.getAngleScore=function(e,r){var n=Yr({x:e.vx,y:e.vy},{x:r.vx,y:r.vy});return n/(e.length*r.length)},t.prototype.getScaleScore=function(e,r){var n=(e.length+r.length)/2,a=2/(n/Math.min(e.length,r.length)+Math.max(e.length,r.length)/n);return a},t.prototype.getPositionScore=function(e,r){var n=(e.length+r.length)/2,a={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2},i={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},o=Kr(a,i);return n/(n+o)},t.prototype.getVisibilityScore=function(e,r){var n=this.getEdgeVisibility(e,r),a=this.getEdgeVisibility(r,e);return n<a?n:a},t.prototype.getEdgeVisibility=function(e,r){var n=_n(r.source,e),a=_n(r.target,e),i={x:(n.x+a.x)/2,y:(n.y+a.y)/2},o={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2};return Math.max(0,1-2*Kr(i,o)/Kr(n,a))},t.prototype.getEdgeForces=function(e,r,n,a){for(var i=this,o=i.get("edgePoints"),s=i.get("K"),l=s/(Kr(e.source,e.target)*(n+1)),d=[{x:0,y:0}],p=1;p<n;p++){var C={x:0,y:0},S=i.getSpringForce({pre:o[r][p-1],cur:o[r][p],next:o[r][p+1]},l),L=i.getElectrostaticForce(p,r);C.x=a*(S.x+L.x),C.y=a*(S.y+L.y),d.push(C)}return d.push({x:0,y:0}),d},t.prototype.getSpringForce=function(e,r){var n=e.pre.x+e.next.x-2*e.cur.x,a=e.pre.y+e.next.y-2*e.cur.y;return n*=r,a*=r,{x:n,y:a}},t.prototype.getElectrostaticForce=function(e,r){var n=this,a=n.get("eps"),i=n.get("edgeBundles"),o=n.get("edgePoints"),s=i[r],l={x:0,y:0};return s.forEach(function(d){var p={x:o[d][e].x-o[r][e].x,y:o[d][e].y-o[r][e].y};if(Math.abs(p.x)>a||Math.abs(p.y)>a){var C=Kr(o[d][e],o[r][e]),S=1/C;l.x+=p.x*S,l.y+=p.y*S}}),l},t.prototype.isTicking=function(){return this.get("ticking")},t.prototype.getSimulation=function(){return this.get("forceSimulation")},t.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),f.prototype.destroy.call(this)},t}(Ar),Pn=bn,Qn=function(){var f=function(e,r){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},f(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),zn=function(){return zn=Object.assign||function(f){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(f[n]=t[n])}return f},zn.apply(this,arguments)},ei=.05,ea={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Li=function(f){Qn(t,f);function t(e){return f.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,u.clone)(ea),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"magnify"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"magnify"};break}return e},t.prototype.init=function(){var e=this,r=e.get("r");e.set("cachedMagnifiedModels",[]),e.set("cachedOriginPositions",{}),e.set("r2",r*r);var n=e.get("d");e.set("molecularParam",(n+1)*r)},t.prototype.createDelegate=function(e){var r=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(e),a=n.get("delegate"),a.on("dragstart",function(i){n.set("delegateCenterDiff",{x:a.attr("x")-i.x,y:a.attr("y")-i.y})}),a.on("drag",function(i){n.magnify(i)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(i){r.scaleDByWheel(i)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(i){n.scaleRByWheel(i)}))},t.prototype.scaleRByWheel=function(e){var r=this;if(!(!e||!e.originalEvent)){e.preventDefault&&e.preventDefault();var n=r.get("graph"),a,i=r.get("delegate"),o=i?{x:i.attr("x"),y:i.attr("y")}:void 0,s=o||n.getPointByClient(e.clientX,e.clientY);e.originalEvent.wheelDelta<0?a=1-ei:a=1/(1-ei);var l=r.get("maxR"),d=r.get("minR"),p=r.get("r");(p>(l||n.get("height"))&&a>1||p<(d||n.get("height")*.05)&&a<1)&&(a=1),p*=a,r.set("r",p),r.set("r2",p*p);var C=r.get("d");r.set("molecularParam",(C+1)*p),r.set("delegateCenterDiff",void 0),r.magnify(e,s)}},t.prototype.scaleRByDrag=function(e){var r=this;if(e){var n=r.get("dragPrePos"),a=r.get("graph"),i,o=a.getPointByClient(e.clientX,e.clientY);e.x-n.x<0?i=1-ei:i=1/(1-ei);var s=r.get("maxR"),l=r.get("minR"),d=r.get("r");(d>(s||a.get("height"))&&i>1||d<(l||a.get("height")*.05)&&i<1)&&(i=1),d*=i,r.set("r",d),r.set("r2",d*d);var p=r.get("d");r.set("molecularParam",(p+1)*d),r.magnify(e,o),r.set("dragPrePos",{x:e.x,y:e.y})}},t.prototype.scaleDByWheel=function(e){var r=this;if(!(!e&&!e.originalEvent)){e.preventDefault&&e.preventDefault();var n=0;e.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=r.get("d"),i=a+n,o=r.get("maxD"),s=r.get("minD");if(i<o&&i>s){r.set("d",i);var l=r.get("r");r.set("molecularParam",(i+1)*l);var d=r.get("delegate"),p=d?{x:d.attr("x"),y:d.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(e,p)}}},t.prototype.scaleDByDrag=function(e){var r=this,n=r.get("dragPrePos"),a=e.x-n.x>0?.1:-.1,i=r.get("d"),o=i+a,s=r.get("maxD"),l=r.get("minD");if(o<s&&o>l){r.set("d",o);var d=r.get("r");r.set("molecularParam",(o+1)*d),r.magnify(e)}r.set("dragPrePos",{x:e.x,y:e.y})},t.prototype.magnify=function(e,r){var n=this;n.restoreCache();var a=n.get("graph"),i=n.get("cachedMagnifiedModels"),o=n.get("cachedOriginPositions"),s=n.get("showLabel"),l=n.get("r"),d=n.get("r2"),p=n.get("d"),C=n.get("molecularParam"),S=a.getNodes(),L=S.length,z=r?{x:r.x,y:r.y}:{x:e.x,y:e.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(z=n.get("cacheCenter"));var H=n.get("delegateCenterDiff");H&&(z.x+=H.x,z.y+=H.y),n.updateDelegate(z,l);for(var ee=0;ee<L;ee++){var ie=S[ee].getModel(),se=ie.x,ye=ie.y;if(!(isNaN(se)||isNaN(ye))){var Ce=(se-z.x)*(se-z.x)+(ye-z.y)*(ye-z.y);if(!isNaN(Ce)&&Ce<d&&Ce!==0){var Re=Math.sqrt(Ce),ke=C*Re/(p*Re+l),et=(se-z.x)/Re,vt=(ye-z.y)/Re;if(ie.x=et*ke+z.x,ie.y=vt*ke+z.y,o[ie.id]||(o[ie.id]={x:se,y:ye,texts:[]}),i.push(ie),s&&2*Re<l)for(var at=S[ee],Mt=at.getContainer(),zt=Mt.getChildren(),Cr=zt.length,jr=0;jr<Cr;jr++){var kr=zt[jr];kr.get("type")==="text"&&(o[ie.id].texts.push({visible:kr.get("visible"),shape:kr}),kr.set("visible",!0))}}}}a.refreshPositions()},t.prototype.restoreCache=function(){for(var e=this,r=e.get("cachedMagnifiedModels"),n=e.get("cachedOriginPositions"),a=r.length,i=0;i<a;i++){var o=r[i],s=o.id,l=n[s];o.x=l.x,o.y=l.y;for(var d=l.texts.length,p=0;p<d;p++){var C=l.texts[p];C.shape.set("visible",C.visible)}}e.set("cachedMagnifiedModels",[]),e.set("cachedOriginPositions",{})},t.prototype.updateParams=function(e){var r=this,n=e.r,a=e.d,i=e.trigger,o=e.minD,s=e.maxD,l=e.minR,d=e.maxR,p=e.scaleDBy,C=e.scaleRBy;isNaN(e.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(a)||r.set("d",a),isNaN(s)||r.set("maxD",s),isNaN(o)||r.set("minD",o),isNaN(d)||r.set("maxR",d),isNaN(l)||r.set("minR",l);var S=r.get("d"),L=r.get("r");if(r.set("molecularParam",(S+1)*L),(i==="mousemove"||i==="click"||i==="drag")&&r.set("trigger",i),p==="drag"||p==="wheel"||p==="unset"){r.set("scaleDBy",p),r.get("delegate").remove(),r.get("delegate").destroy();var z=r.get("dPercentText");z&&(z.remove(),z.destroy())}if(C==="drag"||C==="wheel"||C==="unset"){r.set("scaleRBy",C),r.get("delegate").remove(),r.get("delegate").destroy();var z=r.get("dPercentText");z&&(z.remove(),z.destroy())}},t.prototype.updateDelegate=function(e,r){var n=this,a=this,i=a.get("graph"),o=a.get("delegate");if(!o||o.destroyed){var s=i.get("group"),l=a.get("delegateStyle")||ea;o=s.addShape("circle",{attrs:zn({r:r/1.5,x:e.x,y:e.y},l),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?o.on("mousewheel",function(L){a.scaleRByWheel(L)}):this.get("scaleRBy")==="drag"&&(o.on("dragstart",function(L){a.set("dragging",!0),a.set("cacheCenter",{x:L.x,y:L.y}),a.set("dragPrePos",{x:L.x,y:L.y})}),o.on("drag",function(L){a.scaleRByDrag(L)}),o.on("dragend",function(L){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?o.on("mousewheel",function(L){n.scaleDByWheel(L)}):this.get("scaleDBy")==="drag"&&(o.on("dragstart",function(L){a.set("dragging",!0),a.set("cacheCenter",{x:L.x,y:L.y}),a.set("dragPrePos",{x:L.x,y:L.y})}),o.on("drag",function(L){n.scaleDByDrag(L)}),o.on("dragend",function(L){a.set("dragging",!1)})))}else o.attr({x:e.x,y:e.y,r:r/1.5});if(a.get("showDPercent")){var d=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),p=a.get("dPercentText"),C=e.y+r/1.5+16;if(!p||p.destroyed){var S=i.get("group");p=S.addShape("text",{attrs:{text:"".concat(d,"%"),x:e.x,y:C,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",p)}else p.attr({text:"".concat(d,"%"),x:e.x,y:C})}a.set("delegate",o)},t.prototype.clear=function(){var e=this.get("graph");this.restoreCache(),e.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},t.prototype.destroy=function(){this.clear()},t}(Ar),ti=Li,_a=function(){var f=function(e,r){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},f(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),bi=.05;typeof document!="undefined"&&ne()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var Di=function(t){if(!t)return[];if(t.composedPath)return t.composedPath();for(var e=[],r=t.target;r;){if(e.push(r),r.tagName==="HTML")return e.push(document,window),e;r=r.parentElement}return e},Ki=function(f){_a(t,f);function t(e){return f.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},t.prototype.init=function(){var e=this,r=this.get("graph"),n=this.get("getContent"),a=n(r),i=a;(0,u.isString)(a)&&(i=(0,pi.Z)(a));var o=this.get("className");i.setAttribute("class",o||"g6-component-toolbar");var s=this.get("container");s||(s=this.get("graph").get("container")),(0,u.isString)(s)&&(s=document.getElementById(s)),s.appendChild(i),this.set("toolBar",i);var l=this.get("handleClick");i.addEventListener("click",function(p){var C=Di(p).filter(function(L){return L.nodeName==="LI"});if(C.length!==0){var S=C[0].getAttribute("code");S&&(l?l(S,r):e.handleDefaultOperator(S))}});var d=this.get("position");d&&(0,cr.Z)(i,{top:"".concat(d.y,"px"),left:"".concat(d.x,"px")}),this.bindUndoRedo()},t.prototype.bindUndoRedo=function(){var e=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),i=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!a||!i||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4"),e.on("stackchange",function(o){var s=o.undoStack,l=o.redoStack,d=s.length,p=l.length;d===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),p===0?(a.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),i.removeAttribute("style"))}))},t.prototype.undo=function(){var e=this.get("graph"),r=e.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action;e.pushStack(a,(0,u.clone)(n.data),"redo");var i=n.data.before;if(a==="add"&&(i=n.data.after),!i)return;switch(a){case"visible":{Object.keys(i).forEach(function(p){var C=i[p];C&&C.forEach(function(S){var L=e.findById(S.id);S.visible?e.showItem(L,!1):e.hideItem(L,!1)})});break}case"render":case"update":Object.keys(i).forEach(function(p){var C=i[p];C&&C.forEach(function(S){var L=e.findById(S.id);delete S.id,e.updateItem(L,S,!1),L.getType()==="combo"&&e.updateCombo(L)})});break;case"changedata":e.changeData(i,!1);break;case"delete":{Object.keys(i).forEach(function(p){var C=i[p];C&&C.forEach(function(S){var L=S.itemType;delete S.itemType,e.addItem(L,S,!1)})});break}case"add":Object.keys(i).forEach(function(p){var C=i[p];C&&C.forEach(function(S){e.removeItem(S.id,!1)})});break;case"updateComboTree":Object.keys(i).forEach(function(p){var C=i[p];C&&C.forEach(function(S){e.updateComboTree(S.id,S.parentId,!1)})});break;case"createCombo":var o=n.data.after.combos,s=o[o.length-1];Object.keys(i).forEach(function(p){var C=i[p];C&&C.forEach(function(S){e.updateComboTree(S.id,S.parentId,!1)})}),e.removeItem(s.id,!1);break;case"uncombo":var l=i.combos[i.combos.length-1],d=i.nodes.concat(i.combos).map(function(p){return p.id}).filter(function(p){return p!==l.id});e.createCombo(l,d,!1);break;case"layout":e.updateLayout(i,void 0,void 0,!1);break;default:}}}},t.prototype.redo=function(){var e=this.get("graph"),r=e.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action,i=n.data.after;if(e.pushStack(a,(0,u.clone)(n.data)),a==="delete"&&(i=n.data.before),!i)return;switch(a){case"visible":{Object.keys(i).forEach(function(d){var p=i[d];p&&p.forEach(function(C){var S=e.findById(C.id);C.visible?e.showItem(S,!1):e.hideItem(S,!1)})});break}case"render":case"update":Object.keys(i).forEach(function(d){var p=i[d];p&&p.forEach(function(C){var S=e.findById(C.id);delete C.id,e.updateItem(S,C,!1),S.getType()==="combo"&&e.updateCombo(S)})});break;case"changedata":e.changeData(i,!1);break;case"delete":i.edges&&i.edges.forEach(function(d){e.removeItem(d.id,!1)}),i.nodes&&i.nodes.forEach(function(d){e.removeItem(d.id,!1)}),i.combos&&i.combos.forEach(function(d){e.removeItem(d.id,!1)});break;case"add":{Object.keys(i).forEach(function(d){var p=i[d];p&&p.forEach(function(C){var S=C.itemType;delete C.itemType,e.addItem(S,C,!1)})});break}case"updateComboTree":Object.keys(i).forEach(function(d){var p=i[d];p&&p.forEach(function(C){e.updateComboTree(C.id,C.parentId,!1)})});break;case"createCombo":var o=i.combos[i.combos.length-1];e.createCombo(o,o.children.map(function(d){return d.id}),!1);break;case"uncombo":var s=n.data.before.combos,l=s[s.length-1];e.uncombo(l.id,!1);break;case"layout":e.updateLayout(i,void 0,void 0,!1);break;default:}}}},t.prototype.zoomOut=function(){var e=this.get("graph"),r=e.getZoom(),n=1/(1-bi*this.get("zoomSensitivity")),a=this.get("maxZoom")||e.get("maxZoom");n*r>a||e.zoomTo(r*n)},t.prototype.zoomIn=function(){var e=this.get("graph"),r=e.getZoom(),n=1-bi*this.get("zoomSensitivity"),a=this.get("minZoom")||e.get("minZoom");n*r<a||e.zoomTo(r*n)},t.prototype.realZoom=function(){var e=this.get("graph");e.zoomTo(1)},t.prototype.autoZoom=function(){var e=this.get("graph");e.fitView([20,20])},t.prototype.handleDefaultOperator=function(e){switch(e){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},t.prototype.destroy=function(){var e=this.get("toolBar");if(e){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,u.isString)(r)&&(r=document.getElementById(r)),r.removeChild(e)}var n=this.get("handleClick");n&&e.removeEventListener("click",n)},t}(Ar),Mo=Ki,Xi=function(){var f=function(e,r){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},f(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();typeof document!="undefined"&&ne()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var ca=function(f){Xi(t,f);function t(e){return f.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},t.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},t.prototype.init=function(){var e=this,r=e.get("className")||"g6-component-tooltip",n=(0,pi.Z)("<div class='".concat(r,"'></div>")),a=e.get("container");a||(a=e.get("graph").get("container")),(0,u.isString)(a)&&(a=document.getElementById(a)),(0,cr.Z)(n,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(n),e.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(i){(0,cr.Z)(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(i){e.hideTooltip()})),e.set("tooltip",n)},t.prototype.onClick=function(e){var r=this.get("itemTypes");if(!(e.item&&e.item.getType&&r.indexOf(e.item.getType())===-1)){var n=e.item,a=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:e.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(e),a.emit("tooltipchange",{item:e.item,action:"show"}))}},t.prototype.onMouseEnter=function(e){var r=this.get("itemTypes");if(!(e.item&&e.item.getType&&r.indexOf(e.item.getType())===-1)){var n=e.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(e),a.emit("tooltipchange",{item:e.item,action:"show"})}},t.prototype.onMouseMove=function(e){var r=this.get("itemTypes");e.item&&e.item.getType&&r.indexOf(e.item.getType())===-1||!this.currentTarget||e.item!==this.currentTarget||this.showTooltip(e)},t.prototype.onMouseLeave=function(){this.hideTooltip();var e=this.get("graph");e.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},t.prototype.clearContainer=function(){var e=this.get("tooltip");e&&(e.innerHTML="")},t.prototype.showTooltip=function(e){if(e.item){var r=this.get("itemTypes");if(!(e.item.getType&&r.indexOf(e.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),i=a(e);(0,u.isString)(i)?n.innerHTML=i:(this.clearContainer(),n.appendChild(i)),this.updatePosition(e)}}},t.prototype.hideTooltip=function(){var e=this.get("tooltip");e&&(0,cr.Z)(e,{visibility:"hidden",display:"none"})},t.prototype.updatePosition=function(e){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(e)){(0,cr.Z)(n,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),i=a.get("width"),o=a.get("height"),s=this.get("offsetX")||0,l=this.get("offsetY")||0,d=a.getPointByClient(e.clientX,e.clientY),p=this.get("fixToNode"),C=e.item;if(C.getType&&C.getType()==="node"&&p&&(0,u.isArray)(p)&&p.length>=2){var S=C.getBBox();d={x:S.minX+S.width*p[0],y:S.minY+S.height*p[1]}}var L=a.getCanvasByPoint(d.x,d.y),z=L.x,H=L.y,ee=a.getContainer(),ie={x:z+ee.offsetLeft+s,y:H+ee.offsetTop+l};(0,cr.Z)(n,{visibility:"visible",display:"unset"});var se=n.getBoundingClientRect();z+se.width+s>i&&(ie.x-=se.width+s),H+se.height+l>o&&(ie.y-=se.height+l,ie.y<0&&(ie.y=0)),(0,cr.Z)(n,{left:"".concat(ie.x,"px"),top:"".concat(ie.y,"px")})},t.prototype.hide=function(){this.onMouseLeave()},t.prototype.destroy=function(){var e=this.get("tooltip");if(e){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,u.isString)(r)&&(r=document.getElementById(r)),r.removeChild(e)}},t}(Ar),Co=ca,Va="timebarstartplay",Bn="timebarendplay",ra="valuechange",ga="timebarConfigChanged",ui="playPauseBtn",us="nextStepBtn",$s="preStepBtn",dt={opacity:.5,fill:"#000"},sr={opacity:.5,fill:"#000",r:5},tr={fill:"#fff",fontSize:12},gn=function(){function f(t){var e=t.x,r=e===void 0?0:e,n=t.y,a=n===void 0?0:n,i=t.container,o=t.text,s=t.padding,l=s===void 0?[4,4,4,4]:s,d=t.className,p=d===void 0?"g6-component-timebar-tooltip":d,C=t.backgroundColor,S=C===void 0?"#000":C,L=t.textColor,z=L===void 0?"#fff":L,H=t.opacity,ee=H===void 0?.8:H,ie=t.fontSize,se=ie===void 0?12:ie;this.container=i,this.className=p,this.backgroundColor=S,this.textColor=z,this.x=r,this.y=a,this.text=o,this.padding=l,this.opacity=ee,this.fontSize=se,this.render()}return f.prototype.render=function(){var t=this,e=t.className,r=t.x,n=t.y,a=t.backgroundColor,i=t.textColor,o=t.text,s=t.padding,l=t.opacity,d=t.fontSize,p=t.container,C=(0,pi.Z)("<div class='".concat(e,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(l,'"></div>'));(0,u.isString)(p)&&(p=document.getElementById(p)),p.appendChild(C),t.parentHeight=p.offsetHeight,t.parentWidth=p.offsetWidth,(0,cr.Z)(C,{visibility:"hidden",top:0,left:0});var S=(0,pi.Z)(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(a,"; font-size: ").concat(d,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(i,"; padding: ").concat(s[0],"px ").concat(s[1],"px ").concat(s[2],"px ").concat(s[3],"px'></div>"));S.innerHTML=o,C.appendChild(S),t.backgroundDOM=S;var L=(0,pi.Z)("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(a,"'></div>"));C.appendChild(L),t.arrowDOM=L,t.container=C},f.prototype.show=function(t){var e=this,r=t.text,n=t.x,a=t.y,i=t.clientX,o=t.clientY;e.backgroundDOM.innerHTML=r;var s=e.backgroundDOM.offsetWidth,l=e.backgroundDOM.offsetHeight,d=e.arrowDOM.offsetWidth,p=e.arrowDOM.offsetHeight;(0,cr.Z)(e.container,{top:"".concat(-l-p,"px"),left:"".concat(n,"px"),visibility:"visible"}),(0,cr.Z)(e.backgroundDOM,{marginLeft:"".concat(-s/2,"px")}),(0,cr.Z)(e.arrowDOM,{marginLeft:"".concat(-d/2,"px"),top:"".concat(l,"px")});var C=n-s/2,S=n+s/2;C<0?(0,cr.Z)(e.backgroundDOM,{marginLeft:"".concat(-s/2-C,"px")}):S>e.parentWidth&&(0,cr.Z)(e.backgroundDOM,{marginLeft:"".concat(-s/2-S+e.parentWidth+12,"px")})},f.prototype.hide=function(){(0,cr.Z)(this.container,{top:0,left:0,visibility:"hidden"})},f}(),pa=gn,it=function(){return it=Object.assign||function(f){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(f[n]=t[n])}return f},it.apply(this,arguments)},je=function(){function f(t){this.config=(0,u.deepMix)({},t),this.init()}return f.prototype.update=function(t){this.config=(0,u.deepMix)({},this.config,t),this.updateElement(),this.renderMarker()},f.prototype.init=function(){this.initElement(),this.renderMarker()},f.prototype.initElement=function(){var t=this.config,e=t.group,r=t.style,n=r.scale,a=n===void 0?1:n,i=r.offsetX,o=i===void 0?0:i,s=r.offsetY,l=s===void 0?0:s,d=this.config.x+o,p=this.config.y+l,C=e.addGroup({name:ui});this.startMarkerGroup=C.addGroup({name:ui}),this.circle=e.addShape("circle",{attrs:it({x:d,y:p,r:this.config.r*a},r),name:ui}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(d,p,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=C.addGroup({name:ui});var S=.25*this.config.r*a,L=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:d-.375*this.config.r*a,y:p-L/2,width:S,height:L,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:d+1/8*this.config.r*a,y:p-L/2,width:S,height:L,fill:r.stroke||"#aaa",lineWidth:0}})},f.prototype.updateElement=function(){var t=this.config.style,e=t.scale,r=e===void 0?1:e,n=t.offsetX,a=n===void 0?0:n,i=t.offsetY,o=i===void 0?0:i,s=this.config.x+a,l=this.config.y+o;this.circle.attr("x",s),this.circle.attr("y",l),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(s,l,r));var d=.25*this.config.r*r,p=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",s-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",l-p/2),this.pauseLeftMarker.attr("width",d),this.pauseLeftMarker.attr("height",p),this.pauseRightMarker.attr("x",s+1/8*this.config.r*r),this.pauseRightMarker.attr("y",l-p/2),this.pauseRightMarker.attr("width",d),this.pauseRightMarker.attr("height",p)},f.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},f.prototype.getStartMarkerPath=function(t,e,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",t-n/Math.sqrt(3)/2,e-n/2],["L",t+n/Math.sqrt(3),e],["L",t-n/Math.sqrt(3)/2,e+n/2]]},f}(),Ct=je,Pt=function(){return Pt=Object.assign||function(f){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(f[n]=t[n])}return f},Pt.apply(this,arguments)},Yt=J.vs,Lt="#aaa",Tt="green",Bt={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},ot={fill:"#fff"},wt={fill:"green"},rt={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},Wt={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},Jt={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:rt,timeTypeControllerStyle:Wt},wr=110,xr=50,dr={SINGLE:"single",RANGE:"range"},Vr=function(){function f(t){this.controllerCfg=(0,u.deepMix)({},Jt,t),this.group=t.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||dr.RANGE,this.fontFamily=t.fontFamily||"Arial, sans-serif",this.init()}return f.prototype.init=function(){this.renderPlayButton()},f.prototype.getNextMarkerPath=function(t,e,r){return[["M",t,e-r],["L",t+r,e],["L",t,e+r],["Z",t,e-r],["M",t,e],["L",t-r,e-r],["L",t-r,e+r],["Z"]]},f.prototype.getPreMarkerPath=function(t,e,r){return[["M",t,e-r],["L",t-r,e],["L",t,e+r],["L",t,e-r],["M",t,e],["L",t+r,e-r],["L",t+r,e+r],["Z"]]},f.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,r=t.height,n=t.x,a=t.y,i=t.hideTimeTypeController,o=t.fill,s=o===void 0?Lt:o,l=t.stroke,d=l===void 0?Tt:l,p=t.containerStyle,C=p===void 0?{}:p,S=Pt(Pt({},Bt),t.playBtnStyle||{}),L=Pt(Pt({},ot),t.preBtnStyle||{}),z=Pt(Pt({},wt),t.nextBtnStyle||{}),H=r/2-5,ee=a+10,ie=this.controllerGroup.addShape("rect",{attrs:Pt({x:n,y:ee,width:e,height:r,stroke:d,fill:s},C),name:"container-rect"});this.playButton?this.playButton.update({x:e/2,y:ee,r:H}):this.playButton=new Ct({group:this.controllerGroup,x:e/2,y:ee+H+5,r:H,isPlay:this.isPlay,style:S});var se=L.offsetX||0,ye=L.offsetY||0,Ce=(L.scale||1)*H;this.controllerGroup.addShape("path",{attrs:Pt({path:this.getPreMarkerPath(e/2-5*H+se,ee+H+5+ye,Ce*.5)},L),name:$s});var Re=z.offsetX||0,ke=z.offsetY||0,et=(z.scale||1)*H;this.controllerGroup.addShape("path",{attrs:Pt({path:this.getNextMarkerPath(e/2+5*H+Re,ee+H+5+ke,et*.5)},z),name:us}),ie.toBack(),this.renderSpeedBtn(),i||this.renderToggleTime(),this.bindEvent();var vt=this.controllerCfg.scale,at=vt===void 0?1:vt,Mt=this.controllerGroup.getCanvasBBox(),zt=(Mt.maxX+Mt.minX)/2,Cr=(Mt.maxY+Mt.minY)/2,jr=Yt([1,0,0,0,1,0,0,0,1],[["t",-zt,-Cr],["s",at,at],["t",zt,Cr]]);this.controllerGroup.setMatrix(jr)},f.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,r=t.width,n=t.hideTimeTypeController,a=Pt(Pt({},rt),this.controllerCfg.speedControllerStyle||{}),i=a.scroller,o=i===void 0?{}:i,s=a.text,l=s===void 0?{}:s,d=a.pointer,p=d===void 0?{}:d,C=a.scale,S=C===void 0?1:C,L=a.offsetX,z=L===void 0?0:L,H=a.offsetY,ee=H===void 0?0:H,ie=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=ie;var se=[],ye=5;this.speedAxisY=[19,22,26,32,39];for(var Ce=0;Ce<5;Ce++){var Re=e+this.speedAxisY[Ce],ke=r-(n?xr:wr);ie.addShape("line",{attrs:Pt({x1:ke,x2:ke+15,y1:Re,y2:Re},o),speed:ye,name:"speed-rect"}),this.speedAxisY[Ce]=Re,se.push(ye),ye=ye-1}this.speedText=ie.addShape("text",{attrs:Pt({x:r-(n?xr:wr)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},l),name:"speed-text"}),this.speedPoint=ie.addShape("path",{attrs:Pt({path:this.getPointerPath(r-(n?xr:wr),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},p),name:"speed-pointer"});var et=this.speedGroup.getCanvasBBox(),vt=(et.maxX+et.minX)/2,at=(et.maxY+et.minY)/2,Mt=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Mt=Yt(Mt,[["t",-vt,-at],["s",S,S],["t",vt+z*S,at+ee*S]]),this.speedGroup.setMatrix(Mt)},f.prototype.getPointerPath=function(t,e){return[["M",t,e],["L",t-10,e-4],["L",t-10,e+4],["Z"]]},f.prototype.renderToggleTime=function(){var t,e,r=this.controllerCfg,n=r.width,a=r.defaultTimeType,i=Pt(Pt({},Wt),this.controllerCfg.timeTypeControllerStyle||{}),o=i.scale,s=o===void 0?1:o,l=i.offsetX,d=l===void 0?0:l,p=i.offsetY,C=p===void 0?0:p,S=i.box,L=S===void 0?{}:S,z=i.check,H=z===void 0?{}:z,ee=i.text,ie=ee===void 0?{}:ee;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var se=a===dr.SINGLE;this.toggleGroup.addShape("rect",{attrs:Pt({x:n-xr,y:this.speedAxisY[0]+3.5},L),isChecked:se,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:Pt({path:[["M",n-xr+3,this.speedAxisY[1]+6],["L",n-xr+7,this.speedAxisY[1]+10],["L",n-xr+12,this.speedAxisY[1]+4]]},H),capture:!1,name:"check-icon"}),se||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:Pt({text:se?((t=this.controllerCfg)===null||t===void 0?void 0:t.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((e=this.controllerCfg)===null||e===void 0?void 0:e.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-xr+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},ie),name:"checked-text"});var ye=this.toggleGroup.getCanvasBBox(),Ce=(ye.maxX+ye.minX)/2,Re=(ye.maxY+ye.minY)/2,ke=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];ke=Yt(ke,[["t",-Ce,-Re],["s",s,s],["t",Ce+d*s,Re+C*s]]),this.toggleGroup.setMatrix(ke)},f.prototype.bindEvent=function(){var t=this;this.speedGroup.on("speed-rect:click",function(e){var r=e.target.attr("y1"),n=t.speedPoint.attr("matrix"),a=t.speedAxisY.indexOf(n[7]||0),i=t.speedAxisY.indexOf(r),o=t.speedAxisY[i]-t.speedAxisY[a];n=Yt(n,[["t",0,o]]),t.speedPoint.setMatrix(n),t.currentSpeed=t.speedAxisY.length-i,t.speedText.attr("text","".concat(t.currentSpeed,".0X")),t.group.emit(ga,{speed:t.currentSpeed,type:t.currentType})}),this.speedGroup.on("mousewheel",function(e){e.preventDefault();var r=t.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],a=t.speedAxisY.indexOf(n);if(a===-1){var i=1/0;t.speedAxisY.forEach(function(s,l){var d=Math.abs(s-n);i>d&&(i=d,a=l)})}e.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(t.speedAxisY.length-1,a+1);var o=t.speedAxisY[a]-n;r=Yt(r,[["t",0,o]]),t.speedPoint.setMatrix(r),t.currentSpeed=t.speedAxisY.length-a,t.speedText.attr("text","".concat(t.currentSpeed,".0X")),t.group.emit(ga,{speed:t.currentSpeed,type:t.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(e){var r,n,a=e.target.get("isChecked");a?(t.checkedIcon.hide(),t.checkedText.attr("text",((n=t.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),t.currentType=dr.RANGE):(t.checkedIcon.show(),t.checkedText.attr("text",((r=t.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),t.currentType=dr.SINGLE),e.target.set("isChecked",!a),t.group.emit(ga,{type:t.currentType,speed:t.currentSpeed})})},f.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},f}(),Tn=Vr,na=function(){return na=Object.assign||function(f){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(f[n]=t[n])}return f},na.apply(this,arguments)},xn=J.vs,Un={fill:"#5B8FF9"},ia={fill:"#e6e8e9"},za=function(){function f(t){this.frameCount=0,this.fontFamily="Arial, sans-serif";var e=t.graph,r=t.canvas,n=t.group,a=t.width,i=t.height,o=t.padding,s=t.data,l=t.start,d=t.end,p=t.x,C=p===void 0?0:p,S=t.y,L=S===void 0?0:S,z=t.tickLabelFormatter,H=t.selectedTickStyle,ee=H===void 0?Un:H,ie=t.unselectedTickStyle,se=ie===void 0?ia:ie,ye=t.tooltipBackgroundColor,Ce=t.tooltipFomatter,Re=t.tickLabelStyle,ke=t.controllerCfg,et=ke===void 0?{speed:1}:ke;this.graph=e,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=i,this.padding=o,this.data=s,this.start=l,this.end=d,this.tickLabelFormatter=z,this.tickLabelStyle=Re||{},this.selectedTickStyle=ee,this.unselectedTickStyle=se,this.controllerCfg=et,this.currentSpeed=et.speed||1,this.x=C,this.y=L,this.tooltipBackgroundColor=ye,this.tooltipFomatter=Ce,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return f.prototype.renderSlices=function(){var t=this,e=this,r=e.width,n=e.height,a=e.padding,i=e.data,o=e.start,s=e.end,l=e.tickLabelFormatter,d=e.selectedTickStyle,p=e.unselectedTickStyle,C=e.tickLabelStyle,S=r-2*a,L=10,z=4,H=3*a+z+L,ee=n-H-2*a,ie=2,se=i.length,ye=(S-ie*(se-1))/se;this.tickWidth=ye;var Ce=this.sliceGroup,Re=[],ke=[],et=Math.round(se*o),vt=Math.round(se*s);this.startTickRectId=et,this.endTickRectId=vt;var at=C.rotate;delete C.rotate,i.forEach(function(zt,Cr){var jr=Cr>=et&&Cr<=vt,kr=jr?d:p,yr=Ce.addShape("rect",{attrs:na({x:a+Cr*(ye+ie),y:a,width:ye,height:ee},kr),draggable:!0,name:"tick-rect-".concat(Cr)}),dn=Ce.addShape("rect",{attrs:{x:a+Cr*ye+ie*(2*Cr-1)/2,y:a,width:Cr===0||Cr===se-1?ye+ie/2:ye+ie,height:ee,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(Cr)});dn.toFront();var un=yr.getBBox(),br=(un.minX+un.maxX)/2;Re.push({rect:yr,pickRect:dn,value:zt.date,x:br,y:un.minY});var zr;if(l?(zr=l(zt),!(0,u.isString)(zr)&&zr&&(zr=zt.date)):Cr%Math.round(se/10)===0&&(zr=zt.date),zr){ke.push(zr);var en=un.maxY+a*2;Ce.addShape("line",{attrs:{stroke:"#BFBFBF",x1:br,y1:en,x2:br,y2:en+z},name:"tick-line"});var Jr=en+z+a,yn=Ce.addShape("text",{attrs:na({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:br,y:Jr,textAlign:"center",text:zr,textBaseline:"top",fontSize:10,fontFamily:t.fontFamily||"Arial, sans-serif"},C),capture:!1,name:"tick-label"}),An=yn.getBBox();if(An.maxX>r?yn.attr("textAlign","right"):An.minX<0&&yn.attr("textAlign","left"),(0,u.isNumber)(at)&&ke.length!==10){var wa=xn([1,0,0,0,1,0,0,0,1],[["t",-br,-Jr],["r",at],["t",br-5,Jr+2]]);yn.attr({textAlign:"left",matrix:wa})}ke.length===1?yn.attr({textAlign:"left"}):ke.length===10&&yn.attr({textAlign:"right"})}}),this.tickRects=Re;var Mt=this.group;this.currentSpeed=1,this.controllerBtnGroup=new Tn(na({group:Mt,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},f.prototype.initEvent=function(){var t=this,e=this.sliceGroup;e.on("click",function(d){var p=d.target;if(!(p.get("type")!=="rect"||!p.get("name"))){var C=parseInt(p.get("name").split("-")[2],10);if(!isNaN(C)){var S=t.tickRects,L=t.unselectedTickStyle;S.forEach(function(ie){ie.rect.attr(L)});var z=t.selectedTickStyle;S[C].rect.attr(z),t.startTickRectId=C,t.endTickRectId=C;var H=S.length,ee=C/H;t.graph.emit(ra,{value:[ee,ee]})}}}),e.on("dragstart",function(d){var p=t.tickRects,C=t.unselectedTickStyle;p.forEach(function(ie){ie.rect.attr(C)});var S=d.target,L=parseInt(S.get("name").split("-")[2],10),z=t.selectedTickStyle;p[L].rect.attr(z),t.startTickRectId=L;var H=p.length,ee=L/H;t.graph.emit(ra,{value:[ee,ee]}),t.dragging=!0}),e.on("dragover",function(d){if(t.dragging&&d.target.get("type")==="rect"){for(var p=parseInt(d.target.get("name").split("-")[2],10),C=t.startTickRectId,S=t.tickRects,L=t.selectedTickStyle,z=t.unselectedTickStyle,H=0;H<S.length;H++){var ee=H>=C&&H<=p?L:z;S[H].rect.attr(ee)}var ie=S.length;t.endTickRectId=p;var se=C/ie,ye=p/ie;t.graph.emit(ra,{value:[se,ye]})}}),e.on("drop",function(d){if(t.dragging&&(t.dragging=!1,d.target.get("type")==="rect")){var p=t.startTickRectId,C=parseInt(d.target.get("name").split("-")[2],10);if(!(C<p)){var S=t.selectedTickStyle,L=t.tickRects;L[C].rect.attr(S),t.endTickRectId=C;var z=L.length,H=p/z,ee=C/z;t.graph.emit(ra,{value:[H,ee]})}}});var r=this,n=r.tooltipBackgroundColor,a=r.tooltipFomatter,i=r.canvas,o=new pa({container:i.get("container"),backgroundColor:n}),s=this.tickRects;s.forEach(function(d){var p=d.pickRect;p.on("mouseenter",function(C){var S=C.target;if(S.get("type")==="rect"){var L=parseInt(S.get("name").split("-")[2],10),z=i.getClientByPoint(s[L].x,s[L].y);o.show({x:s[L].x,y:s[L].y,clientX:z.x,clientY:z.y,text:a?a(s[L].value):s[L].value})}}),p.on("mouseleave",function(C){o.hide()})});var l=this.group;l.on("".concat(ui,":click"),function(){t.isPlay=!t.isPlay,t.changePlayStatus()}),l.on("".concat(us,":click"),function(){t.updateStartEnd(1)}),l.on("".concat($s,":click"),function(){t.updateStartEnd(-1)}),l.on(ga,function(d){var p=d.type,C=d.speed;t.currentSpeed=C})},f.prototype.changePlayStatus=function(t){t===void 0&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Va,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(Bn,null))},f.prototype.startPlay=function(){var t=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var e=t.currentSpeed;t.frameCount%(60/e)===0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())}):void 0},f.prototype.updateStartEnd=function(t){var e=this,r=this.tickRects,n=r.length,a=this.unselectedTickStyle,i=this.selectedTickStyle,o=e.endTickRectId;if(t>0?e.endTickRectId++:(r[e.endTickRectId].rect.attr(a),e.endTickRectId--),o!==e.startTickRectId)e.endTickRectId<e.startTickRectId&&(e.startTickRectId=e.endTickRectId);else{for(var s=e.startTickRectId;s<=e.endTickRectId-1;s++)r[s].rect.attr(a);e.startTickRectId=e.endTickRectId}if(r[e.endTickRectId]){r[e.endTickRectId].rect.attr(i);var l=e.startTickRectId/n,d=e.endTickRectId/n;this.graph.emit(ra,{value:[l,d]})}},f.prototype.destory=function(){var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach(function(e){var r=e.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,t.off("".concat(ui,":click")),t.off("".concat(us,":click")),t.off("".concat($s,":click")),t.off(ga),this.sliceGroup.destroy()},f}(),Gi=za,qo=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,wl=/[^\s\,]+/ig;function Qs(f){var t=f||[];if(isArray(t))return t;if(isString(t))return t=t.match(qo),each(t,function(e,r){if(e=e.match(wl),e[0].length>1){var n=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=n}each(e,function(a,i){isNaN(a)||(e[i]=+a)}),t[r]=e}),t}var zl=null;function qs(f,t,e,r){var n=[],a=!!r,i,o,s,l,d,p,C;if(a){s=r[0],l=r[1];for(var S=0,L=f.length;S<L;S+=1){var z=f[S];s=Tr.min([0,0],s,z),l=Tr.max([0,0],l,z)}}for(var S=0,H=f.length;S<H;S+=1){var z=f[S];if(S===0&&!e)C=z;else if(S===H-1&&!e)p=z,n.push(C),n.push(p);else{var ee=[S?S-1:H-1,S-1][e?0:1];i=f[ee],o=f[e?(S+1)%H:S+1];var ie=[0,0];ie=Tr.sub(ie,o,i),ie=Tr.scale(ie,ie,t);var se=Tr.distance(z,i),ye=Tr.distance(z,o),Ce=se+ye;Ce!==0&&(se/=Ce,ye/=Ce);var Re=Tr.scale([0,0],ie,-se),ke=Tr.scale([0,0],ie,ye);p=Tr.add([0,0],z,Re),d=Tr.add([0,0],z,ke),d=Tr.min([0,0],d,Tr.max([0,0],o,z)),d=Tr.max([0,0],d,Tr.min([0,0],o,z)),Re=Tr.sub([0,0],d,z),Re=Tr.scale([0,0],Re,-se/ye),p=Tr.add([0,0],z,Re),p=Tr.min([0,0],p,Tr.max([0,0],i,z)),p=Tr.max([0,0],p,Tr.min([0,0],i,z)),ke=Tr.sub([0,0],z,p),ke=Tr.scale([0,0],ke,ye/se),d=Tr.add([0,0],z,ke),a&&(p=Tr.max([0,0],p,s),p=Tr.min([0,0],p,l),d=Tr.max([0,0],d,s),d=Tr.min([0,0],d,l)),n.push(C),n.push(p),C=d}}return e&&n.push(n.shift()),n}function Ol(f,t,e){t===void 0&&(t=!1),e===void 0&&(e=[[0,0],[1,1]]);for(var r=!!t,n=[],a=0,i=f.length;a<i;a+=2)n.push([f[a],f[a+1]]);for(var o=qs(n,.4,r,e),s=n.length,l=[],d,p,C,a=0;a<s-1;a+=1)d=o[a*2],p=o[a*2+1],C=n[a+1],l.push(["C",d[0],d[1],p[0],p[1],C[0],C[1]]);return r&&(d=o[s],p=o[s+1],C=n[0],l.push(["C",d[0],d[1],p[0],p[1],C[0],C[1]])),l}var Jd=Ol;function eh(f,t,e){var r=null,n=e;return t<n&&(n=t,r="add"),f<n&&(n=f,r="del"),{type:r,min:n}}var th=function(f,t){var e=f.length,r=t.length,n,a,i=0;if(e===0||r===0)return null;for(var o=[],s=0;s<=e;s++)o[s]=[],o[s][0]={min:s};for(var l=0;l<=r;l++)o[0][l]={min:l};for(var s=1;s<=e;s++){n=f[s-1];for(var l=1;l<=r;l++){a=t[l-1],isEqual(n,a)?i=0:i=1;var d=o[s-1][l].min+1,p=o[s][l-1].min+1,C=o[s-1][l-1].min+i;o[s][l]=eh(d,p,C)}}return o};function Pg(f,t){var e=th(f,t),r=f.length,n=t.length,a=[],i=1,o=1;if(e[r][n]!==r){for(var s=1;s<=r;s++){var l=e[s][s].min;o=s;for(var d=i;d<=n;d++)e[s][d].min<l&&(l=e[s][d].min,o=d);i=o,e[s][i].type&&a.push({index:s-1,type:e[s][i].type})}for(var s=a.length-1;s>=0;s--)i=a[s].index,a[s].type==="add"?f.splice(i,0,[].concat(f[i])):f.splice(i,1)}if(r=f.length,r<n)for(var s=0;s<n-r;s++)f[r-1][0]==="z"||f[r-1][0]==="Z"?f.splice(r-2,0,f[r-2]):f.push(f[r-1]);return f}var Sl=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,rh=new RegExp("([a-z])["+Sl+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Sl+"]*,?["+Sl+"]*)+)","ig"),nh=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Sl+"]*,?["+Sl+"]*","ig");function kg(f){if(!f)return null;if(isArray(f))return f;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},e=[];return String(f).replace(rh,function(r,n,a){var i=[],o=n.toLowerCase();if(a.replace(nh,function(s,l){l&&i.push(+l)}),o==="m"&&i.length>2&&(e.push([n].concat(i.splice(0,2))),o="l",n=n==="m"?"l":"L"),o==="o"&&i.length===1&&e.push([n,i[0]]),o==="r")e.push([n].concat(i));else for(;i.length>=t[o]&&(e.push([n].concat(i.splice(0,t[o]))),!!t[o]););return""}),e}var ah=/[a-z]/;function rd(f,t){return[t[0]+(t[0]-f[0]),t[1]+(t[1]-f[1])]}function Rg(f){var t=parsePathString(f);if(!t||!t.length)return[["M",0,0]];for(var e=!1,r=0;r<t.length;r++){var n=t[r][0];if(ah.test(n)||["V","H","T","S"].indexOf(n)>=0){e=!0;break}}if(!e)return t;var a=[],i=0,o=0,s=0,l=0,d=0,p,C,S=t[0];(S[0]==="M"||S[0]==="m")&&(i=+S[1],o=+S[2],s=i,l=o,d++,a[0]=["M",i,o]);for(var r=d,L=t.length;r<L;r++){var z=t[r],H=a[r-1],ee=[],n=z[0],ie=n.toUpperCase();if(n!==ie)switch(ee[0]=ie,ie){case"A":ee[1]=z[1],ee[2]=z[2],ee[3]=z[3],ee[4]=z[4],ee[5]=z[5],ee[6]=+z[6]+i,ee[7]=+z[7]+o;break;case"V":ee[1]=+z[1]+o;break;case"H":ee[1]=+z[1]+i;break;case"M":s=+z[1]+i,l=+z[2]+o,ee[1]=s,ee[2]=l;break;default:for(var se=1,ye=z.length;se<ye;se++)ee[se]=+z[se]+(se%2?i:o)}else ee=t[r];switch(ie){case"Z":i=+s,o=+l;break;case"H":i=ee[1],ee=["L",i,o];break;case"V":o=ee[1],ee=["L",i,o];break;case"T":i=ee[1],o=ee[2];var Ce=rd([H[1],H[2]],[H[3],H[4]]);ee=["Q",Ce[0],Ce[1],i,o];break;case"S":i=ee[ee.length-2],o=ee[ee.length-1];var Re=H.length,ke=rd([H[Re-4],H[Re-3]],[H[Re-2],H[Re-1]]);ee=["C",ke[0],ke[1],ee[1],ee[2],i,o];break;case"M":s=ee[ee.length-2],l=ee[ee.length-1];break;default:i=ee[ee.length-2],o=ee[ee.length-1]}a.push(ee)}return a}var _l=Math.PI*2,Ul=function(f,t,e,r,n,a,i){var o=f.x,s=f.y;o*=t,s*=e;var l=r*o-n*s,d=n*o+r*s;return{x:l+a,y:d+i}},ih=function(f,t){var e=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),r=Math.cos(f),n=Math.sin(f),a=Math.cos(f+t),i=Math.sin(f+t);return[{x:r-n*e,y:n+r*e},{x:a+i*e,y:i-a*e},{x:a,y:i}]},nd=function(f,t,e,r){var n=f*r-t*e<0?-1:1,a=f*e+t*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},oh=function(f,t,e,r,n,a,i,o,s,l,d,p){var C=Math.pow(n,2),S=Math.pow(a,2),L=Math.pow(d,2),z=Math.pow(p,2),H=C*S-C*z-S*L;H<0&&(H=0),H/=C*z+S*L,H=Math.sqrt(H)*(i===o?-1:1);var ee=H*n/a*p,ie=H*-a/n*d,se=l*ee-s*ie+(f+e)/2,ye=s*ee+l*ie+(t+r)/2,Ce=(d-ee)/n,Re=(p-ie)/a,ke=(-d-ee)/n,et=(-p-ie)/a,vt=nd(1,0,Ce,Re),at=nd(Ce,Re,ke,et);return o===0&&at>0&&(at-=_l),o===1&&at<0&&(at+=_l),[se,ye,vt,at]},sh=function(f){var t=f.px,e=f.py,r=f.cx,n=f.cy,a=f.rx,i=f.ry,o=f.xAxisRotation,s=o===void 0?0:o,l=f.largeArcFlag,d=l===void 0?0:l,p=f.sweepFlag,C=p===void 0?0:p,S=[];if(a===0||i===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var L=Math.sin(s*_l/360),z=Math.cos(s*_l/360),H=z*(t-r)/2+L*(e-n)/2,ee=-L*(t-r)/2+z*(e-n)/2;if(H===0&&ee===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),i=Math.abs(i);var ie=Math.pow(H,2)/Math.pow(a,2)+Math.pow(ee,2)/Math.pow(i,2);ie>1&&(a*=Math.sqrt(ie),i*=Math.sqrt(ie));var se=oh(t,e,r,n,a,i,d,C,L,z,H,ee),ye=se[0],Ce=se[1],Re=se[2],ke=se[3],et=Math.abs(ke)/(_l/4);Math.abs(1-et)<1e-7&&(et=1);var vt=Math.max(Math.ceil(et),1);ke/=vt;for(var at=0;at<vt;at++)S.push(ih(Re,ke)),Re+=ke;return S.map(function(Mt){var zt=Ul(Mt[0],a,i,z,L,ye,Ce),Cr=zt.x,jr=zt.y,kr=Ul(Mt[1],a,i,z,L,ye,Ce),yr=kr.x,dn=kr.y,un=Ul(Mt[2],a,i,z,L,ye,Ce),br=un.x,zr=un.y;return{x1:Cr,y1:jr,x2:yr,y2:dn,x:br,y:zr}})};function Bg(f,t,e,r,n,a,i,o,s){var l=sh({px:f,py:t,cx:o,cy:s,rx:e,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:i});return l.reduce(function(d,p){var C=p.x1,S=p.y1,L=p.x2,z=p.y2,H=p.x,ee=p.y;return d.push(C,S,L,z,H,ee),d},[])}function Fg(f,t){"TQ".indexOf(f[0])<0&&(t.qx=null,t.qy=null);var e=f.slice(1),r=e[0],n=e[1];switch(f[0]){case"M":return t.x=r,t.y=n,f;case"A":return["C"].concat(arcToCubic.apply(0,[t.x1,t.y1].concat(f.slice(1))));case"Q":return t.qx=r,t.qy=n,["C"].concat(quadToCubic.apply(0,[t.x1,t.y1].concat(f.slice(1))));case"L":return["C"].concat(lineToCubic(t.x1,t.y1,f[1],f[2]));case"H":return["C"].concat(lineToCubic(t.x1,t.y1,f[1],t.y1));case"V":return["C"].concat(lineToCubic(t.x1,t.y1,t.x1,f[1]));case"Z":return["C"].concat(lineToCubic(t.x1,t.y1,t.x,t.y));default:}return f}function Gg(f,t){t===void 0&&(t=!1);for(var e=path2Absolute(f),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",i=e.length,o,s,l=[],d=0;d<i;d+=1)e[d]&&(a=e[d][0]),n[d]=a,e[d]=segmentToCubic(e[d],r),uh(e,n,d),i=e.length,a==="Z"&&l.push(d),o=e[d],s=o.length,r.x1=+o[s-2],r.y1=+o[s-1],r.x2=+o[s-4]||r.x1,r.y2=+o[s-3]||r.y1;return t?[e,l]:e}function uh(f,t,e){if(f[e].length>7){f[e].shift();for(var r=f[e],n=e;r.length;)t[e]="A",f.splice(n+=1,0,["C"].concat(r.splice(0,6)));f.splice(e,1)}}var ad=function(f,t,e,r,n){var a=-3*t+9*e-9*r+3*n,i=f*a+6*t-12*e+6*r;return f*i-3*t+3*e},id=function(f,t,e,r,n,a,i,o,s){s===null&&(s=1),s=s>1?1:s<0?0:s;for(var l=s/2,d=12,p=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],C=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],S=0,L=0;L<d;L++){var z=l*p[L]+l,H=ad(z,f,e,n,i),ee=ad(z,t,r,a,o),ie=H*H+ee*ee;S+=C[L]*Math.sqrt(ie)}return l*S},fh=function(f,t,e,r,n,a,i,o){for(var s=[],l=[[],[]],d,p,C,S,L=0;L<2;++L){if(L===0?(p=6*f-12*e+6*n,d=-3*f+9*e-9*n+3*i,C=3*e-3*f):(p=6*t-12*r+6*a,d=-3*t+9*r-9*a+3*o,C=3*r-3*t),Math.abs(d)<1e-12){if(Math.abs(p)<1e-12)continue;S=-C/p,S>0&&S<1&&s.push(S);continue}var z=p*p-4*C*d,H=Math.sqrt(z);if(!(z<0)){var ee=(-p+H)/(2*d);ee>0&&ee<1&&s.push(ee);var ie=(-p-H)/(2*d);ie>0&&ie<1&&s.push(ie)}}for(var se=s.length,ye=se,Ce;se--;)S=s[se],Ce=1-S,l[0][se]=Ce*Ce*Ce*f+3*Ce*Ce*S*e+3*Ce*S*S*n+S*S*S*i,l[1][se]=Ce*Ce*Ce*t+3*Ce*Ce*S*r+3*Ce*S*S*a+S*S*S*o;return l[0][ye]=f,l[1][ye]=t,l[0][ye+1]=i,l[1][ye+1]=o,l[0].length=l[1].length=ye+2,{min:{x:Math.min.apply(0,l[0]),y:Math.min.apply(0,l[1])},max:{x:Math.max.apply(0,l[0]),y:Math.max.apply(0,l[1])}}},ch=function(f,t,e,r,n,a,i,o){if(!(Math.max(f,e)<Math.min(n,i)||Math.min(f,e)>Math.max(n,i)||Math.max(t,r)<Math.min(a,o)||Math.min(t,r)>Math.max(a,o))){var s=(f*r-t*e)*(n-i)-(f-e)*(n*o-a*i),l=(f*r-t*e)*(a-o)-(t-r)*(n*o-a*i),d=(f-e)*(a-o)-(t-r)*(n-i);if(d){var p=s/d,C=l/d,S=+p.toFixed(2),L=+C.toFixed(2);if(!(S<+Math.min(f,e).toFixed(2)||S>+Math.max(f,e).toFixed(2)||S<+Math.min(n,i).toFixed(2)||S>+Math.max(n,i).toFixed(2)||L<+Math.min(t,r).toFixed(2)||L>+Math.max(t,r).toFixed(2)||L<+Math.min(a,o).toFixed(2)||L>+Math.max(a,o).toFixed(2)))return{x:p,y:C}}}},nc=function(f,t,e){return t>=f.x&&t<=f.x+f.width&&e>=f.y&&e<=f.y+f.height},Wl=function(f,t,e,r){return f===null&&(f=t=e=r=0),t===null&&(t=f.y,e=f.width,r=f.height,f=f.x),{x:f,y:t,width:e,w:e,height:r,h:r,x2:f+e,y2:t+r,cx:f+e/2,cy:t+r/2,r1:Math.min(e,r)/2,r2:Math.max(e,r)/2,r0:Math.sqrt(e*e+r*r)/2,path:rectPath(f,t,e,r),vb:[f,t,e,r].join(" ")}},lh=function(f,t){return f=Wl(f),t=Wl(t),nc(t,f.x,f.y)||nc(t,f.x2,f.y)||nc(t,f.x,f.y2)||nc(t,f.x2,f.y2)||nc(f,t.x,t.y)||nc(f,t.x2,t.y)||nc(f,t.x,t.y2)||nc(f,t.x2,t.y2)||(f.x<t.x2&&f.x>t.x||t.x<f.x2&&t.x>f.x)&&(f.y<t.y2&&f.y>t.y||t.y<f.y2&&t.y>f.y)},od=function(f,t,e,r,n,a,i,o){isArray(f)||(f=[f,t,e,r,n,a,i,o]);var s=fh.apply(null,f);return Wl(s.min.x,s.min.y,s.max.x-s.min.x,s.max.y-s.min.y)},sd=function(f,t,e,r,n,a,i,o,s){var l=1-s,d=Math.pow(l,3),p=Math.pow(l,2),C=s*s,S=C*s,L=d*f+p*3*s*e+l*3*s*s*n+S*i,z=d*t+p*3*s*r+l*3*s*s*a+S*o,H=f+2*s*(e-f)+C*(n-2*e+f),ee=t+2*s*(r-t)+C*(a-2*r+t),ie=e+2*s*(n-e)+C*(i-2*n+e),se=r+2*s*(a-r)+C*(o-2*a+r),ye=l*f+s*e,Ce=l*t+s*r,Re=l*n+s*i,ke=l*a+s*o,et=90-Math.atan2(H-ie,ee-se)*180/Math.PI;return{x:L,y:z,m:{x:H,y:ee},n:{x:ie,y:se},start:{x:ye,y:Ce},end:{x:Re,y:ke},alpha:et}},dh=function(f,t,e){var r=od(f),n=od(t);if(!lh(r,n))return e?0:[];for(var a=id.apply(0,f),i=id.apply(0,t),o=~~(a/8),s=~~(i/8),l=[],d=[],p={},C=e?0:[],S=0;S<o+1;S++){var L=sd.apply(0,f.concat(S/o));l.push({x:L.x,y:L.y,t:S/o})}for(var S=0;S<s+1;S++){var L=sd.apply(0,t.concat(S/s));d.push({x:L.x,y:L.y,t:S/s})}for(var S=0;S<o;S++)for(var z=0;z<s;z++){var H=l[S],ee=l[S+1],ie=d[z],se=d[z+1],ye=Math.abs(ee.x-H.x)<.001?"y":"x",Ce=Math.abs(se.x-ie.x)<.001?"y":"x",Re=ch(H.x,H.y,ee.x,ee.y,ie.x,ie.y,se.x,se.y);if(Re){if(p[Re.x.toFixed(4)]===Re.y.toFixed(4))continue;p[Re.x.toFixed(4)]=Re.y.toFixed(4);var ke=H.t+Math.abs((Re[ye]-H[ye])/(ee[ye]-H[ye]))*(ee.t-H.t),et=ie.t+Math.abs((Re[Ce]-ie[Ce])/(se[Ce]-ie[Ce]))*(se.t-ie.t);ke>=0&&ke<=1&&et>=0&&et<=1&&(e?C++:C.push({x:Re.x,y:Re.y,t1:ke,t2:et}))}}return C},hh=function(f,t,e){f=path2Curve(f),t=path2Curve(t);for(var r,n,a,i,o,s,l,d,p,C,S=e?0:[],L=0,z=f.length;L<z;L++){var H=f[L];if(H[0]==="M")r=o=H[1],n=s=H[2];else{H[0]==="C"?(p=[r,n].concat(H.slice(1)),r=p[6],n=p[7]):(p=[r,n,r,n,o,s,o,s],r=o,n=s);for(var ee=0,ie=t.length;ee<ie;ee++){var se=t[ee];if(se[0]==="M")a=l=se[1],i=d=se[2];else{se[0]==="C"?(C=[a,i].concat(se.slice(1)),a=C[6],i=C[7]):(C=[a,i,a,i,l,d,l,d],a=l,i=d);var ye=dh(p,C,e);if(e)S+=ye;else{for(var Ce=0,Re=ye.length;Ce<Re;Ce++)ye[Ce].segment1=L,ye[Ce].segment2=ee,ye[Ce].bez1=p,ye[Ce].bez2=C;S=S.concat(ye)}}}}}return S};function zg(f,t){return hh(f,t)}function Ll(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Xl(f,t){return Ll(f)*Ll(t)?(f[0]*t[0]+f[1]*t[1])/(Ll(f)*Ll(t)):1}function ud(f,t){return(f[0]*t[1]<f[1]*t[0]?-1:1)*Math.acos(Xl(f,t))}function fd(f,t){return f[0]===t[0]&&f[1]===t[1]}function Ug(f,t){var e=t[1],r=t[2],n=mod(toRadian(t[3]),Math.PI*2),a=t[4],i=t[5],o=f[0],s=f[1],l=t[6],d=t[7],p=Math.cos(n)*(o-l)/2+Math.sin(n)*(s-d)/2,C=-1*Math.sin(n)*(o-l)/2+Math.cos(n)*(s-d)/2,S=p*p/(e*e)+C*C/(r*r);S>1&&(e*=Math.sqrt(S),r*=Math.sqrt(S));var L=e*e*(C*C)+r*r*(p*p),z=L?Math.sqrt((e*e*(r*r)-L)/L):1;a===i&&(z*=-1),isNaN(z)&&(z=0);var H=r?z*e*C/r:0,ee=e?z*-r*p/e:0,ie=(o+l)/2+Math.cos(n)*H-Math.sin(n)*ee,se=(s+d)/2+Math.sin(n)*H+Math.cos(n)*ee,ye=[(p-H)/e,(C-ee)/r],Ce=[(-1*p-H)/e,(-1*C-ee)/r],Re=ud([1,0],ye),ke=ud(ye,Ce);return Xl(ye,Ce)<=-1&&(ke=Math.PI),Xl(ye,Ce)>=1&&(ke=0),i===0&&ke>0&&(ke=ke-2*Math.PI),i===1&&ke<0&&(ke=ke+2*Math.PI),{cx:ie,cy:se,rx:fd(f,[l,d])?0:e,ry:fd(f,[l,d])?0:r,startAngle:Re,endAngle:Re+ke,xRotation:n,arcFlag:a,sweepFlag:i}}function cd(f,t){return[t[0]+(t[0]-f[0]),t[1]+(t[1]-f[1])]}function Wg(f){f=parsePath(f);for(var t=[],e=null,r=null,n=null,a=0,i=f.length,o=0;o<i;o++){var s=f[o];r=f[o+1];var l=s[0],d={command:l,prePoint:e,params:s,startTangent:null,endTangent:null};switch(l){case"M":n=[s[1],s[2]],a=o;break;case"A":var p=getArcParams(e,s);d.arcParams=p;break;default:break}if(l==="Z")e=n,r=f[a+1];else{var C=s.length;e=[s[C-2],s[C-1]]}r&&r[0]==="Z"&&(r=f[a],t[a]&&(t[a].prePoint=e)),d.currentPoint=e,t[a]&&isSamePoint(e,t[a].currentPoint)&&(t[a].prePoint=d.prePoint);var S=r?[r[r.length-2],r[r.length-1]]:null;d.nextPoint=S;var L=d.prePoint;if(["L","H","V"].includes(l))d.startTangent=[L[0]-e[0],L[1]-e[1]],d.endTangent=[e[0]-L[0],e[1]-L[1]];else if(l==="Q"){var z=[s[1],s[2]];d.startTangent=[L[0]-z[0],L[1]-z[1]],d.endTangent=[e[0]-z[0],e[1]-z[1]]}else if(l==="T"){var H=t[o-1],z=cd(H.currentPoint,L);H.command==="Q"?(d.command="Q",d.startTangent=[L[0]-z[0],L[1]-z[1]],d.endTangent=[e[0]-z[0],e[1]-z[1]]):(d.command="TL",d.startTangent=[L[0]-e[0],L[1]-e[1]],d.endTangent=[e[0]-L[0],e[1]-L[1]])}else if(l==="C"){var ee=[s[1],s[2]],ie=[s[3],s[4]];d.startTangent=[L[0]-ee[0],L[1]-ee[1]],d.endTangent=[e[0]-ie[0],e[1]-ie[1]],d.startTangent[0]===0&&d.startTangent[1]===0&&(d.startTangent=[ee[0]-ie[0],ee[1]-ie[1]]),d.endTangent[0]===0&&d.endTangent[1]===0&&(d.endTangent=[ie[0]-ee[0],ie[1]-ee[1]])}else if(l==="S"){var H=t[o-1],ee=cd(H.currentPoint,L),ie=[s[1],s[2]];H.command==="C"?(d.command="C",d.startTangent=[L[0]-ee[0],L[1]-ee[1]],d.endTangent=[e[0]-ie[0],e[1]-ie[1]]):(d.command="SQ",d.startTangent=[L[0]-ie[0],L[1]-ie[1]],d.endTangent=[e[0]-ie[0],e[1]-ie[1]])}else if(l==="A"){var se=.001,ye=d.arcParams||{},Ce=ye.cx,Re=Ce===void 0?0:Ce,ke=ye.cy,et=ke===void 0?0:ke,vt=ye.rx,at=vt===void 0?0:vt,Mt=ye.ry,zt=Mt===void 0?0:Mt,Cr=ye.sweepFlag,jr=Cr===void 0?0:Cr,kr=ye.startAngle,yr=kr===void 0?0:kr,dn=ye.endAngle,un=dn===void 0?0:dn;jr===0&&(se*=-1);var br=at*Math.cos(yr-se)+Re,zr=zt*Math.sin(yr-se)+et;d.startTangent=[br-n[0],zr-n[1]];var en=at*Math.cos(yr+un+se)+Re,Jr=zt*Math.sin(yr+un-se)+et;d.endTangent=[L[0]-en,L[1]-Jr]}t.push(d)}return t}function ld(f){for(var t=[],e=f.length,r=0;r<e-1;r++){var n=f[r],a=f[r+1];t.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(t.length>1){var i=f[0],o=f[e-1];t.push({from:{x:o[0],y:o[1]},to:{x:i[0],y:i[1]}})}return t}function vh(f,t){var e=!1;return each(f,function(r){if(getLineIntersect(r.from,r.to,t.from,t.to))return e=!0,!1}),e}function dd(f){var t=f.map(function(r){return r[0]}),e=f.map(function(r){return r[1]});return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,e),maxY:Math.max.apply(null,e)}}function gh(f,t){return!(t.minX>f.maxX||t.maxX<f.minX||t.minY>f.maxY||t.maxY<f.minY)}function Xg(f,t){if(f.length<2||t.length<2)return!1;var e=dd(f),r=dd(t);if(!gh(e,r))return!1;var n=!1;if(each(t,function(s){if(isPointInPolygon(f,s[0],s[1]))return n=!0,!1}),n||(each(f,function(s){if(isPointInPolygon(t,s[0],s[1]))return n=!0,!1}),n))return!0;var a=ld(f),i=ld(t),o=!1;return each(i,function(s){if(vh(a,s))return o=!0,!1}),o}var Ml=G(79887),ph=function(f,t,e){if(e||arguments.length===2)for(var r=0,n=t.length,a;r<n;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return f.concat(a||Array.prototype.slice.call(t))};function yh(f){return(0,u.map)(f,function(t,e){var r=e===0?"M":"L",n=t[0],a=t[1];return[r,n,a]})}function hd(f){return yh(f)}function mh(f){if(f.length<=2)return hd(f);var t=[];(0,u.each)(f,function(i){(0,u.isEqual)(i,t.slice(t.length-2))||t.push(i[0],i[1])});var e=Jd(t,!1),r=(0,u.head)(f),n=r[0],a=r[1];return e.unshift(["M",n,a]),e}function Eh(f,t,e,r){r===void 0&&(r=!0);var n=new Ml.bJ({values:f}),a=new Ml.WD({values:(0,u.map)(f,function(o,s){return s})}),i=(0,u.map)(f,function(o,s){return[a.scale(s)*t,e-n.scale(o)*e]});return r?mh(i):hd(i)}function bh(f,t,e,r){r===void 0&&(r=5);for(var n=new Ml.bJ({values:f}),a=new Ml.WD({values:(0,u.map)(f,function(C,S){return S})}),i=(0,u.map)(f,function(C,S){return[a.scale(S)*t,e-n.scale(C)*e]}),o=[],s=0;s<i.length;s++){var l=i[s],d={x:l[0],y:l[1],y0:e,size:r},p=Sh(d);o.push.apply(o,p)}return _h(o)}function xh(f,t){var e=new Ml.bJ({values:f}),r=Math.max(0,e.min);return t-e.scale(r)*t}function wh(f,t,e,r){var n=ph([],f,!0),a=xh(r,e);return n.push(["L",t,a]),n.push(["L",0,a]),n.push(["Z"]),n}function Sh(f){var t=f.x,e=f.y,r=f.y0,n=f.size,a,i;(0,u.isArray)(e)?(a=e[0],i=e[1]):(a=r,i=e);var o,s;(0,u.isArray)(t)?(o=t[0],s=t[1]):(o=t-n/2,s=t+n/2);var l=[{x:o,y:a},{x:o,y:i}];return l.push({x:s,y:i},{x:s,y:a}),l}function _h(f,t){t===void 0&&(t=!0);var e=[],r=f[0];e.push(["M",r.x,r.y]);for(var n=1,a=f.length;n<a;n++)e.push(["L",f[n].x,f[n].y]);return t&&(e.push(["L",r.x,r.y]),e.push(["z"])),e}var Cl=function(){return Cl=Object.assign||function(f){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(f[n]=t[n])}return f},Cl.apply(this,arguments)},Mh={stroke:"#C5C5C5",strokeOpacity:.85},Ch={fill:"#CACED4",opacity:.85},Th=function(){function f(t){var e=t.x,r=e===void 0?0:e,n=t.y,a=n===void 0?0:n,i=t.width,o=i===void 0?200:i,s=t.height,l=s===void 0?26:s,d=t.smooth,p=d===void 0?!0:d,C=t.isArea,S=C===void 0?!1:C,L=t.data,z=L===void 0?[]:L,H=t.lineStyle,ee=t.areaStyle,ie=t.group,se=t.interval,ye=se===void 0?null:se;this.group=ie,this.x=r,this.y=a,this.width=o,this.height=l,this.data=z,this.smooth=p,this.isArea=S,this.lineStyle=Object.assign({},Mh,H),this.areaStyle=Object.assign({},Ch,ee),this.intervalConfig=ye,this.renderLine()}return f.prototype.renderLine=function(){var t=this,e=t.x,r=t.y,n=t.width,a=t.height,i=t.barWidth,o=t.data,s=t.smooth,l=t.isArea,d=t.lineStyle,p=t.areaStyle,C=this.group.addGroup({name:"trend-group"});if(o){var S=Eh(o,n,a,s);if(C.addShape("path",{attrs:Cl({path:S},d),name:"trend-line"}),l){var L=wh(S,n,a,o);C.addShape("path",{attrs:Cl({path:L},p),name:"trend-area"})}}this.intervalConfig&&C.addShape("path",{attrs:Cl({path:bh(this.intervalConfig.data,n,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),C.move(e,r)},f.prototype.destory=function(){this.group.destroy()},f}(),Ih=Th,fl=function(){return fl=Object.assign||function(f){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(f[n]=t[n])}return f},fl.apply(this,arguments)},Ah={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Oh={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},Lh=function(){function f(t){var e=t.group,r=t.name,n=t.type,a=t.x,i=a===void 0?0:a,o=t.y,s=o===void 0?0:o,l=t.width,d=l===void 0?2:l,p=t.height,C=p===void 0?24:p,S=t.style,L=S===void 0?{}:S;this.group=e,this.name=r,this.handleType=n,this.x=i,this.y=s,this.width=d,this.height=C,n==="trend"?this.style=fl(fl({},Ah),L):n==="simple"&&(this.style=fl(fl({},Oh),L)),this.renderHandle()}return f.prototype.setX=function(t){this.setXY(t,void 0)},f.prototype.setY=function(t){this.setXY(void 0,t)},f.prototype.setXY=function(t,e){(0,u.isNumber)(t)&&(this.x=t),(0,u.isNumber)(e)&&(this.y=e),this.updateXY()},f.prototype.renderHandle=function(){var t=this,e=t.width,r=t.height,n=t.style,a=t.name,i=n.fill,o=n.stroke,s=n.radius,l=n.opacity,d=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:e,height:r,fill:i,stroke:o,radius:s,opacity:l,cursor:d},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:0,r:2*e,fill:i,stroke:o,radius:s,opacity:l,cursor:d,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:r,r:2*e,fill:i,stroke:o,radius:s,opacity:l,cursor:d},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:e/2,y:r/2,r:2*e,fill:i,stroke:o,radius:s,opacity:l,cursor:d,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},f.prototype.bindSimpleEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),function(){var r=t.style.highLightFill;t.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(e,"-handler:mouseleave"),function(){var r=t.style.fill;t.topCircle.attr("fill",r)})},f.prototype.bindTrendEvents=function(){var t=this,e=this.name;this.handleGroup.on("".concat(e,"-handler:mouseenter"),function(){var r=t.style.highLightFill;t.verticalLine.attr("fill",r),t.topCircle.attr("fill",r),t.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(e,"-handler:mouseleave"),function(){var r=t.style.fill;t.verticalLine.attr("fill",r),t.topCircle.attr("fill",r),t.bottomCircle.attr("fill",r)})},f.prototype.show=function(){this.handleGroup.show()},f.prototype.hide=function(){this.handleGroup.hide()},f.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},f}(),vd=Lh,Ri=function(){return Ri=Object.assign||function(f){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(f[n]=t[n])}return f},Ri.apply(this,arguments)},Dh=J.vs,Nh={fill:"#416180",opacity:.05},Ph={fill:"#416180",opacity:.15,radius:5},kh={fill:"#5B8FF9",opacity:.3,cursor:"grab"},Vl=2,Rh={width:Vl,height:24},Bh={textBaseline:"middle",fill:"#000",opacity:.45},Fh={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},Gh={lineWidth:1,stroke:"#ccc"},zh=function(){function f(t){var e=this;this.prevX=0,this.onMouseDown=function(en){return function(Jr){e.currentHandler=en;var yn=Jr.originalEvent;yn.stopPropagation(),yn.preventDefault(),e.prevX=(0,u.get)(yn,"touches.0.pageX",yn.pageX);var An=e.canvas.get("container");An.addEventListener("mousemove",e.onMouseMove),An.addEventListener("mouseup",e.onMouseUp),An.addEventListener("mouseleave",e.onMouseUp),An.addEventListener("touchmove",e.onMouseMove),An.addEventListener("touchend",e.onMouseUp),An.addEventListener("touchcancel",e.onMouseUp)}},this.onMouseMove=function(en){en.stopPropagation(),en.preventDefault();var Jr=(0,u.get)(en,"touches.0.pageX",en.pageX),yn=Jr-e.prevX,An=e.adjustOffsetRange(yn/e.width);e.updateStartEnd(An),e.updateUI(),e.prevX=Jr},this.onMouseUp=function(){e.currentHandler&&(e.currentHandler=void 0);var en=e.canvas.get("container");en&&(en.removeEventListener("mousemove",e.onMouseMove),en.removeEventListener("mouseup",e.onMouseUp),en.removeEventListener("mouseleave",e.onMouseUp),en.removeEventListener("touchmove",e.onMouseMove),en.removeEventListener("touchend",e.onMouseUp),en.removeEventListener("touchcancel",e.onMouseUp))};var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.width,s=o===void 0?100:o,l=t.height,d=t.padding,p=d===void 0?10:d,C=t.trendCfg,S=t.controllerCfg,L=S===void 0?{speed:1}:S,z=t.backgroundStyle,H=z===void 0?{}:z,ee=t.foregroundStyle,ie=ee===void 0?{}:ee,se=t.handlerStyle,ye=se===void 0?{}:se,Ce=t.textStyle,Re=Ce===void 0?{}:Ce,ke=t.start,et=ke===void 0?0:ke,vt=t.end,at=vt===void 0?1:vt,Mt=t.minText,zt=Mt===void 0?"":Mt,Cr=t.maxText,jr=Cr===void 0?"":Cr,kr=t.group,yr=t.graph,dn=t.canvas,un=t.tick,br=un===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(Jr){return Jr},ticks:[]}:un,zr=t.type;this.graph=yr,this.canvas=dn,this.group=kr,this.timeBarType=zr,this.x=n,this.y=i,this.width=s,this.height=l,this.padding=p,this.ticks=br.ticks,this.trendCfg=C,this.controllerCfg=L,this.currentSpeed=L.speed||1,this.tickLabelFormatter=br.tickLabelFormatter,zr==="trend"?this.backgroundStyle=Ri(Ri({},Nh),H):zr==="simple"&&(this.backgroundStyle=Ri(Ri({},Ph),H)),this.foregroundStyle=Ri(Ri({},kh),ie),this.handlerStyle=Ri(Ri({},Rh),ye),this.textStyle=Ri(Ri({},Bh),Re),this.tickLabelStyle=Ri(Ri({},Fh),br.tickLabelStyle),this.tickLineStyle=Ri(Ri({},Gh),br.tickLineStyle),this.currentMode=L.defaultTimeType||dr.RANGE,this.start=et,this.end=at,this.minText=zt,this.maxText=jr,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return f.prototype.update=function(t){var e=t.x,r=t.y,n=t.width,a=t.height,i=t.minText,o=t.maxText,s=t.start,l=t.end;this.start=Math.min(1,Math.max(s,0)),this.end=Math.min(1,Math.max(l,0)),(0,u.assign)(this,{x:e,y:r,width:n,height:a,minText:i,maxText:o}),this.updateUI()},f.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},f.prototype.renderSlider=function(){var t=this,e=this,r=e.width,n=e.height,a=e.timeBarType;if(a==="trend"&&(0,u.size)((0,u.get)(this.trendCfg,"data"))){var i=new Ih(Ri(Ri({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=i}var o=this.group.addGroup({name:"slider-group"});o.addShape("rect",{attrs:Ri({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var s=this.group.addGroup();a==="trend"?(this.minTextShape=s.addShape("text",{attrs:Ri({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=s.addShape("text",{attrs:Ri({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=s.addShape("text",{attrs:Ri({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=s.addShape("text",{attrs:Ri({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Ri({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(ee){ee.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(ee){ee.target.attr("cursor",t.foregroundStyle.cursor||"grab")});var l=(0,u.get)(this.handlerStyle,"width",2),d=(0,u.get)(this.handlerStyle,"height",24),p=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new vd({name:"minHandlerShape",group:p,type:a,x:this.x,y:this.y,width:l,height:d,style:this.handlerStyle});var C=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new vd({name:"maxHandlerShape",group:C,type:a,x:this.x,y:this.y,width:l,height:d,style:this.handlerStyle});var S=this.ticks,L=r/(S.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(ee){ee.destroy()});var z=-1/0,H=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=S.map(function(ee,ie){t.tickPosList.push(t.x+ie*L);var se;t.tickLabelFormatter?(se=t.tickLabelFormatter(ee),!(0,u.isString)(se)&&se&&(se=ee.date)):se=ee.date;var ye=t.x+ie*L,Ce=t.y+n+5,Re=t.group.addShape("text",{attrs:Ri({x:ye,y:Ce,text:se,fontFamily:t.fontFamily||"Arial, sans-serif"},t.tickLabelStyle),name:"tick-label"});if((0,u.isNumber)(H)&&ie!==S.length-1){var ke=Dh([1,0,0,0,1,0,0,0,1],[["t",-ye,-Ce],["r",H],["t",ye-5,Ce+2]]);Re.attr({textAlign:"left",matrix:ke})}ie===0?Re.attr({textAlign:"left"}):ie!==S.length-1&&Re.attr({textAlign:"right"});var et=t.group.addShape("line",{attrs:Ri({x1:t.x+ie*L,y1:t.y+n+2,x2:t.x+ie*L,y2:t.y+n+6},t.tickLineStyle),name:"tick-line"});et.toBack();var vt=Re.getBBox();return vt.minX>z?(Re.show(),et.show(),z=vt.minX+vt.width+10):(Re.hide(),et.hide()),Re}),this.controllerBtnGroup=new Tn(Ri({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),o.move(this.x,this.y),this.bindEvents(),this.currentMode===dr.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},f.prototype.bindEvents=function(){var t=this,e=this.group.find(function(n){return n.get("name")==="minHandlerShape"});e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(ui,":click"),function(){t.isPlay=!t.isPlay,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()}),this.group.on("".concat(us,":click"),function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(.01),t.updateUI()}),this.group.on("".concat($s,":click"),function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(-.01),t.updateUI()}),this.group.on(ga,function(n){var a=n.type,i=n.speed;t.currentSpeed=i,t.currentMode=a,a===dr.SINGLE?(t.minHandlerShape.hide(),t.foregroundShape.hide(),t.minTextShape.hide()):a===dr.RANGE&&(t.minHandlerShape.show(),t.foregroundShape.show(),t.minTextShape.show())})},f.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1;return 0},f.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:{var e=0-this.start,r=1-this.start;return Math.min(r,Math.max(e,t))}case this.maxHandlerShape:{var e=0-this.end,r=1-this.end;return Math.min(r,Math.max(e,t))}case this.foregroundShape:{var e=0-this.start,r=1-this.end;return Math.min(r,Math.max(e,t))}default:return 0}},f.prototype.updateStartEnd=function(t){var e=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e==null?void 0:e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(e):e.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},f.prototype.updateUI=function(){var t=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var e=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",r-e);var n=(0,u.get)(this.handlerStyle,"width",Vl);this.setText(this.minText,this.maxText);var a=this.dodgeText([e,r]),i=a[0],o=a[1];this.minHandlerShape.setX(e-n/2),(0,u.each)(i,function(s,l){return t.minTextShape.attr(l,s)}),this.maxHandlerShape.setX(r-n/2),(0,u.each)(o,function(s,l){return t.maxTextShape.attr(l,s)}),this.currentMode===dr.RANGE?this.graph.emit(ra,{value:[this.start,this.end].sort()}):this.currentMode===dr.SINGLE&&this.graph.emit(ra,{value:[this.end,this.end]})},f.prototype.dodgeText=function(t){var e,r,n=2,a=(0,u.get)(this.handlerStyle,"width",Vl),i=this.minTextShape,o=this.maxTextShape,s=t[0],l=t[1],d=!1;s>l&&(e=[l,s],s=e[0],l=e[1],r=[o,i],i=r[0],o=r[1],d=!0);var p=i.getBBox(),C=o.getBBox(),S=null,L=null;return this.timeBarType==="trend"?(S=s-p.width<this.x+n?{x:s+a/2+n,textAlign:"left"}:{x:s-a/2-n,textAlign:"right"},L=l+C.width>this.x+this.width?{x:l-a/2-n,textAlign:"right"}:{x:l+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(S=i.attr("x")>p.width?{x:s,textAlign:"center"}:{x:s,textAlign:"left"},L=o.attr("x")>this.width-C.width?{x:l,textAlign:"right"}:{x:l,textAlign:"center"}),d?[L,S]:[S,L]},f.prototype.startPlay=function(){var t=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var e=t,r=e.ticks,n=e.width,a=t.currentSpeed,i=n/r.length,o=i/((10-a)*1e3/60),s=t.adjustOffsetRange(o/t.width);t.updateStartEnd(s),t.updateUI(),t.isPlay&&(t.playHandler=t.startPlay())}):void 0},f.prototype.changePlayStatus=function(t){t===void 0&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Va,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit(Bn,null))},f.prototype.destory=function(){this.graph.off(ra,function(){});var t=this.group,e=t.find(function(n){return n.get("name")==="minHandlerShape"});e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy());var r=t.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off("".concat(ui,":click")),t.off("".concat(us,":click")),t.off("".concat($s,":click")),t.off(ga),t.destroy(),this.trendComponent&&this.trendComponent.destory()},f}(),Uh=zh,Wh=function(){var f=function(e,r){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},f(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Cf=function(){return Cf=Object.assign||function(f){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(f[n]=t[n])}return f},Cf.apply(this,arguments)},Xh=function(f,t){var e={};for(var r in f)Object.prototype.hasOwnProperty.call(f,r)&&t.indexOf(r)<0&&(e[r]=f[r]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(f);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(f,r[n])&&(e[r[n]]=f[r[n]]);return e},Vh=4,Yh=26,jh=function(f){Wh(t,f);function t(e){var r=f.call(this,e)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,u.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var a=r.get("graph");r.cacheGraphData=a.get("data"),r.filterData({})},r}return t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},t.prototype.initContainer=function(){var e=this.get("graph"),r=this._cfgs,n=r.width,a=r.height,i=r.putInGraphContainer,o=this.get("className")||"g6-component-timebar",s=this.get("container"),l;if(s?((0,u.isString)(s)&&(s=document.getElementById(s)),l=s):(l=(0,pi.Z)("<div class='".concat(o,"'></div>")),(0,cr.Z)(l,{position:"relative"})),i){var d=this.get("graph").get("container");d.appendChild(l)}this.set("timeBarContainer",l);var p,C=e.get("renderer");C==="SVG"?p=new Bu.Canvas({container:l,width:n,height:a}):p=new Qo.Canvas({container:l,width:n,height:a}),this.get("containerCSS")&&(0,cr.Z)(l,this.get("containerCSS")),this.set("canvas",p)},t.prototype.init=function(){this.initContainer();var e=this.get("canvas"),r=e.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},t.prototype.play=function(){this.togglePlay(!0)},t.prototype.pause=function(){this.togglePlay(!1)},t.prototype.togglePlay=function(e){var r=this.get("timebar");r&&(r.isPlay=!!e,r.changePlayStatus())},t.prototype.renderTrend=function(){var e=this,r=this._cfgs,n=r.width,a=r.x,i=r.y,o=r.padding,s=r.type,l=r.trend,d=r.slider,p=r.controllerCfg,C=r.textStyle,S=r.tick,L=r.backgroundStyle,z=r.foregroundStyle,H=l.data,ee=Xh(l,["data"]),ie=n-2*o,se=s==="trend"?Yh:Vh,ye=this.get("graph"),Ce=this.get("timeBarGroup"),Re=this.get("canvas"),ke=null;if(s==="trend"||s==="simple"){var et=this.get("getValue");ke=new Uh(Cf(Cf({graph:ye,canvas:Re,group:Ce,type:s,x:a+o,y:s==="trend"?i+o:i+o+15,width:ie,height:se,padding:o,backgroundStyle:L,foregroundStyle:z,trendCfg:Cf(Cf({},ee),{data:H.map(function(at){return(et==null?void 0:et(at))||at.value})})},d),{tick:{ticks:H,tickLabelFormatter:S.tickLabelFormatter,tickLabelStyle:S.tickLabelStyle,tickLineStyle:S.tickLineStyle},handlerStyle:Cf(Cf({},d.handlerStyle),{height:d.height||se}),controllerCfg:p,textStyle:C}))}else s==="tick"&&(ke=new Gi(Cf({graph:ye,canvas:Re,group:Ce,x:a+o,y:i+o,width:n,height:42,padding:2,controllerCfg:p},S)));var vt=function at(){var Mt=e.get("timebar");Mt.draggingHandler=!1,Mt.isPlay&&(Mt.isPlay=!1,Mt.currentHandler=Mt.maxHandlerShape,Mt.changePlayStatus()),document.removeEventListener("mouseup",at)};Re.on("mousedown",function(at){(at.target.get("name")==="maxHandlerShape-handler"||at.target.get("name")==="minHandlerShape-handler"||at.target===ke.foregroundShape)&&document.addEventListener("mouseup",vt)}),this.set("timebar",ke)},t.prototype.filterData=function(e){var r,n=e.value;if(!n){n=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):a==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var i=null,o=this._cfgs.type;if(o==="trend"||o==="simple"?i=this._cfgs.trend.data:o==="tick"&&(i=this._cfgs.tick.data),!i||i.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var s=this.get("rangeChange"),l=this.get("graph"),d=Math.round(i.length*n[0]),p=Math.round(i.length*n[1]);p=p>=i.length?i.length-1:p,d=d>=i.length?i.length-1:d;var C=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,S=C?C(i[d]):i[d].date,L=C?C(i[p]):i[p].date;if(o!=="tick"){var z=this.get("timebar");z.setText(S,L)}if(s)s(l,S,L);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=l.get("data"));var H=this.get("filterItemTypes"),ee=this.get("changeData"),ie=this.get("getDate"),se=this.get("shouldIgnore"),ye=i[d].date,Ce=i[p].date;if(ee||ee===void 0){var Re=this.cacheGraphData.nodes,ke=this.cacheGraphData.edges,et={},vt={};l.getNodes().forEach(function(at){return et[at.getID()]=!0}),l.getEdges().forEach(function(at){return vt[at.getID()]=!0}),H.includes("node")&&(Re==null||Re.forEach(function(at){var Mt=+((ie==null?void 0:ie(at))||at.date),zt=Mt>=ye&&Mt<=Ce||(se==null?void 0:se("node",at,{min:ye,max:Ce})),Cr=et[at.id];Cr&&!zt?(l.removeItem(at.id),et[at.id]=!1):!Cr&&zt&&(l.addItem("node",at),et[at.id]=!0)}),ke==null||ke.forEach(function(at){var Mt=et[at.source]&&et[at.target]||(se==null?void 0:se("edge",at,{min:ye,max:Ce})),zt=!!l.findById(at.id);zt&&!Mt?(l.removeItem(at.id),vt[at.id]=!1):!zt&&Mt?(l.addItem("edge",at),vt[at.id]=!0):zt||(vt[at.id]=!1)})),(this.get("filterEdge")||H.includes("edge"))&&(ke==null||ke.filter(function(at){var Mt=+((ie==null?void 0:ie(at))||at.date),zt=Mt>=ye&&Mt<=Ce||(se==null?void 0:se("edge",at,{min:ye,max:Ce})),Cr=et[at.source]&&et[at.target],jr=zt&&Cr,kr=vt[at.id];kr&&!jr?(vt[at.id]=!1,l.removeItem(at.id)):!kr&&jr&&(vt[at.id]=!0,l.addItem("edge",at))}))}else H.includes("node")&&l.getNodes().forEach(function(at){var Mt=at.getModel();if(!(se!=null&&se("node",Mt,{min:ye,max:Ce}))){var zt=+((ie==null?void 0:ie(Mt))||Mt.date);zt<ye||zt>Ce?l.hideItem(at):l.showItem(at)}}),(this.get("filterEdge")||H.includes("edge"))&&l.getEdges().forEach(function(at){var Mt=at.getModel();if(!(se!=null&&se("edge",Mt,{min:i[d].date,max:i[p].date}))){var zt=+((ie==null?void 0:ie(Mt))||Mt.date);if(zt<i[d].date||zt>i[p].date)l.hideItem(at);else{var Cr=at.getSource().isVisible(),jr=at.getTarget().isVisible();Cr&&jr&&l.showItem(at)}}})}},t.prototype.initEvent=function(){var e=this.get("graph");e.on("afterchangedata",this.changeData),e.on("afterrender",this.afterrenderListener),e.on(ra,this.valueChangeListener)},t.prototype.destroy=function(){var e=this.get("graph");e.off("afterchangedata",this.changeData),e.off("afterrender",this.afterrenderListener),e.off(ra,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),f.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var a=this.get("container");a||(a=this.get("graph").get("container")),(0,u.isString)(a)&&(a=document.getElementById(a)),a===n&&(a=a.parentElement),a.removeChild(n)}},t}(Ar),Hh=jh,Zh=function(){var f=function(e,r){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},f(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Kh=to.applyMatrix;function $h(f,t){var e,r;if(f.naturalWidth)e=f.naturalWidth,r=f.naturalHeight;else{var n=new Image;n.src=f.src,n.onload=function(){t&&t(n.width,n.height)}}return[e,r]}var Qh=function(f){Zh(t,f);function t(e){return f.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var a=this.get("container");(0,u.isString)(a)&&(a=document.getElementById(a));var i=(0,pi.Z)("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),o=0,s=0,l=!1,d=0,p=0,C=0,S=0,L=0,z=0;a.addEventListener("mousedown",function(H){if(r.refresh=!1,H.target===i){var ee=i.style;C=parseInt(ee.width,10),S=parseInt(ee.height,10);var ie=e.get("width"),se=e.get("height");C>ie||S>se||(z=n.getZoom(),L=e.get("ratio"),l=!0,o=H.clientX,s=H.clientY)}},!1),a.addEventListener("mousemove",function(H){if(!(!l||(0,u.isNil)(H.clientX)||(0,u.isNil)(H.clientY))){var ee=e.get("width"),ie=e.get("height"),se=i.style;d=parseInt(se.left,10),p=parseInt(se.top,10),C=parseInt(se.width,10),S=parseInt(se.height,10);var ye=o-H.clientX,Ce=s-H.clientY;d-ye<0?ye=d:d-ye+C>=ee&&(ye=0),p-Ce<0?Ce=p:p-Ce+S>=ie&&(Ce=0),d-=ye,p-=Ce,(0,cr.Z)(i,{left:"".concat(d,"px"),top:"".concat(p,"px")}),n.translate(ye*z/L,Ce*z/L),o=H.clientX,s=H.clientY}},!1),a.addEventListener("mouseleave",function(){l=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){l=!1,r.refresh=!0},!1),this.set("viewport",i),a.appendChild(i)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio"),r=this.get("width"),n=this.get("height"),a=this.get("graph"),i=a.get("width"),o=a.get("height"),s=i/o,l=a.getGroup(),d=l.getCanvasBBox(),p=[(d.minX+d.maxX)/2,(d.minY+d.maxY)/2],C=[d.maxX-d.minX,d.maxY-d.minY],S={centerX:p[0],centerY:p[1],width:0,height:0,minX:0,minY:0};d[0]/d[1]>s?(S.width=C[0],S.height=S.width/s):(S.height=C[1],S.width=S.height*s),S.minX=p[0]-S.width/2,S.minY=p[1]-S.height/2;var L=l.getMatrix();L||(L=[1,0,0,0,1,0,0,0,1]);var z=so.invert([1,0,0,0,1,0,0,0,1],L),H=Kh({x:S.minX,y:S.minY},z),ee=a.getCanvasByPoint(H.x,H.y),ie=this.get("viewport");ie||this.initViewport();var se=i/S.width,ye=se*r,Ce=se*n,Re=r*-ee.x/S.width,ke=n*-ee.y/S.height,et=Re+ye,vt=ke+Ce;Re<0&&(ye+=Re,Re=0),et>r&&(ye=ye-(et-r)),ke<0&&(Ce+=ke,ke=0),vt>n&&(Ce=Ce-(vt-n)),this.set("ratio",e);var at="".concat(Re,"px"),Mt="".concat(ke,"px");(0,cr.Z)(ie,{left:at,top:Mt,width:"".concat(ye,"px"),height:"".concat(Ce,"px")})}},t.prototype.init=function(){this.initContainer()},t.prototype.initContainer=function(){var e=this,r=e.get("graph"),n=r.get("width"),a=r.get("height"),i=a/n,o=e.get("className"),s=e.get("container"),l=e.get("width"),d=e.get("height");!l&&!d&&(l=200),l?(d=i*l,e.set("height",d)):(l=1/i*d,e.set("width",l));var p=(0,pi.Z)("<div class='".concat(o,"' style='width: ").concat(l,"px; height: ").concat(d,"px; overflow: hidden; position: relative;'></div>"));(0,u.isString)(s)&&(s=document.getElementById(s)),s?s.appendChild(p):r.get("container").appendChild(p),e.set("container",p);var C=(0,pi.Z)('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');p.appendChild(C);var S=(0,pi.Z)('<span style="display: table-cell; vertical-align: middle; "></span>');C.appendChild(S),e.set("containerDOM",C),e.set("containerSpan",S);var L=(0,pi.Z)('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));e.set("imgDOM",L),e.updateImgSize(),S.appendChild(L),e.updateCanvas()},t.prototype.updateImgSize=function(){var e=this,r=e.get("imgDOM"),n=e.get("width"),a=e.get("height");r.onload=function(){var i=$h(r);i[0]>i[1]?r.width=n:r.height=a}},t.prototype.updateCanvas=function(){var e=this.get("refresh");if(e){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=r.get("canvas").getCanvasBBox(),i=a.width,o=n/i;this.set("ratio",o),this.updateViewport()}}},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateGraphImg=function(e){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",e);var a=(0,pi.Z)('<img alt="" src="'.concat(e,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",a),a.src=e,r.updateImgSize();var i=r.get("containerSpan");i.appendChild(a),r.updateCanvas()},t.prototype.destroy=function(){var e=this.get("container");e.parentNode.removeChild(e)},t}(Ar),qh=Qh,Jh=function(){var f=function(e,r){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},f(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yl=function(){return Yl=Object.assign||function(f){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(f[n]=t[n])}return f},Yl.apply(this,arguments)},ev=to.distance,gd=.05,pd={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},tv=function(f){Jh(t,f);function t(e){return f.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,u.clone)(pd),showLabel:"edge",scaleRBy:"wheel"}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"filter"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"filter"};break}return e},t.prototype.init=function(){var e=this,r=e.get("showLabel"),n=r==="node"||r==="both",a=r==="edge"||r==="both";e.set("showNodeLabel",n),e.set("showEdgeLabel",a);var i=e.get("shouldShow");i||e.set("shouldShow",function(){return!0})},t.prototype.createDelegate=function(e){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(e),n=r.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){r.scaleRByWheel(a)}))},t.prototype.scaleRByWheel=function(e){var r=this;if(!(!e||!e.originalEvent)){e.preventDefault&&e.preventDefault();var n=r.get("graph"),a,i=r.get("delegate"),o=i?{x:i.attr("x"),y:i.attr("y")}:void 0,s=o||n.getPointByClient(e.clientX,e.clientY);e.originalEvent.wheelDelta<0?a=1-gd:a=1/(1-gd);var l=r.get("maxR"),d=r.get("minR"),p=r.get("r");(p>(l||n.get("height"))&&a>1||p<(d||n.get("height")*.05)&&a<1)&&(a=1),p*=a,r.set("r",p),r.filter(e)}},t.prototype.filter=function(e){var r=this,n=r.get("graph"),a=n.getNodes(),i={},o=r.get("r"),s=r.get("type"),l={x:e.x,y:e.y};r.updateDelegate(l,o);var d=r.get("shouldShow"),p=r.get("vShapes");p&&p.forEach(function(ee){ee.remove(),ee.destroy()}),p=[],a.forEach(function(ee){var ie=ee.getModel(),se=ie.x,ye=ie.y;ev({x:se,y:ye},l)<o&&(i[ie.id]=ee)});var C=n.getEdges(),S=[];C.forEach(function(ee){var ie=ee.getModel(),se=ie.source,ye=ie.target;d(ie)&&(s==="only-source"||s==="one"?i[se]&&!i[ye]&&S.push(ee):s==="only-target"||s==="one"?i[ye]&&!i[se]&&S.push(ee):s==="both"&&i[se]&&i[ye]&&S.push(ee))});var L=r.get("showNodeLabel"),z=r.get("showEdgelabel"),H=n.get("group");S.forEach(function(ee){var ie=ee.get("group").get("children");ie.forEach(function(se){var ye=se.get("type"),Ce=H.addShape(ye,{attrs:se.attr()});p.push(Ce),L&&ye==="text"&&Ce.set("visible",!0)})}),Object.keys(i).forEach(function(ee){var ie=i[ee],se=ie.get("group").clone();if(H.add(se),p.push(se),z)for(var ye=se.get("children"),Ce=0;Ce<ye.length;Ce++){var Re=ye[Ce];Re.get("type")==="text"&&Re.set("visible",!0)}}),r.set("vShapes",p)},t.prototype.updateParams=function(e){var r=this,n=e.r,a=e.trigger,i=e.minR,o=e.maxR,s=e.scaleRBy,l=e.showLabel,d=e.shouldShow;if(isNaN(e.r)||r.set("r",n),isNaN(o)||r.set("maxR",o),isNaN(i)||r.set("minR",i),(a==="mousemove"||a==="click")&&r.set("trigger",a),s==="wheel"||s==="unset"){r.set("scaleRBy",s),r.get("delegate").remove(),r.get("delegate").destroy();var p=r.get("dPercentText");p&&(p.remove(),p.destroy())}(l==="node"||l==="both")&&r.set("showNodeLabel",!0),(l==="edge"||l==="both")&&r.set("showEdgeLabel",!0),d&&r.set("shouldShow",d)},t.prototype.updateDelegate=function(e,r){var n=this,a=n.get("graph"),i=n.get("delegate");if(!i||i.destroyed){var o=a.get("group"),s=n.get("delegateStyle")||pd;i=o.addShape("circle",{attrs:Yl({r,x:e.x,y:e.y},s),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&i.on("mousewheel",function(l){n.scaleRByWheel(l)})}else i.attr({x:e.x,y:e.y,r});n.set("delegate",i)},t.prototype.clear=function(){var e=this,r=e.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],e.set("vShapes",r);var n=e.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},t.prototype.destroy=function(){this.clear()},t}(Ar),rv=tv,nv=function(){var f=function(e,r){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},f(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),av=to.pointLineDistance,iv={stroke:"#FA8C16",lineWidth:1},ov=function(f){nv(t,f);function t(e){return f.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{line:iv,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},t.prototype.init=function(){},t.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},t.prototype.onDragStart=function(){this.initBoxLine()},t.prototype.onDrag=function(e){var r=e.item,n=r.get("delegateShape")||r,a=n.getBBox(),i=r.getModel(),o=i.x-a.x,s=i.y-a.y;this.show({x:a.minX+o,y:a.minY+s},{width:a.width,height:a.height})},t.prototype.onDragEnd=function(){this.destory()},t.prototype.initBoxLine=function(){var e=this._cfgs,r=e.horizontalLines,n=e.verticalLines,a=e.itemAlignType,i=this.get("graph"),o=i.getNodes();o.forEach(function(s){var l=s.getBBox(),d=s.get("id");a===!0||a==="horizontal"?(r["".concat(d,"tltr")]=[l.minX,l.minY,l.maxX,l.minY,s],r["".concat(d,"lcrc")]=[l.minX,l.centerY,l.maxX,l.centerY,s],r["".concat(d,"blbr")]=[l.minX,l.maxY,l.maxX,l.maxY,s]):a==="center"&&(r["".concat(d,"lcrc")]=[l.minX,l.centerY,l.maxX,l.centerY,s]),a===!0||a==="vertical"?(n["".concat(d,"tlbl")]=[l.minX,l.minY,l.minX,l.maxY,s],n["".concat(d,"tcbc")]=[l.centerX,l.minY,l.centerX,l.maxY,s],n["".concat(d,"trbr")]=[l.maxX,l.minY,l.maxX,l.maxY,s]):a==="center"&&(n["".concat(d,"tcbc")]=[l.centerX,l.minY,l.centerX,l.maxY,s])})},t.prototype.show=function(e,r){var n=(0,u.mix)({},e);return this.itemAlign(e,r,n),e},t.prototype.itemAlign=function(e,r,n){var a=this,i=this._cfgs,o=i.horizontalLines,s=i.verticalLines,l=i.tolerance,d={x:n.x+r.width/2,y:n.y},p={x:n.x+r.width/2,y:n.y+r.height/2},C={x:n.x+r.width/2,y:n.y+r.height},S={x:n.x,y:n.y+r.height/2},L={x:n.x+r.width,y:n.y+r.height/2},z=[],H=[],ee=null;if(this.clearAlignLine(),(0,u.each)(o,function(se){se[4].isVisible&&(z.push(a.getLineDisObject(se,d)),z.push(a.getLineDisObject(se,p)),z.push(a.getLineDisObject(se,C)))}),(0,u.each)(s,function(se){se[4].isVisible&&(H.push(a.getLineDisObject(se,S)),H.push(a.getLineDisObject(se,p)),H.push(a.getLineDisObject(se,L)))}),z.sort(function(se,ye){return se.dis-ye.dis}),H.sort(function(se,ye){return se.dis-ye.dis}),z.length!==0&&z[0].dis<l){e.y=z[0].line[1]-z[0].point.y+n.y,ee={type:"item",horizontals:[z[0]]};for(var ie=1;ie<3;ie++)z[0].dis===z[ie].dis&&ee.horizontals.push(z[ie])}if(H.length!==0&&H[0].dis<l){e.x=H[0].line[0]-H[0].point.x+n.x,ee?ee.verticals=[H[0]]:ee={type:"item",verticals:[H[0]]};for(var ie=1;ie<3;ie++)H[0].dis===H[ie].dis&&ee.verticals.push(H[ie])}ee&&(ee.bbox=r,this.addAlignLine(ee))},t.prototype.addAlignLine=function(e){var r=e.bbox,n=e.type,a=e.horizontals,i=e.verticals,o=this._cfgs,s=o.line,l=o.alignLines,d=this.get("graph"),p=d.get("group");n==="item"&&(a&&(0,u.each)(a,function(C){var S=C.line,L=C.point,z=(S[0]+S[2])/2,H,ee;L.x<z?(H=L.x-r.width/2,ee=Math.max(S[0],S[2])):(H=L.x+r.width/2,ee=Math.min(S[0],S[2]));var ie=(0,u.mix)({x1:H,y1:S[1],x2:ee,y2:S[1]},s),se=p.addShape("line",{attrs:ie,capture:!1});l.push(se)}),i&&(0,u.each)(i,function(C){var S=C.line,L=C.point,z=(S[1]+S[3])/2,H,ee;L.y<z?(H=L.y-r.height/2,ee=Math.max(S[1],S[3])):(H=L.y+r.height/2,ee=Math.min(S[1],S[3]));var ie=(0,u.mix)({x1:S[0],y1:H,x2:S[0],y2:ee},s),se=p.addShape("line",{attrs:ie,capture:!1});l.push(se)}))},t.prototype.getLineDisObject=function(e,r){return{line:e,point:r,dis:av(e,r)}},t.prototype.getContainer=function(){return this.get("container")},t.prototype.clearAlignLine=function(){var e=this._cfgs.alignLines;(0,u.each)(e,function(r){r.remove()}),e.length=0},t.prototype.destory=function(){var e=this._cfgs,r=e.horizontalLines,n=e.verticalLines,a=this.get("graph"),i=a.getNodes();i.forEach(function(o){var s=o.get("id");delete r["".concat(s,"tltr")],delete r["".concat(s,"lcrc")],delete r["".concat(s,"blbr")],delete n["".concat(s,"tlbl")],delete n["".concat(s,"tcbc")],delete n["".concat(s,"trbr")]}),this.clearAlignLine()},t}(Ar),sv=ov,uv=function(){var f=function(e,r){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},f(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$i=function(){return $i=Object.assign||function(f){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(f[n]=t[n])}return f},$i.apply(this,arguments)},fv=["click","mouseenter"],cv=function(f){uv(t,f);function t(e){return f.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},t.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var e=this.get("filter")||{},r=e.multiple;r&&e.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var a=this.get("position").split("-");a.includes("left")&&(n="left"),a.includes("right")?n="right":n="center",this.set("align",n)}var i=this.get("graph"),o=i.get("container"),s=(0,pi.Z)(`<div class='g6-legend-container' style="position: absolute;"></div>`);o.appendChild(s),this.set("container",s);var l=this.render();(0,cr.Z)(s,this.getContainerPos(l)),this.bindEvents()},t.prototype.getContainerPos=function(e){e===void 0&&(e=[0,0]);var r=this,n=r.get("graph"),a=this.get("offsetX"),i=this.get("offsetY"),o=this.get("margin"),s=this.get("position").split("-"),l={top:0,right:1,bottom:2,left:3},d=0,p=0,C={left:(n.getWidth()-e[0])/2+d,top:(n.getHeight()-e[1])/2+p};return s.forEach(function(S){var L=o[l[S]],z=S;switch(S){case"top":L+=p;break;case"left":L+=d;break;case"bottom":L=n.getHeight()-e[1]-L+p,z="top";break;default:L=n.getWidth()-e[0]-L+d,z="left";break}C[z]=L}),C.top+=i+n.getContainer().offsetTop,C.left+=a+n.getContainer().offsetLeft,Object.keys(C).forEach(function(S){C[S]="".concat(C[S],"px")}),C},t.prototype.bindEvents=function(){var e=this,r=e.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";fv.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var a=e.get("legendCanvas");n==="mouseenter"?(a.on("node-container:mouseenter",function(i){return e.filterData(i)}),a.on("node-container:mouseleave",function(i){e.clearFilter(),e.clearActiveLegend()})):(a.on("node-container:click",function(i){return e.filterData(i)}),a.on("click",function(i){i.target&&i.target.isCanvas&&i.target.isCanvas()&&(e.clearFilter(),e.clearActiveLegend())}))}},t.prototype.changeData=function(e){this.set("data",e);var r=this.render();(0,cr.Z)(this.get("container"),this.getContainerPos(r))},t.prototype.activateLegend=function(e){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var a=e.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(p){p.set("inactive",!0)}):this.clearActiveLegend();var i=(r==null?void 0:r.legendStateStyles)||{},o=(i==null?void 0:i.inactive)||{opacity:.5,"text-shape":{opacity:.5}},s=o["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(p){var C=p.get("children"),S=C[0],L=C[1];S.attr($i($i({},S.get("oriAttrs")),o)),L.attr($i($i({},L.get("oriAttrs")),s))});var l=(i==null?void 0:i.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},d=l["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(p){var C=p.get("children"),S=C[0],L=C[1];S.attr($i($i({},S.get("oriAttrs")),l)),L.attr($i($i({},L.get("oriAttrs")),d))})},t.prototype.findLegendItemsByState=function(e,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var a=this.get("legendCanvas").find(function(s){return s.get("name")==="root"}),i=a.find(function(s){return s.get("name")==="node-group"}),o=a.find(function(s){return s.get("name")==="edge-group"});return r==="node"?i.get("children").filter(function(s){return!!s.get(e)===n}):r==="edge"?o.get("children").filter(function(s){return!!s.get(e)===n}):i.get("children").filter(function(s){return!!s.get(e)===n}).concat(o.get("children").filter(function(s){return!!s.get(e)===n}))},t.prototype.clearActiveLegend=function(){var e=this.get("legendCanvas"),r=e.find(function(a){return a.get("name")==="root"}),n=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];n.forEach(function(a){a.get("children").forEach(function(i){i.set("active",!1),i.set("inactive",!1);var o=i.get("children"),s=o[0],l=o[1];s.attr(s.get("oriAttrs")),l.attr(l.get("oriAttrs"))})})},t.prototype.filterData=function(e){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var a=this.get("legendCanvas"),i=this.get("graph"),o=r.graphActiveState||"active",s=r.graphInactiveState||"inactive",l=r.multiple;this.clearFilter(),l||this.clearActiveLegend(),this.activateLegend(e.target);var d=a.find(function(ee){return ee.get("name")==="root"}),p=d.find(function(ee){return ee.get("name")==="node-group"}),C=d.find(function(ee){return ee.get("name")==="edge-group"}),S=p.get("children").filter(function(ee){return ee.get("active")}),L=C.get("children").filter(function(ee){return ee.get("active")}),z=0,H=["getNodes","getEdges"];H.forEach(function(ee){i[ee]().forEach(function(ie){var se=!1,ye=ee==="getNodes"?S:L;ye.forEach(function(Ce){var Re=n[Ce.get("id")];se=se||Re(ie.getModel())}),se?(i.setItemState(ie,s,!1),i.setItemState(ie,o,!0),z++):(i.setItemState(ie,o,!1),i.setItemState(ie,s,!0))})}),z||H.forEach(function(ee){i[ee]().forEach(function(ie){i.clearItemStates(ie,[s])})})}},t.prototype.clearFilter=function(){var e=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";e.getNodes().forEach(function(i){e.clearItemStates(i,[n,a])}),e.getEdges().forEach(function(i){e.clearItemStates(i,[n,a])})}},t.prototype.render=function(){var e=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new Qo.Canvas({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),a=n.addGroup({name:"node-group"}),i=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var o=this.get("itemsData"),s=["nodes","edges"],l=[a,i];s.forEach(function(yr,dn){o[yr].forEach(function(un){var br,zr=l[dn].addGroup({id:un.id,name:"node-container"}),en,Jr=un.type,yn=e.getShapeSize(un),An=yn.width,wa=yn.height,Sa=yn.r,yi=e.getStyle(yr.substr(0,4),un);switch(un.type){case"circle":en={r:Sa,x:0,y:0};break;case"rect":en={width:An,height:wa,x:-An/2,y:-wa/2};break;case"ellipse":en={rx:An,ry:wa,x:0,y:0},Jr="ellipse";break;case"line":en={x1:-An/2,y1:0,x2:An/2,y2:0},Jr="line";break;case"quadratic":en={path:[["M",-An/2,0],["Q",0,An/2,An/2,0]]},Jr="path";break;case"cubic":en={path:[["M",-An/2,0],["C",-An/6,An/2,An/6,-An/2,An/2,0]]},Jr="path";break;case"diamond":en={path:[["M",0,-wa],["L",An,0],["L",0,wa],["L",-An,0],["Z"]]},Jr="path";break;case"triangle":en={path:[["M",-An,wa],["L",0,-wa],["L",An,wa],["Z"]]},Jr="path";break;case"star":en={path:to.getStarPath(Sa*3,Sa*1.2)},Jr="path";break;default:en={r:Sa,x:0,y:0};break}var $a=zr.addShape(Jr,{attrs:$i($i({},en),yi),name:"".concat(un.type,"-node-keyShape"),oriAttrs:$i({opacity:1},yi)});if(un.label){var Ci=$a.getBBox(),xi=((br=un.labelCfg)===null||br===void 0?void 0:br.style)||{},Vi=$i({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},xi);zr.addShape("text",{attrs:$i({x:Ci.maxX+4,y:0,text:un.label},Vi),className:"legend-label",name:"".concat(un.type,"-node-text"),oriAttrs:Vi})}})});var d=this.get("padding"),p,C=n.find(function(yr){return yr.get("name")==="title-container"}),S={height:0,maxY:0,width:0};if(this.get("title")){C||(C=n.addGroup({name:"title-container"}));var L={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:d[0]},z=this.get("titleConfig")||{},H=Object.assign(L,z.style||{});p=C.addShape("text",{attrs:$i({text:this.get("title")},H)}),S=C.getCanvasBBox(),C.setMatrix([1,0,0,0,1,0,z.offsetX,z.offsetY,1])}this.layoutItems();var ee=n.getCanvasBBox(),ie=a.getCanvasBBox(),se=ie.minX<0?Math.abs(ie.minX)+d[3]:d[3],ye=S.maxY<ie.minY?Math.abs(S.maxY-ie.minY)+d[0]:S.maxY+d[0],Ce=[1,0,0,0,1,0,se,ye,1];a.setMatrix(Ce),ee=n.getCanvasBBox();var Re=[ee.minX+ee.width+d[1],ee.minY+ee.height+d[2]];if(p){var z=$i({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));S=C.getCanvasBBox();var ke=C.getMatrix()||[1,0,0,0,1,0,0,0,1];z.position==="center"?ke[6]=Re[0]/2+z.offsetX:z.position==="right"?(ke[6]=Re[0]-d[3]+z.offsetX,p.attr({textAlign:"right"})):(ke[6]=d[3]+z.offsetX,p.attr({textAlign:"left"})),C.setMatrix(ke),S=C.getCanvasBBox(),se=ie.minX<0?Math.abs(ie.minX)+d[3]:d[3],ye=ie.minY<S.maxY?Math.abs(S.maxY-ie.minY)+d[0]:S.maxY+d[0],Ce=[1,0,0,0,1,0,se,ye,1],a.setMatrix(Ce);var et=[1,0,0,0,1,0,se,ye,1];this.get("layout")==="vertical"?et[6]+=ie.maxX+this.get("horiSep"):et[7]+=ie.maxY+this.get("vertiSep"),i.setMatrix(et)}else{ie=a.getCanvasBBox();var vt=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?vt[6]+=Ce[6]+ie.maxX+this.get("horiSep"):vt[7]+=Ce[7]+ie.maxY+this.get("vertiSep"),i.setMatrix(vt)}ee=n.getCanvasBBox(),ie=a.getCanvasBBox(),Ce=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var at=i.getMatrix()||[1,0,0,0,1,0,0,0,1],Mt=i.getCanvasBBox();Re=[Math.max(ie.width+Ce[6],Mt.width+at[6])+d[1],Math.max(ie.height+Ce[7],Mt.height+at[7])+d[2]],r.changeSize(Re[0],Re[1]);var zt=this.get("containerStyle"),Cr=n.getMatrix()||[1,0,0,0,1,0,0,0,1],jr=to.invertMatrix({x:0,y:0},Cr),kr=n.addShape("rect",{attrs:$i({x:jr.x+(zt.lineWidth||1),y:jr.y+(zt.lineWidth||1),width:Re[0]-2*(zt.lineWidth||1),height:Re[1]-2*(zt.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},zt),name:"legend-back-rect",capture:!1});return kr.toBack(),Re},t.prototype.layoutItems=function(){var e=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),a=this.get("layout"),i=this.get("align"),o=[0,0],s=e.find(function(ye){return ye.get("name")==="root"}),l=s.find(function(ye){return ye.get("name")==="node-group"}),d=s.find(function(ye){return ye.get("name")==="edge-group"}),p={min:0,max:-1/0},C=-1/0;l.get("children").forEach(function(ye,Ce){Ce===0&&(p.min=o[0]);var Re=ye.get("children")[0],ke=ye.getCanvasBBox(),et=Re.getBBox(),vt=et.width,at=et.height,Mt=0,zt=0,Cr=0;a==="vertical"?(zt=o[1],Cr=o[0]+vt/2,o[0]=Cr+ke.height+n,Mt=ke.maxX+zt+vt/2):(zt=o[0]+vt/2,Cr=o[1],o[0]=zt+ke.width+r,Mt=ke.maxY+Cr+at/2),o[0]>p.max&&(p.max=o[0]),Mt>C&&(C=Mt),ye.setMatrix([1,0,0,0,1,0,zt,Cr,1])});var S=p.max-p.min,L={min:0,max:-1/0},z=l.getCanvasBBox();o[0]=0,o[1]=a==="vertical"?z.maxX+r:z.maxY+n,d.get("children").forEach(function(ye,Ce){Ce===0&&(L.min=o[0]);var Re=ye.get("children")[0],ke=ye.getCanvasBBox(),et=Re.getBBox(),vt=et.width,at=et.height,Mt=0,zt=0;a==="vertical"?(Mt=o[1],zt=o[0],o[0]=zt+ke.height+n,ye.setMatrix([1,0,0,0,1,0,0,zt+at/2,1])):(Mt=o[0],zt=o[1],o[0]=Mt+ke.width+r,ye.setMatrix([1,0,0,0,1,0,Mt+vt/2,0,1])),o[0]>L.max&&(L.max=o[0])});var H=L.max-L.min;if(i&&i!==""&&i!=="left"){var ee=S-H,ie=i==="center"?Math.abs(ee)/2:Math.abs(ee),se=ee<0?l:d;se.get("children").forEach(function(ye){var Ce=ye.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?Ce[7]+=ie:Ce[6]+=ie,ye.setMatrix(Ce)})}},t.prototype.processData=function(){var e=this.get("data"),r={nodes:[],edges:[]};e.nodes&&(e.nodes.sort(function(n,a){return n.order-a.order}),e.nodes.forEach(function(n){var a,i,o,s,l,d=n.size||[((a=n.style)===null||a===void 0?void 0:a.width)||((i=n.style)===null||i===void 0?void 0:i.r)||8,((o=n.style)===null||o===void 0?void 0:o.height)||((s=n.style)===null||s===void 0?void 0:s.r)||8],p=((l=n.labelCfg)===null||l===void 0?void 0:l.style)||{};r.nodes.push({id:n.id||(0,u.uniqueId)(),type:n.type||"circle",style:$i({},n.style),order:n.order,label:n.label,itemType:"node",size:d,labelCfg:{position:"right",style:$i({fontFamily:"Arial"},p)}})})),e.edges&&(e.edges.sort(function(n,a){return n.order-a.order}),e.edges.forEach(function(n){var a,i,o=n.type||"line";n.type==="cubic-horizontal"&&(o="cubic");var s=((a=n.labelCfg)===null||a===void 0?void 0:a.style)||{},l=n.size||[((i=n.style)===null||i===void 0?void 0:i.width)||8,1];r.edges.push({id:n.id||(0,u.uniqueId)(),type:o,size:l,style:$i({lineWidth:(0,u.isArray)(l)?l[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:$i({fontFamily:"Arial"},s)}})})),this.set("itemsData",r)},t.prototype.getContainer=function(){return this.get("container")},t.prototype.formatArray=function(e){var r=this.get(e);if((0,u.isNumber)(r))this.set(e,[r,r,r,r]);else if((0,u.isArray)(r))switch(r.length){case 0:this.set(e,[0,0,0,0]);break;case 1:this.set(e,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(e,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(e,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(e)},t.prototype.getShapeSize=function(e){var r,n,a;return e.size&&((0,u.isArray)(e.size)?(r=e.size[0],n=e.size[1]||e.size[0],a=e.size[0]/2):(0,u.isNumber)(e.size)&&(r=e.size,n=e.size,a=e.size/2)),e.style&&(e.style.width&&(r=e.style.width),e.style.height&&(n=e.style.height),e.style.r&&(a=e.style.r)),a||(a=5),r||(r=a),n||(n=a),{width:r,height:n,r:a}},t.prototype.getStyle=function(e,r){var n=e==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return $i($i({},n),r.style||{})},t.prototype.destroy=function(){var e=this.get("legendCanvas");e==null||e.destroy();var r=this.get("graph"),n=r.get("container"),a=this.get("container");n.removeChild(a)},t}(Ar),lv=cv,dv=function(){var f=function(e,r){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},f(e,r)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),gu=function(){return gu=Object.assign||function(f){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(f[n]=t[n])}return f},gu.apply(this,arguments)},yd=function(f,t){var e={};for(var r in f)Object.prototype.hasOwnProperty.call(f,r)&&t.indexOf(r)<0&&(e[r]=f[r]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(f);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(f,r[n])&&(e[r[n]]=f[r[n]]);return e};typeof document!="undefined"&&ne()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var md="canvas-annotation",hv=function(f){dv(t,f);function t(e){return f.call(this,e)||this}return t.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},t.prototype.getEvents=function(){var e={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":e=gu(gu({},e),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return e},t.prototype.getDOMContent=function(e){if(!this.destroyed){var r=e.collapsed,n=e.maxWidth,a=e.title,i=a===void 0?"":a,o=e.content,s=o===void 0?"":o,l=e.borderRadius,d=l===void 0?5:l,p=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",C=r?"":" <p class='g6-annotation-content'>".concat(s,"</p>"),S="<p class='g6-annotation-close'>x</p>",L=r?"".concat(d,"px"):"".concat(d,"px ").concat(d,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(d,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(L,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(i,`</h4>
          `).concat(p,`
          `).concat(S,`
        </div>
        `).concat(C,`
      </div>`)}},t.prototype.init=function(){var e=this;if(!e.destroyed){var r=e.get("graph"),n=r.getContainer(),a=e.get("container"),i=this.get("containerCfg");i?(a=this.createContainer(),n.appendChild(a)):a=n,this.set("container",a);var o=n.getBoundingClientRect(),s=new Qo.Canvas({container:n,width:o.right-o.left,height:o.bottom-o.top});(0,cr.Z)(s.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,u.debounce)(function(){return e.resizeCanvas(e)},100));var l=s.addGroup({id:"annotation-link-group"});e.set("linkGroup",l),e.set("canvas",s),e.get("getTitle")||e.set("getTitle",function(p){var C,S=((C=p==null?void 0:p.getModel)===null||C===void 0?void 0:C.call(p))||{},L=S.label,z=S.id;return L||z||"-"}),e.get("getContent")||e.set("getContent",function(p){var C,S;if(!p)return"-";var L=((C=p.getModel)===null||C===void 0?void 0:C.call(p))||{},z=L.label,H=L.id,ee=(S=p.getType)===null||S===void 0?void 0:S.call(p),ie=ee?"".concat(ee,": "):"";return"".concat(ie).concat(z||H||"")});var d=e.get("defaultData");d&&this.readData(d)}},t.prototype.createContainer=function(){var e=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),a=n.getContainer(),i=a.getBoundingClientRect(),o=i.left,s=i.right,l=i.top,d=i.bottom,p=d-l,C=s-o,S=r.position,L=S===void 0?"top":S,z=r.offsetX,H=z===void 0?0:z,ee=r.offsetY,ie=ee===void 0?0:ee,se=yd(r,["position","offsetX","offsetY"]),ye=r.height,Ce=ye===void 0?"fit-content":ye,Re=r.width,ke=Re===void 0?n.getWidth():Re;Ce==="100%"&&(Ce=p),ke==="100%"&&(ke=C);var et="unset",vt="unset",at={};switch(L){case"right":et="".concat(p,"px"),at={top:0,right:0},at.right+=o+H,at.top+=l+ie;break;case"bottom":vt="".concat(C,"px"),at={bottom:0,left:0},at.left+=o+H,at.bottom+=l+ie;break;case"top":vt="".concat(C,"px");case"left":et="".concat(p,"px");default:at={top:0,left:0},at.left+=o+H,at.top+=l+ie;break}Object.keys(at).forEach(function(zt){at[zt]="".concat(at[zt],"px")});var Mt=(0,pi.Z)("<div class='".concat(r.className," g6-annotation-container'></div>"));return(0,cr.Z)(Mt,gu(gu({position:"absolute",display:L==="top"||L==="bottom"?"inline-flex":"unset",width:(0,u.isNumber)(ke)?"".concat(ke,"px"):ke,height:(0,u.isNumber)(Ce)?"".concat(Ce,"px"):Ce,maxHeight:et,maxWidth:vt,overflow:"scroll"},at),se)),a.appendChild(Mt),Mt.addEventListener("scroll",function(zt){e.updateLinks()}),Mt}},t.prototype.resizeCanvas=function(e){clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout(function(){if(!(!e||e.destroyed)){var r=e.get("container").getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top;e.get("canvas").changeSize(n,a),e.updateOutsideCards(e)}},250)},t.prototype.updateOutsideCards=function(e){var r=e||this,n=r.get("cardInfoMap")||{},a=r.get("graph"),i=a.getPointByCanvas(0,0),o=a.getPointByCanvas(a.getWidth(),a.getHeight()),s=a.getClientByPoint(i.x,i.y),l=s.x,d=s.y,p=a.getClientByPoint(o.x,o.y),C=p.x,S=p.y;Object.values(n).forEach(function(L){var z=L.card;if(z){var H=z.style,ee=Gc(H.left),ie=Gc(H.top),se=z.getBoundingClientRect(),ye=se.width,Ce=se.height,Re=ee,ke=ie;ee+ye>C-l&&(Re=C-l-ye),ee<0&&(Re=0),ie+Ce>S-d&&(ke=S-d-Ce),ie<0&&(ke=0),(0,cr.Z)(z,{left:"".concat(Re,"px"),top:"".concat(ke,"px")})}}),r.updateLinks()},t.prototype.showAnnotation=function(e){if(!this.destroyed){var r=e.item;this.toggleAnnotation(r)}},t.prototype.hideCards=function(){var e=this;if(!e.destroyed){var r=e.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){e.hideCard(n)})}},t.prototype.toggleAnnotation=function(e,r){var n,a;r===void 0&&(r={});var i=this;if(!i.destroyed){var o=i.get("cardInfoMap")||{},s=i.get("graph"),l=i.get("container"),d=i.get("containerCfg"),p=Object.assign({},i.get("cardCfg")||{},r),C=p.minHeight,S=p.minWidth,L=p.width,z=p.height,H=p.collapsed,ee=H===void 0?!1:H,ie=p.x,se=p.y,ye=p.title,Ce=p.content,Re=p.maxTitleLength,ke=p.defaultBegin,et=yd(p,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),vt=i.get("linkGroup"),at=this.get("rows")||[[]],Mt=(n=e.isCanvas)===null||n===void 0?void 0:n.call(e),zt=Mt?md:e.getID(),Cr=o[zt]||{},jr=Cr.card,kr=Cr.link,yr=Cr.x,dn=Cr.y,un=Cr.title,br=Cr.content,zr=this.get("getTitle"),en=this.get("getContent"),Jr=this.get("getContentPlaceholder")||function(){return""},yn=this.get("getTitlePlaceHolder")||function(){return""},An=Jr(e),wa=yn(e),Sa=(0,pi.Z)(this.getDOMContent(gu({itemId:zt,collapsed:ee,title:((a=un||ye||(zr==null?void 0:zr(e)))===null||a===void 0?void 0:a.substr(0,Re))||wa,content:br||Ce||(en==null?void 0:en(e))||An},et))),yi=(0,u.isNumber)(C)?"".concat(C,"px"):C;(0,cr.Z)(Sa,{minHeight:ee?"unset":yi,minWidth:(0,u.isNumber)(S)?"".concat(S,"px"):S,height:z,width:L});var $a=!!jr;$a?(kr==null||kr.remove(!0),l.replaceChild(Sa,jr)):l.appendChild(Sa);var Ci;if(!d){if(Ci=l.getBoundingClientRect()||{},ie!==void 0&&se!==void 0)yr=ie,dn=se;else if(!$a&&!Mt){var xi=Ci.top,Vi=ke||{},Ti=Vi.left,pu=Vi.right,Io=pu===void 0?16:pu,yu=Vi.top,Ao=yu===void 0?8:yu,Oo=Vi.bottom,Js=Io,Jo=Ao;isNaN(Ti)||(Js=l.scrollWidth-Ti),isNaN(Oo)||(Jo=l.scrollHeight-Oo);var xs=(0,u.isNumber)(S)?S:100;yr=l.scrollWidth-Sa.scrollWidth-(at.length-1)*xs-Js;var La=at[at.length-1],ri=(La[La.length-1]||{}).bbox;dn=(ri==null?void 0:ri.bottom)-xi||Jo}(0,cr.Z)(Sa,{position:"absolute",left:"".concat(yr,"px"),top:"".concat(dn,"px"),cusor:d?"unset":"move"})}this.bindListener(Sa,zt);var Ia=Sa.getBoundingClientRect();if(!Mt){var ni=jl(e,Ia,s,this.get("canvas")),wi=this.get("linkStyle");kr=vt.addShape("path",{attrs:gu({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:ni},wi)})}if(o[zt]=gu(gu({},o[zt]||{}),{id:zt,collapsed:ee,card:Sa,link:kr,x:yr,y:dn,cardBBox:Ia,content:br||Ce,title:un||ye,contentPlaceholder:An,titlePlaceholder:wa,isCanvas:Mt}),i.set("cardInfoMap",o),d)this.updateCardPositionsInConatainer(),this.updateLinks();else{var Wn=!isNaN(ie)&&!isNaN(se);if(!$a&&!Mt&&!Wn){var Pa=Ci.bottom,Ba=Pa===void 0?0:Pa,xi=Ci.top;at[at.length-1].push({id:zt,bbox:Ia}),Ia.top>Ba-xi-Ia.height-16&&at.push([]),this.set("rows",at)}}this.updateCardSize(zt);var Si=this.get("onAnnotationChange");Si==null||Si(o[zt],$a?"update":"create")}},t.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var e=this.get("cardInfoMap");if(e){var r=this.get("container"),n=this.get("containerCfg").position,a=r.getBoundingClientRect().width,i=getComputedStyle(r),o=Gc(i.paddingLeft)+Gc(i.paddingRight);a-=o,Object.values(e).forEach(function(s){var l=s.card,d=l.getBoundingClientRect().width;switch(n){case"right":(0,cr.Z)(l,{marginLeft:a?"".concat(a-d,"px"):"0px"});break;case"top":case"bottom":(0,cr.Z)(l,{marginLeft:"8px"});default:break}})}}},t.prototype.handleExpandCollapseCard=function(e){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var a=n[e].collapsed,i=r.findById(e);if(i){var o=this.get("cardCfg").collapseType;o==="hide"&&!a?this.hideCard(e):this.toggleAnnotation(i,{collapsed:!a}),n[e]=gu(gu({},n[e]),{collapsed:!a})}}}},t.prototype.hideCard=function(e){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[e])){var n=r[e],a=n.card,i=n.link;(0,cr.Z)(a,{display:"none"}),i==null||i.hide();var o=this.get("onAnnotationChange");o(r[e],"hide")}}},t.prototype.removeCard=function(e){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[e],a=n.card,i=n.link,o=this.get("container");o.removeChild(a),i==null||i.remove(!0),delete r[e];var s=this.get("onAnnotationChange");s(n,"remove")}}},t.prototype.bindListener=function(e,r){var n=this;if(!this.destroyed){e.addEventListener("mousemove",function(s){var l;if(s.target.className==="g6-annotation-collapse"?l="collapse":s.target.className==="g6-annotation-expand"?l="expand":s.target.className==="g6-annotation-close"&&(l="close"),l){var d=n.get("cardCfg").onMouseEnterIcon,p=d===void 0?function(){}:d;p(s,r,l)}}),e.addEventListener("mouseout",function(s){var l;if(s.target.className==="g6-annotation-collapse"?l="collapse":s.target.className==="g6-annotation-expand"?l="expand":s.target.className==="g6-annotation-close"&&(l="close"),l){var d=n.get("cardCfg").onMouseLeaveIcon,p=d===void 0?function(){}:d;p(s,r,l)}}),e.addEventListener("mouseenter",function(s){var l=n.get("cardInfoMap");if(l){var d=n.get("graph"),p=d.findById(r);if(p){var C=n.get("itemHighlightState");d.setItemState(p,C,!0)}var S=l[r].link;if(S){var L=n.get("linkHighlightStyle")||{};S.attr(L)}}}),e.addEventListener("mouseleave",function(s){var l=n.get("cardInfoMap");if(l){var d=n.get("graph"),p=d.findById(r);if(p){var C=n.get("itemHighlightState");d.setItemState(p,C,!1)}var S=l[r].link;if(S){var L=n.get("linkHighlightStyle")||{};Object.keys(L).forEach(function(H){S.attr(H,void 0),S.attr(H,void 0)});var z=n.get("linkStyle");S.attr(z)}}}),e.addEventListener("click",function(s){var l=(n.get("cardCfg")||{}).onClickIcon;if(s.target.className==="g6-annotation-collapse"||s.target.className==="g6-annotation-expand"){var d=n.get("cardCfg").collapseType;d==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),l==null||l(s,r,s.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(s.target.className==="g6-annotation-close"){var p=n.get("cardCfg").closeType;p==="remove"?n.removeCard(r):n.hideCard(r),l==null||l(s,r,"close")}});var a=this.get("editable");a&&e.addEventListener("dblclick",function(s){var l=n.get("cardInfoMap"),d=(n.get("cardCfg")||{}).maxTitleLength,p=d===void 0?20:d;if(l){var C=s.target,S=C.className;if(!(S!=="g6-annotation-title"&&S!=="g6-annotation-content")){var L=S==="g6-annotation-title"?C.getBoundingClientRect():C.parentNode.getBoundingClientRect(),z=L.width,H=L.height,ee=getComputedStyle(C),ie=S==="g6-annotation-title"?"input":"textarea",se=(0,pi.Z)("<".concat(ie,' class="').concat(S,'-input" type="textarea" style="width:').concat(z,"px; height: ").concat(H,'px; min-width: 16px;"/>')),ye=(0,pi.Z)('<div class="'.concat(S,'-input-wrapper" style="width: ').concat(z,"px; height: ").concat(H,"px; min-width: 16px; margin-right: ").concat(ee.marginRight,'" />'));ye.appendChild(se),C.parentNode.replaceChild(ye,C);var Ce=l[r],Re=Ce.contentPlaceholder,ke=Ce.titlePlaceholder,et=Ce.content,vt=Ce.title,at=et;S==="g6-annotation-title"?(se.name="title",se.maxLength=p,at=vt):se.name="content",at?(se.innerHTML=C.innerHTML,se.value=C.innerHTML):se.placeholder=S==="g6-annotation-title"?ke:Re,se.focus(),se.addEventListener("blur",function(Mt){se.value&&(C.innerHTML=se.value,Ce[se.name||"title"]=se.value),ye.parentNode.replaceChild(C,ye),n.updateCardSize(r);var zt=n.get("onAnnotationChange");zt==null||zt(Ce,"update")})}}});var i=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];e.draggable=!0,e.addEventListener("dragstart",function(s){var l=s.target.className;if(!i.includes(l)){var d=e.style;n.set("dragging",{card:e,x:s.clientX,y:s.clientY,left:Gc(d.left),top:Gc(d.top)})}}),e.addEventListener("drag",function(s){s.preventDefault();var l=n.get("cardInfoMap");if(l){var d=s.clientX,p=s.clientY,C=n.get("dragging");if(!(isNaN(d)||isNaN(p)||!C)){var S=C.x,L=C.y,z=C.left,H=C.top,ee=C.card,ie=d-S,se=p-L;z+=ie,H+=se;var ye=n.get("graph"),Ce=ye.getPointByCanvas(0,0),Re=ye.getPointByCanvas(ye.getWidth(),ye.getHeight()),ke=ye.getClientByPoint(Ce.x,Ce.y),et=ke.x,vt=ke.y,at=ye.getClientByPoint(Re.x,Re.y),Mt=at.x,zt=at.y,Cr=ee.getBoundingClientRect(),jr=Cr.right-Cr.left,kr=Cr.bottom-Cr.top;(z>Mt-et-jr&&ie>0||z<0&&ie<0)&&(z-=ie),(H>zt-vt-kr&&se>0||H<0&&se<0)&&(H-=se),(0,cr.Z)(ee,{left:"".concat(z,"px"),top:"".concat(H,"px"),visibility:"hidden"}),S=d,L=p;var yr=(l[r]||{}).link;if(yr){var dn=ye.findById(r);yr.attr("path",jl(dn,Cr,ye,n.get("canvas")))}n.set("dragging",{x:S,y:L,left:z,top:H,card:ee})}}});var o=function(l){var d=n.get("cardInfoMap");if(d){var p=n.get("dragging");if(p){var C=p.left,S=p.top,L=p.card;d[r].x=C,d[r].y=S,(0,cr.Z)(L,{visibility:"visible"}),n.set("dragging",!1);var z=n.get("rows");z==null||z.forEach(function(ee){for(var ie=ee.length-1;ie>=0;ie--)ee[ie].id===r&&ee.splice(ie,1)});var H=n.get("onAnnotationChange");H==null||H(d[r],"update")}}};e.addEventListener("dragend",o)}},t.prototype.updateCardSize=function(e){var r=this.get("cardInfoMap");if(r){var n=r[e].card,a=n.getBoundingClientRect().width,i=n.getElementsByClassName("g6-annotation-title")[0];if(i){var o=getComputedStyle(i),s=Gc(o.marginLeft),l=i.getBoundingClientRect().width;(0,cr.Z)(i,{marginRight:"".concat(a-s-24-16-l,"px")})}}},t.prototype.updateLink=function(e){var r=e.item;if(r){var n=this.get("cardInfoMap");if(n){var a=this.get("canvas"),i=this.get("graph"),o=r.getID(),s=n[o]||{},l=s.link,d=s.card;if(l){var p=jl(r,d.getBoundingClientRect(),i,a);l.attr("path",p)}}}},t.prototype.updateLinks=function(){var e=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var i=a.id,o=n.findById(i);e.updateLink({item:o})})}}},t.prototype.onGraphDataChange=function(){var e=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var i=a.id,o=a.card,s=a.isCanvas;if(!(!o||s||o.style.display==="none")){var l=n.findById(i);l&&l.isVisible()?e.toggleAnnotation(l):e.hideCard(i)}})}},t.prototype.onGraphItemVisibilityChange=function(e){var r=e.item,n=e.visible;if(!(!r||r.destroyed)){var a=this.get("cardInfoMap");if(a){var i=r.getID();a[i]&&(n||this.hideCard(i))}}},t.prototype.saveData=function(e){e===void 0&&(e=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),a=this.get("getTitle"),i=this.get("getContent"),o=[];return Object.values(r).forEach(function(s){var l=s.title,d=s.content,p=s.x,C=s.y,S=s.id,L=s.collapsed,z=s.card;if(!(z&&z.style.display==="none"&&!e)){var H=n.findById(S)||n.get("canvas");o.push({id:S,x:p,y:C,collapsed:L,title:l||(a==null?void 0:a(H)),content:d||(i==null?void 0:i(H)),visible:z&&z.style.display!=="none"})}}),o}},t.prototype.readData=function(e){var r=this,n=this.get("graph");e.forEach(function(a){var i=a.id,o=a.x,s=a.y,l=a.title,d=a.content,p=a.collapsed,C=a.visible,S=n.findById(i);if(!S&&i===md&&(S=n.get("canvas")),!S){var L=r.get("cardInfoMap")||{};L[i]=a,r.set("cardInfoMap",L);return}r.toggleAnnotation(S,{x:o,y:s,title:l,content:d,collapsed:p}),C||r.hideCard(i)})},t.prototype.clear=function(){var e=this.get("cardInfoMap");if(e){var r=this.get("container");Object.values(e).forEach(function(n){var a=n.card,i=n.link;r.removeChild(a),i==null||i.remove(!0)}),this.set("cardInfoMap",{})}},t.prototype.destroy=function(){var e;this.clear(),(e=this.get("canvas"))===null||e===void 0||e.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},t}(Ar),vv=hv,gv=function(t,e){var r,n,a,i=1/0;Object.keys(t).forEach(function(l){var d=t[l];Object.keys(e).forEach(function(p){var C=e[p],S=d.x-C.x,L=d.y-C.y,z=S*S+L*L;i>z&&(i=z,r=d,n=C,a=[l,p])})});var o=20,s=to.getControlPoint(r,n,.5,o);return[["M",r.x,r.y],["Q",s.x,s.y,n.x,n.y]]},jl=function(t,e,r,n){var a,i,o=t.getType();if(o==="edge")i=[t.getKeyShape().getPoint(.5)];else{var s=(a=t.getKeyShape)===null||a===void 0?void 0:a.call(t).getBBox(),l=s.minX,d=s.minY,p=s.maxX,C=s.maxY,S=t.getModel(),L=S.x,z=S.y;l+=L,d+=z,p+=L,C+=z,i={left:{x:l,y:(d+C)/2},right:{x:p,y:(d+C)/2},top:{x:(l+p)/2,y:d},bottom:{x:(l+p)/2,y:C}}}Object.keys(i).forEach(function(vt){var at=i[vt],Mt=at.x,zt=at.y,Cr=r.getClientByPoint(Mt,zt);i[vt]=n.getPointByClient(Cr.x,Cr.y)});var H=e.top,ee=H===void 0?0:H,ie=e.left,se=ie===void 0?0:ie,ye=e.right,Ce=ye===void 0?0:ye,Re=e.bottom,ke=Re===void 0?0:Re,et={left:n.getPointByClient(se,(ee+ke)/2),right:n.getPointByClient(Ce,(ee+ke)/2),top:n.getPointByClient((se+Ce)/2,ee),bottom:n.getPointByClient((se+Ce)/2,ke)};return gv(i,et)},Gc=function(t){return Number(t.replace(/\s+|px/gi,""))||0},pv={PluginBase:Ar,Menu:me,Grid:R,Minimap:Xt,Bundling:Pn,ToolBar:Mo,Tooltip:Co,Fisheye:ti,TimeBar:Hh,ImageMinimap:qh,EdgeFilterLens:rv,SnapLine:sv,Legend:lv,Annotation:vv},yv=pv,To=yv;So("circle",{options:{size:rn.defaultNode.size,style:{x:0,y:0,stroke:rn.defaultNode.style.stroke,fill:rn.defaultNode.style.fill,lineWidth:rn.defaultNode.style.lineWidth},labelCfg:{style:{fill:rn.nodeLabel.style.fill,fontSize:rn.nodeLabel.style.fontSize,fontFamily:rn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:rn.defaultNode.linkPoints.size,lineWidth:rn.defaultNode.linkPoints.lineWidth,fill:rn.defaultNode.linkPoints.fill,stroke:rn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,v.__assign)({},rn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(t),i=(0,u.deepMix)({},n,t.icon),o="".concat(this.type,"-keyShape"),s=e.addShape("circle",{attrs:a,className:o,name:o,draggable:!0});e.shapeMap[o]=s;var l=i.width,d=i.height,p=i.show,C=i.text;if(p){var S="".concat(this.type,"-icon");C?e.shapeMap[S]=e.addShape("text",{attrs:(0,v.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:S,name:S,draggable:!0}):e.shapeMap[S]=e.addShape("image",{attrs:(0,v.__assign)({x:-l/2,y:-d/2},i),className:S,name:S,draggable:!0})}return this.drawLinkPoints(t,e),s},drawLinkPoints:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).linkPoints;if(r){var n=r||{},a=n.top,i=n.left,o=n.right,s=n.bottom,l=n.size,d=n.r,p=(0,v.__rest)(n,["top","left","right","bottom","size","r"]),C=this.getSize(t),S=C[0]/2;if(i){var L="link-point-left";e.shapeMap[L]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:-S,y:0,r:l/2||d||5}),className:L,name:L,isAnchorPoint:!0})}if(o){var z="link-point-right";e.shapeMap[z]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:S,y:0,r:l/2||d||5}),className:z,name:z,isAnchorPoint:!0})}if(a){var H="link-point-top";e.shapeMap[H]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:0,y:-S,r:l/2||d||5}),className:H,name:H,isAnchorPoint:!0})}if(s){var ee="link-point-bottom";e.shapeMap[ee]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:0,y:S,r:l/2||d||5}),className:ee,name:ee,isAnchorPoint:!0})}}},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,u.deepMix)({},e,r),a=this.getSize(t),i=a[0]/2,o=(0,v.__assign)({x:0,y:0,r:i},n);return o},update:function(t,e,r){var n=e.getContainer(),a=this.getSize(t),i=(0,v.__assign)({},t.style);t.style.stroke===void 0&&t.color&&(i.stroke=t.color),t.style.r===void 0&&!isNaN(a[0])&&(i.r=a[0]/2),this.updateShape(t,e,i,!0,r),this.updateLinkPoints(t,n)}},"single-node"),So("rect",{options:{size:[100,30],style:{radius:0,stroke:rn.defaultNode.style.stroke,fill:rn.defaultNode.style.fill,lineWidth:rn.defaultNode.style.lineWidth},labelCfg:{style:{fill:rn.nodeLabel.style.fill,fontSize:rn.nodeLabel.style.fontSize,fontFamily:rn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:rn.defaultNode.linkPoints.size,lineWidth:rn.defaultNode.linkPoints.lineWidth,fill:rn.defaultNode.linkPoints.fill,stroke:rn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,v.__assign)({},rn.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(t,e){var r=this.getShapeStyle(t),n=e.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return e.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(t,e),n},drawLinkPoints:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).linkPoints,n=r===void 0?{}:r,a=n.top,i=n.left,o=n.right,s=n.bottom,l=n.size,d=n.r,p=(0,v.__rest)(n,["top","left","right","bottom","size","r"]),C=this.getSize(t),S=C[0],L=C[1];i&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:-S/2,y:0,r:l/2||d||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),o&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:S/2,y:0,r:l/2||d||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:0,y:-L/2,r:l/2||d||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:0,y:L/2,r:l/2||d||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,u.mix)({},e,r),a=this.getSize(t),i=n.width||a[0],o=n.height||a[1],s=(0,v.__assign)({x:-i/2,y:-o/2,width:i,height:o},n);return s},update:function(t,e,r){var n=e.getContainer(),a=this.getOptions({}).style,i=this.getSize(t),o=e.get("keyShape");t.size||(i[0]=o.attr("width")||a.width,i[1]=o.attr("height")||a.height);var s={stroke:t.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},l=(0,u.mix)({},a,o.attr(),s);l=(0,u.mix)(l,t.style),this.updateShape(t,e,l,!1,r),this.updateLinkPoints(t,n)}},"single-node"),So("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:rn.defaultNode.style.stroke,fill:rn.defaultNode.style.fill,lineWidth:rn.defaultNode.style.lineWidth},labelCfg:{style:{fill:rn.nodeLabel.style.fill,fontSize:rn.nodeLabel.style.fontSize,fontFamily:rn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:rn.defaultNode.linkPoints.size,lineWidth:rn.defaultNode.linkPoints.lineWidth,fill:rn.defaultNode.linkPoints.fill,stroke:rn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,v.__assign)({},rn.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(t),i=e.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});e.shapeMap["ellipse-keyShape"]=i;var o=n.width,s=n.height,l=n.show,d=n.text;return l&&(d?e.shapeMap["".concat(this.type,"-icon")]=e.addShape("text",{attrs:(0,v.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.shapeMap["".concat(this.type,"-icon")]=e.addShape("image",{attrs:(0,v.__assign)({x:-o/2,y:-s/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),i},drawLinkPoints:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).linkPoints,n=r===void 0?{}:r,a=n.top,i=n.left,o=n.right,s=n.bottom,l=n.size,d=n.r,p=(0,v.__rest)(n,["top","left","right","bottom","size","r"]),C=this.getSize(t),S=C[0]/2,L=C[1]/2;i&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:-S,y:0,r:l/2||d||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),o&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:S,y:0,r:l/2||d||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:0,y:-L,r:l/2||d||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:0,y:L,r:l/2||d||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,u.mix)({},e,r),a=this.getSize(t),i=a[0]/2,o=a[1]/2,s=(0,v.__assign)({x:0,y:0,rx:i,ry:o},n);return s},update:function(t,e,r){var n=e.getContainer(),a=this.getOptions({}).style,i=this.getSize(t),o={stroke:t.color,rx:i[0]/2,ry:i[1]/2},s=e.get("keyShape"),l=(0,u.mix)({},a,s.attr(),o);l=(0,u.mix)(l,t.style),this.updateShape(t,e,l,!0,r),this.updateLinkPoints(t,n)}},"single-node"),So("diamond",{options:{size:[80,80],style:{stroke:rn.defaultNode.style.stroke,fill:rn.defaultNode.style.fill,lineWidth:rn.defaultNode.style.lineWidth},labelCfg:{style:{fill:rn.nodeLabel.style.fill,fontSize:rn.nodeLabel.style.fontSize,fontFamily:rn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:rn.defaultNode.linkPoints.size,lineWidth:rn.defaultNode.linkPoints.lineWidth,fill:rn.defaultNode.linkPoints.fill,stroke:rn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,v.__assign)({},rn.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(t),i=e.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=i;var o=n.width,s=n.height,l=n.show,d=n.text;return l&&(d?e.shapeMap["".concat(this.type,"-icon")]=e.addShape("text",{attrs:(0,v.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.shapeMap["".concat(this.type,"-icon")]=e.addShape("image",{attrs:(0,v.__assign)({x:-o/2,y:-s/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),i},drawLinkPoints:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).linkPoints,n=r===void 0?{}:r,a=n.top,i=n.left,o=n.right,s=n.bottom,l=n.size,d=n.r,p=(0,v.__rest)(n,["top","left","right","bottom","size","r"]),C=this.getSize(t),S=C[0],L=C[1];i&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:-S/2,y:0,r:l/2||d||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),o&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:S/2,y:0,r:l/2||d||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:0,y:-L/2,r:l/2||d||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:0,y:L/2,r:l/2||d||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(t){var e=this.getSize(t),r=e[0],n=e[1],a=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,u.mix)({},e,r),a=this.getPath(t),i=(0,v.__assign)({path:a},n);return i},update:function(t,e,r){var n=e.getContainer(),a=this.getOptions({}).style,i=this.getPath(t),o={stroke:t.color,path:i},s=e.get("keyShape"),l=(0,u.mix)({},a,s.attr(),o);l=(0,u.mix)(l,t.style),this.updateShape(t,e,l,!0,r),this.updateLinkPoints(t,n)}},"single-node"),So("triangle",{options:{size:40,direction:"up",style:{stroke:rn.defaultNode.style.stroke,fill:rn.defaultNode.style.fill,lineWidth:rn.defaultNode.style.lineWidth},labelCfg:{style:{fill:rn.nodeLabel.style.fill,fontSize:rn.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:rn.defaultNode.linkPoints.size,lineWidth:rn.defaultNode.linkPoints.lineWidth,fill:rn.defaultNode.linkPoints.fill,stroke:rn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,v.__assign)({},rn.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(t,e){var r=this.mergeStyle||this.getOptions(t),n=r.icon,a=n===void 0?{}:n,i=r.direction,o=this.getShapeStyle(t),s=t.direction||i,l=e.addShape("path",{attrs:o,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=l;var d=a.width,p=a.height,C=a.show,S=a.offset,L=a.text;if(C)if(L)e.shapeMap["".concat(this.type,"-icon")]=e.addShape("text",{attrs:(0,v.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var z=-d/2,H=-p/2;(s==="up"||s==="down")&&(H+=S),(s==="left"||s==="right")&&(z+=S),e.shapeMap["".concat(this.type,"-icon")]=e.addShape("image",{attrs:(0,v.__assign)({x:z,y:H},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(t,e),l},drawLinkPoints:function(t,e){var r=this.mergeStyle||this.getOptions(t),n=r.linkPoints,a=n===void 0?{}:n,i=r.direction,o=t.direction||i,s=a.top,l=a.left,d=a.right,p=a.bottom,C=a.size,S=a.r,L=(0,v.__rest)(a,["top","left","right","bottom","size","r"]),z=this.getSize(t),H=z[0];if(l){var ee=null,ie=H*Math.sin(1/3*Math.PI),se=H*Math.sin(1/3*Math.PI);o==="up"?ee=[-se,ie]:o==="down"?ee=[-se,-ie]:o==="left"&&(ee=[-se,se-ie]),ee&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},L),{x:ee[0],y:ee[1],r:C/2||S||5}),className:"link-point-left",name:"link-point-left"}))}if(d){var ye=null,ie=H*Math.sin(1/3*Math.PI),se=H*Math.sin(1/3*Math.PI);o==="up"?ye=[se,ie]:o==="down"?ye=[se,-ie]:o==="right"&&(ye=[se,se-ie]),ye&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},L),{x:ye[0],y:ye[1],r:C/2||S||5}),className:"link-point-right",name:"link-point-right"}))}if(s){var Ce=null,ie=H*Math.sin(1/3*Math.PI),se=H*Math.sin(1/3*Math.PI);o==="up"?Ce=[se-ie,-ie]:o==="left"?Ce=[se,-ie]:o==="right"&&(Ce=[-se,-ie]),Ce&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},L),{x:Ce[0],y:Ce[1],r:C/2||S||5}),className:"link-point-top",name:"link-point-top"}))}if(p){var Re=null,ie=H*Math.sin(1/3*Math.PI),se=H*Math.sin(1/3*Math.PI);o==="down"?Re=[-se+ie,ie]:o==="left"?Re=[se,ie]:o==="right"&&(Re=[-se,ie]),Re&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},L),{x:Re[0],y:Re[1],r:C/2||S||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(t){var e=(this.mergeStyle||this.getOptions(t)).direction,r=t.direction||e,n=this.getSize(t),a=n[0],i=a*Math.sin(1/3*Math.PI),o=a*Math.sin(1/3*Math.PI),s=[["M",-o,i],["L",0,-i],["L",o,i],["Z"]];return r==="down"?s=[["M",-o,-i],["L",o,-i],["L",0,i],["Z"]]:r==="left"?s=[["M",-o,o-i],["L",o,-o],["L",o,o],["Z"]]:r==="right"&&(s=[["M",o,o-i],["L",-o,o],["L",-o,-o],["Z"]]),s},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,u.mix)({},e,r),a=this.getPath(t),i=(0,v.__assign)({path:a},n);return i},update:function(t,e,r){var n=e.getContainer(),a=this.getOptions({}).style,i=this.getPath(t),o={stroke:t.color,path:i},s=e.get("keyShape"),l=(0,u.mix)({},a,s.attr(),o);l=(0,u.mix)(l,t.style),this.updateShape(t,e,l,!0,r),this.updateLinkPoints(t,n)},updateLinkPoints:function(t,e){var r=this.getOptions({}),n=r.linkPoints,a=r.direction,i=t.direction||a,o=e.shapeMap["link-point-left"]||e.find(function(yr){return yr.get("className")==="link-point-left"}),s=e.shapeMap["link-point-right"]||e.find(function(yr){return yr.get("className")==="link-point-right"}),l=e.shapeMap["link-point-top"]||e.find(function(yr){return yr.get("className")==="link-point-top"}),d=e.shapeMap["link-point-bottom"]||e.find(function(yr){return yr.get("className")==="link-point-bottom"}),p=n,C=o||s||l||d;C&&(p=C.attr());var S=(0,u.mix)({},p,t.linkPoints),L=S.fill,z=S.stroke,H=S.lineWidth,ee=S.size/2;ee||(ee=S.r);var ie=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},se=ie.left,ye=ie.right,Ce=ie.top,Re=ie.bottom,ke=this.getSize(t),et=ke[0],vt={r:ee,fill:L,stroke:z,lineWidth:H},at=null,Mt=et*Math.sin(1/3*Math.PI),zt=et*Math.sin(1/3*Math.PI);i==="up"?at=[-zt,Mt]:i==="down"?at=[-zt,-Mt]:i==="left"&&(at=[-zt,zt-Mt]),at&&(o?!se&&se!==void 0?(o.remove(),delete e.shapeMap["link-point-left"]):o.attr((0,v.__assign)((0,v.__assign)({},vt),{x:at[0],y:at[1]})):se&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},vt),{x:at[0],y:at[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var Cr=null;i==="up"?Cr=[zt,Mt]:i==="down"?Cr=[zt,-Mt]:i==="right"&&(Cr=[zt,zt-Mt]),Cr&&(s?!ye&&ye!==void 0?(s.remove(),delete e.shapeMap["link-point-right"]):s.attr((0,v.__assign)((0,v.__assign)({},vt),{x:Cr[0],y:Cr[1]})):ye&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},vt),{x:Cr[0],y:Cr[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var jr=null;i==="up"?jr=[zt-Mt,-Mt]:i==="left"?jr=[zt,-Mt]:i==="right"&&(jr=[-zt,-Mt]),jr&&(l?!Ce&&Ce!==void 0?(l.remove(),delete e.shapeMap["link-point-top"]):l.attr((0,v.__assign)((0,v.__assign)({},vt),{x:jr[0],y:jr[1]})):Ce&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},vt),{x:jr[0],y:jr[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var kr=null;i==="down"?kr=[-zt+Mt,Mt]:i==="left"?kr=[zt,Mt]:i==="right"&&(kr=[-zt,Mt]),kr&&(d?!Re&&Re!==void 0?(d.remove(),delete e.shapeMap["link-point-bottom"]):d.attr((0,v.__assign)((0,v.__assign)({},vt),{x:kr[0],y:kr[1]})):Re&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},vt),{x:kr[0],y:kr[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),So("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:rn.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:rn.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:rn.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).preRect,n=r===void 0?{}:r,a=this.getShapeStyle(t),i=this.getSize(t),o=i[0],s=i[1],l=e.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=l;var d=n.show,p=(0,v.__rest)(n,["show"]);return d&&(e.shapeMap["pre-rect"]=e.addShape("rect",{attrs:(0,v.__assign)({x:-o/2,y:-s/2,height:s},p),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(t,e),this.drawStateIcon(t,e),this.drawLinkPoints(t,e),l},drawLogoIcon:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).logoIcon,n=r===void 0?{}:r,a=this.getSize(t),i=a[0];if(n.show){var o=n.width,s=n.height,l=n.x,d=n.y,p=n.offset,C=n.text,S=(0,v.__rest)(n,["width","height","x","y","offset","text"]);C?e.shapeMap["rect-logo-icon"]=e.addShape("text",{attrs:(0,v.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},S),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):e.shapeMap["rect-logo-icon"]=e.addShape("image",{attrs:(0,v.__assign)((0,v.__assign)({},S),{x:l||-i/2+o+p,y:d||-s/2,width:o,height:s}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).stateIcon,n=r===void 0?{}:r,a=this.getSize(t),i=a[0];if(n.show){var o=n.width,s=n.height,l=n.x,d=n.y,p=n.offset,C=n.text,S=(0,v.__rest)(n,["width","height","x","y","offset","text"]);C?e.shapeMap["rect-state-icon"]=e.addShape("text",{attrs:(0,v.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},S),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):e.shapeMap["rect-state-icon"]=e.addShape("image",{attrs:(0,v.__assign)((0,v.__assign)({},S),{x:l||i/2-o+p,y:d||-s/2,width:o,height:s}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).linkPoints,n=r===void 0?{}:r,a=n.top,i=n.left,o=n.right,s=n.bottom,l=n.size,d=n.r,p=(0,v.__rest)(n,["top","left","right","bottom","size","r"]),C=this.getSize(t),S=C[0],L=C[1];i&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:-S/2,y:0,r:l/2||d||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),o&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:S/2,y:0,r:l/2||d||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:0,y:-L/2,r:l/2||d||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},p),{x:0,y:L/2,r:l/2||d||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(t,e){var r=this.getOptions(t),n=r.labelCfg,a=n===void 0?{}:n,i=r.logoIcon,o=i===void 0?{}:i,s=r.descriptionCfg,l=s===void 0?{}:s,d=this.getSize(t),p=d[0],C=null,S=o.show,L=o.width,z=-p/2+a.offset;S&&(z=-p/2+L+a.offset);var H=a.style,ee=l.style,ie=l.paddingTop;return(0,u.isString)(t.description)?(C=e.addShape("text",{attrs:(0,v.__assign)((0,v.__assign)({},H),{x:z,y:-5,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),e.shapeMap["text-shape"]=C,e.shapeMap["rect-description"]=e.addShape("text",{attrs:(0,v.__assign)((0,v.__assign)({},ee),{x:z,y:17+(ie||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(C=e.addShape("text",{attrs:(0,v.__assign)((0,v.__assign)({},H),{x:z,y:7,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),e.shapeMap["text-shape"]=C),C},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,u.mix)({},e,r),a=this.getSize(t),i=n.width||a[0],o=n.height||a[1],s=(0,v.__assign)({x:-i/2,y:-o/2,width:i,height:o},n);return s},update:function(t,e){var r=this.mergeStyle||this.getOptions(t),n=r.style,a=n===void 0?{}:n,i=r.labelCfg,o=i===void 0?{}:i,s=r.descriptionCfg,l=s===void 0?{}:s,d=this.getSize(t),p=d[0],C=d[1],S=e.get("keyShape");S.attr((0,v.__assign)((0,v.__assign)({},a),{x:-p/2,y:-C/2,width:p,height:C}));var L=e.getContainer(),z=L.shapeMap["rect-logo-icon"]||L.find(function(Sa){return Sa.get("className")==="rect-logo-icon"}),H=z?z.attr():{},ee=(0,u.mix)({},H,t.logoIcon),ie=ee.width;ie===void 0&&(ie=this.options.logoIcon.width);var se=t.logoIcon?t.logoIcon.show:void 0,ye=o.offset,Ce=-p/2+ie+ye;!se&&se!==void 0&&(Ce=-p/2+ye);var Re=L.shapeMap["node-label"]||L.find(function(Sa){return Sa.get("className")==="node-label"}),ke=L.shapeMap["rect-description"]||L.find(function(Sa){return Sa.get("className")==="rect-description"});if(t.label)if(!Re)L.shapeMap["node-label"]=L.addShape("text",{attrs:(0,v.__assign)((0,v.__assign)({},o.style),{x:Ce,y:t.description?-5:7,text:t.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var et=t.labelCfg?t.labelCfg.style:{},vt=(0,u.mix)({},Re.attr(),et);t.label&&(vt.text=t.label),vt.x=Ce,(0,u.isString)(t.description)&&(vt.y=-5),ke&&(ke.resetMatrix(),ke.attr({x:Ce})),Re.resetMatrix(),Re.attr(vt)}if((0,u.isString)(t.description)){var at=l.paddingTop;if(!ke)L.shapeMap["rect-description"]=L.addShape("text",{attrs:(0,v.__assign)((0,v.__assign)({},l.style),{x:Ce,y:17+(at||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var et=t.descriptionCfg?t.descriptionCfg.style:{},Mt=(0,u.mix)({},ke.attr(),et);(0,u.isString)(t.description)&&(Mt.text=t.description),Mt.x=Ce,ke.resetMatrix(),ke.attr((0,v.__assign)((0,v.__assign)({},Mt),{y:17+(at||0)}))}}var zt=L.shapeMap["pre-rect"]||L.find(function(Sa){return Sa.get("className")==="pre-rect"});if(zt&&!zt.destroyed){var Cr=(0,u.mix)({},zt.attr(),t.preRect);zt.attr((0,v.__assign)((0,v.__assign)({},Cr),{x:-p/2,y:-C/2,height:C}))}if(z&&!z.destroyed)if(!se&&se!==void 0)z.remove(),delete L.shapeMap["pre-rect"];else{var jr=ee.width,kr=ee.height,yr=ee.x,dn=ee.y,un=ee.offset,br=(0,v.__rest)(ee,["width","height","x","y","offset"]);z.attr((0,v.__assign)((0,v.__assign)({},br),{x:yr||-p/2+jr+un,y:dn||-kr/2,width:jr,height:kr}))}else se&&this.drawLogoIcon(t,L);var zr=L.shapeMap["rect-state-icon"]||L.find(function(Sa){return Sa.get("className")==="rect-state-icon"}),en=zr?zr.attr():{},Jr=(0,u.mix)({},en,t.stateIcon);if(zr){!Jr.show&&Jr.show!==void 0&&(zr.remove(),delete L.shapeMap["rect-state-icon"]);var yn=Jr.width,kr=Jr.height,yr=Jr.x,dn=Jr.y,An=Jr.offset,wa=(0,v.__rest)(Jr,["width","height","x","y","offset"]);zr.attr((0,v.__assign)((0,v.__assign)({},wa),{x:yr||p/2-yn+An,y:dn||-kr/2,width:yn,height:kr}))}else Jr.show&&this.drawStateIcon(t,L);this.updateLinkPoints(t,L)},getOptions:function(t,e){return e==="move"?t:(0,u.deepMix)({},this.options,this.getCustomConfig(t)||{},t)}},"single-node"),So("star",{options:{size:60,style:{stroke:rn.defaultNode.style.stroke,fill:rn.defaultNode.style.fill,lineWidth:rn.defaultNode.style.lineWidth},labelCfg:{style:{fill:rn.nodeLabel.style.fill,fontSize:rn.nodeLabel.style.fontSize,fontFamily:rn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:rn.defaultNode.linkPoints.size,lineWidth:rn.defaultNode.linkPoints.lineWidth,fill:rn.defaultNode.linkPoints.fill,stroke:rn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,v.__assign)({},rn.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(t),i=e.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});e.shapeMap["".concat(this.type,"-keyShape")]=i;var o=n.width,s=n.height,l=n.show,d=n.text;return l&&(d?e.shapeMap["".concat(this.type,"-icon")]=e.addShape("text",{attrs:(0,v.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.shapeMap["".concat(this.type,"-icon")]=e.addShape("image",{attrs:(0,v.__assign)({x:-o/2,y:-s/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(t,e),i},drawLinkPoints:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).linkPoints,n=r===void 0?{}:r,a=n.top,i=n.left,o=n.right,s=n.leftBottom,l=n.rightBottom,d=n.size,p=n.r,C=(0,v.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),S=this.getSize(t),L=S[0];if(o){var z=Math.cos(.1*Math.PI)*L,H=Math.sin((18+72*0)/180*Math.PI)*L;e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},C),{x:z,y:-H,r:d/2||p||5}),className:"link-point-right",name:"link-point-right"})}if(a){var z=Math.cos(.5*Math.PI)*L,H=Math.sin((18+72*1)/180*Math.PI)*L;e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},C),{x:z,y:-H,r:d/2||p||5}),className:"link-point-top",name:"link-point-top"})}if(i){var z=Math.cos(.9*Math.PI)*L,H=Math.sin((18+72*2)/180*Math.PI)*L;e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},C),{x:z,y:-H,r:d/2||p||5}),className:"link-point-left",name:"link-point-left"})}if(s){var z=Math.cos(1.3*Math.PI)*L,H=Math.sin((18+72*3)/180*Math.PI)*L;e.shapeMap["link-point-bottom"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},C),{x:z,y:-H,r:d/2||p||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(l){var z=Math.cos(1.7*Math.PI)*L,H=Math.sin((18+72*4)/180*Math.PI)*L;e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},C),{x:z,y:-H,r:d/2||p||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(t){var e=this.getSize(t),r=e[0],n=r*3/8,a=t.innerR||n;return to.getStarPath(r,a)},getShapeStyle:function(t){var e=(this.mergeStyle||this.getOptions(t)).style,r={stroke:t.color},n=(0,u.mix)({},e,r),a=this.getPath(t),i=(0,v.__assign)({path:a},n);return i},update:function(t,e,r){var n=e.getContainer(),a=this.getOptions({}).style,i=this.getPath(t),o={stroke:t.color,path:i},s=e.get("keyShape"),l=(0,u.mix)({},a,s.attr(),o);l=(0,u.mix)(l,t.style),this.updateShape(t,e,l,!0,r),this.updateLinkPoints(t,n)},updateLinkPoints:function(t,e){var r=this.getOptions({}).linkPoints,n=e.shapeMap["link-point-left"]||e.find(function(Mt){return Mt.get("className")==="link-point-left"}),a=e.shapeMap["link-point-right"]||e.find(function(Mt){return Mt.get("className")==="link-point-right"}),i=e.shapeMap["link-point-top"]||e.find(function(Mt){return Mt.get("className")==="link-point-top"}),o=e.shapeMap["link-point-left-bottom"]||e.find(function(Mt){return Mt.get("className")==="link-point-left-bottom"}),s=e.shapeMap["link-point-left-bottom"]||e.find(function(Mt){return Mt.get("className")==="link-point-right-bottom"}),l=r,d=n||a||i||o||s;d&&(l=d.attr());var p=(0,u.mix)({},l,t.linkPoints),C=p.fill,S=p.stroke,L=p.lineWidth,z=p.size/2;z||(z=p.r);var H=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},ee=H.left,ie=H.right,se=H.top,ye=H.leftBottom,Ce=H.rightBottom,Re=this.getSize(t),ke=Re[0],et={r:z,fill:C,stroke:S,lineWidth:L},vt=Math.cos((18+72*0)/180*Math.PI)*ke,at=Math.sin((18+72*0)/180*Math.PI)*ke;a?!ie&&ie!==void 0?(a.remove(),delete e.shapeMap["link-point-right"]):a.attr((0,v.__assign)((0,v.__assign)({},et),{x:vt,y:-at})):ie&&(e.shapeMap["link-point-right"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},et),{x:vt,y:-at}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),vt=Math.cos((18+72*1)/180*Math.PI)*ke,at=Math.sin((18+72*1)/180*Math.PI)*ke,i?!se&&se!==void 0?(i.remove(),delete e.shapeMap["link-point-top"]):i.attr((0,v.__assign)((0,v.__assign)({},et),{x:vt,y:-at})):se&&(e.shapeMap["link-point-top"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},et),{x:vt,y:-at}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),vt=Math.cos((18+72*2)/180*Math.PI)*ke,at=Math.sin((18+72*2)/180*Math.PI)*ke,n?!ee&&ee!==void 0?(n.remove(),delete e.shapeMap["link-point-left"]):n.attr((0,v.__assign)((0,v.__assign)({},et),{x:vt,y:-at})):ee&&(e.shapeMap["link-point-left"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},et),{x:vt,y:-at}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),vt=Math.cos((18+72*3)/180*Math.PI)*ke,at=Math.sin((18+72*3)/180*Math.PI)*ke,o?!ye&&ye!==void 0?(o.remove(),delete e.shapeMap["link-point-left-bottom"]):o.attr((0,v.__assign)((0,v.__assign)({},et),{x:vt,y:-at})):ye&&(e.shapeMap["link-point-left-bottom"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},et),{x:vt,y:-at}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),vt=Math.cos((18+72*4)/180*Math.PI)*ke,at=Math.sin((18+72*4)/180*Math.PI)*ke,s?!Ce&&Ce!==void 0?(s.remove(),delete e.shapeMap["link-point-right-bottom"]):s.attr((0,v.__assign)((0,v.__assign)({},et),{x:vt,y:-at})):Ce&&(e.shapeMap["link-point-right-bottom"]=e.addShape("circle",{attrs:(0,v.__assign)((0,v.__assign)({},et),{x:vt,y:-at}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var Ed=to.defaultSubjectColors,Tl="fan-shape-";So("donut",{options:{size:rn.defaultNode.size,style:{x:0,y:0,stroke:rn.defaultNode.style.stroke,fill:rn.defaultNode.style.fill,lineWidth:rn.defaultNode.style.lineWidth},labelCfg:{style:{fill:rn.nodeLabel.style.fill,fontSize:rn.nodeLabel.style.fontSize,fontFamily:rn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:rn.defaultNode.linkPoints.size,lineWidth:rn.defaultNode.linkPoints.lineWidth,fill:rn.defaultNode.linkPoints.fill,stroke:rn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,v.__assign)({},rn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var r=(this.mergeStyle||this.getOptions(t)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(t),i=(0,u.deepMix)({},n,t.icon),o=e.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});e.shapeMap["".concat(this.type,"-keyShape")]=o;var s=i.width,l=i.height,d=i.show,p=i.text;return d&&(p?e.shapeMap["".concat(this.type,"-icon")]=e.addShape("text",{attrs:(0,v.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):e.shapeMap["".concat(this.type,"-icon")]=e.addShape("image",{attrs:(0,v.__assign)({x:-s/2,y:-l/2},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),mv(t,e,o),this.drawLinkPoints(t,e),o},updateShape:function(t,e,r,n,a){var i=e.get("keyShape");i.attr((0,v.__assign)({},r)),Ev(t,e,i),this.updateLabel(t,e,a),n&&this.updateIcon(t,e)}},"circle");var mv=function(t,e,r){var n=t.donutAttrs,a=n===void 0?{}:n,i=t.donutColorMap,o=i===void 0?{}:i,s=Object.keys(a).length;if(a&&s>1){var l=bd(a,o),d=l.configs,p=l.totalValue;if(p){var C=xd(r),S=C.lineWidth,L=C.arcR,z=[L,0],H=0;if(s===1){Hl(e,{arcR:L,arcBegin:z,beginAngle:H,config:d[0],fanIndex:0,lineWidth:S,totalValue:p,drawWhole:!0});return}for(var ee=0;ee<d.length;ee++){var ie=Hl(e,{arcR:L,arcBegin:z,beginAngle:H,config:d[ee],fanIndex:ee,lineWidth:S,totalValue:p});if(ie.shouldEnd)return;z=ie.arcBegin,H=ie.beginAngle}}}},Hl=function(t,e){var r=e.arcR,n=e.arcBegin,a=e.beginAngle,i=e.config,o=e.fanIndex,s=e.lineWidth,l=e.totalValue,d=e.drawWhole,p=d===void 0?!1:d,C=e.updateShape,S=C===void 0?void 0:C,L=i.value/l;if(L<.001)return{beginAngle:a,arcBegin:n,shape:void 0,shouldEnd:!1};var z,H,ee;if(p||L>.999)z=[r,1e-4],ee=1;else{var ie=L*Math.PI*2;H=a+ie,z=[r*Math.cos(H),-r*Math.sin(H)],ee=ie>Math.PI?1:0}var se={path:[["M",n[0],n[1]],["A",r,r,0,ee,0,z[0],z[1]]],stroke:i.color||(S==null?void 0:S.attr("stroke"))||Ed[o%Ed.length],lineWidth:s};return S?S.attr(se):t.shapeMap["".concat(Tl).concat(o)]=t.addShape("path",{attrs:se,name:"".concat(Tl).concat(o),draggable:!0}),{beginAngle:H,arcBegin:z,shape:t.shapeMap["".concat(Tl).concat(o)],shouldEnd:p||L>.999}},Ev=function(t,e,r){var n=t.donutAttrs,a=t.donutColorMap,i=a===void 0?{}:a,o={},s=e.getContainer();if(n){var l=bd(n,i),d=l.configs,p=l.totalValue;if(p)for(var C=xd(r),S=C.lineWidth,L=C.arcR,z=[L,0],H=0,ee=0;ee<d.length;ee++){var ie="".concat(Tl).concat(ee),se=Hl(s,{arcR:L,arcBegin:z,beginAngle:H,config:d[ee],fanIndex:ee,lineWidth:S,totalValue:p,drawWhole:d.length===1,updateShape:s.shapeMap[ie]});if(se.shape&&(o[ie]=!0),se.shouldEnd)break;z=se.arcBegin,H=se.beginAngle}}var ye=Object.keys(s.shapeMap).filter(function(Ce){return Ce.includes(Tl)});ye.forEach(function(Ce){o[Ce]||(s.shapeMap[Ce].remove(!0),delete s.shapeMap[Ce])})},bd=function(t,e){var r=0,n=[];return Object.keys(t).forEach(function(a){var i=+t[a];isNaN(i)||(n.push({key:a,value:i,color:e[a]}),r+=i)}),{totalValue:r,configs:n}},xd=function(t){var e=t.attr("r"),r=.6*e,n=(e+r)/2,a=e-r;return{lineWidth:a,arcR:n}},Dl=function(t){var e=t.x,r=t.y;return{x:e,y:r,centerX:e,centerY:r,minX:e,minY:r,maxX:e,maxY:r,height:0,width:0}},bv=function(t){t===void 0&&(t=[]);var e=[],r=[];t.forEach(function(s){e.push(s.x),r.push(s.y)});var n=Math.min.apply(Math,e),a=Math.max.apply(Math,e),i=Math.min.apply(Math,r),o=Math.max.apply(Math,r);return{centerX:(n+a)/2,centerY:(i+o)/2,maxX:a,maxY:o,minX:n,minY:i,height:o-i,width:a-n}},Vg=function(t,e){return Math.abs(t.centerX-e.centerX)*2<t.width+e.width&&Math.abs(t.centerY-e.centerY)*2<t.height+e.height},Zl=function(t){for(var e=[],r={},n=t.length,a=n-1;a>=0;a--){var i=t[a];i.id="".concat(i.x,"|||").concat(i.y),r[i.id]||(r[i.id]=i,e.push(i))}return e},wd=function(t){return Zl(t)},Yg=function(t,e){return[t,{x:t.x,y:e.y},e]},Nl=function(t,e){return t.width||t.height?{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}:t},xv=function(t,e){var r=Math.abs(t.x-e.centerX),n=Math.abs(t.y-e.centerY);return r===0&&n===0?0:r/e.width>n/e.height},Kl=function(t,e,r){var n=xv(e,t);if(n===0){var a=t.centerX,i=t.centerY;return r.y<e.y?i=t.minY:r.x>e.x?a=t.maxX:r.x<e.x?a=t.minX:r.x===e.x&&(i=t.maxY),{x:a,y:i}}return n?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}},Sd=function(t,e){var r=Math.min(t.minX,e.minX),n=Math.min(t.minY,e.minY),a=Math.max(t.maxX,e.maxX),i=Math.max(t.maxY,e.maxY);return{centerX:(r+a)/2,centerY:(n+i)/2,minX:r,minY:n,maxX:a,maxY:i,height:i-n,width:a-r}},$l=function(t){return[{x:t.minX,y:t.minY},{x:t.maxX,y:t.minY},{x:t.maxX,y:t.maxY},{x:t.minX,y:t.maxY}]},Pl=function(t,e){var r=t.x,n=t.y;return r<e.minX||r>e.maxX||n<e.minY||n>e.maxY},wv=function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]},Sv=function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]},_v=function(t,e){return wv(t,e.x).concat(Sv(t,e.y))},Il=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},Mv=function(t,e){var r=-2,n=0;return e.forEach(function(a){a&&(t.x===a.x&&(n+=r),t.y===a.y&&(n+=r))}),n},_d=function(t,e,r,n,a){return Il(t,e)+Il(t,r)+Mv(t,[e,r,n,a])},Cv=function f(t,e,r,n,a){a===void 0&&(a=0),t.unshift(e[n]),r[n]&&r[n]!==n&&a<=100&&f(t,e,r,r[n],a+1)},jg=function(t,e){var r=t.indexOf(e);r>-1&&t.splice(r,1)},kl=function(t,e,r,n){var a=r.x-t.x,i=r.y-t.y,o=n.x-t.x,s=n.y-t.y,l=r.x-e.x,d=r.y-e.y,p=n.x-e.x,C=n.y-e.y,S=a*s-i*o,L=l*C-d*p,z=a*d-i*l,H=o*C-s*p;return S*L<=0&&z*H<=0},Ql=function(t,e,r){if(r.width||r.height){var n=$l(r),a=n[0],i=n[1],o=n[2],s=n[3];return kl(t,e,a,i)||kl(t,e,a,s)||kl(t,e,i,o)||kl(t,e,o,s)}return!1},Tv=function(t,e,r,n){var a=[];return t.forEach(function(i){if(i!==e&&(i.x===e.x||i.y===e.y)){if(Ql(i,e,r)||Ql(i,e,n))return;a.push(i)}}),Zl(a)},Iv=function(t,e,r,n,a,i,o){var s,l=[],d=(s={},s[e.id]=e,s),p={},C={},S={};C[e.id]=0,S[e.id]=_d(e,r,e);var L=new Td;L.add({id:e.id,value:S[e.id]});var z={};t.forEach(function(Ce){z[Ce.id]=Ce});for(var H;Object.keys(d).length;){var ee=L.minId(!1);if(ee)H=d[ee];else break;if(H===r){var ie=[];return Cv(ie,z,p,r.id),ie}delete d[H.id],L.remove(H.id),l.push(H);var se=Tv(t,H,n,a),ye=function(Re){Re.forEach(function(ke){if(l.indexOf(ke)===-1){var et=ke.id;d[et]||(d[et]=ke);var vt=S[H.id]+Il(H,ke);if(C[et]&&vt>=C[et]){L.add({id:et,value:S[et]});return}p[et]=H.id,C[et]=vt,S[et]=C[et]+_d(ke,r,e,i,o),L.add({id:et,value:S[et]})}})};ye(se)}return[e,r]},Av=function(t,e,r){return!(t.x===e.x&&e.x===r.x||t.y===e.y&&e.y===r.y)},Ov=function(t,e,r,n){var a=Il(t,e),i=Il(r,e);a<n&&(n=a),i<n&&(n=i);var o={x:e.x-n/a*(e.x-t.x),y:e.y-n/a*(e.y-t.y)},s={x:e.x-n/i*(e.x-r.x),y:e.y-n/i*(e.y-r.y)};return[o,s]},Md=function(t,e){var r=[],n=t[0];return r.push("M".concat(n.x," ").concat(n.y)),t.forEach(function(a,i){var o=t[i+1],s=t[i+2];if(o&&s)if(Av(a,o,s)){var l=Ov(a,o,s,e),d=l[0],p=l[1];r.push("L".concat(d.x," ").concat(d.y)),r.push("Q".concat(o.x," ").concat(o.y," ").concat(p.x," ").concat(p.y)),r.push("L".concat(p.x," ").concat(p.y))}else r.push("L".concat(o.x," ").concat(o.y));else o&&r.push("L".concat(o.x," ").concat(o.y))}),r.join("")},Cd=function(t,e,r,n,a){var i,o;if(!r||!r.getType())i=Dl(t);else if(r.getType()==="combo"){var s=r.getKeyShape().getBBox();if(s){var l=r.getModel(),d=l.x,p=l.y;i={x:d,y:p,width:s.width,height:s.height,minX:s.minX+d,maxX:s.maxX+d,minY:s.minY+p,maxY:s.maxY+p},i.centerX=(i.minX+i.maxX)/2,i.centerY=(i.minY+i.maxY)/2}else i=Dl(t)}else i=r&&r.getBBox();if(!n||!n.getType())o=Dl(e);else if(n.getType()==="combo"){var C=n.getKeyShape().getBBox();if(C){var S=n.getModel(),L=S.x,z=S.y;o={x:L,y:z,width:C.width,height:C.height,minX:C.minX+L,maxX:C.maxX+L,minY:C.minY+z,maxY:C.maxY+z},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=Dl(e)}else o=n&&n.getBBox();var H=Nl(i,a),ee=Nl(o,a),ie=Kl(H,t,e),se=Kl(ee,e,t),ye=bv([ie,se]),Ce=Sd(H,ye),Re=Sd(ee,ye),ke=[];ke=ke.concat($l(Ce)).concat($l(Re));var et={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[ye,Ce,Re].forEach(function(at){ke=ke.concat(_v(at,et).filter(function(Mt){return Pl(Mt,H)&&Pl(Mt,ee)}))}),[{x:ie.x,y:se.y},{x:se.x,y:ie.y}].forEach(function(at){Pl(at,H)&&Pl(at,ee)&&ke.push(at)}),ke.unshift(ie),ke.push(se),ke=Zl(ke);var vt=Iv(ke,ie,se,i,o,t,e);return vt.unshift(t),vt.push(e),wd(vt)},Lv=function(t){if(!(t!=null&&t.length))return t;for(var e=t[t.length-1],r={x:e.x,y:e.y},n=[e],a=[e],i=t.length-2;i>=0;i--){var o=t[i];if(o.x===r.x?n.push(o):(n=[o],r.x=o.x),o.y===r.y?a.push(o):(a=[o],r.y=o.y),n.length>2){var s=t.indexOf(n[1]);s>-1&&t.splice(s,1);continue}if(a.length>2){var s=t.indexOf(a[1]);s>-1&&t.splice(s,1)}}return t},Td=function(){function f(){this.arr=[],this.map={},this.arr=[],this.map={}}return f.prototype._innerAdd=function(t,e){for(var r=[0,e-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>t.value)r[1]=n;else if(this.arr[n].value<t.value)r[0]=n;else{this.arr.splice(n,0,t),this.map[t.id]=!0;return}}this.arr.splice(r[1],0,t),this.map[t.id]=!0},f.prototype.add=function(t){delete this.map[t.id];var e=this.arr.length;if(!e){this.arr.push(t),this.map[t.id]=!0;return}if(this.arr[e-1].value<t.value){this.arr.push(t),this.map[t.id]=!0;return}this._innerAdd(t,e)},f.prototype.remove=function(t){this.map[t]&&delete this.map[t]},f.prototype._clearAndGetMinId=function(){for(var t,e=this.arr.length-1;e>=0;e--)this.map[this.arr[e].id]?t=this.arr[e].id:this.arr.splice(e,1);return t},f.prototype._findFirstId=function(){for(;this.arr.length;){var t=this.arr.shift();if(this.map[t.id])return t.id}},f.prototype.minId=function(t){return t?this._clearAndGetMinId():this._findFirstId()},f}(),Dv=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},Nv=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},Pv=function(t,e){return[t,e]},kv=function(t,e,r,n,a){return wd(Cd(t,e,r,n,a.offset))},Rv={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:Dv,fallbackRoute:kv},Hg={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:Nv,fallbackRoute:Pv},Tf=function(t,e){var r=Math.round(Math.abs(t/e)),n=t<0?-1:1;return r<0?0:n*r},Bv=function(t,e,r){var n={};return t.forEach(function(a){if(a)for(var i=Nl(a.getBBox(),r),o=Tf(i.minX,e);o<=Tf(i.maxX,e);o+=1)for(var s=Tf(i.minY,e);s<=Tf(i.maxY,e);s+=1)n["".concat(o,"|||").concat(s)]=!0}),n},ql=function(t,e){var r=e.x-t.x,n=e.y-t.y;return r||n?Math.atan2(n,r):0},Id=function(t,e){var r=Math.abs(t-e);return r>Math.PI?2*Math.PI-r:r},Ad=function(t,e,r){for(var n=1/0,a=0,i=e.length;a<i;a++){var o=r(t,e[a]);o<n&&(n=o)}return n},Od=function(t,e,r,n,a){var i=[];if(!r)return[t];var o=a.directions,s=a.offset,l=r.getBBox(),d=e.x>l.minX&&e.x<l.maxX&&e.y>l.minY&&e.y<l.maxY,p=Nl(l,s);for(var C in p)p[C]=Tf(p[C],a.gridSize);if(d){for(var S=0,L=o;S<L.length;S++)for(var z=L[S],H=[[{x:p.minX,y:p.minY},{x:p.maxX,y:p.minY}],[{x:p.minX,y:p.minY},{x:p.minX,y:p.maxY}],[{x:p.maxX,y:p.minY},{x:p.maxX,y:p.maxY}],[{x:p.minX,y:p.maxY},{x:p.maxX,y:p.maxY}]],C=0;C<4;C++){var ee=H[C],ie=to.getLineIntersect(t,{x:t.x+z.stepX*p.width,y:t.y+z.stepY*p.height},ee[0],ee[1]);ie&&!Ql(t,ie,l)&&(ie.id="".concat(ie.x,"|||").concat(ie.y),i.push(ie))}return i}var se=Kl(p,t,n);return se.id="".concat(se.x,"|||").concat(se.y),[se]},Jl=function(t,e,r,n){var a=ql(t,e),i=r[t.id];if(!i){var o=ql(n,t);return Id(o,a)}var s=ql({x:i.x,y:i.y},t);return Id(s,a)},Fv=function(t,e,r,n,a,i,o){var s=[n],l=n,d=t.id,p=t.x,C=t.y,S={x:p,y:C,id:d};Jl(S,i,e,r)&&(l={x:i.x===n.x?n.x:S.x*o,y:i.y===n.y?n.y:S.y*o},s.unshift(l));for(var L=e[d];L&&L.id!==d;){var z={x:p,y:C,id:d},H={x:L.x,y:L.y,id:L.id},ee=Jl(H,z,e,r);ee&&(l={x:H.x===z.x?l.x:H.x*o,y:H.y===z.y?l.y:H.y*o},s.unshift(l)),d=H.id,p=H.x,C=H.y,L=e[d]}return s[0].x=p===r.x?a.x:l.x,s[0].y=C===r.y?a.y:l.y,s.unshift(a),s},Gv=function(t,e,r,n,a){if(isNaN(t.x)||isNaN(e.x))return[];var i=(0,u.deepMix)(Rv,a);i.obstacles=i.obstacles||[];var o=i.penalties,s=i.gridSize,l=Bv(i.obstacles.concat([r,n]),s,i.offset),d={x:Tf(t.x,s),y:Tf(t.y,s)},p={x:Tf(e.x,s),y:Tf(e.y,s)};t.id="".concat(d.x,"|||").concat(d.y),e.id="".concat(p.x,"|||").concat(p.y);var C=Od(d,t,r,p,i),S=Od(p,e,n,d,i);C.forEach(function(br){delete l[br.id]}),S.forEach(function(br){delete l[br.id]});for(var L={},z={},H={},ee={},ie={},se=new Td,ye=0;ye<C.length;ye++){var Ce=C[ye];L[Ce.id]=Ce,ee[Ce.id]=0,ie[Ce.id]=Ad(Ce,S,i.distFunc),se.add({id:Ce.id,value:ie[Ce.id]})}var Re=i.maximumLoops,ke,et,vt,at,Mt,zt,Cr=1/0,jr={};for(S.forEach(function(br){jr["".concat(br.x,"|||").concat(br.y)]=!0}),Object.keys(L).forEach(function(br){var zr=L[br].id;ie[zr]<=Cr&&(Cr=ie[zr],ke=L[zr])});Object.keys(L).length>0&&Re>0;){var kr=se.minId((Re+1)%30===0);if(kr)ke=L[kr];else break;if(jr["".concat(ke.x,"|||").concat(ke.y)])return Fv(ke,H,d,e,t,p,s);delete L[ke.id],se.remove(ke.id),z[ke.id]=!0;for(var ye=0;ye<i.directions.length;ye++){et=i.directions[ye];var yr="".concat(Math.round(ke.x)+et.stepX,"|||").concat(Math.round(ke.y)+et.stepY);if(vt={x:ke.x+et.stepX,y:ke.y+et.stepY,id:yr},!z[yr]&&(zt=Jl(ke,vt,H,d),!(zt>i.maxAllowedDirectionChange)&&!l[yr])){L[yr]||(L[yr]=vt);var dn=o[zt];at=i.distFunc(ke,vt)+(isNaN(dn)?s:dn),Mt=ee[ke.id]+at;var un=ee[yr];un&&Mt>=un||(H[yr]=ke,ee[yr]=Mt,ie[yr]=Mt+Ad(vt,S,i.distFunc),se.add({id:yr,value:ie[yr]}))}}Re-=1}return i.fallbackRoute(t,e,r,n,i)};ku("polyline",{options:{color:rn.defaultEdge.color,size:rn.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:rn.defaultEdge.style.stroke,lineAppendWidth:rn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:rn.edgeLabel.style.fill,fontSize:rn.edgeLabel.style.fontSize,fontFamily:rn.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,v.__assign)({},rn.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(t,e){var r=this.getShapeStyle(t);r.radius===0&&delete r.radius;var n=e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return e.shapeMap["edge-shape"]=n,n},getShapeStyle:function(t){var e=this.options.style,r={stroke:t.color},n=(0,u.mix)({},e,r,t.style);t=this.getPathPoints(t),this.radius=n.radius,this.offset=n.offset;var a=t.startPoint,i=t.endPoint,o=this.getControlPoints(t),s=[a];o&&(s=s.concat(o)),s.push(i);var l=t.sourceNode,d=t.targetNode,p=n.radius,C=this.options.routeCfg,S=(0,u.mix)({},C,t.routeCfg);S.offset=n.offset;var L=this.getPath(s,l,d,p,S,!o);((0,u.isArray)(L)&&L.length<=1||(0,u.isString)(L)&&L.indexOf("L")===-1)&&(L="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(i.x)||isNaN(i.y))&&(L="M0 0, L0 0");var z=(0,u.mix)({},rn.defaultEdge.style,n,{lineWidth:t.size,path:L});return z},updateShapeStyle:function(t,e){var r=e.getContainer();if(e.isVisible()){var n={stroke:t.color},a=r.shapeMap["edge-shape"]||r.find(function(ye){return ye.get("className")==="edge-shape"})||e.getKeyShape(),i=t.size;t=this.getPathPoints(t);var o=t.startPoint,s=t.endPoint,l=this.getControlPoints(t),d=[o];l&&(d=d.concat(l)),d.push(s);var p=a.attr(),C=(0,u.mix)({},n,p,t.style),S=t.sourceNode,L=t.targetNode,z=C.radius,H=this.options.routeCfg,ee=(0,u.mix)({},H,t.routeCfg);ee.offset=C.offset;var ie=this.getPath(d,S,L,z,ee,!l);((0,u.isArray)(ie)&&ie.length<=1||(0,u.isString)(ie)&&ie.indexOf("L")===-1)&&(ie="M0 0, L0 0"),(isNaN(o.x)||isNaN(o.y)||isNaN(s.x)||isNaN(s.y))&&(ie="M0 0, L0 0"),p.endArrow&&C.endArrow===!1&&(t.style.endArrow={path:""}),p.startArrow&&C.startArrow===!1&&(t.style.startArrow={path:""});var se=(0,u.mix)(n,a.attr(),{lineWidth:i,path:ie},t.style);a&&a.attr(se)}},getPath:function(t,e,r,n,a,i){var o=a.offset,s=a.obstacles,l=a.simple;if(!o||t.length>2||i===!1){if(n)return Md(t,n);var d=[];return(0,u.each)(t,function(L,z){z===0?d.push(["M",L.x,L.y]):d.push(["L",L.x,L.y])}),d}l!==!1&&!(s!=null&&s.length)&&(l=!0);var p=l?Cd(t[t.length-1],t[0],r,e,o):Gv(t[0],t[t.length-1],e,r,a);if(!p||!p.length)return"M0 0, L0 0";if(n){var C=Md(p,n);return C}p=Lv(p);var S=to.pointsToPolygon(p);return S}},"single-edge");var Ld=Rs.cloneEvent,Dd=Rs.isNaN,Nd=Math.abs,zv=10,Uv=["shift","ctrl","alt","control"],Wv={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(t){var e=this.origin,r=+t.clientX,n=+t.clientY;if(!(Dd(r)||Dd(n))){var a=r-e.x,i=n-e.y;this.get("direction")==="x"?i=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:n};var o=this.graph.get("width"),s=this.graph.get("height"),l=this.graph.get("canvas").getCanvasBBox(),d=this.scalableRange,p=this.scalableRange;d<1&&d>-1&&(d=o*d,p=s*p),(l.minX<=o+d&&l.minX+a>o+d||l.maxX+d>=0&&l.maxX+d+a<0)&&(a=0),(l.minY<=s+p&&l.minY+i>s+p||l.maxY+p>=0&&l.maxY+p+i<0)&&(i=0),this.graph.translate(a,i)}},onTouchStart:function(t){var e=this,r=t.originalEvent.touches,n=r[0],a=r[1];n&&a||(t.preventDefault(),this.mousedown=!0,e.onDragStart(t))},onMouseDown:function(t){this.mousedown=!0},onDragMove:function(t){this.mousedown&&(this.dragstart?this.onDrag(t):(this.dragstart=!0,this.onDragStart(t)))},onDragStart:function(t){var e=this,r=t.originalEvent;if(!(r&&t.name!=="touchstart"&&r.button!==0)&&!(t.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(t,this)&&!e.keydown&&this.allowDrag(t)){if(e.origin={x:t.clientX,y:t.clientY},e.dragging=!1,this.enableOptimize){for(var n=this.graph,a=n.getEdges(),i=0,o=a.length;i<o;i++){var s=a[i].get("group").get("children");s&&s.forEach(function(se){se.set("ori-visibility",se.get("ori-visibility")||se.get("visible")),se.hide()})}for(var l=n.getNodes(),d=0,p=l.length;d<p;d++)for(var C=l[d].getContainer(),S=C.get("children"),L=0,z=S;L<z.length;L++){var H=z[L],ee=H.get("isKeyShape");ee||(H.set("ori-visibility",H.get("ori-visibility")||H.get("visible")),H.hide())}}if(typeof window!="undefined"){var ie=this;this.handleDOMContextMenu=function(se){return ie.onMouseUp(se)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(t){var e=this,r=t.originalEvent.touches,n=r[0],a=r[1];if(n&&a){this.onMouseUp(t);return}t.preventDefault(),e.onDrag(t)},onDrag:function(t){if(this.mousedown){var e=this.graph;if(!this.keydown&&this.allowDrag(t)&&(t=Ld(t),!!this.origin)){if(this.dragging)t.type="drag",e.emit("canvas:drag",t);else{if(Nd(this.origin.x-t.clientX)+Nd(this.origin.y-t.clientY)<zv)return;this.shouldBegin(t,this)&&(t.type="dragstart",e.emit("canvas:dragstart",t),this.originPosition={x:t.clientX,y:t.clientY},this.dragging=!0)}this.shouldUpdate(t,this)&&this.updateViewport(t)}}},onMouseUp:function(t){var e,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var a=n.getZoom(),i=n.get("modeController"),o=(r=(e=i==null?void 0:i.modes[i.mode])===null||e===void 0?void 0:e.filter(function(ke){return ke.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],s=o?o.optimizeZoom||.1:0;if(this.enableOptimize){for(var l=n.getEdges(),d=0,p=l.length;d<p;d++){var C=l[d].get("group").get("children");C&&C.forEach(function(ke){var et=ke.get("ori-visibility");ke.set("ori-visibility",void 0),et&&ke.show()})}if(a>s)for(var S=n.getNodes(),L=0,z=S.length;L<z;L++)for(var H=S[L].getContainer(),ee=H.get("children"),ie=0,se=ee;ie<se.length;ie++){var ye=se[ie],Ce=ye.get("isKeyShape");if(!Ce){var Re=ye.get("ori-visibility");ye.set("ori-visibility",void 0),Re&&ye.show()}}}if(!this.dragging){this.origin=null;return}t=Ld(t),this.shouldEnd(t,this)&&this.updateViewport(t),t.type="dragend",t.dx=t.clientX-this.originPosition.x,t.dy=t.clientY-this.originPosition.y,n.emit("canvas:dragend",t),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(t){var e=this,r=t.key;r&&(Uv.indexOf(r.toLowerCase())>-1?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(t){var e,r,n=t.target,a=n&&n.isCanvas&&n.isCanvas();if((0,u.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,u.isObject)(this.allowDragOnItem)){var i=this.allowDragOnItem,o=i.node,s=i.edge,l=i.combo,d=(r=(e=t.item)===null||e===void 0?void 0:e.getType)===null||r===void 0?void 0:r.call(e);if(!o&&d==="node"||!s&&d==="edge"||!l&&d==="combo")return!1}return!0}},Xv={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(t){if(!this.origin||!t||t.destroyed)return!1;var e=t.getType();return e==="combo"},onTouchStart:function(t){if(t.item){var e=this;try{var r=t.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;t.preventDefault()}catch(i){console.warn("Touch original event not exist!")}this.mousedown={item:t.item,target:t.target,origin:{x:t.x,y:t.y}},this.dragstart=!0,e.onDragStart(t)}},onTouchMove:function(t){var e=this;try{var r=t.originalEvent.touches,n=r[0],a=r[1];if(n&&a){e.onDragEnd(t);return}t.preventDefault()}catch(i){console.warn("Touch original event not exist!")}e.onDrag(t)},onMouseDown:function(t){this.mousedown={item:t.item,target:t.target,origin:{x:t.x,y:t.y}},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(t){var e,r;if(((r=(e=t.item)===null||e===void 0?void 0:e.getType)===null||r===void 0?void 0:r.call(e))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,v.__assign)((0,v.__assign)({},t),this.mousedown)):(this.dragstart=!0,this.onDragStart(t)))},onDragStart:function(t){var e=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,v.__assign)((0,v.__assign)({},t),this.mousedown),this)){var r=this.mousedown,n=r.item,a=r.target;if(!(!n||n.destroyed||n.hasLocked())){var i=n.getContainer();if(i.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),a){var o=a.get("isAnchorPoint");if(o)return}var s=this.graph;this.targets=[],this.targetCombo=null;var l=s.findAllByState("node",this.selectedState),d=n.get("id"),p=l.filter(function(S){var L=S.get("id");return d===L});if(p.length===0?this.targets.push(n):l.length>1?l.forEach(function(S){var L=S.hasLocked();L||e.targets.push(S)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var C=[];this.targets.forEach(function(S){var L=S.getModel(),z=L.x,H=L.y,ee=L.id;C.push({x:z,y:H,id:ee})}),this.set("beforeDragNodes",C)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(S){var L=S.getEdges();L.forEach(function(z){z.isVisible()&&(e.hidenEdge[z.getID()]=!0,z.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(t){var e=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(t,this))if(this.get("enableDelegate"))this.updateDelegate(t);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){e.update(n,t);var a=n.getModel().comboId;a&&(r[a]=e.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(t){var e=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(i){var o=i.getContainer();o.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(i){var o=i.getEdges();o.forEach(function(s){e.hidenEdge[s.getID()]&&s.show(),s.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(i){a.before.nodes.push(i)}),this.targets.forEach(function(i){var o=i.getModel(),s=o.x,l=o.y,d=o.id;a.after.nodes.push({x:s,y:l,id:d})}),n.pushStack("update",(0,u.clone)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(t){var e=t.item;if(this.currentShouldEnd=this.shouldEnd(t,e,this),this.updatePositions(t,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(e))){var r=this.graph;if(this.comboActiveState&&r.setItemState(e,this.comboActiveState,!1),this.targetCombo=e,this.onlyChangeComboSize)r.updateCombos();else{var n=e.getModel();this.targets.map(function(a){var i=a.getModel();i.comboId!==n.id&&r.updateComboTree(a,n.id)}),r.updateCombo(e)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(t){var e=this.graph;this.currentShouldEnd=this.shouldEnd(t,void 0,this),this.updatePositions(t,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&e.updateComboTree(r)}))},onDropNode:function(t){if(!(!this.targets||this.targets.length===0)){var e=this,r=t.item,n=e.graph,a=r.getModel().comboId,i=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(t,i,this),this.updatePositions(t,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var o=n.findById(a);e.comboActiveState&&n.setItemState(o,e.comboActiveState,!1),this.targets.map(function(s){var l=s.getModel();a!==l.comboId&&n.updateComboTree(s,a)}),n.updateCombo(o)}else this.targets.map(function(s){var l=s.getModel();l.comboId&&n.updateComboTree(s)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(t){var e=t.item;if(this.validationCombo(e)){var r=this.graph;this.comboActiveState&&r.setItemState(e,this.comboActiveState,!0)}},onDragLeave:function(t){var e=t.item;if(this.validationCombo(e)){var r=this.graph;this.comboActiveState&&r.setItemState(e,this.comboActiveState,!1)}},updatePositions:function(t,e){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:t,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):e||this.targets.map(function(n){return r.update(n,t)}):this.targets.map(function(n){return r.update(n,t,e)}))},update:function(t,e,r){var n=this.origin,a=t.get("model"),i=t.get("id");this.point[i]||(this.point[i]={x:a.x||0,y:a.y||0});var o=e.x-n.x+this.point[i].x,s=e.y-n.y+this.point[i].y;r&&(o+=n.x-e.x,s+=n.y-e.y);var l={x:o,y:s};this.get("updateEdge")?this.graph.updateItem(t,l,!1):t.updatePosition(l)},debounceUpdate:(0,u.debounce)(function(f){var t=f.targets,e=f.graph,r=f.point,n=f.origin,a=f.evt,i=f.updateEdge,o=f.onlyChangeComboSize,s=f.updateParentCombos;t.map(function(l){var d=l.get("model"),p=l.get("id");r[p]||(r[p]={x:d.x||0,y:d.y||0});var C=a.x-n.x+r[p].x,S=a.y-n.y+r[p].y,L={x:C,y:S};i?e.updateItem(l,L,!1):l.updatePosition(L)}),o&&s(e,t)},50,!0),updateDelegate:function(t){var e=this.graph;if(this.delegateRect){var C=t.x-this.origin.x+this.originPoint.minX,S=t.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:C,y:S})}else{var r=e.get("group"),n=(0,u.deepMix)({},ss.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(t),i=a.x,o=a.y,s=a.width,l=a.height,d=a.minX,p=a.minY;this.originPoint={x:i,y:o,width:s,height:l,minX:d,minY:p},this.delegateRect=r.addShape("rect",{attrs:(0,v.__assign)({width:s,height:l,x:i,y:o},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(t){var e=this.targets;e.length===0&&e.push(t.item);for(var r=1/0,n=-1/0,a=1/0,i=-1/0,o=0;o<e.length;o++){var s=e[o],l=s.getBBox(),d=l.minX,p=l.minY,C=l.maxX,S=l.maxY;d<r&&(r=d),p<a&&(a=p),C>n&&(n=C),S>i&&(i=S)}var L=Math.floor(r),z=Math.floor(a),H=Math.ceil(n)-Math.floor(r),ee=Math.ceil(i)-Math.floor(a);return{x:L,y:z,width:H,height:ee,minX:r,minY:a}},updateParentCombos:function(t,e){var r=t||this.graph,n=e||this.targets,a={};n==null||n.forEach(function(i){var o=i.getModel().comboId;o&&(a[o]=r.findById(o))}),Object.values(a).forEach(function(i){i&&r.updateCombo(i)})}},Vv={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(t){var e=this;try{var r=t.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;t.preventDefault()}catch(i){console.warn("Touch original event not exist!")}e.setAllItemStates(t)},clearOnTouchStart:function(t){var e=this;try{var r=t.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;t.preventDefault()}catch(i){console.warn("Touch original event not exist!")}e.clearActiveState(t)},setAllItemStates:function(t){clearTimeout(this.timer),this.throttleSetAllItemStates(t,this)},clearActiveState:function(t){var e=this;this.timer=setTimeout(function(){e.throttleClearActiveState(t,e)},50)},throttleSetAllItemStates:(0,u.throttle)(function(f,t){var e=f.item,r=t.graph;if(!(!r||r.destroyed)&&(t.item=e,!!t.shouldUpdate(f.item,{event:f,action:"activate"},t))){for(var n=t.activeState,a=t.inactiveState,i=r.getNodes(),o=r.getCombos(),s=r.getEdges(),l=r.get("vedges"),d=i.length,p=o.length,C=s.length,S=l.length,L=t.inactiveItems||{},z=t.activeItems||{},H=0;H<d;H++){var ee=i[H],ie=ee.getID(),se=ee.hasState("selected");t.resetSelected&&se&&r.setItemState(ee,"selected",!1),z[ie]&&(r.setItemState(ee,n,!1),delete z[ie]),a&&!L[ie]&&(r.setItemState(ee,a,!0),L[ie]=ee)}for(var H=0;H<p;H++){var ye=o[H],Ce=ye.getID(),se=ye.hasState("selected");t.resetSelected&&se&&r.setItemState(ye,"selected",!1),z[Ce]&&(r.setItemState(ye,n,!1),delete z[Ce]),a&&!L[Ce]&&(r.setItemState(ye,a,!0),L[Ce]=ye)}for(var H=0;H<C;H++){var Re=s[H],ke=Re.getID();z[ke]&&(r.setItemState(Re,n,!1),delete z[ke]),a&&!L[ke]&&(r.setItemState(Re,a,!0),L[ke]=Re)}for(var H=0;H<S;H++){var et=l[H],vt=et.getID();z[vt]&&(r.setItemState(et,n,!1),delete z[vt]),a&&!L[vt]&&(r.setItemState(et,a,!0),L[vt]=et)}if(e&&!e.destroyed){a&&(r.setItemState(e,a,!1),delete L[e.getID()]),z[e.getID()]||(r.setItemState(e,n,!0),z[e.getID()]=e);for(var at=e.getEdges(),Mt=at.length,H=0;H<Mt;H++){var Re=at[H],ke=Re.getID(),zt=void 0;Re.getSource()===e?zt=Re.getTarget():zt=Re.getSource();var Cr=zt.getID();a&&L[Cr]&&(r.setItemState(zt,a,!1),delete L[Cr]),z[Cr]||(r.setItemState(zt,n,!0),z[Cr]=zt),L[ke]&&(r.setItemState(Re,a,!1),delete L[ke]),z[ke]||(r.setItemState(Re,n,!0),z[ke]=Re),Re.toFront()}}t.activeItems=z,t.inactiveItems=L,r.emit("afteractivaterelations",{item:f.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,u.throttle)(function(f,t){var e=t.get("graph");if(!(!e||e.destroyed)&&t.shouldUpdate(f.item,{event:f,action:"deactivate"},t)){var r=t.activeState,n=t.inactiveState,a=t.activeItems||{},i=t.inactiveItems||{};Object.values(a).filter(function(o){return!o.destroyed}).forEach(function(o){e.clearItemStates(o,r)}),Object.values(i).filter(function(o){return!o.destroyed}).forEach(function(o){e.clearItemStates(o,n)}),t.activeItems={},t.inactiveItems={},e.emit("afteractivaterelations",{item:f.item||t.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},Rl=Math.min,Pd=Math.max,kd=Math.abs,Rd="shift",Yv=["drag","shift","ctrl","alt","control"],jv={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:Rd,includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return Yv.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Rd,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(t){var e=t.item,r=this.brush;e||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:t.canvasX,y:t.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(t){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(t))},onMouseUp:function(t){var e=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(t),this.dragging=!1)},clearStates:function(){var t=this,e=t.graph,r=t.selectedState,n=e.findAllByState("node",r),a=e.findAllByState("edge",r),i=e.findAllByState("combo",r);n.forEach(function(o){return e.setItemState(o,r,!1)}),a.forEach(function(o){return e.setItemState(o,r,!1)}),i.forEach(function(o){return e.setItemState(o,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(t,e,r,n,a){var i=t.getBBox();return i.centerX>=e&&i.centerX<=r&&i.centerY>=n&&i.centerY<=a},getSelectedNodes:function(t){var e=this,r=this,n=r.graph,a=r.originPoint,i=r.shouldUpdate,o=r.isBBoxCenterInRect,s=this.selectedState,l={x:t.x,y:t.y},d=n.getPointByCanvas(a.x,a.y),p=Rl(l.x,d.x),C=Pd(l.x,d.x),S=Rl(l.y,d.y),L=Pd(l.y,d.y),z=[],H=[];n.getNodes().forEach(function(se){if(se.isVisible()&&o(se,p,C,S,L)&&i(se,"select",e)){z.push(se);var ye=se.getModel();H.push(ye.id),n.setItemState(se,s,!0)}});var ee=[];this.includeEdges&&z.forEach(function(se){var ye=se.getOutEdges();ye.forEach(function(Ce){if(Ce.isVisible()){var Re=Ce.getModel(),ke=Re.source,et=Re.target;H.includes(ke)&&H.includes(et)&&i(Ce,"select",e)&&(ee.push(Ce),n.setItemState(Ce,e.selectedState,!0))}})});var ie=[];this.includeCombos&&n.getCombos().forEach(function(se){if(se.isVisible()&&o(se,p,C,S,L)&&i(se,"select",e)){ie.push(se);var ye=se.getModel();H.push(ye.id),n.setItemState(se,s,!0)}}),this.selectedEdges=ee,this.selectedNodes=z,this.selectedCombos=ie,this.onSelect&&this.onSelect(z,ee,ie),n.emit("nodeselectchange",{selectedItems:{nodes:z,edges:ee,combos:ie},select:!0})},createBrush:function(){var t=this,e=t.graph.get("canvas").addShape("rect",{attrs:t.brushStyle,capture:!1,name:"brush-shape"});return this.brush=e,this.delegate=e,e},updateBrush:function(t){var e=this.originPoint;this.brush.attr({width:kd(t.canvasX-e.x),height:kd(t.canvasY-e.y),x:Rl(t.canvasX,e.x),y:Rl(t.canvasY,e.y)})},onKeyDown:function(t){var e=t.key;if(e){var r=this.trigger.toLowerCase(),n=e.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},Bd="shift",Hv=["shift","ctrl","alt","control"],Zv={getDefaultCfg:function(){return{multiple:!0,trigger:Bd,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var t=this;return Hv.indexOf(t.trigger.toLowerCase())>-1||(t.trigger=Bd,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),t.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(t){var e=this,r=t.item;if(!(!r||r.destroyed)){var n=r.getType(),a=e.graph,i=e.keydown,o=e.multiple,s=e.shouldUpdate,l=e.shouldBegin;if(l(t,e)){if(!i||!o){var d=a.findAllByState("node",e.selectedState).concat(a.findAllByState("edge",e.selectedState)).concat(a.findAllByState("combo",e.selectedState));(0,u.each)(d,function(z){z!==r&&a.setItemState(z,e.selectedState,!1)})}var p=function(){switch(n){case"node":return e.selectNode;case"edge":return e.selectEdge;case"combo":return e.selectCombo;default:return!1}}();if(!p){var C=a.findAllByState("node",e.selectedState),S=a.findAllByState("edge",e.selectedState),L=a.findAllByState("combo",e.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:C,edges:S,combos:L},select:!1});return}if(r.hasState(e.selectedState)){s(t,e)&&a.setItemState(r,e.selectedState,!1);var C=a.findAllByState("node",e.selectedState),S=a.findAllByState("edge",e.selectedState),L=a.findAllByState("combo",e.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:C,edges:S,combos:L},select:!1})}else{s(t,e)&&a.setItemState(r,e.selectedState,!0);var C=a.findAllByState("node",e.selectedState),S=a.findAllByState("edge",e.selectedState),L=a.findAllByState("combo",e.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:C,edges:S,combos:L},select:!0})}}}},onCanvasClick:function(t){var e=this,r=this,n=r.graph,a=r.shouldBegin;if(a(t,this)){var i=n.findAllByState("node",this.selectedState);(0,u.each)(i,function(l){n.setItemState(l,e.selectedState,!1)});var o=n.findAllByState("edge",this.selectedState);(0,u.each)(o,function(l){n.setItemState(l,e.selectedState,!1)});var s=n.findAllByState("combo",this.selectedState);(0,u.each)(s,function(l){n.setItemState(l,e.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(t){var e=this,r=t.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){var t=this;t.keydown=!1}},Kv=J.vs,Bl=.05,$v={getDefaultCfg:function(){return this.isFireFox=zu()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var t=this.fixSelectedItems;return t.fixState||(t.fixState="selected"),t.fixAll&&(t.fixLineWidth=!0,t.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(t){var e=t.originalEvent.touches,r=e[0],n=e[1];t.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(t,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(t){if(this.moveable){t.preventDefault();var e=t.originalEvent.touches,r=e[0],n=e[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(z,H){return Math.hypot(H.x-z.x,H.y-z.y)},i=a({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),o=this.originScale*i;this.currentScale=o;var s=this.get("minZoom")||this.graph.get("minZoom"),l=this.get("maxZoom")||this.graph.get("maxZoom");if(!(o>l||o<s)){var d=this.get("animate"),p=this.get("animateCfg"),C=this.graph.get("canvas"),S=C.getPointByClient(t.clientX,t.clientY);this.graph.zoomTo(o,{x:S.x,y:S.y},d,p),this.graph.emit("wheelzoom",t)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(t){var e=this,r=this,n=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(t,this))&&this.shouldUpdate(t,this)){t.preventDefault();var i=n.get("canvas"),o=i.getPointByClient(t.clientX,t.clientY),s=this.get("sensitivity"),l=n.getZoom(),d=l,p=l;this.isFireFox?t.deltaY>0||t.wheelDelta<0?d=1-Bl*s:d=1/(1-Bl*s):t.wheelDelta<0?d=1-Bl*s:d=1/(1-Bl*s),p=l*d;var C=this.get("minZoom")||n.get("minZoom"),S=this.get("maxZoom")||n.get("maxZoom");p>S?p=S:p<C&&(p=C);var L=this.get("enableOptimize");if(L){var z=this.get("optimizeZoom"),H=this.get("optimized"),ee=n.getNodes(),ie=n.getEdges(),se=ee.length,ye=ie.length;if(!H){for(var Ce=0;Ce<se;Ce++){var Re=ee[Ce];if(!Re.destroyed)for(var ke=Re.get("group").get("children"),et=ke.length,vt=0;vt<et;vt++){var at=ke[vt];!at.destoryed&&!at.get("isKeyShape")&&(at.set("ori-visibility",at.get("ori-visibility")||at.get("visible")),at.hide())}}for(var Mt=0;Mt<ye;Mt++)for(var zt=ie[Mt],ke=zt.get("group").get("children"),et=ke.length,vt=0;vt<et;vt++){var at=ke[vt];at.set("ori-visibility",at.get("ori-visibility")||at.get("visible")),at.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Cr=setTimeout(function(){var La=n.getZoom(),ri=e.get("optimized");if(ri){e.set("optimized",!1);for(var Ia=0;Ia<se;Ia++){var ni=ee[Ia],wi=ni.get("group").get("children"),Wn=wi.length;if(La<z){var Pa=ni.getKeyShape(),Ba=Pa.get("ori-visibility");Pa.set("ori-visibility",void 0),Ba&&Pa.show()}else for(var Si=0;Si<Wn;Si++){var Ua=wi[Si],Ba=Ua.get("ori-visibility");Ua.set("ori-visibility",void 0),!Ua.get("visible")&&Ba&&Ba&&Ua.show()}}for(var Za=0;Za<ye;Za++){var Yi=ie[Za],wi=Yi.get("group").get("children"),Wn=wi.length;if(La<z){var Pa=Yi.getKeyShape(),Ba=Pa.get("ori-visibility");Pa.set("ori-visibility",void 0),Ba&&Pa.show()}else for(var Si=0;Si<Wn;Si++){var Ua=wi[Si];if(!Ua.get("visible")){var Ba=Ua.get("ori-visibility");Ua.set("ori-visibility",void 0),Ba&&Ua.show()}}}}},100);this.set("timeout",Cr)}if(l<=1){var jr=void 0,kr=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){jr=n.findAllByState("node",a.fixState),kr=n.findAllByState("edge",a.fixState);for(var yr=l/p,dn=jr.length,un=0;un<dn;un++){var Re=jr[un],br=Re.getContainer(),zr=Re.getModel(),en=Re.getOriginStyle(),Jr=Re.getStateStyle(a.fixState),yn=Re.get("shapeFactory").getShape(zr.type).getStateStyle(a.fixState,Re)[a.fixState];if(a.fixAll){if(p<=1){var An=(0,u.clone)(br.getMatrix());An||(An=[1,0,0,0,1,0,0,0,1]);var wa=Re.getModel(),Sa=wa.x,yi=wa.y;An=Kv(An,[["t",-Sa,-yi],["s",yr,yr],["t",Sa,yi]]),br.setMatrix(An)}}else for(var ke=br.get("children"),et=ke.length,vt=0;vt<et;vt++){var at=ke[vt],$a=void 0,Ci=void 0;if(a.fixLabel){var xi=at.get("type");if(xi==="text"){$a=at.attr("fontSize")||12;var Vi=Jr[at.get("name")],Ti=yn[at.get("name")],pu=Vi?Vi.fontSize:12,Io=Ti?Ti.fontSize:12,yu=pu||Io||12;if(p<=1&&at.attr("fontSize",yu/p),Ci)break}}if(a.fixLineWidth&&at.get("isKeyShape")){Ci=at.attr("lineWidth")||0;var Ao=Jr.lineWidth||yn.lineWidth||en.lineWidth||0;if(p<=1&&at.attr("lineWidth",Ao/p),$a)break}}}for(var Oo=kr.length,Js=0;Js<Oo;Js++)for(var zt=kr[Js],br=zt.getContainer(),ke=br.get("children"),zr=zt.getModel(),Jr=zt.getStateStyle(a.fixState),yn=zt.get("shapeFactory").getShape(zr.type).getStateStyle(a.fixState,zt)[a.fixState],et=ke.length,vt=0;vt<et;vt++){var at=ke[vt],$a=void 0,Ci=void 0;if(a.fixLabel||a.fixAll){var xi=at.get("type");if(xi==="text"){$a=at.attr("fontSize")||12;var Vi=Jr[at.get("name")],Ti=yn[at.get("name")],pu=Vi?Vi.fontSize:12,Io=Ti?Ti.fontSize:12,yu=pu||Io||12;if(p<=1&&at.attr("fontSize",yu/p),Ci)break}}if((a.fixLineWidth||a.fixAll)&&at.get("isKeyShape")){Ci=at.attr("lineWidth")||0;var Ao=Jr.lineWidth||yn.lineWidth||1;if(p<=1&&at.attr("lineWidth",Ao/p),$a)break}}}}var Jo=this.get("animate"),xs=this.get("animateCfg");n.zoomTo(p,{x:o.x,y:o.y},Jo,xs),n.emit("wheelzoom",t)}}},Fd={onMouseEnter:function(t){var e=t.item;this.currentTarget=e,this.showTooltip(t),this.graph.emit("tooltipchange",{item:t.item,action:"show"})},onMouseMove:function(t){if(!this.shouldUpdate(t,this)){this.hideTooltip();return}!this.currentTarget||t.item!==this.currentTarget||this.updatePosition(t)},onMouseLeave:function(t){this.shouldEnd(t,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(t){var e=this.container;if(!(!t.item||t.item.destroyed)){e||(e=this.createTooltip(this.graph.get("canvas")),this.container=e);var r=this.formatText(t.item.get("model"),t);e.innerHTML=r,(0,cr.Z)(this.container,{visibility:"visible"}),this.updatePosition(t)}},hideTooltip:function(){(0,cr.Z)(this.container,{visibility:"hidden"})},updatePosition:function(t){var e=this.get("shouldBegin"),r=this,n=r.width,a=r.height,i=r.container,o=r.graph;if(!e(t,this)){(0,cr.Z)(i,{visibility:"hidden"});return}var s=o.getPointByClient(t.clientX,t.clientY),l=o.getCanvasByPoint(s.x,s.y),d=l.x,p=l.y,C=i.getBoundingClientRect();d>n/2?d-=C.width:d+=this.offset,p>a/2?p-=C.height:p+=this.offset;var S="".concat(d,"px"),L="".concat(p,"px");(0,cr.Z)(this.container,{left:S,top:L,visibility:"visible"})},createTooltip:function(t){var e=t.get("el");e.style.position="relative";var r=(0,pi.Z)('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return e.parentNode.appendChild(r),(0,cr.Z)(r,{position:"absolute",visibility:"visible"}),this.width=t.get("width"),this.height=t.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},Qv=(0,v.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(e){return e.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Fd),qv=(0,v.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(e){return"source: ".concat(e.source," target: ").concat(e.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},Fd),Gd="click",Jv=["click","dblclick"],eg={getDefaultCfg:function(){return{trigger:Gd,onChange:function(){}}},getEvents:function(){var t,e;return Jv.includes(this.trigger)?e=this.trigger:(e=Gd,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),t={},t["node:".concat(e)]="onNodeClick",t.touchstart="onNodeClick",t},onNodeClick:function(t){var e=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){e.toggle(t),clearTimeout(e.timer),e.timer=0},200)}else this.toggle(t)},toggle:function(t){var e=t.item;if(e){var r=this.graph.findDataById(e.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var a=!r.collapsed;this.shouldBegin(t,a,this)&&(r.collapsed=a,e.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:t.item,collapsed:a}),this.shouldUpdate(t,a,this)&&(this.onChange(e,a,this),this.graph.layout()))}}}}},tg=Rs.calculationItemsBBox,rg=function f(t,e){if(e(t)!==!1&&t){var r=t.get("combos");if(r.length===0)return!1;(0,u.each)(r,function(n){f(n,e)})}},ng={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(t){var e=t.item;if(!e||e.destroyed||!this.shouldUpdate(t,this))return!1;var r=e.getType();return r==="combo"},onMouseDown:function(t){this.origin={x:t.x,y:t.y}},onDragStart:function(t){var e=this,r=this.graph,n=t.item;if(this.currentShouldEnd=!0,!!this.validationCombo(t)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),i=n.get("id"),o=a.filter(function(l){var d=l.get("id");return i===d});o.length===0?this.targets.push(n):this.targets=a;var s=[];this.targets.forEach(function(l){var d=l.getModel(),p=d.x,C=d.y,S=d.id;s.push({x:p,y:C,id:S})}),this.set("beforeDragItems",s),this.activeState&&this.targets.map(function(l){var d=l.getModel();if(d.parentId){var p=r.findById(d.parentId);p&&r.setItemState(p,e.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],rg(n,function(l){if(l.destroyed)return!1;var d=l.getModel();return e.currentItemChildCombos.push(d.id),!0})}},onDrag:function(t){var e=this;if(this.origin&&this.validationCombo(t))if(this.enableDelegate)this.updateDelegate(t);else{if(this.activeState){var r=this.graph,n=t.item,a=n.getModel(),i=r.getCombos(),o=n.getBBox(),s=o.centerX,l=o.centerY,d=o.width,p=i.filter(function(C){var S=C.getModel();return a.parentId,S.id!==a.id&&!e.currentItemChildCombos.includes(S.id)});p.map(function(C){var S=C.getBBox(),L=S.centerX,z=S.centerY,H=S.width,ee=s-L,ie=l-z,se=2*Math.sqrt(ee*ee+ie*ie);d+H-se>.8*d?r.setItemState(C,e.activeState,!0):r.setItemState(C,e.activeState,!1)})}(0,u.each)(this.targets,function(C){e.updateCombo(C,t)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(t,e){var r=this;(this.enableDelegate||e)&&(0,u.each)(this.targets,function(n){r.updateCombo(n,t,e)})},onDrop:function(t){var e=this,r=t.item;if(this.currentShouldEnd=this.shouldEnd(t,r,this),this.updatePositions(t,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,a=r.getModel();this.targets.map(function(i){var o=i.getModel();o.parentId!==a.id?(e.activeState&&n.setItemState(r,e.activeState,!1),e.onlyChangeComboSize?n.updateCombo(i):n.updateComboTree(i,a.id,!1)):n.updateCombo(r)}),this.end(r,t),this.endComparison=!0}},onNodeDrop:function(t){var e=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=t.item,a=n.getModel().comboId,i=a?r.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(t,i,this),this.updatePositions(t,!this.currentShouldEnd),!!this.currentShouldEnd){var o;if(a){if(this.activeState){var s=r.findById(a);r.setItemState(s,this.activeState,!1)}this.targets.map(function(l){e.onlyChangeComboSize?r.updateCombo(l):a!==l.getID()&&(o=r.findById(a),a!==l.getModel().parentId&&r.updateComboTree(l,a,!1))})}else this.targets.map(function(l){if(e.onlyChangeComboSize)r.updateCombo(l);else{var d=l.getModel();d.comboId&&r.updateComboTree(l,void 0,!1)}});this.endComparison=!0,this.end(o,t)}}},onDragEnter:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,r=this.graph;this.activeState&&r.setItemState(e,this.activeState,!0)}},onDragLeave:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,r=this.graph;this.activeState&&r.setItemState(e,this.activeState,!1)}},onDragEnd:function(t){if(!(!this.targets||this.targets.length===0)){var e=t.item;this.currentShouldEnd&&this.updatePositions(t);var r=this.getParentCombo(e.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,t)}},end:function(t,e){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}if(t&&this.activeState&&n.setItemState(t,this.activeState,!1),!t){var i=n.get("enabledStack")&&this.enableStack,o={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(s){if(!r.onlyChangeComboSize)n.updateComboTree(s,void 0,i);else{n.updateCombo(s);var l=s.getModel(),d=l.x,p=l.y,C=l.id;o.after.combos.push({x:d,y:p,id:C}),n.pushStack("update",o)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(t,e,r){var n=this;if(r===void 0&&(r={}),e(t,r)!==!1&&t){var a=t.get("combos");(0,u.each)(a,function(o){n.traverse(o,e,r)});var i=t.get("nodes");(0,u.each)(i,function(o){n.traverse(o,e,r)})}},updateCombo:function(t,e,r){this.updateSingleItem(t,e,r);var n={};this.traverse(t,function(a,i){return a.destroyed?!1:(a.getEdges().forEach(function(o){return i[o.getID()]=o}),!0)},n),Object.values(n).forEach(function(a){return a.refresh()})},updateSingleItem:function(t,e,r){var n=this.origin,a=this.graph,i=t.getModel(),o=t.get("id");this.point[o]||(this.point[o]={x:i.x,y:i.y});var s=e.x-n.x+this.point[o].x,l=e.y-n.y+this.point[o].y;r&&(s+=n.x-e.x,l+=n.y-e.y),a.updateItem(t,{x:s,y:l},!1)},getParentCombo:function(t){var e=this.graph;if(t){var r=e.findById(t);if(r)return r}},updateDelegate:function(t){var e=this.graph;if(this.delegateShape){var C=t.x-this.origin.x+this.originPoint.minX,S=t.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:C,y:S})}else{var r=e.get("delegateGroup"),n=null;this.targets.length>1?n=tg(this.targets):n=this.targets[0].getBBox();var a=n.x,i=n.y,o=n.width,s=n.height,l=n.minX,d=n.minY;this.originPoint={x:a,y:i,width:o,height:s,minX:l,minY:d};var p=(0,v.__assign)((0,v.__assign)({},ss.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,v.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},p),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var t=this,e=t.graph,r=t.targets,n={};r==null||r.forEach(function(a){var i=a.getModel().parentId;i&&(n[i]=e.findById(i))}),Object.values(n).forEach(function(a){a&&e.updateCombo(a)})}},zd="dblclick",ag=["click","dblclick"],ig={getDefaultCfg:function(){return{trigger:zd,relayout:!0}},getEvents:function(){var t,e;return ag.includes(this.trigger)?e=this.trigger:(e=zd,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),t={},t["combo:".concat(e)]="onComboClick",t},onComboClick:function(t){var e=t.item,r=this,n=r.graph,a=r.relayout;if(!(!e||e.destroyed||e.getType()!=="combo")){var i=e.getModel(),o=i.id;o&&(n.collapseExpandCombo(o),a&&n.get("layout")?n.layout():n.refreshPositions())}}},og=Rs.isPolygonsIntersect,sg=Rs.pathToPoints,Ud="shift",ug=["drag","shift","ctrl","alt","control"],fg=function(t,e){var r,n=t.getKeyShape();if(t.get("type")==="path")r=sg(n.attr("path"));else{var a=n.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return og(e,r)},cg={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:Ud,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return ug.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Ud,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(t){var e=this.lasso,r=t.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),e||(e=this.createLasso()),this.dragging=!0,this.originPoint={x:t.x,y:t.y},this.points.push(this.originPoint),e.show())},onDragMove:function(t){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:t.x,y:t.y}),this.updateLasso(t)))},onDragEnd:function(t){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var t=this.points,e=[];return t.length&&(t.forEach(function(r,n){n===0?e.push(["M",r.x,r.y]):e.push(["L",r.x,r.y])}),e.push(["L",t[0].x,t[0].y])),e},clearStates:function(t){t===void 0&&(t="canvas:click");var e=this,r=e.graph,n=e.selectedState,a=e.shouldDeselect,i=r.findAllByState("node",n),o=r.findAllByState("edge",n);(!a||a({action:t,nodes:i,edges:o}))&&(i.forEach(function(s){return r.setItemState(s,n,!1)}),o.forEach(function(s){return r.setItemState(s,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var t=this,e=this,r=e.graph,n=e.shouldUpdate,a=this.points.map(function(d){return[r.getCanvasByPoint(d.x,d.y).x,r.getCanvasByPoint(d.x,d.y).y]}),i=this.selectedState,o=[],s=[];r.getNodes().forEach(function(d){if(d.isVisible()&&fg(d,a)&&n(d,"select",t)){o.push(d);var p=d.getModel();s.push(p.id),r.setItemState(d,i,!0)}});var l=[];this.includeEdges&&o.forEach(function(d){var p=d.getOutEdges();p.forEach(function(C){if(C.isVisible()){var S=C.getModel(),L=S.source,z=S.target;s.includes(L)&&s.includes(z)&&n(C,"select",t)&&(l.push(C),r.setItemState(C,t.selectedState,!0))}})}),this.selectedEdges=l,this.selectedNodes=o,this.onSelect&&this.onSelect(o,l),r.emit("nodeselectchange",{selectedItems:{nodes:o,edges:l},select:!0})},createLasso:function(){var t=this,e=t.graph.get("delegateGroup").addShape("path",{attrs:(0,v.__assign)({path:[]},t.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=e,this.delegate=e,this.points=[],e},updateLasso:function(t){var e=this;this.lasso.attr({path:e.getLassoPath()})},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},Wd="click",lg=["click","drag"],Xd=void 0,dg=["shift","ctrl","control","alt","meta",void 0],hg={getDefaultCfg:function(){return{trigger:Wd,key:Xd,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var t=this;lg.indexOf(t.trigger.toLowerCase())>-1||(t.trigger=Wd,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),t.key&&dg.indexOf(t.key.toLowerCase())===-1&&(t.trigger=Xd,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var e;return t.trigger==="drag"?e={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:t.trigger==="click"&&(e={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),t.key&&(e.keydown="onKeyDown",e.keyup="onKeyUp"),e},onDragEnd:function(t){var e=this;if(!(e.key&&!e.keydown)){var r=t.item;(!r||r.getID()===e.source||r.getType()!=="node")&&e.cancelCreating({item:e.edge,x:t.x,y:t.y})}},onClick:function(t){var e=this;if(!(e.key&&!e.keydown)){var r=t.item,n=e.graph,a=r.getModel(),i=e.getEdgeConfig;if(e.addingEdge&&e.edge){if(!e.shouldEnd(t,e))return;var o=void 0;i&&(0,u.isFunction)(i)?o=i({source:e.source,target:a.id},e):o=e.edgeConfig;var s=(0,v.__assign)({target:a.id},o);if(e.source===a.id&&(s.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(e.edge,s,!1),n.get("enabledStack")){var l=(0,v.__assign)((0,v.__assign)({},e.edge.getModel()),{itemType:"edge"}),d={};d.edges=[l],n.pushStack("add",{before:{},after:d})}n.emit("aftercreateedge",{edge:e.edge}),e.edge.getKeyShape().set("capture",!0),e.edge=null,e.addingEdge=!1}else{if(!e.shouldBegin(t,e))return;var o=void 0;i&&(0,u.isFunction)(i)?o=i({source:a.id,target:a.id},e):o=e.edgeConfig,e.edge=n.addItem("edge",(0,v.__assign)({source:a.id,target:a.id},o),!1),e.source=a.id,e.addingEdge=!0,e.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(t){var e=this;if(!(e.key&&!e.keydown)){e.edge&&e.edge.destroyed&&e.cancelCreating({item:e.edge});var r={x:t.x,y:t.y};if(!e.graph.findById(e.source)){e.addingEdge=!1;return}e.addingEdge&&e.edge&&e.graph.updateItem(e.edge,{target:r},!1)}},cancelCreating:function(t){var e,r,n=this;if(!(n.key&&!n.keydown)){var a=n.graph,i=t.item;if(n.addingEdge&&(n.edge===i||!((r=(e=t.target)===null||e===void 0?void 0:e.isCanvas)===null||r===void 0)&&r.call(e))){n.edge&&!n.edge.destroyed&&a.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(t){var e=this,r=t.key;r&&(r.toLowerCase()===e.key.toLowerCase()?e.keydown=!0:e.keydown=!1)},onKeyUp:function(){var t=this;t.addingEdge&&t.edge&&(t.graph.removeItem(t.edge,!1),t.addingEdge=!1,t.edge=null),this.keydown=!1}},Vd="ctrl",vg=["shift","ctrl","alt","control"],gg="1",pg={getDefaultCfg:function(){return{trigger:Vd,combinedKey:gg,functionName:"fitView",functionParams:[]}},getEvents:function(){return vg.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Vd,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(t){var e=t.key;if(e){var r=this.trigger.toLowerCase(),n=e.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var i=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===i||n==="control"&&i==="ctrl"||n==="ctrl"&&i==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},yg=["shift","ctrl","alt","control","meta"],mg={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||yg.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(t){var e=this;if(this.allowDrag(t)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var a=n.some(function(zr){return t["".concat(zr,"Key")]});if(a){var i=r.get("canvas"),o=i.getPointByClient(t.clientX,t.clientY),s=r.getZoom();t.wheelDelta>0?s=s+s*.05:s=s-s*.05,r.zoomTo(s,{x:o.x,y:o.y})}else{var l=t.deltaX||t.movementX,d=t.deltaY||t.movementY;!d&&navigator.userAgent.indexOf("Firefox")>-1&&(d=-t.wheelDelta*125/3);var p=this.graph.get("width"),C=this.graph.get("height"),S=this.graph.get("canvas").getCanvasBBox(),L=this.scalableRange,z=this.scalableRange;L<1&&L>-1&&(L=p*L,z=C*z);var H=S.minX,ee=S.maxX,ie=S.minY,se=S.maxY;l>0?ee<-L?l=0:ee-l<-L&&(l=ee+L):l<0&&(H>p+L?l=0:H-l>p+L&&(l=H-(p+L))),d>0?se<-z?d=0:se-d<-z&&(d=se+z):d<0&&(ie>C+z?d=0:ie-d>C+z&&(d=ie-(C+z))),this.get("direction")==="x"?d=0:this.get("direction")==="y"&&(l=0),r.translate(-l,-d)}t.preventDefault();var ye=this.get("enableOptimize");if(ye){var Ce=this.get("optimizeZoom"),Re=this.get("optimized"),ke=r.getNodes(),et=r.getEdges(),vt=ke.length,at=et.length;if(!Re){for(var Mt=0;Mt<vt;Mt++){var zt=ke[Mt];if(!zt.destroyed)for(var Cr=zt.get("group").get("children"),jr=Cr.length,kr=0;kr<jr;kr++){var yr=Cr[kr];!yr.destoryed&&!yr.get("isKeyShape")&&(yr.set("ori-visibility",yr.get("ori-visibility")||yr.get("visible")),yr.hide())}}for(var dn=0;dn<at;dn++)for(var un=et[dn],Cr=un.get("group").get("children"),jr=Cr.length,kr=0;kr<jr;kr++){var yr=Cr[kr];yr.set("ori-visibility",yr.get("ori-visibility")||yr.get("visible")),yr.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var br=setTimeout(function(){var zr=r.getZoom(),en=e.get("optimized");if(en){e.set("optimized",!1);for(var Jr=0;Jr<vt;Jr++){var yn=ke[Jr],An=yn.get("group").get("children"),wa=An.length;if(zr<Ce){var Sa=yn.getKeyShape(),yi=Sa.get("ori-visibility");yi&&Sa.show()}else for(var $a=0;$a<wa;$a++){var Ci=An[$a],yi=Ci.get("ori-visibility");!Ci.get("visible")&&yi&&yi&&Ci.show()}}for(var xi=0;xi<at;xi++){var Vi=et[xi],An=Vi.get("group").get("children"),wa=An.length;if(zr<Ce){var Sa=Vi.getKeyShape(),yi=Sa.get("ori-visibility");yi&&Sa.show()}else for(var $a=0;$a<wa;$a++){var Ci=An[$a];if(!Ci.get("visible")){var yi=Ci.get("ori-visibility");yi&&Ci.show()}}}}},100);this.set("timeout",br)}}},allowDrag:function(t){var e,r,n=t.target,a=n&&n.isCanvas&&n.isCanvas();if((0,u.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,u.isObject)(this.allowDragOnItem)){var i=this.allowDragOnItem,o=i.node,s=i.edge,l=i.combo,d=(r=(e=t.item)===null||e===void 0?void 0:e.getType)===null||r===void 0?void 0:r.call(e);if(!o&&d==="node"||!s&&d==="edge"||!l&&d==="combo")return!1}return!0}},Eg={"drag-canvas":Wv,"zoom-canvas":$v,"drag-node":Xv,"activate-relations":Vv,"brush-select":jv,"click-select":Zv,"lasso-select":cg,tooltip:Qv,"edge-tooltip":qv,"collapse-expand":eg,"drag-combo":ng,"collapse-expand-combo":ig,"create-edge":hg,"shortcuts-call":pg,"scroll-canvas":mg};(0,u.each)(Eg,function(f,t){lu(t,f)});var bg=(0,v.__assign)((0,v.__assign)({},F),Yf),Zg=To.Grid,Kg=To.Minimap,$g=To.Bundling,Qg=To.Menu,xg=To.Fisheye,qg=To.ToolBar,Jg=To.Tooltip,wg=To.TimeBar,Sg=To.ImageMinimap,_g=To.EdgeFilterLens,Mg=To.SnapLine,ep=To.Legend,Cg=To.Annotation,Yd={version:ss.version,Graph:rr,TreeGraph:Br,Util:Rs,Layout:Ta.Layouts,TreeLayout:nl,registerLayout:Ro,Global:ss,registerBehavior:lu,registerCombo:Ru,registerEdge:ku,registerNode:So,Minimap:To.Minimap,Grid:To.Grid,Bundling:To.Bundling,Menu:To.Menu,ToolBar:To.ToolBar,Tooltip:To.Tooltip,Legend:To.Legend,TimeBar:wg,SnapLine:Mg,Fisheye:xg,ImageMinimap:Sg,EdgeFilterLens:_g,Annotation:Cg,Algorithm:bg,Arrow:gc,Marker:ef,Shape:Es};Yd.version="4.8.21";var Tg=Yd,tp="4.8.21"},99905:function(pr,U,G){"use strict";G.r(U),G.d(U,{Graph:function(){return Q},GraphWithEvent:function(){return We},algorithm:function(){return F},comparision:function(){return P},essence:function(){return Y},generate:function(){return A}});var F={};G.r(F),G.d(F,{components:function(){return At},dfs:function(){return Kt},dijkstra:function(){return Fn},dijkstraAll:function(){return va},findCycles:function(){return Qa},floydWarshall:function(){return qr},isAcyclic:function(){return Gt},postorder:function(){return Ht},preorder:function(){return Ir},prim:function(){return $e},tarjan:function(){return Ya},topsort:function(){return ma}});var Y={};G.r(Y),G.d(Y,{hasSelfLoop:function(){return nr},isGraph:function(){return $r},isNullGraph:function(){return kt},isSimpleGraph:function(){return Sn}});var P={};G.r(P),G.d(P,{containAllSameEdges:function(){return Ee},containAllSameNodes:function(){return $},containSameEdges:function(){return ge},containSameNodes:function(){return le},getSameEdges:function(){return _},getSameNodes:function(){return B},isGraphComplement:function(){return _r},isGraphContainsAnother:function(){return Le},isGraphOptionSame:function(){return M},isGraphSame:function(){return Ne}});var A={};G.r(A),G.d(A,{getGraphComplement:function(){return Fr}});var N;(function(He){He.DEFAULT_EDGE_NAME="\0",He.GRAPH_NODE="\0",He.EDGE_KEY_DELIM=""})(N||(N={}));function O(He,Ae){var Qe=He.get(Ae)||0;He.set(Ae,Qe+1)}function x(He,Ae){var Qe=He.get(Ae);Qe!==void 0&&(Qe=Qe-1,Qe>0?He.set(Ae,Qe):He.delete(Ae))}function E(He,Ae,Qe,ft){var ut=String(Ae),St=String(Qe);if(!He&&ut>St){var Qt=ut;ut=St,St=Qt}return ut+N.EDGE_KEY_DELIM+St+N.EDGE_KEY_DELIM+(ft===void 0?N.DEFAULT_EDGE_NAME:ft)}function y(He,Ae,Qe,ft){var ut=String(Ae),St=String(Qe),Qt={v:Ae,w:Qe};if(!He&&ut>St){var qt=Qt.v;Qt.v=Qt.w,Qt.w=qt}return ft!==void 0&&(Qt.name=ft),Qt}function m(He,Ae){return E(He,Ae.v,Ae.w,Ae.name)}function g(He){return typeof He=="function"}var v=function(Ae){return Ae.nodes().map(function(Qe){var ft=Ae.node(Qe),ut=Ae.parent(Qe),St={id:Qe,value:ft,parent:ut};return St.value===void 0&&delete St.value,St.parent===void 0&&delete St.parent,St})},u=function(Ae){return Ae.edges().map(function(Qe){var ft=Ae.edge(Qe),ut={v:Qe.v,w:Qe.w,value:ft,name:Qe.name};return ut.name===void 0&&delete ut.name,ut.value===void 0&&delete ut.value,ut})},b=function(Ae){var Qe={options:{directed:Ae.isDirected(),multigraph:Ae.isMultigraph(),compound:Ae.isCompound()},nodes:v(Ae),edges:u(Ae),value:Ae.graph()};return Qe.value===void 0&&delete Qe.value,Qe},T=function(Ae){var Qe=new Q(Ae.options);return Ae.value!==void 0&&Qe.setGraph(Ae.value),Ae.nodes.forEach(function(ft){Qe.setNode(ft.id,ft.value),ft.parent&&Qe.setParent(ft.id,ft.parent)}),Ae.edges.forEach(function(ft){Qe.setEdge(ft.v,ft.w,ft.value,ft.name)}),Qe};function D(He,Ae){var Qe=Object.keys(He);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(He);Ae&&(ft=ft.filter(function(ut){return Object.getOwnPropertyDescriptor(He,ut).enumerable})),Qe.push.apply(Qe,ft)}return Qe}function k(He){for(var Ae=1;Ae<arguments.length;Ae++){var Qe=arguments[Ae]!=null?arguments[Ae]:{};Ae%2?D(Object(Qe),!0).forEach(function(ft){V(He,ft,Qe[ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(He,Object.getOwnPropertyDescriptors(Qe)):D(Object(Qe)).forEach(function(ft){Object.defineProperty(He,ft,Object.getOwnPropertyDescriptor(Qe,ft))})}return He}function V(He,Ae,Qe){return Ae in He?Object.defineProperty(He,Ae,{value:Qe,enumerable:!0,configurable:!0,writable:!0}):He[Ae]=Qe,He}function J(He,Ae){if(!(He instanceof Ae))throw new TypeError("Cannot call a class as a function")}function W(He,Ae){for(var Qe=0;Qe<Ae.length;Qe++){var ft=Ae[Qe];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(He,ft.key,ft)}}function X(He,Ae,Qe){return Ae&&W(He.prototype,Ae),Qe&&W(He,Qe),Object.defineProperty(He,"prototype",{writable:!1}),He}var K={compound:!1,multigraph:!1,directed:!0},Q=function(){function He(){var Ae=this,Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};J(this,He),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=N.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return Ae.directed},this.isMultigraph=function(){return Ae.multigraph},this.isCompound=function(){return Ae.compound},this.setGraph=function(ut){return Ae.label=ut,Ae},this.graph=function(){return Ae.label},this.setDefaultNodeLabel=function(ut){return g(ut)?Ae.defaultNodeLabelFn=ut:Ae.defaultNodeLabelFn=function(){return ut},Ae},this.nodeCount=function(){return Ae.nodeCountNum},this.node=function(ut){return Ae.nodesLabelMap.get(ut)},this.nodes=function(){return Array.from(Ae.nodesLabelMap.keys())},this.sources=function(){return Ae.nodes().filter(function(ut){var St;return!(!((St=Ae.inEdgesMap.get(ut))===null||St===void 0)&&St.size)})},this.sinks=function(){return Ae.nodes().filter(function(ut){var St;return!(!((St=Ae.outEdgesMap.get(ut))===null||St===void 0)&&St.size)})},this.setNodes=function(ut,St){return ut.map(function(Qt){return Ae.setNode(Qt,St)}),Ae},this.hasNode=function(ut){return Ae.nodesLabelMap.has(ut)},this.checkCompound=function(){if(!Ae.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(ut){if(Ae.isCompound()){var St,Qt=(St=Ae.parentMap)===null||St===void 0?void 0:St.get(ut);if(Qt!==Ae.GRAPH_NODE)return Qt}},this.removeFromParentsChildList=function(ut){var St=Ae.parentMap.get(ut);Ae.childrenMap.get(St).delete(ut)},this.setParent=function(ut,St){var Qt,qt;Ae.checkCompound();for(var Xr=St===void 0?Ae.GRAPH_NODE:St,vn=Ae.parent(Xr);vn;){if(ut===vn)throw new Error("Setting "+St+" as parent of "+ut+" would create a cycle");vn=Ae.parent(vn)}St&&Ae.setNode(St),Ae.setNode(ut),Ae.removeFromParentsChildList(ut),(Qt=Ae.parentMap)===null||Qt===void 0||Qt.set(ut,Xr);var fn=Ae.childrenMap.get(Xr);return fn.set(ut,!0),(qt=Ae.childrenMap)===null||qt===void 0||qt.set(Xr,fn),Ae},this.children=function(ut){var St=ut===void 0?Ae.GRAPH_NODE:ut;if(Ae.isCompound()){var Qt,qt=(Qt=Ae.childrenMap)===null||Qt===void 0?void 0:Qt.get(St);return qt?Array.from(qt.keys()):void 0}if(St===Ae.GRAPH_NODE)return Ae.nodes();if(ut&&Ae.hasNode(ut))return[]},this.predecessors=function(ut){var St=Ae.predecessorsMap.get(ut);return St?Array.from(St.keys()):void 0},this.successors=function(ut){var St=Ae.successorsMap.get(ut);return St?Array.from(St.keys()):void 0},this.neighbors=function(ut){var St;if(Ae.hasNode(ut))return Array.from(new Set((St=Ae.predecessors(ut))===null||St===void 0?void 0:St.concat(Ae.successors(ut))))},this.isLeaf=function(ut){var St;if(Ae.isDirected()){var Qt;return!(!((Qt=Ae.successors(ut))===null||Qt===void 0)&&Qt.length)}return!(!((St=Ae.neighbors(ut))===null||St===void 0)&&St.length)},this.filterNodes=function(ut){var St=Ae.directed,Qt=Ae.multigraph,qt=Ae.compound,Xr=new He({directed:St,multigraph:Qt,compound:qt});if(Xr.setGraph(Ae.graph()),Ae.nodes().forEach(function(fn){ut(fn)&&Xr.setNode(fn,Ae.node(fn))}),Ae.edges().forEach(function(fn){Xr.hasNode(fn.v)&&Xr.hasNode(fn.w)&&Xr.setEdgeObj(fn,Ae.edge(fn))}),qt){var vn=function(Hn){for(var kn=Ae.parent(Hn);kn!==void 0&&!Xr.hasNode(kn);)kn=Ae.parent(kn);return kn};Xr.nodes().forEach(function(fn){Xr.setParent(fn,vn(fn))})}return Xr},this.setDefaultEdgeLabel=function(ut){return g(ut)?Ae.defaultEdgeLabelFn=ut:Ae.defaultEdgeLabelFn=function(){return ut},Ae},this.edgeCount=function(){return Ae.edgeCountNum},this.setEdgeObj=function(ut,St){return Ae.setEdge(ut.v,ut.w,St,ut.name)},this.setPath=function(ut,St){return ut.reduce(function(Qt,qt){return Ae.setEdge(Qt,qt,St),qt}),Ae},this.edgeFromArgs=function(ut,St,Qt){return Ae.edge({v:ut,w:St,name:Qt})},this.edge=function(ut){return Ae.edgesLabelsMap.get(m(Ae.isDirected(),ut))},this.hasEdge=function(ut,St,Qt){return Ae.edgesLabelsMap.has(m(Ae.isDirected(),{v:ut,w:St,name:Qt}))},this.removeEdgeObj=function(ut){var St=ut.v,Qt=ut.w,qt=ut.name;return Ae.removeEdge(St,Qt,qt)},this.edges=function(){return Array.from(Ae.edgesMap.values())},this.inEdges=function(ut,St){var Qt=Ae.inEdgesMap.get(ut);if(Qt)return Array.from(Qt.values()).filter(function(qt){return!St||qt.v===St})},this.outEdges=function(ut,St){var Qt=Ae.outEdgesMap.get(ut);if(Qt)return Array.from(Qt.values()).filter(function(qt){return!St||qt.w===St})},this.nodeEdges=function(ut,St){var Qt;if(Ae.hasNode(ut))return(Qt=Ae.inEdges(ut,St))===null||Qt===void 0?void 0:Qt.concat(Ae.outEdges(ut,St))},this.toJSON=function(){return b(Ae)},this.nodeInDegree=function(ut){var St=Ae.inEdgesMap.get(ut);return St?St.size:0},this.nodeOutDegree=function(ut){var St=Ae.outEdgesMap.get(ut);return St?St.size:0},this.nodeDegree=function(ut){return Ae.nodeInDegree(ut)+Ae.nodeOutDegree(ut)},this.source=function(ut){return ut.v},this.target=function(ut){return ut.w};var ft=k(k({},K),Qe);this.compound=ft.compound,this.directed=ft.directed,this.multigraph=ft.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return X(He,[{key:"setNode",value:function(Qe,ft){var ut=this.nodesLabelMap,St=this.defaultNodeLabelFn,Qt=this.isCompound,qt=this.parentMap,Xr=this.childrenMap,vn=this.inEdgesMap,fn=this.outEdgesMap,Hn=this.predecessorsMap,kn=this.successorsMap;if(ut.has(Qe))return ft!==void 0&&ut.set(Qe,ft),this;if(ut.set(Qe,ft||St(Qe)),Qt()){var da;qt==null||qt.set(Qe,this.GRAPH_NODE),Xr==null||Xr.set(Qe,new Map),Xr!=null&&Xr.has(this.GRAPH_NODE)||Xr==null||Xr.set(this.GRAPH_NODE,new Map),Xr==null||(da=Xr.get(this.GRAPH_NODE))===null||da===void 0||da.set(Qe,!0)}return[vn,fn,Hn,kn].forEach(function(ka){return ka.set(Qe,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(Qe){var ft=this;if(this.hasNode(Qe)){var ut=function(Aa){ft.removeEdge(Aa.v,Aa.w,Aa.name)},St=this.inEdgesMap,Qt=this.outEdgesMap,qt=this.predecessorsMap,Xr=this.successorsMap,vn=this.nodesLabelMap;if(this.isCompound()){var fn,Hn,kn;this.removeFromParentsChildList(Qe),(fn=this.parentMap)===null||fn===void 0||fn.delete(Qe),(Hn=this.children(Qe))===null||Hn===void 0||Hn.forEach(function(Ra){return ft.setParent(Ra)}),(kn=this.childrenMap)===null||kn===void 0||kn.delete(Qe)}var da=St.get(Qe),ka=Qt.get(Qe);Array.from(da.values()).forEach(function(Ra){return ut(Ra)}),Array.from(ka.values()).forEach(function(Ra){return ut(Ra)}),vn.delete(Qe),St.delete(Qe),Qt.delete(Qe),qt.delete(Qe),Xr.delete(Qe),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(Qe,ft,ut,St){var Qt,qt,Xr=y(this.isDirected(),Qe,ft,St),vn=m(this.isDirected(),Xr),fn=Xr.v,Hn=Xr.w;if(this.edgesLabelsMap.has(vn))return this.edgesLabelsMap.set(vn,ut),this;if(St!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(fn),this.setNode(Hn),this.edgesLabelsMap.set(vn,ut||this.defaultEdgeLabelFn(fn,Hn,St)),Object.freeze(Xr),this.edgesMap.set(vn,Xr);var kn=this.predecessorsMap.get(Hn),da=this.successorsMap.get(fn);return O(kn,fn),O(da,Hn),(Qt=this.inEdgesMap.get(Hn))===null||Qt===void 0||Qt.set(vn,Xr),(qt=this.outEdgesMap.get(fn))===null||qt===void 0||qt.set(vn,Xr),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(Qe,ft,ut){var St=E(this.isDirected(),Qe,ft,ut),Qt=this.edgesMap.get(St);if(Qt){var qt=y(this.isDirected(),Qe,ft,ut),Xr=qt.v,vn=qt.w;this.edgesLabelsMap.delete(St),this.edgesMap.delete(St);var fn=this.predecessorsMap.get(vn),Hn=this.successorsMap.get(Xr);x(fn,Xr),x(Hn,vn),this.inEdgesMap.get(vn).delete(St),this.outEdgesMap.get(Xr).delete(St),this.edgeCountNum-=1}return this}}]),He}();Q.fromJSON=T;function re(He){"@babel/helpers - typeof";return re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ae){return typeof Ae}:function(Ae){return Ae&&typeof Symbol=="function"&&Ae.constructor===Symbol&&Ae!==Symbol.prototype?"symbol":typeof Ae},re(He)}function q(He,Ae){if(!(He instanceof Ae))throw new TypeError("Cannot call a class as a function")}function ae(He,Ae){for(var Qe=0;Qe<Ae.length;Qe++){var ft=Ae[Qe];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(He,ft.key,ft)}}function ue(He,Ae,Qe){return Ae&&ae(He.prototype,Ae),Qe&&ae(He,Qe),Object.defineProperty(He,"prototype",{writable:!1}),He}function ce(){return typeof Reflect!="undefined"&&Reflect.get?ce=Reflect.get:ce=function(Ae,Qe,ft){var ut=De(Ae,Qe);if(ut){var St=Object.getOwnPropertyDescriptor(ut,Qe);return St.get?St.get.call(arguments.length<3?Ae:ft):St.value}},ce.apply(this,arguments)}function De(He,Ae){for(;!Object.prototype.hasOwnProperty.call(He,Ae)&&(He=Te(He),He!==null););return He}function Ie(He,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Super expression must either be null or a function");He.prototype=Object.create(Ae&&Ae.prototype,{constructor:{value:He,writable:!0,configurable:!0}}),Object.defineProperty(He,"prototype",{writable:!1}),Ae&&Pe(He,Ae)}function Pe(He,Ae){return Pe=Object.setPrototypeOf||function(ft,ut){return ft.__proto__=ut,ft},Pe(He,Ae)}function we(He){var Ae=Se();return function(){var ft=Te(He),ut;if(Ae){var St=Te(this).constructor;ut=Reflect.construct(ft,arguments,St)}else ut=ft.apply(this,arguments);return xe(this,ut)}}function xe(He,Ae){if(Ae&&(re(Ae)==="object"||typeof Ae=="function"))return Ae;if(Ae!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ve(He)}function ve(He){if(He===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return He}function Se(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(He){return!1}}function Te(He){return Te=Object.setPrototypeOf?Object.getPrototypeOf:function(Qe){return Qe.__proto__||Object.getPrototypeOf(Qe)},Te(He)}var We=function(He){Ie(Qe,He);var Ae=we(Qe);function Qe(){var ft;q(this,Qe);for(var ut=arguments.length,St=new Array(ut),Qt=0;Qt<ut;Qt++)St[Qt]=arguments[Qt];return ft=Ae.call.apply(Ae,[this].concat(St)),ft.eventPool={},ft}return ue(Qe,[{key:"appendEvent",value:function(ut,St){this.eventPool[ut]||(this.eventPool[ut]=[]),this.eventPool[ut].push(St)}},{key:"removeEvent",value:function(ut,St){if(this.eventPool[ut]){var Qt=this.eventPool[ut].indexOf(St);Qt>-1&&this.eventPool[ut].splice(Qt,1)}}},{key:"emitEvent",value:function(ut){for(var St=arguments.length,Qt=new Array(St>1?St-1:0),qt=1;qt<St;qt++)Qt[qt-1]=arguments[qt];this.eventPool[ut]&&this.eventPool[ut].forEach(function(Xr){Xr.apply(void 0,Qt)})}},{key:"setNode",value:function(ut,St){return ce(Te(Qe.prototype),"setNode",this).call(this,ut,St),this.emitEvent("nodeAdd",ut,St),this}},{key:"removeNode",value:function(ut){return ce(Te(Qe.prototype),"removeNode",this).call(this,ut),this.emitEvent("nodeRemove",ut),this}},{key:"setEdge",value:function(ut,St,Qt,qt){return ce(Te(Qe.prototype),"setEdge",this).call(this,ut,St,Qt,qt),this.emitEvent("edgeAdd",ut,St,Qt,qt),this}},{key:"removeEdge",value:function(ut,St,Qt){return ce(Te(Qe.prototype),"removeEdge",this).call(this,ut,St,Qt),this.emitEvent("edgeRemove",ut,St,Qt),this}}]),Qe}(Q);function Ge(He,Ae){for(var Qe=0;Qe<Ae.length;Qe++){var ft=Ae[Qe];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(He,ft.key,ft)}}function Je(He,Ae,Qe){return Ae&&Ge(He.prototype,Ae),Qe&&Ge(He,Qe),Object.defineProperty(He,"prototype",{writable:!1}),He}function mt(He,Ae){if(!(He instanceof Ae))throw new TypeError("Cannot call a class as a function")}var xt=Je(function He(){var Ae=this;mt(this,He),this.arr=[],this.keyIndice=new Map,this.size=function(){return Ae.arr.length},this.keys=function(){return Ae.arr.map(function(Qe){return Qe.key})},this.has=function(Qe){return Ae.keyIndice.has(Qe)},this.priority=function(Qe){var ft=Ae.keyIndice.get(Qe);if(ft!==void 0)return Ae.arr[ft].priority},this.swap=function(Qe,ft){var ut=Ae.arr,St=Ae.keyIndice,Qt=[ut[Qe],ut[ft]],qt=Qt[0],Xr=Qt[1];ut[Qe]=Xr,ut[ft]=qt,St.set(qt.key,ft),St.set(Xr.key,Qe)},this.innerDecrease=function(Qe){for(var ft=Ae.arr,ut=ft[Qe].priority,St,Qt=Qe;Qt!==0;){var qt;if(St=Qt>>1,((qt=ft[St])===null||qt===void 0?void 0:qt.priority)<ut)break;Ae.swap(Qt,St),Qt=St}},this.heapify=function(Qe){var ft=Ae.arr,ut=Qe<<1,St=ut+1,Qt=Qe;ut<ft.length&&(Qt=ft[ut].priority<ft[Qt].priority?ut:Qt,St<ft.length&&(Qt=ft[St].priority<ft[Qt].priority?St:Qt),Qt!==Qe&&(Ae.swap(Qe,Qt),Ae.heapify(Qt)))},this.min=function(){if(Ae.size()===0)throw new Error("Queue underflow");return Ae.arr[0].key},this.add=function(Qe,ft){var ut=Ae.keyIndice,St=Ae.arr;if(!ut.has(Qe)){var Qt=St.length;return ut.set(Qe,Qt),St.push({key:Qe,priority:ft}),Ae.innerDecrease(Qt),!0}return!1},this.removeMin=function(){Ae.swap(0,Ae.arr.length-1);var Qe=Ae.arr.pop();return Ae.keyIndice.delete(Qe.key),Ae.heapify(0),Qe.key},this.decrease=function(Qe,ft){if(!Ae.has(Qe))throw new Error("There's no key named ".concat(Qe));var ut=Ae.keyIndice.get(Qe);if(ft>Ae.arr[ut].priority)throw new Error("New priority is greater than current priority.Key: ".concat(Qe," Old: + ").concat(Ae.arr[ut].priority," New: ").concat(ft));Ae.arr[ut].priority=ft,Ae.innerDecrease(ut)}}),Ze=function(Ae,Qe){var ft=new Q,ut=new Map,St=new xt,Qt;function qt(fn){var Hn=fn.v===Qt?fn.w:fn.v,kn=St.priority(Hn);if(kn!==void 0){var da=Qe(fn);da<kn&&(ut.set(Hn,Qt),St.decrease(Hn,da))}}if(Ae.nodeCount()===0)return ft;Ae.nodes().forEach(function(fn){St.add(fn,Number.POSITIVE_INFINITY),ft.setNode(fn)}),St.decrease(Ae.nodes()[0],0);for(var Xr=!1;St.size()>0;){var vn;if(Qt=St.removeMin(),ut.has(Qt))ft.setEdge(Qt,ut.get(Qt));else{if(Xr)throw new Error("Input graph is not connected: "+Ae.graph());Xr=!0}(vn=Ae.nodeEdges(Qt))===null||vn===void 0||vn.forEach(qt)}return ft},$e=Ze,gt=function(Ae){var Qe=new Set,ft=[],ut=Ae.nodes();return ut.forEach(function(St){for(var Qt=[],qt=[St];qt.length>0;){var Xr=qt.pop();if(!Qe.has(Xr)){var vn,fn;Qe.add(Xr),Qt.push(Xr),(vn=Ae.successors(Xr))===null||vn===void 0||vn.forEach(function(Hn){return qt.push(Hn)}),(fn=Ae.predecessors(Xr))===null||fn===void 0||fn.forEach(function(Hn){return qt.push(Hn)})}}Qt.length&&ft.push(Qt)}),ft},At=gt,yt=function He(Ae,Qe,ft,ut,St,Qt){ut.includes(Qe)||(ut.push(Qe),ft||Qt.push(Qe),St(Qe).forEach(function(qt){return He(Ae,qt,ft,ut,St,Qt)}),ft&&Qt.push(Qe))},ct=function(Ae,Qe,ft){var ut=Array.isArray(Qe)?Qe:[Qe],St=function(vn){return Ae.isDirected()?Ae.successors(vn):Ae.neighbors(vn)},Qt=[],qt=[];return ut.forEach(function(Xr){if(Ae.hasNode(Xr))yt(Ae,Xr,ft==="post",qt,St,Qt);else throw new Error("Graph does not have node: "+Xr)}),Qt},Kt=ct;function $t(He,Ae){return Dr(He)||tn(He,Ae)||ir(He,Ae)||jt()}function jt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ir(He,Ae){if(He){if(typeof He=="string")return mr(He,Ae);var Qe=Object.prototype.toString.call(He).slice(8,-1);if(Qe==="Object"&&He.constructor&&(Qe=He.constructor.name),Qe==="Map"||Qe==="Set")return Array.from(He);if(Qe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qe))return mr(He,Ae)}}function mr(He,Ae){(Ae==null||Ae>He.length)&&(Ae=He.length);for(var Qe=0,ft=new Array(Ae);Qe<Ae;Qe++)ft[Qe]=He[Qe];return ft}function tn(He,Ae){var Qe=He==null?null:typeof Symbol!="undefined"&&He[Symbol.iterator]||He["@@iterator"];if(Qe!=null){var ft=[],ut=!0,St=!1,Qt,qt;try{for(Qe=Qe.call(He);!(ut=(Qt=Qe.next()).done)&&(ft.push(Qt.value),!(Ae&&ft.length===Ae));ut=!0);}catch(Xr){St=!0,qt=Xr}finally{try{!ut&&Qe.return!=null&&Qe.return()}finally{if(St)throw qt}}return ft}}function Dr(He){if(Array.isArray(He))return He}var Dn=function(){return 1},Ve=function(Ae,Qe,ft,ut){return Nr(Ae,Qe,ft||Dn,ut||function(St){return Ae.outEdges(St)})},Nr=function(Ae,Qe,ft,ut){var St=new Map,Qt=new xt,qt,Xr,vn=function(kn){var da=kn.v!==qt?kn.v:kn.w,ka=St.get(da),Ra=ft(kn),Aa=Xr.distance+Ra;if(Ra<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+kn+" Weight: "+Ra);Aa<ka.distance&&(ka.distance=Aa,ka.predecessor=qt,Qt.decrease(da,Aa))};for(Ae.nodes().forEach(function(Hn){var kn=Hn===Qe?0:Number.POSITIVE_INFINITY;St.set(Hn,{distance:kn}),Qt.add(Hn,kn)});Qt.size()>0&&(qt=Qt.removeMin(),Xr=St.get(qt),!(Xr&&Xr.distance===Number.POSITIVE_INFINITY));)ut(qt).forEach(vn);var fn={};return Array.from(St.entries()).forEach(function(Hn){var kn=$t(Hn,2),da=kn[0],ka=kn[1];return fn[String(da)]=ka,fn}),fn},Fn=Ve,Vn=function(Ae,Qe,ft){var ut={};return Ae.nodes().forEach(function(St){return ut[String(St)]=Fn(Ae,St,Qe,ft),ut}),ut},va=Vn,aa=function(Ae){var Qe=0,ft=[],ut=new Map,St=[];function Qt(qt){var Xr,vn={onStack:!0,lowlink:Qe,index:Qe};if(ut.set(qt,vn),Qe+=1,ft.push(qt),(Xr=Ae.successors(qt))===null||Xr===void 0||Xr.forEach(function(da){var ka;if(ut.has(da)){if(!((ka=ut.get(da))===null||ka===void 0)&&ka.onStack){var Aa=ut.get(da);vn.lowlink=Math.min(vn.lowlink,Aa.index)}}else{Qt(da);var Ra=ut.get(da);vn.lowlink=Math.min(vn.lowlink,Ra.lowlink)}}),vn.lowlink===vn.index){var fn=[],Hn;do{Hn=ft.pop();var kn=ut.get(Hn);kn.onStack=!1,fn.push(Hn)}while(qt!==Hn);St.push(fn)}}return Ae.nodes().forEach(function(qt){ut.has(qt)||Qt(qt)}),St},Ya=aa,la=function(Ae){return Ya(Ae).filter(function(Qe){return Qe.length>1||Qe.length===1&&Ae.hasEdge(Qe[0],Qe[0])})},Qa=la;function Wa(He){"@babel/helpers - typeof";return Wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ae){return typeof Ae}:function(Ae){return Ae&&typeof Symbol=="function"&&Ae.constructor===Symbol&&Ae!==Symbol.prototype?"symbol":typeof Ae},Wa(He)}function Da(He,Ae){for(var Qe=0;Qe<Ae.length;Qe++){var ft=Ae[Qe];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(He,ft.key,ft)}}function ar(He,Ae,Qe){return Ae&&Da(He.prototype,Ae),Qe&&Da(He,Qe),Object.defineProperty(He,"prototype",{writable:!1}),He}function Or(He,Ae){if(!(He instanceof Ae))throw new TypeError("Cannot call a class as a function")}function Qr(He,Ae){if(typeof Ae!="function"&&Ae!==null)throw new TypeError("Super expression must either be null or a function");He.prototype=Object.create(Ae&&Ae.prototype,{constructor:{value:He,writable:!0,configurable:!0}}),Object.defineProperty(He,"prototype",{writable:!1}),Ae&&mn(He,Ae)}function wn(He){var Ae=ya();return function(){var ft=jn(He),ut;if(Ae){var St=jn(this).constructor;ut=Reflect.construct(ft,arguments,St)}else ut=ft.apply(this,arguments);return On(this,ut)}}function On(He,Ae){if(Ae&&(Wa(Ae)==="object"||typeof Ae=="function"))return Ae;if(Ae!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gn(He)}function Gn(He){if(He===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return He}function qn(He){var Ae=typeof Map=="function"?new Map:void 0;return qn=function(ft){if(ft===null||!Ka(ft))return ft;if(typeof ft!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Ae!="undefined"){if(Ae.has(ft))return Ae.get(ft);Ae.set(ft,ut)}function ut(){return oa(ft,arguments,jn(this).constructor)}return ut.prototype=Object.create(ft.prototype,{constructor:{value:ut,enumerable:!1,writable:!0,configurable:!0}}),mn(ut,ft)},qn(He)}function oa(He,Ae,Qe){return ya()?oa=Reflect.construct:oa=function(ut,St,Qt){var qt=[null];qt.push.apply(qt,St);var Xr=Function.bind.apply(ut,qt),vn=new Xr;return Qt&&mn(vn,Qt.prototype),vn},oa.apply(null,arguments)}function ya(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(He){return!1}}function Ka(He){return Function.toString.call(He).indexOf("[native code]")!==-1}function mn(He,Ae){return mn=Object.setPrototypeOf||function(ft,ut){return ft.__proto__=ut,ft},mn(He,Ae)}function jn(He){return jn=Object.setPrototypeOf?Object.getPrototypeOf:function(Qe){return Qe.__proto__||Object.getPrototypeOf(Qe)},jn(He)}var Jn=function(He){Qr(Qe,He);var Ae=wn(Qe);function Qe(){return Or(this,Qe),Ae.apply(this,arguments)}return ar(Qe)}(qn(Error));function Ln(He){var Ae=new Set,Qe=new Set,ft=[];function ut(St){if(Qe.has(St))throw new Jn;if(!Ae.has(St)){var Qt;Qe.add(St),Ae.add(St),(Qt=He.predecessors(St))===null||Qt===void 0||Qt.forEach(ut),Qe.delete(St),ft.push(St)}}if(He.sinks().forEach(ut),Ae.size!==He.nodeCount())throw new Jn;return ft}var ma=Ln,Z=function(Ae){try{ma(Ae)}catch(Qe){if(Qe instanceof Jn)return!1;throw Qe}return!0},Gt=Z,lt=function(Ae,Qe){return Kt(Ae,Qe,"post")},Ht=lt,Ft=function(Ae,Qe){return Kt(Ae,Qe,"pre")},Ir=Ft,Sr=function(){return 1};function nn(He,Ae,Qe){return an(He,Ae||Sr,Qe||function(ft){return He.outEdges(ft)})}function an(He,Ae,Qe){var ft={},ut=He.nodes();return ut.forEach(function(St){var Qt=String(St);ft[Qt]={},ft[Qt][Qt]={distance:0},ut.forEach(function(qt){St!==qt&&(ft[Qt][String(qt)]={distance:Number.POSITIVE_INFINITY})}),Qe(St).forEach(function(qt){var Xr=qt.v===St?qt.w:qt.v,vn=Ae(qt);ft[Qt][String(Xr)]={distance:vn,predecessor:St}})}),ut.forEach(function(St){var Qt=String(St),qt=ft[Qt];ut.forEach(function(Xr){var vn=String(Xr),fn=ft[vn];ut.forEach(function(Hn){var kn=String(Hn),da=fn[Qt],ka=qt[kn],Ra=fn[kn],Aa=da.distance+ka.distance;Aa<Ra.distance&&(Ra.distance=Aa,Ra.predecessor=ka.predecessor)})})}),ft}var qr=nn,le=function(Ae,Qe){for(var ft=Ae.nodes(),ut=0;ut<ft.length;ut++){var St=ft[ut];if(Qe.hasNode(St))return!0}return!1},ge=function(Ae,Qe){for(var ft=Ae.edges(),ut=0;ut<ft.length;ut++){var St=ft[ut];if(Qe.hasEdge(St.v,St.w,St.name))return!0}return!1},B=function(Ae,Qe){var ft=Ae.nodes(),ut=ft.filter(function(St){return Qe.hasNode(St)});return ut},_=function(Ae,Qe){var ft=Ae.edges(),ut=ft.filter(function(St){return Qe.hasEdge(St.v,St.w,St.name)});return ut},M=function(Ae,Qe){return Ae.isCompound()===Qe.isCompound()&&Ae.isDirected()===Qe.isDirected()&&Ae.isMultigraph()===Qe.isMultigraph()},$=function(Ae,Qe){var ft=B(Ae,Qe);return ft.length===Ae.nodes().length},Ee=function(Ae,Qe){var ft=_(Ae,Qe);return ft.length===Ae.edges().length},Ne=function(Ae,Qe){return M(Ae,Qe)&&Ae.nodeCount()===Qe.nodeCount()&&$(Ae,Qe)&&Ae.edgeCount()===Qe.edgeCount()&&Ee(Ae,Qe)},Le=function(Ae,Qe){return $(Ae,Qe)&&Ee(Ae,Qe)};function Ye(He,Ae){return or(He)||Lr(He,Ae)||Et(He,Ae)||Ot()}function Ot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Et(He,Ae){if(He){if(typeof He=="string")return Zt(He,Ae);var Qe=Object.prototype.toString.call(He).slice(8,-1);if(Qe==="Object"&&He.constructor&&(Qe=He.constructor.name),Qe==="Map"||Qe==="Set")return Array.from(He);if(Qe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qe))return Zt(He,Ae)}}function Zt(He,Ae){(Ae==null||Ae>He.length)&&(Ae=He.length);for(var Qe=0,ft=new Array(Ae);Qe<Ae;Qe++)ft[Qe]=He[Qe];return ft}function Lr(He,Ae){var Qe=He==null?null:typeof Symbol!="undefined"&&He[Symbol.iterator]||He["@@iterator"];if(Qe!=null){var ft=[],ut=!0,St=!1,Qt,qt;try{for(Qe=Qe.call(He);!(ut=(Qt=Qe.next()).done)&&(ft.push(Qt.value),!(Ae&&ft.length===Ae));ut=!0);}catch(Xr){St=!0,qt=Xr}finally{try{!ut&&Qe.return!=null&&Qe.return()}finally{if(St)throw qt}}return ft}}function or(He){if(Array.isArray(He))return He}function $r(He){return He instanceof Q}function Sn(He){if(He.isMultigraph())return!1;for(var Ae=He.edges(),Qe=new Map,ft=0;ft<Ae.length;ft++){var ut=Ae[ft];if(ut.v===ut.w)return!1;var St=[ut.v,ut.w].sort(),Qt=Ye(St,2),qt=Qt[0],Xr=Qt[1],vn="".concat(qt,"-").concat(Xr);if(Qe.has(vn))return!1;Qe.set(vn,!0)}return!0}function kt(He){return He.nodes().length===0}function nr(He){for(var Ae=He.edges(),Qe=0;Qe<Ae.length;Qe++){var ft=Ae[Qe];if(ft.v===ft.w)return!0}return!1}var _r=function(Ae,Qe){if(!Sn(Ae)||!Sn(Qe)||!$(Ae,Qe)||ge(Ae,Qe))return!1;var ft=Ae.nodeCount();return Ae.edgeCount()+Qe.edgeCount()===ft*(ft-1)/2},Fr=function(Ae){if(!Sn(Ae))return null;for(var Qe=Ae.nodeCount(),ft=new Q({compound:Ae.isCompound(),directed:Ae.isDirected(),multigraph:Ae.isMultigraph()}),ut=Ae.nodes(),St=0;St<Qe;St++){var Qt=ut[St];ft.setNode(Qt,Ae.node(Qt));for(var qt=St+1;qt<Qe;qt++){var Xr=ut[qt];Ae.hasEdge(Qt,Xr)||ft.setEdge(Qt,Xr)}}return ft}},81746:function(pr){(function(G,F){pr.exports=F()})(typeof self!="undefined"?self:this,function(){return function(U){var G={};function F(Y){if(G[Y])return G[Y].exports;var P=G[Y]={i:Y,l:!1,exports:{}};return U[Y].call(P.exports,P,P.exports,F),P.l=!0,P.exports}return F.m=U,F.c=G,F.d=function(Y,P,A){F.o(Y,P)||Object.defineProperty(Y,P,{configurable:!1,enumerable:!0,get:A})},F.n=function(Y){var P=Y&&Y.__esModule?function(){return Y.default}:function(){return Y};return F.d(P,"a",P),P},F.o=function(Y,P){return Object.prototype.hasOwnProperty.call(Y,P)},F.p="",F(F.s=36)}([function(U,G,F){"use strict";var Y=F(3);G.a=function(P){return Array.isArray?Array.isArray(P):Object(Y.a)(P,"Array")}},function(U,G,F){"use strict";var Y=function(P){return P!==null&&typeof P!="function"&&isFinite(P.length)};G.a=Y},function(U,G,F){"use strict";var Y=F(3);G.a=function(P){return Object(Y.a)(P,"Function")}},function(U,G,F){"use strict";var Y={}.toString,P=function(A,N){return Y.call(A)==="[object "+N+"]"};G.a=P},function(U,G,F){"use strict";var Y=F(3);G.a=function(P){return Object(Y.a)(P,"String")}},function(U,G,F){"use strict";var Y=F(3),P=function(A){return Object(Y.a)(A,"Number")};G.a=P},function(U,G,F){var Y=F(38),P=Y.mix;function A(N,O,x,E){return E===void 0&&(E="height"),x==="center"?(N[E]+O[E])/2:N.height}U.exports={assign:P,getHeight:A}},function(U,G,F){"use strict";var Y=function(P){return P==null};G.a=Y},function(U,G,F){"use strict";var Y=F(0),P=F(12);function A(N,O){if(N){var x;if(Object(Y.a)(N))for(var E=0,y=N.length;E<y&&(x=O(N[E],E),x!==!1);E++);else if(Object(P.a)(N)){for(var m in N)if(N.hasOwnProperty(m)&&(x=O(N[m],m),x===!1))break}}}G.a=A},function(U,G,F){"use strict";var Y=F(7);G.a=function(P){return Object(Y.a)(P)?"":P.toString()}},function(U,G,F){"use strict";var Y=F(14),P=F(3),A=function(N){if(!Object(Y.a)(N)||!Object(P.a)(N,"Object"))return!1;if(Object.getPrototypeOf(N)===null)return!0;for(var O=N;Object.getPrototypeOf(O)!==null;)O=Object.getPrototypeOf(O);return Object.getPrototypeOf(N)===O};G.a=A},function(U,G,F){var Y=F(18),P=function(){function A(O,x){x===void 0&&(x={});var E=this;E.options=x,E.rootNode=Y(O,x)}var N=A.prototype;return N.execute=function(){throw new Error("please override this method")},A}();U.exports=P},function(U,G,F){"use strict";G.a=function(Y){var P=typeof Y;return Y!==null&&P==="object"||P==="function"}},function(U,G,F){"use strict";var Y=F(1),P=function(A,N){return Object(Y.a)(A)?A.indexOf(N)>-1:!1};G.a=P},function(U,G,F){"use strict";var Y=function(P){return typeof P=="object"&&P!==null};G.a=Y},function(U,G,F){"use strict";var Y=F(8),P=F(2),A=Object.values?function(N){return Object.values(N)}:function(N){var O=[];return Object(Y.a)(N,function(x,E){Object(P.a)(N)&&E==="prototype"||O.push(x)}),O};G.a=A},function(U,G,F){"use strict";G.a=P;function Y(A,N){for(var O in N)N.hasOwnProperty(O)&&O!=="constructor"&&N[O]!==void 0&&(A[O]=N[O])}function P(A,N,O,x){return N&&Y(A,N),O&&Y(A,O),x&&Y(A,x),A}},function(U,G,F){var Y=F(35),P=["LR","RL","TB","BT","H","V"],A=["LR","RL","H"],N=function(E){return A.indexOf(E)>-1},O=P[0];U.exports=function(x,E,y){var m=E.direction||O;if(E.isHorizontal=N(m),m&&P.indexOf(m)===-1)throw new TypeError("Invalid direction: "+m);if(m===P[0])y(x,E);else if(m===P[1])y(x,E),x.right2left();else if(m===P[2])y(x,E);else if(m===P[3])y(x,E),x.bottom2top();else if(m===P[4]||m===P[5]){var g=Y(x,E),v=g.left,u=g.right;y(v,E),y(u,E),E.isHorizontal?v.right2left():v.bottom2top(),u.translate(v.x-u.x,v.y-u.y),x.x=v.x,x.y=u.y;var b=x.getBoundingBox();E.isHorizontal?b.top<0&&x.translate(0,-b.top):b.left<0&&x.translate(-b.left,0)}var T=E.fixedRoot;return T===void 0&&(T=!0),T&&x.translate(-(x.x+x.width/2+x.hgap),-(x.y+x.height/2+x.vgap)),x}},function(U,G,F){var Y=F(6),P=18,A=P*2,N=P,O={getId:function(m){return m.id||m.name},getPreH:function(m){return m.preH||0},getPreV:function(m){return m.preV||0},getHGap:function(m){return m.hgap||N},getVGap:function(m){return m.vgap||N},getChildren:function(m){return m.children},getHeight:function(m){return m.height||A},getWidth:function(m){var g=m.label||" ";return m.width||g.split("").length*P}};function x(y,m){var g=this;if(g.vgap=g.hgap=0,y instanceof x)return y;g.data=y;var v=m.getHGap(y),u=m.getVGap(y);return g.preH=m.getPreH(y),g.preV=m.getPreV(y),g.width=m.getWidth(y),g.height=m.getHeight(y),g.width+=g.preH,g.height+=g.preV,g.id=m.getId(y),g.x=g.y=0,g.depth=0,g.children||(g.children=[]),g.addGap(v,u),g}Y.assign(x.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(m,g){var v=this;v.hgap+=m,v.vgap+=g,v.width+=2*m,v.height+=2*g},eachNode:function(m){for(var g=this,v=[g],u;u=v.shift();)m(u),v=u.children.concat(v)},DFTraverse:function(m){this.eachNode(m)},BFTraverse:function(m){for(var g=this,v=[g],u;u=v.shift();)m(u),v=v.concat(u.children)},getBoundingBox:function(){var m={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(g){m.left=Math.min(m.left,g.x),m.top=Math.min(m.top,g.y),m.width=Math.max(m.width,g.x+g.width),m.height=Math.max(m.height,g.y+g.height)}),m},translate:function(m,g){m===void 0&&(m=0),g===void 0&&(g=0),this.eachNode(function(v){v.x+=m,v.y+=g,v.x+=v.preH,v.y+=v.preV})},right2left:function(){var m=this,g=m.getBoundingBox();m.eachNode(function(v){v.x=v.x-(v.x-g.left)*2-v.width}),m.translate(g.width,0)},bottom2top:function(){var m=this,g=m.getBoundingBox();m.eachNode(function(v){v.y=v.y-(v.y-g.top)*2-v.height}),m.translate(0,g.height)}});function E(y,m,g){m===void 0&&(m={}),m=Y.assign({},O,m);var v=new x(y,m),u=[v],b;if(!g&&!y.collapsed){for(;b=u.shift();)if(!b.data.collapsed){var T=m.getChildren(b.data),D=T?T.length:0;if(b.children=new Array(D),T&&D)for(var k=0;k<D;k++){var V=new x(T[k],m);b.children[k]=V,u.push(V),V.parent=b,V.depth=b.depth+1}}}return v}U.exports=E},function(U,G,F){"use strict";var Y=F(1),P=function(A,N){if(!Object(Y.a)(A))return A;for(var O=[],x=0;x<A.length;x++){var E=A[x];N(E,x)&&O.push(E)}return O};G.a=P},function(U,G,F){"use strict";var Y=F(7),P=F(21);function A(N,O){var x=Object(P.a)(O),E=x.length;if(Object(Y.a)(N))return!E;for(var y=0;y<E;y+=1){var m=x[y];if(O[m]!==N[m]||!(m in N))return!1}return!0}G.a=A},function(U,G,F){"use strict";var Y=F(8),P=F(2),A=Object.keys?function(N){return Object.keys(N)}:function(N){var O=[];return Object(Y.a)(N,function(x,E){Object(P.a)(N)&&E==="prototype"||O.push(E)}),O};G.a=A},function(U,G,F){"use strict";var Y=F(0);G.a=function(P){if(Object(Y.a)(P))return P.reduce(function(A,N){return Math.max(A,N)},P[0])}},function(U,G,F){"use strict";var Y=F(0);G.a=function(P){if(Object(Y.a)(P))return P.reduce(function(A,N){return Math.min(A,N)},P[0])}},function(U,G,F){"use strict";var Y=F(1),P=Array.prototype.splice,A=function(O,x){if(!Object(Y.a)(O))return[];for(var E=O?x.length:0,y=E-1;E--;){var m=void 0,g=x[E];(E===y||g!==m)&&(m=g,P.call(O,g,1))}return O};G.a=A},function(U,G,F){"use strict";var Y=F(8),P=F(0),A=F(10),N=function(O,x,E){if(!Object(P.a)(O)&&!Object(A.a)(O))return O;var y=E;return Object(Y.a)(O,function(m,g){y=x(y,m,g)}),y};G.a=N},function(U,G,F){"use strict";G.a=Y;function Y(P,A){A===void 0&&(A=new Map);var N=[];if(Array.isArray(P))for(var O=0,x=P.length;O<x;O++){var E=P[O];A.has(E)||(N.push(E),A.set(E,!0))}return N}},function(U,G,F){"use strict";G.a=N;var Y=F(0),P=F(2),A=F(28);function N(O,x){if(!x)return{0:O};if(!Object(P.a)(x)){var E=Object(Y.a)(x)?x:x.replace(/\s+/g,"").split("*");x=function(y){for(var m="_",g=0,v=E.length;g<v;g++)m+=y[E[g]]&&y[E[g]].toString();return m}}return Object(A.a)(O,x)}},function(U,G,F){"use strict";var Y=F(0),P=F(2),A=Object.prototype.hasOwnProperty;function N(O,x){if(!x||!Object(Y.a)(O))return{};for(var E={},y=Object(P.a)(x)?x:function(u){return u[x]},m,g=0;g<O.length;g++){var v=O[g];m=y(v),A.call(E,m)?E[m].push(v):E[m]=[v]}return E}G.a=N},function(U,G,F){"use strict";G.a=function(Y,P){return Y.hasOwnProperty(P)}},function(U,G,F){"use strict";var Y={}.toString,P=function(A){return Y.call(A).replace(/^\[object /,"").replace(/]$/,"")};G.a=P},function(U,G,F){"use strict";var Y=Object.prototype,P=function(A){var N=A&&A.constructor,O=typeof N=="function"&&N.prototype||Y;return A===O};G.a=P},function(U,G,F){"use strict";var Y=F(2);G.a=function(P,A){if(!Object(Y.a)(P))throw new TypeError("Expected a function");var N=function(){for(var O=[],x=0;x<arguments.length;x++)O[x]=arguments[x];var E=A?A.apply(this,O):O[0],y=N.cache;if(y.has(E))return y.get(E);var m=P.apply(this,O);return y.set(E,m),m};return N.cache=new Map,N}},function(U,G,F){"use strict";var Y=F(14),P=F(1),A=F(4),N=function(O,x){if(O===x)return!0;if(!O||!x||Object(A.a)(O)||Object(A.a)(x))return!1;if(Object(P.a)(O)||Object(P.a)(x)){if(O.length!==x.length)return!1;for(var E=!0,y=0;y<O.length&&(E=N(O[y],x[y]),!!E);y++);return E}if(Object(Y.a)(O)||Object(Y.a)(x)){var m=Object.keys(O),g=Object.keys(x);if(m.length!==g.length)return!1;for(var E=!0,y=0;y<m.length&&(E=N(O[m[y]],x[m[y]]),!!E);y++);return E}return!1};G.a=N},function(U,G,F){"use strict";var Y=F(116),P=F(15),A=F(32),N=F(4),O;G.a=Object(A.a)(function(x,E){E===void 0&&(E={});var y=E.fontSize,m=E.fontFamily,g=E.fontWeight,v=E.fontStyle,u=E.fontVariant;return O||(O=document.createElement("canvas").getContext("2d")),O.font=[v,u,g,y+"px",m].join(" "),O.measureText(Object(N.a)(x)?x:"").width},function(x,E){return E===void 0&&(E={}),Object(Y.a)([x],Object(P.a)(E)).join("")})},function(U,G,F){var Y=F(18);U.exports=function(P,A){for(var N=Y(P.data,A,!0),O=Y(P.data,A,!0),x=P.children.length,E=Math.round(x/2),y=A.getSide||function(u,b){return b<E?"right":"left"},m=0;m<x;m++){var g=P.children[m],v=y(g,m);v==="right"?O.children.push(g):N.children.push(g)}return N.eachNode(function(u){u.isRoot()||(u.side="left")}),O.eachNode(function(u){u.isRoot()||(u.side="right")}),{left:N,right:O}}},function(U,G,F){var Y={compactBox:F(37),dendrogram:F(120),indented:F(122),mindmap:F(124)};U.exports=Y},function(U,G,F){function Y(g,v){g.prototype=Object.create(v.prototype),g.prototype.constructor=g,P(g,v)}function P(g,v){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,T){return b.__proto__=T,b},P(g,v)}var A=F(11),N=F(119),O=F(17),x=F(6),E=function(g){Y(v,g);function v(){return g.apply(this,arguments)||this}var u=v.prototype;return u.execute=function(){var T=this;return O(T.rootNode,T.options,N)},v}(A),y={};function m(g,v){return v=x.assign({},y,v),new E(g,v).execute()}U.exports=m},function(U,G,F){"use strict";Object.defineProperty(G,"__esModule",{value:!0});var Y=F(13);F.d(G,"contains",function(){return Y.a}),F.d(G,"includes",function(){return Y.a});var P=F(39);F.d(G,"difference",function(){return P.a});var A=F(40);F.d(G,"find",function(){return A.a});var N=F(41);F.d(G,"findIndex",function(){return N.a});var O=F(42);F.d(G,"firstValue",function(){return O.a});var x=F(43);F.d(G,"flatten",function(){return x.a});var E=F(44);F.d(G,"flattenDeep",function(){return E.a});var y=F(45);F.d(G,"getRange",function(){return y.a});var m=F(46);F.d(G,"pull",function(){return m.a});var g=F(24);F.d(G,"pullAt",function(){return g.a});var v=F(25);F.d(G,"reduce",function(){return v.a});var u=F(47);F.d(G,"remove",function(){return u.a});var b=F(48);F.d(G,"sortBy",function(){return b.a});var T=F(49);F.d(G,"union",function(){return T.a});var D=F(26);F.d(G,"uniq",function(){return D.a});var k=F(50);F.d(G,"valuesOfKey",function(){return k.a});var V=F(51);F.d(G,"head",function(){return V.a});var J=F(52);F.d(G,"last",function(){return J.a});var W=F(53);F.d(G,"startsWith",function(){return W.a});var X=F(54);F.d(G,"endsWith",function(){return X.a});var K=F(19);F.d(G,"filter",function(){return K.a});var Q=F(55);F.d(G,"every",function(){return Q.a});var re=F(56);F.d(G,"some",function(){return re.a});var q=F(57);F.d(G,"group",function(){return q.a});var ae=F(28);F.d(G,"groupBy",function(){return ae.a});var ue=F(27);F.d(G,"groupToMap",function(){return ue.a});var ce=F(58);F.d(G,"getWrapBehavior",function(){return ce.a});var De=F(59);F.d(G,"wrapBehavior",function(){return De.a});var Ie=F(60);F.d(G,"number2color",function(){return Ie.a});var Pe=F(61);F.d(G,"parseRadius",function(){return Pe.a});var we=F(62);F.d(G,"clamp",function(){return we.a});var xe=F(63);F.d(G,"fixedBase",function(){return xe.a});var ve=F(64);F.d(G,"isDecimal",function(){return ve.a});var Se=F(65);F.d(G,"isEven",function(){return Se.a});var Te=F(66);F.d(G,"isInteger",function(){return Te.a});var We=F(67);F.d(G,"isNegative",function(){return We.a});var Ge=F(68);F.d(G,"isNumberEqual",function(){return Ge.a});var Je=F(69);F.d(G,"isOdd",function(){return Je.a});var mt=F(70);F.d(G,"isPositive",function(){return mt.a});var xt=F(22);F.d(G,"max",function(){return xt.a});var Ze=F(71);F.d(G,"maxBy",function(){return Ze.a});var $e=F(23);F.d(G,"min",function(){return $e.a});var gt=F(72);F.d(G,"minBy",function(){return gt.a});var At=F(73);F.d(G,"mod",function(){return At.a});var yt=F(74);F.d(G,"toDegree",function(){return yt.a});var ct=F(75);F.d(G,"toInteger",function(){return ct.a});var Kt=F(76);F.d(G,"toRadian",function(){return Kt.a});var $t=F(77);F.d(G,"forIn",function(){return $t.a});var jt=F(29);F.d(G,"has",function(){return jt.a});var ir=F(78);F.d(G,"hasKey",function(){return ir.a});var mr=F(79);F.d(G,"hasValue",function(){return mr.a});var tn=F(21);F.d(G,"keys",function(){return tn.a});var Dr=F(20);F.d(G,"isMatch",function(){return Dr.a});var Dn=F(15);F.d(G,"values",function(){return Dn.a});var Ve=F(80);F.d(G,"lowerCase",function(){return Ve.a});var Nr=F(81);F.d(G,"lowerFirst",function(){return Nr.a});var Fn=F(82);F.d(G,"substitute",function(){return Fn.a});var Vn=F(83);F.d(G,"upperCase",function(){return Vn.a});var va=F(84);F.d(G,"upperFirst",function(){return va.a});var aa=F(30);F.d(G,"getType",function(){return aa.a});var Ya=F(85);F.d(G,"isArguments",function(){return Ya.a});var la=F(0);F.d(G,"isArray",function(){return la.a});var Qa=F(1);F.d(G,"isArrayLike",function(){return Qa.a});var Wa=F(86);F.d(G,"isBoolean",function(){return Wa.a});var Da=F(87);F.d(G,"isDate",function(){return Da.a});var ar=F(88);F.d(G,"isError",function(){return ar.a});var Or=F(2);F.d(G,"isFunction",function(){return Or.a});var Qr=F(89);F.d(G,"isFinite",function(){return Qr.a});var wn=F(7);F.d(G,"isNil",function(){return wn.a});var On=F(90);F.d(G,"isNull",function(){return On.a});var Gn=F(5);F.d(G,"isNumber",function(){return Gn.a});var qn=F(12);F.d(G,"isObject",function(){return qn.a});var oa=F(14);F.d(G,"isObjectLike",function(){return oa.a});var ya=F(10);F.d(G,"isPlainObject",function(){return ya.a});var Ka=F(31);F.d(G,"isPrototype",function(){return Ka.a});var mn=F(91);F.d(G,"isRegExp",function(){return mn.a});var jn=F(4);F.d(G,"isString",function(){return jn.a});var Jn=F(3);F.d(G,"isType",function(){return Jn.a});var Ln=F(92);F.d(G,"isUndefined",function(){return Ln.a});var ma=F(93);F.d(G,"isElement",function(){return ma.a});var Z=F(94);F.d(G,"requestAnimationFrame",function(){return Z.a});var Gt=F(95);F.d(G,"clearAnimationFrame",function(){return Gt.a});var lt=F(96);F.d(G,"augment",function(){return lt.a});var Ht=F(97);F.d(G,"clone",function(){return Ht.a});var Ft=F(98);F.d(G,"debounce",function(){return Ft.a});var Ir=F(32);F.d(G,"memoize",function(){return Ir.a});var Sr=F(99);F.d(G,"deepMix",function(){return Sr.a});var nn=F(8);F.d(G,"each",function(){return nn.a});var an=F(100);F.d(G,"extend",function(){return an.a});var qr=F(101);F.d(G,"indexOf",function(){return qr.a});var le=F(102);F.d(G,"isEmpty",function(){return le.a});var ge=F(33);F.d(G,"isEqual",function(){return ge.a});var B=F(103);F.d(G,"isEqualWith",function(){return B.a});var _=F(104);F.d(G,"map",function(){return _.a});var M=F(105);F.d(G,"mapValues",function(){return M.a});var $=F(16);F.d(G,"mix",function(){return $.a}),F.d(G,"assign",function(){return $.a});var Ee=F(106);F.d(G,"get",function(){return Ee.a});var Ne=F(107);F.d(G,"set",function(){return Ne.a});var Le=F(108);F.d(G,"pick",function(){return Le.a});var Ye=F(109);F.d(G,"omit",function(){return Ye.a});var Ot=F(110);F.d(G,"throttle",function(){return Ot.a});var Et=F(111);F.d(G,"toArray",function(){return Et.a});var Zt=F(9);F.d(G,"toString",function(){return Zt.a});var Lr=F(112);F.d(G,"uniqueId",function(){return Lr.a});var or=F(113);F.d(G,"noop",function(){return or.a});var $r=F(114);F.d(G,"identity",function(){return $r.a});var Sn=F(115);F.d(G,"size",function(){return Sn.a});var kt=F(34);F.d(G,"measureTextWidth",function(){return kt.a});var nr=F(117);F.d(G,"getEllipsisText",function(){return nr.a});var _r=F(118);F.d(G,"Cache",function(){return _r.a})},function(U,G,F){"use strict";var Y=F(19),P=F(13),A=function(N,O){return O===void 0&&(O=[]),Object(Y.a)(N,function(x){return!Object(P.a)(O,x)})};G.a=A},function(U,G,F){"use strict";var Y=F(2),P=F(20),A=F(0),N=F(10);function O(x,E){if(!Object(A.a)(x))return null;var y;if(Object(Y.a)(E)&&(y=E),Object(N.a)(E)&&(y=function(g){return Object(P.a)(g,E)}),y){for(var m=0;m<x.length;m+=1)if(y(x[m]))return x[m]}return null}G.a=O},function(U,G,F){"use strict";function Y(P,A,N){N===void 0&&(N=0);for(var O=N;O<P.length;O++)if(A(P[O],O))return O;return-1}G.a=Y},function(U,G,F){"use strict";var Y=F(7),P=F(0),A=function(N,O){for(var x=null,E=0;E<N.length;E++){var y=N[E],m=y[O];if(!Object(Y.a)(m)){Object(P.a)(m)?x=m[0]:x=m;break}}return x};G.a=A},function(U,G,F){"use strict";var Y=F(0),P=function(A){if(!Object(Y.a)(A))return[];for(var N=[],O=0;O<A.length;O++)N=N.concat(A[O]);return N};G.a=P},function(U,G,F){"use strict";var Y=F(0),P=function(A,N){if(N===void 0&&(N=[]),!Object(Y.a)(A))N.push(A);else for(var O=0;O<A.length;O+=1)P(A[O],N);return N};G.a=P},function(U,G,F){"use strict";var Y=F(0),P=F(22),A=F(23),N=function(O){var x=O.filter(function(v){return!isNaN(v)});if(!x.length)return{min:0,max:0};if(Object(Y.a)(O[0])){for(var E=[],y=0;y<O.length;y++)E=E.concat(O[y]);x=E}var m=Object(P.a)(x),g=Object(A.a)(x);return{min:g,max:m}};G.a=N},function(U,G,F){"use strict";var Y=Array.prototype,P=Y.splice,A=Y.indexOf,N=function(O){for(var x=[],E=1;E<arguments.length;E++)x[E-1]=arguments[E];for(var y=0;y<x.length;y++)for(var m=x[y],g=-1;(g=A.call(O,m))>-1;)P.call(O,g,1);return O};G.a=N},function(U,G,F){"use strict";var Y=F(1),P=F(24),A=function(N,O){var x=[];if(!Object(Y.a)(N))return x;for(var E=-1,y=[],m=N.length;++E<m;){var g=N[E];O(g,E,N)&&(x.push(g),y.push(E))}return Object(P.a)(N,y),x};G.a=A},function(U,G,F){"use strict";var Y=F(0),P=F(4),A=F(2);function N(O,x){var E;if(Object(A.a)(x))E=function(m,g){return x(m)-x(g)};else{var y=[];Object(P.a)(x)?y.push(x):Object(Y.a)(x)&&(y=x),E=function(m,g){for(var v=0;v<y.length;v+=1){var u=y[v];if(m[u]>g[u])return 1;if(m[u]<g[u])return-1}return 0}}return O.sort(E),O}G.a=N},function(U,G,F){"use strict";var Y=F(26),P=function(){for(var A=[],N=0;N<arguments.length;N++)A[N]=arguments[N];return Object(Y.a)([].concat.apply([],A))};G.a=P},function(U,G,F){"use strict";var Y=F(0),P=F(7);G.a=function(A,N){for(var O=[],x={},E=0;E<A.length;E++){var y=A[E],m=y[N];if(!Object(P.a)(m)){Object(Y.a)(m)||(m=[m]);for(var g=0;g<m.length;g++){var v=m[g];x[v]||(O.push(v),x[v]=!0)}}}return O}},function(U,G,F){"use strict";G.a=P;var Y=F(1);function P(A){if(Object(Y.a)(A))return A[0]}},function(U,G,F){"use strict";G.a=P;var Y=F(1);function P(A){if(Object(Y.a)(A)){var N=A;return N[N.length-1]}}},function(U,G,F){"use strict";var Y=F(0),P=F(4);function A(N,O){return Object(Y.a)(N)||Object(P.a)(N)?N[0]===O:!1}G.a=A},function(U,G,F){"use strict";var Y=F(0),P=F(4);function A(N,O){return Object(Y.a)(N)||Object(P.a)(N)?N[N.length-1]===O:!1}G.a=A},function(U,G,F){"use strict";var Y=function(P,A){for(var N=0;N<P.length;N++)if(!A(P[N],N))return!1;return!0};G.a=Y},function(U,G,F){"use strict";var Y=function(P,A){for(var N=0;N<P.length;N++)if(A(P[N],N))return!0;return!1};G.a=Y},function(U,G,F){"use strict";var Y=F(27);G.a=function(P,A){if(!A)return[P];var N=Object(Y.a)(P,A),O=[];for(var x in N)O.push(N[x]);return O}},function(U,G,F){"use strict";function Y(P,A){return P["_wrap_"+A]}G.a=Y},function(U,G,F){"use strict";function Y(P,A){if(P["_wrap_"+A])return P["_wrap_"+A];var N=function(O){P[A](O)};return P["_wrap_"+A]=N,N}G.a=Y},function(U,G,F){"use strict";var Y={};function P(A){var N=Y[A];if(!N){for(var O=A.toString(16),x=O.length;x<6;x++)O="0"+O;N="#"+O,Y[A]=N}return N}G.a=P},function(U,G,F){"use strict";var Y=F(0);function P(A){var N=0,O=0,x=0,E=0;return Object(Y.a)(A)?A.length===1?N=O=x=E=A[0]:A.length===2?(N=x=A[0],O=E=A[1]):A.length===3?(N=A[0],O=E=A[1],x=A[2]):(N=A[0],O=A[1],x=A[2],E=A[3]):N=O=x=E=A,{r1:N,r2:O,r3:x,r4:E}}G.a=P},function(U,G,F){"use strict";var Y=function(P,A,N){return P<A?A:P>N?N:P};G.a=Y},function(U,G,F){"use strict";var Y=function(P,A){var N=A.toString(),O=N.indexOf(".");if(O===-1)return Math.round(P);var x=N.substr(O+1).length;return x>20&&(x=20),parseFloat(P.toFixed(x))};G.a=Y},function(U,G,F){"use strict";var Y=F(5),P=function(A){return Object(Y.a)(A)&&A%1!==0};G.a=P},function(U,G,F){"use strict";var Y=F(5),P=function(A){return Object(Y.a)(A)&&A%2===0};G.a=P},function(U,G,F){"use strict";var Y=F(5),P=Number.isInteger?Number.isInteger:function(A){return Object(Y.a)(A)&&A%1===0};G.a=P},function(U,G,F){"use strict";var Y=F(5),P=function(A){return Object(Y.a)(A)&&A<0};G.a=P},function(U,G,F){"use strict";G.a=P;var Y=1e-5;function P(A,N,O){return O===void 0&&(O=Y),Math.abs(A-N)<O}},function(U,G,F){"use strict";var Y=F(5),P=function(A){return Object(Y.a)(A)&&A%2!==0};G.a=P},function(U,G,F){"use strict";var Y=F(5),P=function(A){return Object(Y.a)(A)&&A>0};G.a=P},function(U,G,F){"use strict";var Y=F(0),P=F(2);G.a=function(A,N){if(Object(Y.a)(A)){for(var O,x=-1/0,E=0;E<A.length;E++){var y=A[E],m=Object(P.a)(N)?N(y):y[N];m>x&&(O=y,x=m)}return O}}},function(U,G,F){"use strict";var Y=F(0),P=F(2);G.a=function(A,N){if(Object(Y.a)(A)){for(var O,x=1/0,E=0;E<A.length;E++){var y=A[E],m=Object(P.a)(N)?N(y):y[N];m<x&&(O=y,x=m)}return O}}},function(U,G,F){"use strict";var Y=function(P,A){return(P%A+A)%A};G.a=Y},function(U,G,F){"use strict";var Y=180/Math.PI,P=function(A){return Y*A};G.a=P},function(U,G,F){"use strict";G.a=parseInt},function(U,G,F){"use strict";var Y=Math.PI/180,P=function(A){return Y*A};G.a=P},function(U,G,F){"use strict";var Y=F(8);G.a=Y.a},function(U,G,F){"use strict";var Y=F(29);G.a=Y.a},function(U,G,F){"use strict";var Y=F(13),P=F(15);G.a=function(A,N){return Object(Y.a)(Object(P.a)(A),N)}},function(U,G,F){"use strict";var Y=F(9),P=function(A){return Object(Y.a)(A).toLowerCase()};G.a=P},function(U,G,F){"use strict";var Y=F(9),P=function(A){var N=Object(Y.a)(A);return N.charAt(0).toLowerCase()+N.substring(1)};G.a=P},function(U,G,F){"use strict";function Y(P,A){return!P||!A?P:P.replace(/\\?\{([^{}]+)\}/g,function(N,O){return N.charAt(0)==="\\"?N.slice(1):A[O]===void 0?"":A[O]})}G.a=Y},function(U,G,F){"use strict";var Y=F(9),P=function(A){return Object(Y.a)(A).toUpperCase()};G.a=P},function(U,G,F){"use strict";var Y=F(9),P=function(A){var N=Object(Y.a)(A);return N.charAt(0).toUpperCase()+N.substring(1)};G.a=P},function(U,G,F){"use strict";var Y=F(3),P=function(A){return Object(Y.a)(A,"Arguments")};G.a=P},function(U,G,F){"use strict";var Y=F(3),P=function(A){return Object(Y.a)(A,"Boolean")};G.a=P},function(U,G,F){"use strict";var Y=F(3),P=function(A){return Object(Y.a)(A,"Date")};G.a=P},function(U,G,F){"use strict";var Y=F(3),P=function(A){return Object(Y.a)(A,"Error")};G.a=P},function(U,G,F){"use strict";var Y=F(5);G.a=function(P){return Object(Y.a)(P)&&isFinite(P)}},function(U,G,F){"use strict";var Y=function(P){return P===null};G.a=Y},function(U,G,F){"use strict";var Y=F(3),P=function(A){return Object(Y.a)(A,"RegExp")};G.a=P},function(U,G,F){"use strict";var Y=function(P){return P===void 0};G.a=Y},function(U,G,F){"use strict";var Y=function(P){return P instanceof Element||P instanceof HTMLDocument};G.a=Y},function(U,G,F){"use strict";G.a=Y;function Y(P){var A=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(N){return setTimeout(N,16)};return A(P)}},function(U,G,F){"use strict";G.a=Y;function Y(P){var A=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;A(P)}},function(U,G,F){"use strict";var Y=F(16),P=F(2),A=function(){for(var N=[],O=0;O<arguments.length;O++)N[O]=arguments[O];for(var x=N[0],E=1;E<N.length;E++){var y=N[E];Object(P.a)(y)&&(y=y.prototype),Object(Y.a)(x.prototype,y)}};G.a=A},function(U,G,F){"use strict";var Y=F(0),P=function(A){if(typeof A!="object"||A===null)return A;var N;if(Object(Y.a)(A)){N=[];for(var O=0,x=A.length;O<x;O++)typeof A[O]=="object"&&A[O]!=null?N[O]=P(A[O]):N[O]=A[O]}else{N={};for(var E in A)typeof A[E]=="object"&&A[E]!=null?N[E]=P(A[E]):N[E]=A[E]}return N};G.a=P},function(U,G,F){"use strict";function Y(P,A,N){var O;return function(){var x=this,E=arguments,y=function(){O=null,N||P.apply(x,E)},m=N&&!O;clearTimeout(O),O=setTimeout(y,A),m&&P.apply(x,E)}}G.a=Y},function(U,G,F){"use strict";var Y=F(0),P=F(10),A=5;function N(x,E,y,m){y=y||0,m=m||A;for(var g in E)if(E.hasOwnProperty(g)){var v=E[g];v!==null&&Object(P.a)(v)?(Object(P.a)(x[g])||(x[g]={}),y<m?N(x[g],v,y+1,m):x[g]=E[g]):Object(Y.a)(v)?(x[g]=[],x[g]=x[g].concat(v)):v!==void 0&&(x[g]=v)}}var O=function(x){for(var E=[],y=1;y<arguments.length;y++)E[y-1]=arguments[y];for(var m=0;m<E.length;m+=1)N(x,E[m]);return x};G.a=O},function(U,G,F){"use strict";var Y=F(16),P=F(2),A=function(N,O,x,E){Object(P.a)(O)||(x=O,O=N,N=function(){});var y=Object.create?function(g,v){return Object.create(g,{constructor:{value:v}})}:function(g,v){function u(){}u.prototype=g;var b=new u;return b.constructor=v,b},m=y(O.prototype,N);return N.prototype=Object(Y.a)(m,N.prototype),N.superclass=y(O.prototype,O),Object(Y.a)(m,x),Object(Y.a)(N,E),N};G.a=A},function(U,G,F){"use strict";var Y=F(1),P=function(A,N){if(!Object(Y.a)(A))return-1;var O=Array.prototype.indexOf;if(O)return O.call(A,N);for(var x=-1,E=0;E<A.length;E++)if(A[E]===N){x=E;break}return x};G.a=P},function(U,G,F){"use strict";var Y=F(7),P=F(1),A=F(30),N=F(31),O=Object.prototype.hasOwnProperty;function x(E){if(Object(Y.a)(E))return!0;if(Object(P.a)(E))return!E.length;var y=Object(A.a)(E);if(y==="Map"||y==="Set")return!E.size;if(Object(N.a)(E))return!Object.keys(E).length;for(var m in E)if(O.call(E,m))return!1;return!0}G.a=x},function(U,G,F){"use strict";var Y=F(2),P=F(33);G.a=function(A,N,O){return Object(Y.a)(O)?!!O(A,N):Object(P.a)(A,N)}},function(U,G,F){"use strict";var Y=F(1),P=function(A,N){if(!Object(Y.a)(A))return A;for(var O=[],x=0;x<A.length;x++){var E=A[x];O.push(N(E,x))}return O};G.a=P},function(U,G,F){"use strict";var Y=F(7),P=F(12),A=function(N){return N};G.a=function(N,O){O===void 0&&(O=A);var x={};return Object(P.a)(N)&&!Object(Y.a)(N)&&Object.keys(N).forEach(function(E){x[E]=O(N[E],E)}),x}},function(U,G,F){"use strict";var Y=F(4);G.a=function(P,A,N){for(var O=0,x=Object(Y.a)(A)?A.split("."):A;P&&O<x.length;)P=P[x[O++]];return P===void 0||O<x.length?N:P}},function(U,G,F){"use strict";var Y=F(12),P=F(4),A=F(5);G.a=function(N,O,x){var E=N,y=Object(P.a)(O)?O.split("."):O;return y.forEach(function(m,g){g<y.length-1?(Object(Y.a)(E[m])||(E[m]=Object(A.a)(y[g+1])?[]:{}),E=E[m]):E[m]=x}),N}},function(U,G,F){"use strict";var Y=F(8),P=F(10),A=Object.prototype.hasOwnProperty;G.a=function(N,O){if(N===null||!Object(P.a)(N))return{};var x={};return Object(Y.a)(O,function(E){A.call(N,E)&&(x[E]=N[E])}),x}},function(U,G,F){"use strict";var Y=F(25);G.a=function(P,A){return Object(Y.a)(P,function(N,O,x){return A.includes(x)||(N[x]=O),N},{})}},function(U,G,F){"use strict";G.a=function(Y,P,A){var N,O,x,E,y=0;A||(A={});var m=function(){y=A.leading===!1?0:Date.now(),N=null,E=Y.apply(O,x),N||(O=x=null)},g=function(){var v=Date.now();!y&&A.leading===!1&&(y=v);var u=P-(v-y);return O=this,x=arguments,u<=0||u>P?(N&&(clearTimeout(N),N=null),y=v,E=Y.apply(O,x),N||(O=x=null)):!N&&A.trailing!==!1&&(N=setTimeout(m,u)),E};return g.cancel=function(){clearTimeout(N),y=0,N=O=x=null},g}},function(U,G,F){"use strict";var Y=F(1);G.a=function(P){return Object(Y.a)(P)?Array.prototype.slice.call(P):[]}},function(U,G,F){"use strict";var Y={};G.a=function(P){return P=P||"g",Y[P]?Y[P]+=1:Y[P]=1,P+Y[P]}},function(U,G,F){"use strict";G.a=function(){}},function(U,G,F){"use strict";G.a=function(Y){return Y}},function(U,G,F){"use strict";G.a=A;var Y=F(7),P=F(1);function A(N){return Object(Y.a)(N)?0:Object(P.a)(N)?N.length:Object.keys(N).length}},function(U,G,F){"use strict";G.a=W;var Y=function(xe,ve){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Se,Te){Se.__proto__=Te}||function(Se,Te){for(var We in Te)Object.prototype.hasOwnProperty.call(Te,We)&&(Se[We]=Te[We])},Y(xe,ve)};function P(xe,ve){if(typeof ve!="function"&&ve!==null)throw new TypeError("Class extends value "+String(ve)+" is not a constructor or null");Y(xe,ve);function Se(){this.constructor=xe}xe.prototype=ve===null?Object.create(ve):(Se.prototype=ve.prototype,new Se)}var A=function(){return A=Object.assign||function(ve){for(var Se,Te=1,We=arguments.length;Te<We;Te++){Se=arguments[Te];for(var Ge in Se)Object.prototype.hasOwnProperty.call(Se,Ge)&&(ve[Ge]=Se[Ge])}return ve},A.apply(this,arguments)};function N(xe,ve){var Se={};for(var Te in xe)Object.prototype.hasOwnProperty.call(xe,Te)&&ve.indexOf(Te)<0&&(Se[Te]=xe[Te]);if(xe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var We=0,Te=Object.getOwnPropertySymbols(xe);We<Te.length;We++)ve.indexOf(Te[We])<0&&Object.prototype.propertyIsEnumerable.call(xe,Te[We])&&(Se[Te[We]]=xe[Te[We]]);return Se}function O(xe,ve,Se,Te){var We=arguments.length,Ge=We<3?ve:Te===null?Te=Object.getOwnPropertyDescriptor(ve,Se):Te,Je;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Ge=Reflect.decorate(xe,ve,Se,Te);else for(var mt=xe.length-1;mt>=0;mt--)(Je=xe[mt])&&(Ge=(We<3?Je(Ge):We>3?Je(ve,Se,Ge):Je(ve,Se))||Ge);return We>3&&Ge&&Object.defineProperty(ve,Se,Ge),Ge}function x(xe,ve){return function(Se,Te){ve(Se,Te,xe)}}function E(xe,ve,Se,Te,We,Ge){function Je(jt){if(jt!==void 0&&typeof jt!="function")throw new TypeError("Function expected");return jt}for(var mt=Te.kind,xt=mt==="getter"?"get":mt==="setter"?"set":"value",Ze=!ve&&xe?Te.static?xe:xe.prototype:null,$e=ve||(Ze?Object.getOwnPropertyDescriptor(Ze,Te.name):{}),gt,At=!1,yt=Se.length-1;yt>=0;yt--){var ct={};for(var Kt in Te)ct[Kt]=Kt==="access"?{}:Te[Kt];for(var Kt in Te.access)ct.access[Kt]=Te.access[Kt];ct.addInitializer=function(jt){if(At)throw new TypeError("Cannot add initializers after decoration has completed");Ge.push(Je(jt||null))};var $t=(0,Se[yt])(mt==="accessor"?{get:$e.get,set:$e.set}:$e[xt],ct);if(mt==="accessor"){if($t===void 0)continue;if($t===null||typeof $t!="object")throw new TypeError("Object expected");(gt=Je($t.get))&&($e.get=gt),(gt=Je($t.set))&&($e.set=gt),(gt=Je($t.init))&&We.push(gt)}else(gt=Je($t))&&(mt==="field"?We.push(gt):$e[xt]=gt)}Ze&&Object.defineProperty(Ze,Te.name,$e),At=!0}function y(xe,ve,Se){for(var Te=arguments.length>2,We=0;We<ve.length;We++)Se=Te?ve[We].call(xe,Se):ve[We].call(xe);return Te?Se:void 0}function m(xe){return typeof xe=="symbol"?xe:"".concat(xe)}function g(xe,ve,Se){return typeof ve=="symbol"&&(ve=ve.description?"[".concat(ve.description,"]"):""),Object.defineProperty(xe,"name",{configurable:!0,value:Se?"".concat(Se," ",ve):ve})}function v(xe,ve){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(xe,ve)}function u(xe,ve,Se,Te){function We(Ge){return Ge instanceof Se?Ge:new Se(function(Je){Je(Ge)})}return new(Se||(Se=Promise))(function(Ge,Je){function mt($e){try{Ze(Te.next($e))}catch(gt){Je(gt)}}function xt($e){try{Ze(Te.throw($e))}catch(gt){Je(gt)}}function Ze($e){$e.done?Ge($e.value):We($e.value).then(mt,xt)}Ze((Te=Te.apply(xe,ve||[])).next())})}function b(xe,ve){var Se={label:0,sent:function(){if(Ge[0]&1)throw Ge[1];return Ge[1]},trys:[],ops:[]},Te,We,Ge,Je;return Je={next:mt(0),throw:mt(1),return:mt(2)},typeof Symbol=="function"&&(Je[Symbol.iterator]=function(){return this}),Je;function mt(Ze){return function($e){return xt([Ze,$e])}}function xt(Ze){if(Te)throw new TypeError("Generator is already executing.");for(;Je&&(Je=0,Ze[0]&&(Se=0)),Se;)try{if(Te=1,We&&(Ge=Ze[0]&2?We.return:Ze[0]?We.throw||((Ge=We.return)&&Ge.call(We),0):We.next)&&!(Ge=Ge.call(We,Ze[1])).done)return Ge;switch(We=0,Ge&&(Ze=[Ze[0]&2,Ge.value]),Ze[0]){case 0:case 1:Ge=Ze;break;case 4:return Se.label++,{value:Ze[1],done:!1};case 5:Se.label++,We=Ze[1],Ze=[0];continue;case 7:Ze=Se.ops.pop(),Se.trys.pop();continue;default:if(Ge=Se.trys,!(Ge=Ge.length>0&&Ge[Ge.length-1])&&(Ze[0]===6||Ze[0]===2)){Se=0;continue}if(Ze[0]===3&&(!Ge||Ze[1]>Ge[0]&&Ze[1]<Ge[3])){Se.label=Ze[1];break}if(Ze[0]===6&&Se.label<Ge[1]){Se.label=Ge[1],Ge=Ze;break}if(Ge&&Se.label<Ge[2]){Se.label=Ge[2],Se.ops.push(Ze);break}Ge[2]&&Se.ops.pop(),Se.trys.pop();continue}Ze=ve.call(xe,Se)}catch($e){Ze=[6,$e],We=0}finally{Te=Ge=0}if(Ze[0]&5)throw Ze[1];return{value:Ze[0]?Ze[1]:void 0,done:!0}}}var T=Object.create?function(xe,ve,Se,Te){Te===void 0&&(Te=Se);var We=Object.getOwnPropertyDescriptor(ve,Se);(!We||("get"in We?!ve.__esModule:We.writable||We.configurable))&&(We={enumerable:!0,get:function(){return ve[Se]}}),Object.defineProperty(xe,Te,We)}:function(xe,ve,Se,Te){Te===void 0&&(Te=Se),xe[Te]=ve[Se]};function D(xe,ve){for(var Se in xe)Se!=="default"&&!Object.prototype.hasOwnProperty.call(ve,Se)&&T(ve,xe,Se)}function k(xe){var ve=typeof Symbol=="function"&&Symbol.iterator,Se=ve&&xe[ve],Te=0;if(Se)return Se.call(xe);if(xe&&typeof xe.length=="number")return{next:function(){return xe&&Te>=xe.length&&(xe=void 0),{value:xe&&xe[Te++],done:!xe}}};throw new TypeError(ve?"Object is not iterable.":"Symbol.iterator is not defined.")}function V(xe,ve){var Se=typeof Symbol=="function"&&xe[Symbol.iterator];if(!Se)return xe;var Te=Se.call(xe),We,Ge=[],Je;try{for(;(ve===void 0||ve-- >0)&&!(We=Te.next()).done;)Ge.push(We.value)}catch(mt){Je={error:mt}}finally{try{We&&!We.done&&(Se=Te.return)&&Se.call(Te)}finally{if(Je)throw Je.error}}return Ge}function J(){for(var xe=[],ve=0;ve<arguments.length;ve++)xe=xe.concat(V(arguments[ve]));return xe}function W(){for(var xe=0,ve=0,Se=arguments.length;ve<Se;ve++)xe+=arguments[ve].length;for(var Te=Array(xe),We=0,ve=0;ve<Se;ve++)for(var Ge=arguments[ve],Je=0,mt=Ge.length;Je<mt;Je++,We++)Te[We]=Ge[Je];return Te}function X(xe,ve,Se){if(Se||arguments.length===2)for(var Te=0,We=ve.length,Ge;Te<We;Te++)(Ge||!(Te in ve))&&(Ge||(Ge=Array.prototype.slice.call(ve,0,Te)),Ge[Te]=ve[Te]);return xe.concat(Ge||Array.prototype.slice.call(ve))}function K(xe){return this instanceof K?(this.v=xe,this):new K(xe)}function Q(xe,ve,Se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Te=Se.apply(xe,ve||[]),We,Ge=[];return We={},Je("next"),Je("throw"),Je("return"),We[Symbol.asyncIterator]=function(){return this},We;function Je(At){Te[At]&&(We[At]=function(yt){return new Promise(function(ct,Kt){Ge.push([At,yt,ct,Kt])>1||mt(At,yt)})})}function mt(At,yt){try{xt(Te[At](yt))}catch(ct){gt(Ge[0][3],ct)}}function xt(At){At.value instanceof K?Promise.resolve(At.value.v).then(Ze,$e):gt(Ge[0][2],At)}function Ze(At){mt("next",At)}function $e(At){mt("throw",At)}function gt(At,yt){At(yt),Ge.shift(),Ge.length&&mt(Ge[0][0],Ge[0][1])}}function re(xe){var ve,Se;return ve={},Te("next"),Te("throw",function(We){throw We}),Te("return"),ve[Symbol.iterator]=function(){return this},ve;function Te(We,Ge){ve[We]=xe[We]?function(Je){return(Se=!Se)?{value:K(xe[We](Je)),done:!1}:Ge?Ge(Je):Je}:Ge}}function q(xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve=xe[Symbol.asyncIterator],Se;return ve?ve.call(xe):(xe=typeof k=="function"?k(xe):xe[Symbol.iterator](),Se={},Te("next"),Te("throw"),Te("return"),Se[Symbol.asyncIterator]=function(){return this},Se);function Te(Ge){Se[Ge]=xe[Ge]&&function(Je){return new Promise(function(mt,xt){Je=xe[Ge](Je),We(mt,xt,Je.done,Je.value)})}}function We(Ge,Je,mt,xt){Promise.resolve(xt).then(function(Ze){Ge({value:Ze,done:mt})},Je)}}function ae(xe,ve){return Object.defineProperty?Object.defineProperty(xe,"raw",{value:ve}):xe.raw=ve,xe}var ue=Object.create?function(xe,ve){Object.defineProperty(xe,"default",{enumerable:!0,value:ve})}:function(xe,ve){xe.default=ve};function ce(xe){if(xe&&xe.__esModule)return xe;var ve={};if(xe!=null)for(var Se in xe)Se!=="default"&&Object.prototype.hasOwnProperty.call(xe,Se)&&T(ve,xe,Se);return ue(ve,xe),ve}function De(xe){return xe&&xe.__esModule?xe:{default:xe}}function Ie(xe,ve,Se,Te){if(Se==="a"&&!Te)throw new TypeError("Private accessor was defined without a getter");if(typeof ve=="function"?xe!==ve||!Te:!ve.has(xe))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Se==="m"?Te:Se==="a"?Te.call(xe):Te?Te.value:ve.get(xe)}function Pe(xe,ve,Se,Te,We){if(Te==="m")throw new TypeError("Private method is not writable");if(Te==="a"&&!We)throw new TypeError("Private accessor was defined without a setter");if(typeof ve=="function"?xe!==ve||!We:!ve.has(xe))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Te==="a"?We.call(xe,Se):We?We.value=Se:ve.set(xe,Se),Se}function we(xe,ve){if(ve===null||typeof ve!="object"&&typeof ve!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof xe=="function"?ve===xe:xe.has(ve)}},function(U,G,F){"use strict";var Y=F(4),P=F(9),A=F(34);G.a=function(N,O,x,E){E===void 0&&(E="...");var y=16,m=Object(A.a)(E,x),g=Object(Y.a)(N)?N:Object(P.a)(N),v=O,u=[],b,T;if(Object(A.a)(N,x)<=O)return N;for(;b=g.substr(0,y),T=Object(A.a)(b,x),!(T+m>v&&T>v);)if(u.push(b),v-=T,g=g.substr(y),!g)return u.join("");for(;b=g.substr(0,1),T=Object(A.a)(b,x),!(T+m>v);)if(u.push(b),v-=T,g=g.substr(1),!g)return u.join("");return""+u.join("")+E}},function(U,G,F){"use strict";var Y=function(){function P(){this.map={}}return P.prototype.has=function(A){return this.map[A]!==void 0},P.prototype.get=function(A,N){var O=this.map[A];return O===void 0?N:O},P.prototype.set=function(A,N){this.map[A]=N},P.prototype.clear=function(){this.map={}},P.prototype.delete=function(A){delete this.map[A]},P.prototype.size=function(){return Object.keys(this.map).length},P}();G.a=Y},function(U,G){function F(x,E,y,m){m===void 0&&(m=[]);var g=this;g.w=x||0,g.h=E||0,g.y=y||0,g.x=0,g.c=m||[],g.cs=m.length,g.prelim=0,g.mod=0,g.shift=0,g.change=0,g.tl=null,g.tr=null,g.el=null,g.er=null,g.msel=0,g.mser=0}F.fromNode=function(x,E){if(!x)return null;var y=[];return x.children.forEach(function(m){y.push(F.fromNode(m,E))}),E?new F(x.height,x.width,x.x,y):new F(x.width,x.height,x.y,y)};function Y(x,E,y){y?x.y+=E:x.x+=E,x.children.forEach(function(m){Y(m,E,y)})}function P(x,E){var y=E?x.y:x.x;return x.children.forEach(function(m){y=Math.min(P(m,E),y)}),y}function A(x,E){var y=P(x,E);Y(x,-y,E)}function N(x,E,y){y?E.y=x.x:E.x=x.x,x.c.forEach(function(m,g){N(m,E.children[g],y)})}function O(x,E,y){y===void 0&&(y=0),E?(x.x=y,y+=x.width):(x.y=y,y+=x.height),x.children.forEach(function(m){O(m,E,y)})}U.exports=function(x,E){E===void 0&&(E={});var y=E.isHorizontal;function m(q){if(q.cs===0){g(q);return}m(q.c[0]);for(var ae=Q(D(q.c[0].el),0,null),ue=1;ue<q.cs;++ue){m(q.c[ue]);var ce=D(q.c[ue].er);v(q,ue,ae),ae=Q(ce,ue,ae)}J(q),g(q)}function g(q){q.cs===0?(q.el=q,q.er=q,q.msel=q.mser=0):(q.el=q.c[0].el,q.msel=q.c[0].msel,q.er=q.c[q.cs-1].er,q.mser=q.c[q.cs-1].mser)}function v(q,ae,ue){for(var ce=q.c[ae-1],De=ce.mod,Ie=q.c[ae],Pe=Ie.mod;ce!==null&&Ie!==null;){D(ce)>ue.low&&(ue=ue.nxt);var we=De+ce.prelim+ce.w-(Pe+Ie.prelim);we>0&&(Pe+=we,u(q,ae,ue.index,we));var xe=D(ce),ve=D(Ie);xe<=ve&&(ce=T(ce),ce!==null&&(De+=ce.mod)),xe>=ve&&(Ie=b(Ie),Ie!==null&&(Pe+=Ie.mod))}!ce&&Ie?k(q,ae,Ie,Pe):ce&&!Ie&&V(q,ae,ce,De)}function u(q,ae,ue,ce){q.c[ae].mod+=ce,q.c[ae].msel+=ce,q.c[ae].mser+=ce,X(q,ae,ue,ce)}function b(q){return q.cs===0?q.tl:q.c[0]}function T(q){return q.cs===0?q.tr:q.c[q.cs-1]}function D(q){return q.y+q.h}function k(q,ae,ue,ce){var De=q.c[0].el;De.tl=ue;var Ie=ce-ue.mod-q.c[0].msel;De.mod+=Ie,De.prelim-=Ie,q.c[0].el=q.c[ae].el,q.c[0].msel=q.c[ae].msel}function V(q,ae,ue,ce){var De=q.c[ae].er;De.tr=ue;var Ie=ce-ue.mod-q.c[ae].mser;De.mod+=Ie,De.prelim-=Ie,q.c[ae].er=q.c[ae-1].er,q.c[ae].mser=q.c[ae-1].mser}function J(q){q.prelim=(q.c[0].prelim+q.c[0].mod+q.c[q.cs-1].mod+q.c[q.cs-1].prelim+q.c[q.cs-1].w)/2-q.w/2}function W(q,ae){ae+=q.mod,q.x=q.prelim+ae,K(q);for(var ue=0;ue<q.cs;ue++)W(q.c[ue],ae)}function X(q,ae,ue,ce){if(ue!==ae-1){var De=ae-ue;q.c[ue+1].shift+=ce/De,q.c[ae].shift-=ce/De,q.c[ae].change-=ce-ce/De}}function K(q){for(var ae=0,ue=0,ce=0;ce<q.cs;ce++)ae+=q.c[ce].shift,ue+=ae+q.c[ce].change,q.c[ce].mod+=ue}function Q(q,ae,ue){for(;ue!==null&&q>=ue.low;)ue=ue.nxt;return{low:q,index:ae,nxt:ue}}O(x,y);var re=F.fromNode(x,y);return m(re),W(re,0),N(re,x,y),A(x,y),x}},function(U,G,F){function Y(g,v){g.prototype=Object.create(v.prototype),g.prototype.constructor=g,P(g,v)}function P(g,v){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,T){return b.__proto__=T,b},P(g,v)}var A=F(11),N=F(121),O=F(17),x=F(6),E=function(g){Y(v,g);function v(){return g.apply(this,arguments)||this}var u=v.prototype;return u.execute=function(){var T=this;return T.rootNode.width=0,O(T.rootNode,T.options,N)},v}(A),y={};function m(g,v){return v=x.assign({},y,v),new E(g,v).execute()}U.exports=m},function(U,G,F){var Y=F(6);function P(O,x){O===void 0&&(O=0),x===void 0&&(x=[]);var E=this;E.x=E.y=0,E.leftChild=E.rightChild=null,E.height=0,E.children=x}var A={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function N(O,x,E){E?(x.x=O.x,x.y=O.y):(x.x=O.y,x.y=O.x),O.children.forEach(function(y,m){N(y,x.children[m],E)})}U.exports=function(O,x){x===void 0&&(x={}),x=Y.assign({},A,x);var E=0;function y(b){if(!b)return null;b.width=0,b.depth&&b.depth>E&&(E=b.depth);var T=b.children,D=T.length,k=new P(b.height,[]);return T.forEach(function(V,J){var W=y(V);k.children.push(W),J===0&&(k.leftChild=W),J===D-1&&(k.rightChild=W)}),k.originNode=b,k.isLeaf=b.isLeaf(),k}function m(b){if(b.isLeaf||b.children.length===0)b.drawingDepth=E;else{var T=b.children.map(function(k){return m(k)}),D=Math.min.apply(null,T);b.drawingDepth=D-1}return b.drawingDepth}var g;function v(b){b.x=b.drawingDepth*x.rankSep,b.isLeaf?(b.y=0,g&&(b.y=g.y+g.height+x.nodeSep,b.originNode.parent!==g.originNode.parent&&(b.y+=x.subTreeSep)),g=b):(b.children.forEach(function(T){v(T)}),b.y=(b.leftChild.y+b.rightChild.y)/2)}var u=y(O);return m(u),v(u),N(u,O,x.isHorizontal),O}},function(U,G,F){function Y(u,b){u.prototype=Object.create(b.prototype),u.prototype.constructor=u,P(u,b)}function P(u,b){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,k){return D.__proto__=k,D},P(u,b)}var A=F(11),N=F(123),O=F(35),x=F(6),E=["LR","RL","H"],y=E[0],m=function(u){Y(b,u);function b(){return u.apply(this,arguments)||this}var T=b.prototype;return T.execute=function(){var k=this,V=k.options,J=k.rootNode;V.isHorizontal=!0;var W=V.indent,X=W===void 0?20:W,K=V.dropCap,Q=K===void 0?!0:K,re=V.direction,q=re===void 0?y:re,ae=V.align;if(q&&E.indexOf(q)===-1)throw new TypeError("Invalid direction: "+q);if(q===E[0])N(J,X,Q,ae);else if(q===E[1])N(J,X,Q,ae),J.right2left();else if(q===E[2]){var ue=O(J,V),ce=ue.left,De=ue.right;N(ce,X,Q,ae),ce.right2left(),N(De,X,Q,ae);var Ie=ce.getBoundingBox();De.translate(Ie.width,0),J.x=De.x-J.width/2}return J},b}(A),g={};function v(u,b){return b=x.assign({},g,b),new m(u,b).execute()}U.exports=v},function(U,G,F){var Y=F(6);function P(A,N,O,x,E){var y=typeof O=="function"?O(A):O*A.depth;if(!x)try{if(A.id===A.parent.children[0].id){A.x+=y,A.y=N?N.y:0;return}}catch(v){}if(A.x+=y,N){if(A.y=N.y+Y.getHeight(N,A,E),N.parent&&A.parent.id!==N.parent.id){var m=N.parent,g=m.y+Y.getHeight(m,A,E);A.y=g>A.y?g:A.y}}else A.y=0}U.exports=function(A,N,O,x){var E=null;A.eachNode(function(y){P(y,E,N,O,x),E=y})}},function(U,G,F){function Y(g,v){g.prototype=Object.create(v.prototype),g.prototype.constructor=g,P(g,v)}function P(g,v){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,T){return b.__proto__=T,b},P(g,v)}var A=F(11),N=F(125),O=F(17),x=F(6),E=function(g){Y(v,g);function v(){return g.apply(this,arguments)||this}var u=v.prototype;return u.execute=function(){var T=this;return O(T.rootNode,T.options,N)},v}(A),y={};function m(g,v){return v=x.assign({},y,v),new E(g,v).execute()}U.exports=m},function(U,G,F){var Y=F(6);function P(O,x){var E=0;return O.children.length?O.children.forEach(function(y){E+=P(y,x)}):E=O.height,O._subTreeSep=x.getSubTreeSep(O.data),O.totalHeight=Math.max(O.height,E)+2*O._subTreeSep,O.totalHeight}function A(O){var x=O.children,E=x.length;if(E){x.forEach(function(b){A(b)});var y=x[0],m=x[E-1],g=m.y-y.y+m.height,v=0;if(x.forEach(function(b){v+=b.totalHeight}),g>O.height)O.y=y.y+g/2-O.height/2;else if(x.length!==1||O.height>v){var u=O.y+(O.height-g)/2-y.y;x.forEach(function(b){b.translate(0,u)})}else O.y=(y.y+y.height/2+m.y+m.height/2)/2-O.height/2}}var N={getSubTreeSep:function(){return 0}};U.exports=function(O,x){x===void 0&&(x={}),x=Y.assign({},N,x),O.parent={x:0,width:0,height:0,y:0},O.BFTraverse(function(E){E.x=E.parent.x+E.parent.width}),O.parent=null,P(O,x),O.startY=0,O.y=O.totalHeight/2-O.height/2,O.eachNode(function(E){var y=E.children,m=y.length;if(m){var g=y[0];if(g.startY=E.startY+E._subTreeSep,m===1)g.y=E.y+E.height/2-g.height/2;else{g.y=g.startY+g.totalHeight/2-g.height/2;for(var v=1;v<m;v++){var u=y[v];u.startY=y[v-1].startY+y[v-1].totalHeight,u.y=u.startY+u.totalHeight/2-u.height/2}}}}),A(O)}}])})},83360:function(pr,U,G){"use strict";var F=this&&this.__createBinding||(Object.create?function(A,N,O,x){x===void 0&&(x=O);var E=Object.getOwnPropertyDescriptor(N,O);(!E||("get"in E?!N.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return N[O]}}),Object.defineProperty(A,x,E)}:function(A,N,O,x){x===void 0&&(x=O),A[x]=N[O]}),Y=this&&this.__exportStar||function(A,N){for(var O in A)O!=="default"&&!Object.prototype.hasOwnProperty.call(N,O)&&F(N,A,O)};Object.defineProperty(U,"__esModule",{value:!0}),U.getLayoutByName=U.unRegisterLayout=U.registerLayout=void 0;var P=G(95326);Object.defineProperty(U,"registerLayout",{enumerable:!0,get:function(){return P.registerLayout}}),Object.defineProperty(U,"unRegisterLayout",{enumerable:!0,get:function(){return P.unRegisterLayout}}),Object.defineProperty(U,"getLayoutByName",{enumerable:!0,get:function(){return P.getLayoutByName}}),Y(G(2584),U)},62329:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.Base=void 0;var G=function(){function F(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return F.prototype.layout=function(Y){return this.init(Y),this.execute(!0)},F.prototype.init=function(Y){this.nodes=Y.nodes||[],this.edges=Y.edges||[],this.combos=Y.combos||[],this.comboEdges=Y.comboEdges||[],this.hiddenNodes=Y.hiddenNodes||[],this.hiddenEdges=Y.hiddenEdges||[],this.hiddenCombos=Y.hiddenCombos||[],this.vedges=Y.vedges||[]},F.prototype.execute=function(Y){},F.prototype.executeWithWorker=function(){},F.prototype.getDefaultCfg=function(){return{}},F.prototype.updateCfg=function(Y){Y&&Object.assign(this,Y)},F.prototype.getType=function(){return"base"},F.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},F}();U.Base=G},64885:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var E=function(y,m){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var u in v)Object.prototype.hasOwnProperty.call(v,u)&&(g[u]=v[u])},E(y,m)};return function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");E(y,m);function g(){this.constructor=y}y.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.CircularLayout=void 0;var Y=G(62329),P=G(49784);function A(E,y,m,g){E.forEach(function(v,u){E[u].children=[],E[u].parent=[]}),g?y.forEach(function(v){var u=(0,P.getEdgeTerminal)(v,"source"),b=(0,P.getEdgeTerminal)(v,"target"),T=0;u&&(T=m[u]);var D=0;b&&(D=m[b]);var k=E[T].children,V=E[D].parent;k.push(E[D].id),V.push(E[T].id)}):y.forEach(function(v){var u=(0,P.getEdgeTerminal)(v,"source"),b=(0,P.getEdgeTerminal)(v,"target"),T=0;u&&(T=m[u]);var D=0;b&&(D=m[b]);var k=E[T].children,V=E[D].children;k.push(E[D].id),V.push(E[T].id)})}function N(E,y,m){for(var g=m.length,v=0;v<g;v++){var u=(0,P.getEdgeTerminal)(m[v],"source"),b=(0,P.getEdgeTerminal)(m[v],"target");if(E.id===u&&y.id===b||y.id===u&&E.id===b)return!0}return!1}function O(E,y){var m=E.degree,g=y.degree;return m<g?-1:m>g?1:0}var x=function(E){F(y,E);function y(m){var g=E.call(this)||this;return g.radius=null,g.nodeSize=void 0,g.startRadius=null,g.endRadius=null,g.startAngle=0,g.endAngle=2*Math.PI,g.clockwise=!0,g.divisions=1,g.ordering=null,g.angleRatio=1,g.nodes=[],g.edges=[],g.nodeMap={},g.degrees=[],g.width=300,g.height=300,g.updateCfg(m),g}return y.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},y.prototype.execute=function(){var m,g=this,v=g.nodes,u=g.edges,b=v.length;if(b===0){g.onLayoutEnd&&g.onLayoutEnd();return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var T=g.center;if(b===1){v[0].x=T[0],v[0].y=T[1],g.onLayoutEnd&&g.onLayoutEnd();return}var D=g.radius,k=g.startRadius,V=g.endRadius,J=g.divisions,W=g.startAngle,X=g.endAngle,K=g.angleRatio,Q=g.ordering,re=g.clockwise,q=g.nodeSpacing,ae=g.nodeSize,ue=(X-W)/b,ce={};v.forEach(function(mt,xt){ce[mt.id]=xt}),g.nodeMap=ce;var De=(0,P.getDegree)(v.length,ce,u);if(g.degrees=De,q){var Ie=(0,P.getFuncByUnknownType)(10,q),Pe=(0,P.getFuncByUnknownType)(10,ae),we=-1/0;v.forEach(function(mt){var xt=Pe(mt);we<xt&&(we=xt)});var xe=0;v.forEach(function(mt,xt){xt===0?xe+=we||10:xe+=(Ie(mt)||0)+(we||10)}),D=xe/(2*Math.PI)}else!D&&!k&&!V?D=g.height>g.width?g.width/2:g.height/2:!k&&V?k=V:k&&!V&&(V=k);var ve=ue*K,Se=[];Q==="topology"?Se=g.topologyOrdering():Q==="topology-directed"?Se=g.topologyOrdering(!0):Q==="degree"?Se=g.degreeOrdering():Se=v;for(var Te=Math.ceil(b/J),We=0;We<b;++We){var Ge=D;!Ge&&k!==null&&V!==null&&(Ge=k+We*(V-k)/(b-1)),Ge||(Ge=10+We*100/(b-1));var Je=W+We%Te*ve+2*Math.PI/J*Math.floor(We/Te);re||(Je=X-We%Te*ve-2*Math.PI/J*Math.floor(We/Te)),Se[We].x=T[0]+Math.cos(Je)*Ge,Se[We].y=T[1]+Math.sin(Je)*Ge,Se[We].weight=De[We].all}return(m=g.onLayoutEnd)===null||m===void 0||m.call(g),{nodes:Se,edges:this.edges}},y.prototype.topologyOrdering=function(m){m===void 0&&(m=!1);var g=this,v=g.degrees,u=g.edges,b=g.nodes,T=(0,P.clone)(b),D=g.nodeMap,k=[T[0]],V=[b[0]],J=[],W=b.length;J[0]=!0,A(T,u,D,m);var X=0;return T.forEach(function(K,Q){if(Q!==0)if((Q===W-1||v[Q].all!==v[Q+1].all||N(k[X],K,u))&&!J[Q])k.push(K),V.push(b[D[K.id]]),J[Q]=!0,X++;else{for(var re=k[X].children,q=!1,ae=0;ae<re.length;ae++){var ue=D[re[ae]];if(v[ue].all===v[Q].all&&!J[ue]){k.push(T[ue]),V.push(b[D[T[ue].id]]),J[ue]=!0,q=!0;break}}for(var ce=0;!q&&(J[ce]||(k.push(T[ce]),V.push(b[D[T[ce].id]]),J[ce]=!0,q=!0),ce++,ce!==W););}}),V},y.prototype.degreeOrdering=function(){var m=this,g=m.nodes,v=[],u=m.degrees;return g.forEach(function(b,T){b.degree=u[T].all,v.push(b)}),v.sort(O),v},y.prototype.getType=function(){return"circular"},y}(Y.Base);U.CircularLayout=x},63861:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var E=function(y,m){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var u in v)Object.prototype.hasOwnProperty.call(v,u)&&(g[u]=v[u])},E(y,m)};return function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");E(y,m);function g(){this.constructor=y}y.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}(),Y=this&&this.__assign||function(){return Y=Object.assign||function(E){for(var y,m=1,g=arguments.length;m<g;m++){y=arguments[m];for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(E[v]=y[v])}return E},Y.apply(this,arguments)};Object.defineProperty(U,"__esModule",{value:!0}),U.ComboCombinedLayout=void 0;var P=G(16470),A=G(62329),N=G(49784),O=G(2584),x=function(E){F(y,E);function y(m){var g=E.call(this)||this;return g.center=[0,0],g.nodes=[],g.edges=[],g.combos=[],g.comboEdges=[],g.comboPadding=10,g.comboTrees=[],g.updateCfg(m),g}return y.prototype.getDefaultCfg=function(){return{}},y.prototype.execute=function(){var m=this,g=m.nodes,v=m.center;if(!g||g.length===0){m.onLayoutEnd&&m.onLayoutEnd();return}if(g.length===1){g[0].x=v[0],g[0].y=v[1],m.onLayoutEnd&&m.onLayoutEnd();return}m.initVals(),m.run(),m.onLayoutEnd&&m.onLayoutEnd()},y.prototype.run=function(){var m,g=this,v=g.nodes,u=g.edges,b=g.combos,T=g.comboEdges,D=g.center,k={};v.forEach(function(we){k[we.id]=we});var V={};b.forEach(function(we){V[we.id]=we});var J=g.getInnerGraphs(k),W=[],X=[],K={},Q=!0;this.comboTrees.forEach(function(we){var xe=J[we.id],ve=Y(Y({},we),{x:xe.x||V[we.id].x,y:xe.y||V[we.id].y,fx:xe.fx||V[we.id].fx,fy:xe.fy||V[we.id].fy,mass:xe.mass||V[we.id].mass,size:xe.size});X.push(ve),!isNaN(ve.x)&&ve.x!==0&&!isNaN(ve.y)&&ve.y!==0?Q=!1:(ve.x=Math.random()*100,ve.y=Math.random()*100),W.push(we.id),(0,N.traverseTreeUp)(we,function(Se){return Se.id!==we.id&&(K[Se.id]=we.id),!0})}),v.forEach(function(we){if(!(we.comboId&&V[we.comboId])){var xe=Y({},we);X.push(xe),!isNaN(xe.x)&&xe.x!==0&&!isNaN(xe.y)&&xe.y!==0?Q=!1:(xe.x=Math.random()*100,xe.y=Math.random()*100),W.push(we.id)}});var re=[];if(u.concat(T).forEach(function(we){var xe=K[we.source]||we.source,ve=K[we.target]||we.target;xe!==ve&&W.includes(xe)&&W.includes(ve)&&re.push({source:xe,target:ve})}),X!=null&&X.length){if(X.length===1)X[0].x=D[0],X[0].y=D[1];else{var q={nodes:X,edges:re},ae=this.outerLayout||new O.GForceLayout({gravity:1,factor:4,linkDistance:function(we,xe,ve){var Se,Te,We=((((Se=xe.size)===null||Se===void 0?void 0:Se[0])||30)+(((Te=ve.size)===null||Te===void 0?void 0:Te[0])||30))/2;return Math.min(We*1.5,700)}}),ue=(m=ae.getType)===null||m===void 0?void 0:m.call(ae);if(ae.updateCfg({center:D,kg:5,preventOverlap:!0,animate:!1}),Q&&P.FORCE_LAYOUT_TYPE_MAP[ue]){var ce=X.length<100?new O.MDSLayout:new O.GridLayout;ce.layout(q)}ae.layout(q)}X.forEach(function(we){var xe=J[we.id];if(!xe){var ve=k[we.id];ve&&(ve.x=we.x,ve.y=we.y);return}xe.visited=!0,xe.x=we.x,xe.y=we.y,xe.nodes.forEach(function(Se){Se.x+=we.x,Se.y+=we.y})})}for(var De=Object.keys(J),Ie=function(we){var xe=De[we],ve=J[xe];if(!ve)return"continue";ve.nodes.forEach(function(Se){ve.visited||(Se.x+=ve.x||0,Se.y+=ve.y||0),k[Se.id]&&(k[Se.id].x=Se.x,k[Se.id].y=Se.y)}),V[xe]&&(V[xe].x=ve.x,V[xe].y=ve.y)},Pe=De.length-1;Pe>=0;Pe--)Ie(Pe);return{nodes:v,edges:u,combos:b,comboEdges:T}},y.prototype.getInnerGraphs=function(m){var g=this,v=g.comboTrees,u=g.nodeSize,b=g.edges,T=g.comboPadding,D=g.spacing,k={},V=this.innerLayout||new O.ConcentricLayout({type:"concentric",sortBy:"id"});return V.center=[0,0],V.preventOverlap=!0,V.nodeSpacing=D,(v||[]).forEach(function(J){(0,N.traverseTreeUp)(J,function(W){var X,K=(T==null?void 0:T(W))||10;if((0,N.isArray)(K)&&(K=Math.max.apply(Math,K)),!((X=W.children)===null||X===void 0)&&X.length){var re=W.children.map(function(Te){if(Te.itemType==="combo")return k[Te.id];var We=m[Te.id]||{};return Y(Y({},We),Te)}),q=re.map(function(Te){return Te.id}),ae={nodes:re,edges:b.filter(function(Te){return q.includes(Te.source)&&q.includes(Te.target)})},ue=1/0;re.forEach(function(Te){var We;Te.size||(Te.size=((We=k[Te.id])===null||We===void 0?void 0:We.size)||(u==null?void 0:u(Te))||[30,30]),(0,N.isNumber)(Te.size)&&(Te.size=[Te.size,Te.size]),ue>Te.size[0]&&(ue=Te.size[0]),ue>Te.size[1]&&(ue=Te.size[1])}),V.layout(ae);var ce=(0,N.getLayoutBBox)(re),De=ce.minX,Ie=ce.minY,Pe=ce.maxX,we=ce.maxY,xe={x:(Pe+De)/2,y:(we+Ie)/2};ae.nodes.forEach(function(Te){Te.x-=xe.x,Te.y-=xe.y});var ve=Math.max(Pe-De,ue)+K*2,Se=Math.max(we-Ie,ue)+K*2;k[W.id]={id:W.id,nodes:re,size:[ve,Se]}}else if(W.itemType==="combo"){var Q=K?[K*2,K*2]:[30,30];k[W.id]={id:W.id,nodes:[],size:Q}}return!0})}),k},y.prototype.initVals=function(){var m=this,g=m.nodeSize,v=m.spacing,u,b;if((0,N.isNumber)(v)?b=function(){return v}:(0,N.isFunction)(v)?b=v:b=function(){return 0},this.spacing=b,!g)u=function(W){var X=b(W);if(W.size){if((0,N.isArray)(W.size)){var K=W.size[0]>W.size[1]?W.size[0]:W.size[1];return(K+X)/2}if((0,N.isObject)(W.size)){var K=W.size.width>W.size.height?W.size.width:W.size.height;return(K+X)/2}return(W.size+X)/2}return 10+X/2};else if((0,N.isFunction)(g))u=function(W){var X=g(W),K=b(W);if((0,N.isArray)(W.size)){var Q=W.size[0]>W.size[1]?W.size[0]:W.size[1];return(Q+K)/2}return((X||10)+K)/2};else if((0,N.isArray)(g)){var T=g[0]>g[1]?g[0]:g[1],D=T/2;u=function(W){return D+b(W)/2}}else{var k=g/2;u=function(W){return k+b(W)/2}}this.nodeSize=u;var V=m.comboPadding,J;(0,N.isNumber)(V)?J=function(){return V}:(0,N.isArray)(V)?J=function(){return Math.max.apply(null,V)}:(0,N.isFunction)(V)?J=V:J=function(){return 0},this.comboPadding=J},y.prototype.getType=function(){return"comboCombined"},y}(A.Base);U.ComboCombinedLayout=x},66590:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var N=function(O,x){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,y){E.__proto__=y}||function(E,y){for(var m in y)Object.prototype.hasOwnProperty.call(y,m)&&(E[m]=y[m])},N(O,x)};return function(O,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");N(O,x);function E(){this.constructor=O}O.prototype=x===null?Object.create(x):(E.prototype=x.prototype,new E)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.ComboForceLayout=void 0;var Y=G(62329),P=G(49784),A=function(N){F(O,N);function O(x){var E=N.call(this)||this;return E.center=[0,0],E.maxIteration=100,E.gravity=10,E.comboGravity=10,E.linkDistance=10,E.alpha=1,E.alphaMin=.001,E.alphaDecay=1-Math.pow(E.alphaMin,1/300),E.alphaTarget=0,E.velocityDecay=.6,E.edgeStrength=.6,E.nodeStrength=30,E.preventOverlap=!1,E.preventNodeOverlap=!1,E.preventComboOverlap=!1,E.collideStrength=void 0,E.nodeCollideStrength=.5,E.comboCollideStrength=.5,E.comboSpacing=20,E.comboPadding=10,E.optimizeRangeFactor=1,E.onTick=function(){},E.onLayoutEnd=function(){},E.depthAttractiveForceScale=1,E.depthRepulsiveForceScale=2,E.nodes=[],E.edges=[],E.combos=[],E.comboTrees=[],E.width=300,E.height=300,E.bias=[],E.nodeMap={},E.oriComboMap={},E.indexMap={},E.comboMap={},E.previousLayouted=!1,E.updateCfg(x),E}return O.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},O.prototype.execute=function(){var x=this,E=x.nodes,y=x.center;if(x.comboTree={id:"comboTreeRoot",depth:-1,children:x.comboTrees},!E||E.length===0){x.onLayoutEnd&&x.onLayoutEnd();return}if(E.length===1){E[0].x=y[0],E[0].y=y[1],x.onLayoutEnd&&x.onLayoutEnd();return}x.initVals(),x.run(),x.onLayoutEnd&&x.onLayoutEnd()},O.prototype.run=function(){var x=this,E=x.nodes,y=x.previousLayouted?x.maxIteration/5:x.maxIteration;!x.width&&typeof window!="undefined"&&(x.width=window.innerWidth),!x.height&&typeof window!="undefined"&&(x.height=window.innerHeight);var m=x.center,g=x.velocityDecay,v=x.comboMap;x.previousLayouted||x.initPos(v);for(var u=function(k){var V=[];E.forEach(function(J,W){V[W]={x:0,y:0}}),x.applyCalculate(V),x.applyComboCenterForce(V),E.forEach(function(J,W){!(0,P.isNumber)(J.x)||!(0,P.isNumber)(J.y)||(J.x+=V[W].x*g,J.y+=V[W].y*g)}),x.alpha+=(x.alphaTarget-x.alpha)*x.alphaDecay,x.onTick()},b=0;b<y;b++)u(b);var T=[0,0];E.forEach(function(k){!(0,P.isNumber)(k.x)||!(0,P.isNumber)(k.y)||(T[0]+=k.x,T[1]+=k.y)}),T[0]/=E.length,T[1]/=E.length;var D=[m[0]-T[0],m[1]-T[1]];E.forEach(function(k,V){!(0,P.isNumber)(k.x)||!(0,P.isNumber)(k.y)||(k.x+=D[0],k.y+=D[1])}),x.combos.forEach(function(k){var V=v[k.id];V&&V.empty&&(k.x=V.cx||k.x,k.y=V.cy||k.y)}),x.previousLayouted=!0},O.prototype.initVals=function(){var x=this,E=x.edges,y=x.nodes,m=x.combos,g={},v={},u={};y.forEach(function(Ge,Je){v[Ge.id]=Ge,u[Ge.id]=Je}),x.nodeMap=v,x.indexMap=u;var b={};m.forEach(function(Ge){b[Ge.id]=Ge}),x.oriComboMap=b,x.comboMap=x.getComboMap();var T=x.preventOverlap;x.preventComboOverlap=x.preventComboOverlap||T,x.preventNodeOverlap=x.preventNodeOverlap||T;var D=x.collideStrength;D&&(x.comboCollideStrength=D,x.nodeCollideStrength=D),x.comboCollideStrength=x.comboCollideStrength?x.comboCollideStrength:0,x.nodeCollideStrength=x.nodeCollideStrength?x.nodeCollideStrength:0;for(var k=0;k<E.length;++k){var V=(0,P.getEdgeTerminal)(E[k],"source"),J=(0,P.getEdgeTerminal)(E[k],"target");g[V]?g[V]++:g[V]=1,g[J]?g[J]++:g[J]=1}for(var W=[],k=0;k<E.length;++k){var V=(0,P.getEdgeTerminal)(E[k],"source"),J=(0,P.getEdgeTerminal)(E[k],"target");W[k]=g[V]/(g[V]+g[J])}this.bias=W;var X=x.nodeSize,K=x.nodeSpacing,Q,re;if((0,P.isNumber)(K)?re=function(){return K}:(0,P.isFunction)(K)?re=K:re=function(){return 0},this.nodeSpacing=re,!X)Q=function(Ge){if(Ge.size){if((0,P.isArray)(Ge.size)){var Je=Ge.size[0]>Ge.size[1]?Ge.size[0]:Ge.size[1];return Je/2}if((0,P.isObject)(Ge.size)){var Je=Ge.size.width>Ge.size.height?Ge.size.width:Ge.size.height;return Je/2}return Ge.size/2}return 10};else if((0,P.isFunction)(X))Q=function(Ge){return X(Ge)};else if((0,P.isArray)(X)){var q=X[0]>X[1]?X[0]:X[1],ae=q/2;Q=function(Ge){return ae}}else{var ue=X/2;Q=function(Ge){return ue}}this.nodeSize=Q;var ce=x.comboSpacing,De;(0,P.isNumber)(ce)?De=function(){return ce}:(0,P.isFunction)(ce)?De=ce:De=function(){return 0},this.comboSpacing=De;var Ie=x.comboPadding,Pe;(0,P.isNumber)(Ie)?Pe=function(){return Ie}:(0,P.isArray)(Ie)?Pe=function(){return Math.max.apply(null,Ie)}:(0,P.isFunction)(Ie)?Pe=Ie:Pe=function(){return 0},this.comboPadding=Pe;var we=this.linkDistance,xe;we||(we=10),(0,P.isNumber)(we)?xe=function(Ge){return we}:xe=we,this.linkDistance=xe;var ve=this.edgeStrength,Se;ve||(ve=1),(0,P.isNumber)(ve)?Se=function(Ge){return ve}:Se=ve,this.edgeStrength=Se;var Te=this.nodeStrength,We;Te||(Te=30),(0,P.isNumber)(Te)?We=function(Ge){return Te}:We=Te,this.nodeStrength=We},O.prototype.initPos=function(x){var E=this,y=E.nodes;y.forEach(function(m,g){var v=m.comboId,u=x[v];v&&u?(m.x=u.cx+100/(g+1),m.y=u.cy+100/(g+1)):(m.x=100/(g+1),m.y=100/(g+1))})},O.prototype.getComboMap=function(){var x=this,E=x.nodeMap,y=x.comboTrees,m=x.oriComboMap,g={};return(y||[]).forEach(function(v){var u=[];(0,P.traverseTreeUp)(v,function(b){if(b.itemType==="node"||!m[b.id])return!0;if(g[b.id]===void 0){var T={id:b.id,name:b.id,cx:0,cy:0,count:0,depth:x.oriComboMap[b.id].depth||0,children:[]};g[b.id]=T}var D=b.children;D&&D.forEach(function(J){if(!g[J.id]&&!E[J.id])return!0;u.push(J)});var k=g[b.id];if(k.cx=0,k.cy=0,u.length===0){k.empty=!0;var V=m[b.id];k.cx=V.x,k.cy=V.y}return u.forEach(function(J){if(k.count++,J.itemType!=="node"){var W=g[J.id];(0,P.isNumber)(W.cx)&&(k.cx+=W.cx),(0,P.isNumber)(W.cy)&&(k.cy+=W.cy);return}var X=E[J.id];X&&((0,P.isNumber)(X.x)&&(k.cx+=X.x),(0,P.isNumber)(X.y)&&(k.cy+=X.y))}),k.cx/=k.count||1,k.cy/=k.count||1,k.children=u,!0})}),g},O.prototype.applyComboCenterForce=function(x){var E=this,y=E.gravity,m=E.comboGravity||y,g=this.alpha,v=E.comboTrees,u=E.indexMap,b=E.nodeMap,T=E.comboMap;(v||[]).forEach(function(D){(0,P.traverseTreeUp)(D,function(k){if(k.itemType==="node")return!0;var V=T[k.id];if(!V)return!0;var J=T[k.id],W=(J.depth+1)/10*.5,X=J.cx,K=J.cy;return J.cx=0,J.cy=0,J.children.forEach(function(Q){if(Q.itemType!=="node"){var re=T[Q.id];re&&(0,P.isNumber)(re.cx)&&(J.cx+=re.cx),re&&(0,P.isNumber)(re.cy)&&(J.cy+=re.cy);return}var q=b[Q.id],ae=q.x-X||.005,ue=q.y-K||.005,ce=Math.sqrt(ae*ae+ue*ue),De=u[q.id],Ie=m*g/ce*W;x[De].x-=ae*Ie,x[De].y-=ue*Ie,(0,P.isNumber)(q.x)&&(J.cx+=q.x),(0,P.isNumber)(q.y)&&(J.cy+=q.y)}),J.cx/=J.count||1,J.cy/=J.count||1,!0})})},O.prototype.applyCalculate=function(x){var E=this,y=E.comboMap,m=E.nodes,g={};m.forEach(function(u,b){m.forEach(function(T,D){if(!(b<D)){var k=u.x-T.x||.005,V=u.y-T.y||.005,J=k*k+V*V,W=Math.sqrt(J);J<1&&(J=W),g["".concat(u.id,"-").concat(T.id)]={vx:k,vy:V,vl2:J,vl:W},g["".concat(T.id,"-").concat(u.id)]={vl2:J,vl:W,vx:-k,vy:-V}}})}),E.updateComboSizes(y),E.calRepulsive(x,g),E.calAttractive(x,g);var v=E.preventComboOverlap;v&&E.comboNonOverlapping(x,y)},O.prototype.updateComboSizes=function(x){var E=this,y=E.comboTrees,m=E.nodeMap,g=E.nodeSize,v=E.comboSpacing,u=E.comboPadding;(y||[]).forEach(function(b){var T=[];(0,P.traverseTreeUp)(b,function(D){if(D.itemType==="node")return!0;var k=x[D.id];if(!k)return!1;var V=D.children;V&&V.forEach(function(X){!x[X.id]&&!m[X.id]||T.push(X)}),k.minX=1/0,k.minY=1/0,k.maxX=-1/0,k.maxY=-1/0,T.forEach(function(X){if(X.itemType!=="node")return!0;var K=m[X.id];if(!K)return!0;var Q=g(K),re=K.x-Q,q=K.y-Q,ae=K.x+Q,ue=K.y+Q;k.minX>re&&(k.minX=re),k.minY>q&&(k.minY=q),k.maxX<ae&&(k.maxX=ae),k.maxY<ue&&(k.maxY=ue)});var J=E.oriComboMap[D.id].size||10;(0,P.isArray)(J)&&(J=J[0]);var W=Math.max(k.maxX-k.minX,k.maxY-k.minY,J);return k.r=W/2+v(k)/2+u(k),!0})})},O.prototype.comboNonOverlapping=function(x,E){var y=this,m=y.comboTree,g=y.comboCollideStrength,v=y.indexMap,u=y.nodeMap;(0,P.traverseTreeUp)(m,function(b){if(!E[b.id]&&!u[b.id]&&b.id!=="comboTreeRoot")return!1;var T=b.children;return T&&T.length>1&&T.forEach(function(D,k){if(D.itemType==="node")return!1;var V=E[D.id];V&&T.forEach(function(J,W){if(k<=W||J.itemType==="node")return!1;var X=E[J.id];if(!X)return!1;var K=V.cx-X.cx||.005,Q=V.cy-X.cy||.005,re=K*K+Q*Q,q=V.r||1,ae=X.r||1,ue=q+ae,ce=ae*ae,De=q*q;if(re<ue*ue){var Ie=D.children;if(!Ie||Ie.length===0)return!1;var Pe=J.children;if(!Pe||Pe.length===0)return!1;var we=Math.sqrt(re),xe=(ue-we)/we*g,ve=K*xe,Se=Q*xe,Te=ce/(De+ce),We=1-Te;Ie.forEach(function(Ge){if(Ge.itemType!=="node")return!1;if(u[Ge.id]){var Je=v[Ge.id];Pe.forEach(function(mt){if(mt.itemType!=="node"||!u[mt.id])return!1;var xt=v[mt.id];x[Je].x+=ve*Te,x[Je].y+=Se*Te,x[xt].x-=ve*We,x[xt].y-=Se*We})}})}})}),!0})},O.prototype.calRepulsive=function(x,E){var y=this,m=y.nodes,g=y.width*y.optimizeRangeFactor,v=y.nodeStrength,u=y.alpha,b=y.nodeCollideStrength,T=y.preventNodeOverlap,D=y.nodeSize,k=y.nodeSpacing,V=y.depthRepulsiveForceScale,J=y.center;m.forEach(function(W,X){if(!(!W.x||!W.y)){if(J){var K=y.gravity,Q=W.x-J[0]||.005,re=W.y-J[1]||.005,q=Math.sqrt(Q*Q+re*re);x[X].x-=Q*K*u/q,x[X].y-=re*K*u/q}m.forEach(function(ae,ue){if(X!==ue&&!(!ae.x||!ae.y)){var ce=E["".concat(W.id,"-").concat(ae.id)],De=ce.vl2,Ie=ce.vl;if(!(Ie>g)){var Pe=E["".concat(W.id,"-").concat(ae.id)],we=Pe.vx,xe=Pe.vy,ve=Math.log(Math.abs(ae.depth-W.depth)/10)+1||1;ve=ve<1?1:ve,ae.comboId!==W.comboId&&(ve+=1);var Se=ve?Math.pow(V,ve):1,Te=v(ae)*u/De*Se;if(x[X].x+=we*Te,x[X].y+=xe*Te,X<ue&&T){var We=D(W)+k(W)||1,Ge=D(ae)+k(ae)||1,Je=We+Ge;if(De<Je*Je){var mt=(Je-Ie)/Ie*b,xt=Ge*Ge,Ze=xt/(We*We+xt),$e=we*mt,gt=xe*mt;x[X].x+=$e*Ze,x[X].y+=gt*Ze,Ze=1-Ze,x[ue].x-=$e*Ze,x[ue].y-=gt*Ze}}}}})}})},O.prototype.calAttractive=function(x,E){var y=this,m=y.edges,g=y.linkDistance,v=y.alpha,u=y.edgeStrength,b=y.bias,T=y.depthAttractiveForceScale;m.forEach(function(D,k){var V=(0,P.getEdgeTerminal)(D,"source"),J=(0,P.getEdgeTerminal)(D,"target");if(!(!V||!J||V===J)){var W=y.indexMap[V],X=y.indexMap[J],K=y.nodeMap[V],Q=y.nodeMap[J];if(!(!K||!Q)){var re=K.depth===Q.depth?0:Math.log(Math.abs(K.depth-Q.depth)/10);K.comboId===Q.comboId&&(re=re/2);var q=re?Math.pow(T,re):1;if(K.comboId!==Q.comboId&&q===1?q=T/2:K.comboId===Q.comboId&&(q=2),!(!(0,P.isNumber)(Q.x)||!(0,P.isNumber)(K.x)||!(0,P.isNumber)(Q.y)||!(0,P.isNumber)(K.y))){var ae=E["".concat(J,"-").concat(V)],ue=ae.vl,ce=ae.vx,De=ae.vy,Ie=(ue-g(D))/ue*v*u(D)*q,Pe=ce*Ie,we=De*Ie,xe=b[k];x[X].x-=Pe*xe,x[X].y-=we*xe,x[W].x+=Pe*(1-xe),x[W].y+=we*(1-xe)}}}})},O.prototype.getType=function(){return"comboForce"},O}(Y.Base);U.ComboForceLayout=A},43281:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var N=function(O,x){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,y){E.__proto__=y}||function(E,y){for(var m in y)Object.prototype.hasOwnProperty.call(y,m)&&(E[m]=y[m])},N(O,x)};return function(O,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");N(O,x);function E(){this.constructor=O}O.prototype=x===null?Object.create(x):(E.prototype=x.prototype,new E)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.ConcentricLayout=void 0;var Y=G(49784),P=G(62329),A=function(N){F(O,N);function O(x){var E=N.call(this)||this;return E.nodeSize=30,E.minNodeSpacing=10,E.nodeSpacing=10,E.preventOverlap=!1,E.equidistant=!1,E.startAngle=3/2*Math.PI,E.clockwise=!0,E.sortBy="degree",E.nodes=[],E.edges=[],E.width=300,E.height=300,E.onLayoutEnd=function(){},E.updateCfg(x),E}return O.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},O.prototype.execute=function(){var x,E,y=this,m=y.nodes,g=y.edges,v=m.length;if(v===0){(x=y.onLayoutEnd)===null||x===void 0||x.call(y);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var u=y.center;if(v===1){m[0].x=u[0],m[0].y=u[1],(E=y.onLayoutEnd)===null||E===void 0||E.call(y);return}var b=y.nodeSize,T=y.nodeSpacing,D=[],k,V=0;(0,Y.isArray)(b)?k=Math.max(b[0],b[1]):k=b,(0,Y.isArray)(T)?V=Math.max(T[0],T[1]):(0,Y.isNumber)(T)&&(V=T),m.forEach(function(ve){D.push(ve);var Se=k;(0,Y.isArray)(ve.size)?Se=Math.max(ve.size[0],ve.size[1]):(0,Y.isNumber)(ve.size)?Se=ve.size:(0,Y.isObject)(ve.size)&&(Se=Math.max(ve.size.width,ve.size.height)),k=Math.max(k,Se),(0,Y.isFunction)(T)&&(V=Math.max(T(ve),V))}),y.clockwise=y.counterclockwise!==void 0?!y.counterclockwise:y.clockwise;var J={},W={};if(D.forEach(function(ve,Se){J[ve.id]=ve,W[ve.id]=Se}),(y.sortBy==="degree"||!(0,Y.isString)(y.sortBy)||D[0][y.sortBy]===void 0)&&(y.sortBy="degree",!(0,Y.isNumber)(m[0].degree))){var X=(0,Y.getDegree)(m.length,W,g);D.forEach(function(ve,Se){ve.degree=X[Se].all})}D.sort(function(ve,Se){return Se[y.sortBy]-ve[y.sortBy]}),y.maxValueNode=D[0],y.maxLevelDiff=y.maxLevelDiff||y.maxValueNode[y.sortBy]/4;var K=[[]],Q=K[0];D.forEach(function(ve){if(Q.length>0){var Se=Math.abs(Q[0][y.sortBy]-ve[y.sortBy]);y.maxLevelDiff&&Se>=y.maxLevelDiff&&(Q=[],K.push(Q))}Q.push(ve)});var re=k+(V||y.minNodeSpacing);if(!y.preventOverlap){var q=K.length>0&&K[0].length>1,ae=Math.min(y.width,y.height)/2-re,ue=ae/(K.length+(q?1:0));re=Math.min(re,ue)}var ce=0;if(K.forEach(function(ve){var Se=y.sweep;Se===void 0&&(Se=2*Math.PI-2*Math.PI/ve.length);var Te=ve.dTheta=Se/Math.max(1,ve.length-1);if(ve.length>1&&y.preventOverlap){var We=Math.cos(Te)-Math.cos(0),Ge=Math.sin(Te)-Math.sin(0),Je=Math.sqrt(re*re/(We*We+Ge*Ge));ce=Math.max(Je,ce)}ve.r=ce,ce+=re}),y.equidistant){for(var De=0,Ie=0,Pe=0;Pe<K.length;Pe++){var we=K[Pe],xe=we.r-Ie;De=Math.max(De,xe)}Ie=0,K.forEach(function(ve,Se){Se===0&&(Ie=ve.r),ve.r=Ie,Ie+=De})}return K.forEach(function(ve){var Se=ve.dTheta,Te=ve.r;ve.forEach(function(We,Ge){var Je=y.startAngle+(y.clockwise?1:-1)*Se*Ge;We.x=u[0]+Te*Math.cos(Je),We.y=u[1]+Te*Math.sin(Je)})}),y.onLayoutEnd&&y.onLayoutEnd(),{nodes:m,edges:g}},O.prototype.getType=function(){return"concentric"},O}(P.Base);U.ConcentricLayout=A},16470:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.FORCE_LAYOUT_TYPE_MAP=U.LAYOUT_MESSAGE=void 0,U.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},U.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},20171:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var y=function(m,g){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,u){v.__proto__=u}||function(v,u){for(var b in u)Object.prototype.hasOwnProperty.call(u,b)&&(v[b]=u[b])},y(m,g)};return function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");y(m,g);function v(){this.constructor=m}m.prototype=g===null?Object.create(g):(v.prototype=g.prototype,new v)}}(),Y=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(U,"__esModule",{value:!0}),U.DagreLayout=void 0;var P=Y(G(41106)),A=G(49784),N=G(62329),O=G(27652),x=function(y){F(m,y);function m(g){var v=y.call(this)||this;return v.rankdir="TB",v.nodesep=50,v.ranksep=50,v.controlPoints=!1,v.sortByCombo=!1,v.edgeLabelSpace=!0,v.radial=!1,v.nodes=[],v.edges=[],v.onLayoutEnd=function(){},v.layoutNode=function(u){var b=v,T=b.nodes,D=T.find(function(V){return V.id===u});if(D){var k=D.layout!==!1;return k}return!0},v.updateCfg(g),v}return m.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},m.prototype.execute=function(){var g=this,v,u,b,T,D=this,k=D.nodes,V=D.nodeSize,J=D.rankdir,W=D.combos,X=D.begin,K=D.radial,Q=D.comboEdges,re=Q===void 0?[]:Q,q=D.vedges,ae=q===void 0?[]:q;if(k){var ue=D.edges||[],ce=new O.Graph({multigraph:!0,compound:!0});D.nodeMap={};var De={};k.forEach(function(ar){D.nodeMap[ar.id]=ar,ar.comboId&&(De[ar.comboId]=De[ar.comboId]||[],De[ar.comboId].push(ar.id))});var Ie=[],Pe={};!((v=D.nodeOrder)===null||v===void 0)&&v.length?(D.nodeOrder.forEach(function(ar){Pe[ar]=!0,Ie.push(D.nodeMap[ar])}),k.forEach(function(ar){Pe[ar.id]||Ie.push(ar)})):Ie=k;var we;V?(0,A.isArray)(V)?we=function(){return V}:we=function(){return[V,V]}:we=function(ar){return ar.size?(0,A.isArray)(ar.size)?ar.size:(0,A.isObject)(ar.size)?[ar.size.width||40,ar.size.height||40]:[ar.size,ar.size]:[40,40]};var xe=(0,A.getFunc)(D.ranksep,50,D.ranksepFunc),ve=(0,A.getFunc)(D.nodesep,50,D.nodesepFunc),Se=ve,Te=xe;(J==="LR"||J==="RL")&&(Se=xe,Te=ve),ce.setDefaultEdgeLabel(function(){return{}}),ce.setGraph(D);var We={};this.sortByCombo&&W&&W.forEach(function(ar){if(We[ar.id]=ar,ar.collapsed){var Or=we(ar),Qr=Te(ar),wn=Se(ar),On=Or[0]+2*wn,Gn=Or[1]+2*Qr;ce.setNode(ar.id,{width:On,height:Gn})}ar.parentId&&(We[ar.parentId]||ce.setNode(ar.parentId,{}),ce.setParent(ar.id,ar.parentId))}),Ie.filter(function(ar){return ar.layout!==!1}).forEach(function(ar){var Or=we(ar),Qr=Te(ar),wn=Se(ar),On=Or[0]+2*wn,Gn=Or[1]+2*Qr,qn=ar.layer;(0,A.isNumber)(qn)?ce.setNode(ar.id,{width:On,height:Gn,layer:qn}):ce.setNode(ar.id,{width:On,height:Gn}),g.sortByCombo&&ar.comboId&&(We[ar.comboId]||(We[ar.comboId]={id:ar.comboId},ce.setNode(ar.comboId,{})),ce.setParent(ar.id,ar.comboId))}),ue.forEach(function(ar){var Or=(0,A.getEdgeTerminal)(ar,"source"),Qr=(0,A.getEdgeTerminal)(ar,"target");g.layoutNode(Or)&&g.layoutNode(Qr)&&ce.setEdge(Or,Qr,{weight:ar.weight||1})}),(u=re==null?void 0:re.concat(ae||[]))===null||u===void 0||u.forEach(function(ar){var Or,Qr,wn=ar.source,On=ar.target,Gn=!((Or=We[wn])===null||Or===void 0)&&Or.collapsed?[wn]:De[wn]||[wn],qn=!((Qr=We[On])===null||Qr===void 0)&&Qr.collapsed?[On]:De[On]||[On];Gn.forEach(function(oa){qn.forEach(function(ya){ce.setEdge(oa,ya,{weight:ar.weight||1})})})});var Ge=void 0;!((b=D.preset)===null||b===void 0)&&b.nodes&&(Ge=new O.Graph({multigraph:!0,compound:!0}),D.preset.nodes.forEach(function(ar){Ge==null||Ge.setNode(ar.id,ar)})),P.default.layout(ce,{prevGraph:Ge,edgeLabelSpace:D.edgeLabelSpace,keepNodeOrder:!!D.nodeOrder,nodeOrder:D.nodeOrder});var Je=[0,0];if(X){var mt=1/0,xt=1/0;ce.nodes().forEach(function(ar){var Or=ce.node(ar);mt>Or.x&&(mt=Or.x),xt>Or.y&&(xt=Or.y)}),ce.edges().forEach(function(ar){var Or,Qr=ce.edge(ar);(Or=Qr.points)===null||Or===void 0||Or.forEach(function(wn){mt>wn.x&&(mt=wn.x),xt>wn.y&&(xt=wn.y)})}),Je[0]=X[0]-mt,Je[1]=X[1]-xt}var Ze=J==="LR"||J==="RL";if(K){var $e=this,gt=$e.focusNode,At=$e.ranksep,yt=$e.getRadialPos,ct=(0,A.isString)(gt)?gt:gt==null?void 0:gt.id,Kt=ct?(T=ce.node(ct))===null||T===void 0?void 0:T._rank:0,$t=[],jt=Ze?"y":"x",ir=Ze?"height":"width",mr=1/0,tn=-1/0;ce.nodes().forEach(function(ar){var Or=ce.node(ar);if(D.nodeMap[ar]){var Qr=ve(D.nodeMap[ar]);if(Kt===0)$t[Or._rank]||($t[Or._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),$t[Or._rank].nodes.push(ar),$t[Or._rank].totalWidth+=Qr*2+Or[ir],$t[Or._rank].maxSize<Math.max(Or.width,Or.height)&&($t[Or._rank].maxSize=Math.max(Or.width,Or.height));else{var wn=Or._rank-Kt;if(wn===0)$t[wn]||($t[wn]={nodes:[],totalWidth:0,maxSize:-1/0}),$t[wn].nodes.push(ar),$t[wn].totalWidth+=Qr*2+Or[ir],$t[wn].maxSize<Math.max(Or.width,Or.height)&&($t[wn].maxSize=Math.max(Or.width,Or.height));else{var On=Math.abs(wn);$t[On]||($t[On]={left:[],right:[],totalWidth:0,maxSize:-1/0}),$t[On].totalWidth+=Qr*2+Or[ir],$t[On].maxSize<Math.max(Or.width,Or.height)&&($t[On].maxSize=Math.max(Or.width,Or.height)),wn<0?$t[On].left.push(ar):$t[On].right.push(ar)}}var Gn=Or[jt]-Or[ir]/2-Qr,qn=Or[jt]+Or[ir]/2+Qr;Gn<mr&&(mr=Gn),qn>tn&&(tn=qn)}});var Dr=At||50,Dn={},Ve=(tn-mr)/.9,Nr=[(mr+tn-Ve)*.5,(mr+tn+Ve)*.5],Fn=function(ar,Or,Qr,wn){Qr===void 0&&(Qr=-1/0),wn===void 0&&(wn=[0,1]);var On=Qr;return ar.forEach(function(Gn){var qn=ce.node(Gn);Dn[Gn]=Or;var oa=yt(qn[jt],Nr,Ve,Or,wn),ya=oa.x,Ka=oa.y;if(D.nodeMap[Gn]){D.nodeMap[Gn].x=ya+Je[0],D.nodeMap[Gn].y=Ka+Je[1],D.nodeMap[Gn]._order=qn._order;var mn=xe(D.nodeMap[Gn]);On<mn&&(On=mn)}}),On},Vn=!0,va=0;$t.forEach(function(ar){var Or,Qr,wn,On,Gn,qn,oa;if(!(!(!((Or=ar==null?void 0:ar.nodes)===null||Or===void 0)&&Or.length)&&!(!((Qr=ar==null?void 0:ar.left)===null||Qr===void 0)&&Qr.length)&&!(!((wn=ar==null?void 0:ar.right)===null||wn===void 0)&&wn.length))){if(Vn&&ar.nodes.length===1){var ya=ar.nodes[0];if(!D.nodeMap[ya])return;D.nodeMap[ya].x=Je[0],D.nodeMap[ya].y=Je[1],Dn[ar.nodes[0]]=0,Dr=xe(D.nodeMap[ya]),Vn=!1;return}Dr=Math.max(Dr,ar.totalWidth/(2*Math.PI));var Ka=-1/0;if(Kt===0||!((On=ar.nodes)===null||On===void 0)&&On.length)Ka=Fn(ar.nodes,Dr,Ka,[0,1]);else{var mn=((Gn=ar.left)===null||Gn===void 0?void 0:Gn.length)/(((qn=ar.left)===null||qn===void 0?void 0:qn.length)+((oa=ar.right)===null||oa===void 0?void 0:oa.length));Ka=Fn(ar.left,Dr,Ka,[0,mn]),Ka=Fn(ar.right,Dr,Ka,[mn+.05,1])}Dr+=Ka,Vn=!1,va-ar.maxSize}}),ce.edges().forEach(function(ar){var Or,Qr,wn,On=ce.edge(ar),Gn=ue.findIndex(function(Ln){var ma=(0,A.getEdgeTerminal)(Ln,"source"),Z=(0,A.getEdgeTerminal)(Ln,"target");return ma===ar.v&&Z===ar.w});if(!(Gn<=-1)&&D.edgeLabelSpace&&D.controlPoints&&ue[Gn].type!=="loop"){var qn=jt==="x"?"y":"x",oa=(Or=On==null?void 0:On.points)===null||Or===void 0?void 0:Or.slice(1,On.points.length-1),ya=[],Ka=(Qr=ce.node(ar.v))===null||Qr===void 0?void 0:Qr[qn],mn=Ka-((wn=ce.node(ar.w))===null||wn===void 0?void 0:wn[qn]),jn=Dn[ar.v],Jn=jn-Dn[ar.w];oa==null||oa.forEach(function(Ln){var ma=(Ln[qn]-Ka)/mn*Jn+jn,Z=yt(Ln[jt],Nr,Ve,ma);ya.push({x:Z.x+Je[0],y:Z.y+Je[1]})}),ue[Gn].controlPoints=ya}})}else{var aa=new Set,Ya=J==="BT"||J==="RL",la=Ya?function(ar,Or){return Or-ar}:function(ar,Or){return ar-Or};ce.nodes().forEach(function(ar){var Or=ce.node(ar);if(Or){var Qr=g.nodeMap[ar];Qr||(Qr=W==null?void 0:W.find(function(wn){return wn.id===ar})),Qr&&(Qr.x=Or.x+Je[0],Qr.y=Or.y+Je[1],Qr._order=Or._order,aa.add(Ze?Qr.x:Qr.y))}});var Qa=Array.from(aa).sort(la),Wa=Ze?function(ar,Or){return ar.x!==Or.x}:function(ar,Or){return ar.y!==Or.y},Da=Ze?function(ar,Or,Qr){var wn=Math.max(Or.y,Qr.y),On=Math.min(Or.y,Qr.y);return ar.filter(function(Gn){return Gn.y<=wn&&Gn.y>=On})}:function(ar,Or,Qr){var wn=Math.max(Or.x,Qr.x),On=Math.min(Or.x,Qr.x);return ar.filter(function(Gn){return Gn.x<=wn&&Gn.x>=On})};ce.edges().forEach(function(ar){var Or,Qr=ce.edge(ar),wn=ue.findIndex(function(qn){var oa=(0,A.getEdgeTerminal)(qn,"source"),ya=(0,A.getEdgeTerminal)(qn,"target");return oa===ar.v&&ya===ar.w});if(!(wn<=-1)&&D.edgeLabelSpace&&D.controlPoints&&ue[wn].type!=="loop"){(Or=Qr==null?void 0:Qr.points)===null||Or===void 0||Or.forEach(function(qn){qn.x+=Je[0],qn.y+=Je[1]});var On=D.nodeMap[ar.v],Gn=D.nodeMap[ar.w];ue[wn].controlPoints=E(Qr==null?void 0:Qr.points,On,Gn,Qa,Ze,Wa,Da)}})}return D.onLayoutEnd&&D.onLayoutEnd(),{nodes:k,edges:ue}}},m.prototype.getRadialPos=function(g,v,u,b,T){T===void 0&&(T=[0,1]);var D=(g-v[0])/u;D=D*(T[1]-T[0])+T[0];var k=D*2*Math.PI;return{x:Math.cos(k)*b,y:Math.sin(k)*b}},m.prototype.getType=function(){return"dagre"},m}(N.Base);U.DagreLayout=x;var E=function(y,m,g,v,u,b,T){var D=(y==null?void 0:y.slice(1,y.length-1))||[];if(m&&g){var k=m.x,V=m.y,J=g.x,W=g.y;if(u&&(k=m.y,V=m.x,J=g.y,W=g.x),W!==V&&k!==J){var X=v.indexOf(V),K=v[X+1];if(K){var Q=D[0],re=u?{x:(V+K)/2,y:(Q==null?void 0:Q.y)||J}:{x:(Q==null?void 0:Q.x)||J,y:(V+K)/2};(!Q||b(Q,re))&&D.unshift(re)}var q=v.indexOf(W),ae=Math.abs(q-X);if(ae===1)D=T(D,m,g),D.length||D.push(u?{x:(V+W)/2,y:k}:{x:k,y:(V+W)/2});else if(ae>1){var ue=v[q-1];if(ue){var ce=D[D.length-1],De=u?{x:(W+ue)/2,y:(ce==null?void 0:ce.y)||J}:{x:(ce==null?void 0:ce.x)||k,y:(W+ue)/2};(!ce||b(ce,De))&&D.push(De)}}}}return D}},27652:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var A=function(N,O){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var y in E)Object.prototype.hasOwnProperty.call(E,y)&&(x[y]=E[y])},A(N,O)};return function(N,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");A(N,O);function x(){this.constructor=N}N.prototype=O===null?Object.create(O):(x.prototype=O.prototype,new x)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.Graph=void 0;var Y=G(99905),P=function(A){F(N,A);function N(){return A!==null&&A.apply(this,arguments)||this}return N}(Y.Graph);U.Graph=P},41106:function(pr,U,G){"use strict";var F=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(U,"__esModule",{value:!0});var Y=F(G(65236)),P=G(69209);U.default={layout:Y.default,util:{time:P.time,notime:P.notime}}},78029:function(pr,U,G){"use strict";var F=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(U,"__esModule",{value:!0});var Y=F(G(40773)),P=function(O){var x=function(y){return function(m){var g;return((g=y.edge(m))===null||g===void 0?void 0:g.weight)||1}},E=O.graph().acyclicer==="greedy"?(0,Y.default)(O,x(O)):A(O);E==null||E.forEach(function(y){var m=O.edge(y);O.removeEdgeObj(y),m.forwardName=y.name,m.reversed=!0,O.setEdge(y.w,y.v,m,"rev-".concat(Math.random()))})},A=function(O){var x=[],E={},y={},m=function(g){var v;y[g]||(y[g]=!0,E[g]=!0,(v=O.outEdges(g))===null||v===void 0||v.forEach(function(u){E[u.w]?x.push(u):m(u.w)}),delete E[g])};return O.nodes().forEach(m),x},N=function(O){O.edges().forEach(function(x){var E=O.edge(x);if(E.reversed){O.removeEdgeObj(x);var y=E.forwardName;delete E.reversed,delete E.forwardName,O.setEdge(x.w,x.v,E,y)}})};U.default={run:P,undo:N}},11500:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=G(69209),Y=function(A){var N,O=function(x){var E=A.children(x),y=A.node(x);if(E!=null&&E.length&&E.forEach(function(v){return O(v)}),y.hasOwnProperty("minRank")){y.borderLeft=[],y.borderRight=[];for(var m=y.minRank,g=y.maxRank+1;m<g;m+=1)P(A,"borderLeft","_bl",x,y,m),P(A,"borderRight","_br",x,y,m)}};(N=A.children())===null||N===void 0||N.forEach(function(x){return O(x)})},P=function(A,N,O,x,E,y){var m={rank:y,borderType:N,width:0,height:0},g=E[N][y-1],v=(0,F.addDummyNode)(A,"border",m,O);E[N][y]=v,A.setParent(v,x),g&&A.setEdge(g,v,{weight:1})};U.default=Y},35279:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var G=function(E){var y,m=(y=E.graph().rankdir)===null||y===void 0?void 0:y.toLowerCase();(m==="lr"||m==="rl")&&Y(E)},F=function(E){var y,m=(y=E.graph().rankdir)===null||y===void 0?void 0:y.toLowerCase();(m==="bt"||m==="rl")&&A(E),(m==="lr"||m==="rl")&&(O(E),Y(E))},Y=function(E){E.nodes().forEach(function(y){P(E.node(y))}),E.edges().forEach(function(y){P(E.edge(y))})},P=function(E){var y=E.width;E.width=E.height,E.height=y},A=function(E){E.nodes().forEach(function(y){N(E.node(y))}),E.edges().forEach(function(y){var m,g=E.edge(y);(m=g.points)===null||m===void 0||m.forEach(function(v){return N(v)}),g.hasOwnProperty("y")&&N(g)})},N=function(E){E!=null&&E.y&&(E.y=-E.y)},O=function(E){E.nodes().forEach(function(y){x(E.node(y))}),E.edges().forEach(function(y){var m,g=E.edge(y);(m=g.points)===null||m===void 0||m.forEach(function(v){return x(v)}),g.hasOwnProperty("x")&&x(g)})},x=function(E){var y=E.x;E.x=E.y,E.y=y};U.default={adjust:G,undo:F}},55532:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var G=function(P,A){if(P!=="next"&&P!=="prev")return A},F=function(P){P.prev.next=P.next,P.next.prev=P.prev,delete P.next,delete P.prev},Y=function(){function P(){var A={};A.prev=A,A.next=A.prev,this.shortcut=A}return P.prototype.dequeue=function(){var A=this.shortcut,N=A.prev;if(N&&N!==A)return F(N),N},P.prototype.enqueue=function(A){var N=this.shortcut;A.prev&&A.next&&F(A),A.next=N.next,N.next.prev=A,N.next=A,A.prev=N},P.prototype.toString=function(){for(var A=[],N=this.shortcut,O=N.prev;O!==N;)A.push(JSON.stringify(O,G)),O=O==null?void 0:O.prev;return"[".concat(A.join(", "),"]")},P}();U.default=Y},40773:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var u=function(b,T){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,k){D.__proto__=k}||function(D,k){for(var V in k)Object.prototype.hasOwnProperty.call(k,V)&&(D[V]=k[V])},u(b,T)};return function(b,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");u(b,T);function D(){this.constructor=b}b.prototype=T===null?Object.create(T):(D.prototype=T.prototype,new D)}}(),Y=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(U,"__esModule",{value:!0});var P=Y(G(55532)),A=G(99905),N=function(u){F(b,u);function b(){return u!==null&&u.apply(this,arguments)||this}return b}(P.default),O=function(u){F(b,u);function b(){return u!==null&&u.apply(this,arguments)||this}return b}(A.Graph),x=function(){return 1},E=function(u,b){var T;if(u.nodeCount()<=1)return[];var D=g(u,b||x),k=y(D.graph,D.buckets,D.zeroIdx);return(T=k.map(function(V){return u.outEdges(V.v,V.w)}))===null||T===void 0?void 0:T.flat()},y=function(u,b,T){for(var D=[],k=b[b.length-1],V=b[0],J;u.nodeCount();){for(;J=V.dequeue();)m(u,b,T,J);for(;J=k.dequeue();)m(u,b,T,J);if(u.nodeCount()){for(var W=b.length-2;W>0;--W)if(J=b[W].dequeue(),J){D=D.concat(m(u,b,T,J,!0));break}}}return D},m=function(u,b,T,D,k){var V,J,W=[];return(V=u.inEdges(D.v))===null||V===void 0||V.forEach(function(X){var K=u.edge(X),Q=u.node(X.v);k&&W.push({v:X.v,w:X.w,in:0,out:0}),Q.out===void 0&&(Q.out=0),Q.out-=K,v(b,T,Q)}),(J=u.outEdges(D.v))===null||J===void 0||J.forEach(function(X){var K=u.edge(X),Q=X.w,re=u.node(Q);re.in===void 0&&(re.in=0),re.in-=K,v(b,T,re)}),u.removeNode(D.v),k?W:void 0},g=function(u,b){var T=new O,D=0,k=0;u.nodes().forEach(function(K){T.setNode(K,{v:K,in:0,out:0})}),u.edges().forEach(function(K){var Q=T.edge(K)||0,re=(b==null?void 0:b(K))||1,q=Q+re;T.setEdge(K.v,K.w,q),k=Math.max(k,T.node(K.v).out+=re),D=Math.max(D,T.node(K.w).in+=re)});for(var V=[],J=k+D+3,W=0;W<J;W++)V.push(new N);var X=D+1;return T.nodes().forEach(function(K){v(V,X,T.node(K))}),{buckets:V,zeroIdx:X,graph:T}},v=function(u,b,T){T.out?T.in?u[T.out-T.in+b].enqueue(T):u[u.length-1].enqueue(T):u[0].enqueue(T)};U.default=E},65236:function(pr,U,G){"use strict";var F=this&&this.__assign||function(){return F=Object.assign||function(Ze){for(var $e,gt=1,At=arguments.length;gt<At;gt++){$e=arguments[gt];for(var yt in $e)Object.prototype.hasOwnProperty.call($e,yt)&&(Ze[yt]=$e[yt])}return Ze},F.apply(this,arguments)},Y=this&&this.__importDefault||function(Ze){return Ze&&Ze.__esModule?Ze:{default:Ze}};Object.defineProperty(U,"__esModule",{value:!0});var P=Y(G(78029)),A=Y(G(46171)),N=Y(G(76827)),O=G(69209),x=Y(G(33562)),E=Y(G(59596)),y=Y(G(11500)),m=Y(G(35279)),g=Y(G(19597)),v=Y(G(95)),u=Y(G(24956)),b=G(27652),T=function(Ze,$e){var gt=$e&&$e.debugTiming?O.time:O.notime;gt("layout",function(){$e&&!$e.keepNodeOrder&&$e.prevGraph&&gt("  inheritOrder",function(){k(Ze,$e.prevGraph)});var At=gt("  buildLayoutGraph",function(){return ue(Ze)});$e&&$e.edgeLabelSpace===!1||gt("  makeSpaceForEdgeLabels",function(){ce(At)});try{gt("  runLayout",function(){D(At,gt,$e)})}catch(yt){if(yt.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,yt);return}throw yt}gt("  updateInputGraph",function(){V(Ze,At)})})},D=function(Ze,$e,gt){$e("    removeSelfEdges",function(){We(Ze)}),$e("    acyclic",function(){P.default.run(Ze)}),$e("    nestingGraph.run",function(){E.default.run(Ze)}),$e("    rank",function(){(0,N.default)((0,O.asNonCompoundGraph)(Ze))}),$e("    injectEdgeLabelProxies",function(){De(Ze)}),$e("    removeEmptyRanks",function(){(0,O.removeEmptyRanks)(Ze)}),$e("    nestingGraph.cleanup",function(){E.default.cleanup(Ze)}),$e("    normalizeRanks",function(){(0,O.normalizeRanks)(Ze)}),$e("    assignRankMinMax",function(){Ie(Ze)}),$e("    removeEdgeLabelProxies",function(){Pe(Ze)}),$e("    normalize.run",function(){A.default.run(Ze)}),$e("    parentDummyChains",function(){(0,x.default)(Ze)}),$e("    addBorderSegments",function(){(0,y.default)(Ze)}),gt&&gt.keepNodeOrder&&$e("    initDataOrder",function(){(0,u.default)(Ze,gt.nodeOrder)}),$e("    order",function(){(0,g.default)(Ze,gt==null?void 0:gt.keepNodeOrder)}),$e("    insertSelfEdges",function(){Ge(Ze)}),$e("    adjustCoordinateSystem",function(){m.default.adjust(Ze)}),$e("    position",function(){(0,v.default)(Ze)}),$e("    positionSelfEdges",function(){Je(Ze)}),$e("    removeBorderNodes",function(){Te(Ze)}),$e("    normalize.undo",function(){A.default.undo(Ze)}),$e("    fixupEdgeLabelCoords",function(){ve(Ze)}),$e("    undoCoordinateSystem",function(){m.default.undo(Ze)}),$e("    translateGraph",function(){we(Ze)}),$e("    assignNodeIntersects",function(){xe(Ze)}),$e("    reversePoints",function(){Se(Ze)}),$e("    acyclic.undo",function(){P.default.undo(Ze)})},k=function(Ze,$e){Ze.nodes().forEach(function(gt){var At=Ze.node(gt),yt=$e.node(gt);yt!==void 0?(At.fixorder=yt._order,delete yt._order):delete At.fixorder})},V=function(Ze,$e){Ze.nodes().forEach(function(gt){var At,yt=Ze.node(gt);if(yt){var ct=$e.node(gt);yt.x=ct.x,yt.y=ct.y,yt._order=ct.order,yt._rank=ct.rank,!((At=$e.children(gt))===null||At===void 0)&&At.length&&(yt.width=ct.width,yt.height=ct.height)}}),Ze.edges().forEach(function(gt){var At=Ze.edge(gt),yt=$e.edge(gt);At.points=yt?yt.points:[],yt&&yt.hasOwnProperty("x")&&(At.x=yt.x,At.y=yt.y)}),Ze.graph().width=$e.graph().width,Ze.graph().height=$e.graph().height},J=["nodesep","edgesep","ranksep","marginx","marginy"],W={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},X=["acyclicer","ranker","rankdir","align"],K=["width","height","layer","fixorder"],Q={width:0,height:0},re=["minlen","weight","width","height","labeloffset"],q={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ae=["labelpos"],ue=function(Ze){var $e=new b.Graph({multigraph:!0,compound:!0}),gt=xt(Ze.graph()),At={};return X==null||X.forEach(function(yt){gt[yt]!==void 0&&(At[yt]=gt[yt])}),$e.setGraph(Object.assign({},W,mt(gt,J),At)),Ze.nodes().forEach(function(yt){var ct=xt(Ze.node(yt)),Kt=F(F({},Q),ct),$t=mt(Kt,K);$e.setNode(yt,$t),$e.setParent(yt,Ze.parent(yt))}),Ze.edges().forEach(function(yt){var ct=xt(Ze.edge(yt)),Kt={};ae==null||ae.forEach(function($t){ct[$t]!==void 0&&(Kt[$t]=ct[$t])}),$e.setEdgeObj(yt,Object.assign({},q,mt(ct,re),Kt))}),$e},ce=function(Ze){var $e=Ze.graph();$e.ranksep||($e.ranksep=0),$e.ranksep/=2,Ze.nodes().forEach(function(gt){var At=Ze.node(gt);isNaN(At.layer)||At.layer||(At.layer=0)}),Ze.edges().forEach(function(gt){var At,yt=Ze.edge(gt);yt.minlen*=2,((At=yt.labelpos)===null||At===void 0?void 0:At.toLowerCase())!=="c"&&($e.rankdir==="TB"||$e.rankdir==="BT"?yt.width+=yt.labeloffset:yt.height+=yt.labeloffset)})},De=function(Ze){Ze.edges().forEach(function($e){var gt=Ze.edge($e);if(gt.width&&gt.height){var At=Ze.node($e.v),yt=Ze.node($e.w),ct={e:$e,rank:(yt.rank-At.rank)/2+At.rank};(0,O.addDummyNode)(Ze,"edge-proxy",ct,"_ep")}})},Ie=function(Ze){var $e=0;Ze.nodes().forEach(function(gt){var At,yt,ct=Ze.node(gt);ct.borderTop&&(ct.minRank=(At=Ze.node(ct.borderTop))===null||At===void 0?void 0:At.rank,ct.maxRank=(yt=Ze.node(ct.borderBottom))===null||yt===void 0?void 0:yt.rank,$e=Math.max($e,ct.maxRank||-1/0))}),Ze.graph().maxRank=$e},Pe=function(Ze){Ze.nodes().forEach(function($e){var gt=Ze.node($e);gt.dummy==="edge-proxy"&&(Ze.edge(gt.e).labelRank=gt.rank,Ze.removeNode($e))})},we=function(Ze){var $e,gt=0,At,yt=0,ct=Ze.graph(),Kt=ct.marginx||0,$t=ct.marginy||0,jt=function(ir){if(ir){var mr=ir.x,tn=ir.y,Dr=ir.width,Dn=ir.height;!isNaN(mr)&&!isNaN(Dr)&&($e===void 0&&($e=mr-Dr/2),$e=Math.min($e,mr-Dr/2),gt=Math.max(gt,mr+Dr/2)),!isNaN(tn)&&!isNaN(Dn)&&(At===void 0&&(At=tn-Dn/2),At=Math.min(At,tn-Dn/2),yt=Math.max(yt,tn+Dn/2))}};Ze.nodes().forEach(function(ir){jt(Ze.node(ir))}),Ze.edges().forEach(function(ir){var mr=Ze.edge(ir);mr!=null&&mr.hasOwnProperty("x")&&jt(mr)}),$e-=Kt,At-=$t,Ze.nodes().forEach(function(ir){var mr=Ze.node(ir);mr&&(mr.x-=$e,mr.y-=At)}),Ze.edges().forEach(function(ir){var mr,tn=Ze.edge(ir);(mr=tn.points)===null||mr===void 0||mr.forEach(function(Dr){Dr.x-=$e,Dr.y-=At}),tn.hasOwnProperty("x")&&(tn.x-=$e),tn.hasOwnProperty("y")&&(tn.y-=At)}),ct.width=gt-$e+Kt,ct.height=yt-At+$t},xe=function(Ze){Ze.edges().forEach(function($e){var gt=Ze.edge($e),At=Ze.node($e.v),yt=Ze.node($e.w),ct,Kt;gt.points?(ct=gt.points[0],Kt=gt.points[gt.points.length-1]):(gt.points=[],ct=yt,Kt=At),gt.points.unshift((0,O.intersectRect)(At,ct)),gt.points.push((0,O.intersectRect)(yt,Kt))})},ve=function(Ze){Ze.edges().forEach(function($e){var gt=Ze.edge($e);if(gt!=null&&gt.hasOwnProperty("x"))switch((gt.labelpos==="l"||gt.labelpos==="r")&&(gt.width-=gt.labeloffset),gt.labelpos){case"l":gt.x-=gt.width/2+gt.labeloffset;break;case"r":gt.x+=gt.width/2+gt.labeloffset;break}})},Se=function(Ze){Ze.edges().forEach(function($e){var gt,At=Ze.edge($e);At.reversed&&((gt=At.points)===null||gt===void 0||gt.reverse())})},Te=function(Ze){Ze.nodes().forEach(function($e){var gt,At,yt;if(!((gt=Ze.children($e))===null||gt===void 0)&&gt.length){var ct=Ze.node($e),Kt=Ze.node(ct.borderTop),$t=Ze.node(ct.borderBottom),jt=Ze.node(ct.borderLeft[((At=ct.borderLeft)===null||At===void 0?void 0:At.length)-1]),ir=Ze.node(ct.borderRight[((yt=ct.borderRight)===null||yt===void 0?void 0:yt.length)-1]);ct.width=Math.abs((ir==null?void 0:ir.x)-(jt==null?void 0:jt.x))||10,ct.height=Math.abs(($t==null?void 0:$t.y)-(Kt==null?void 0:Kt.y))||10,ct.x=((jt==null?void 0:jt.x)||0)+ct.width/2,ct.y=((Kt==null?void 0:Kt.y)||0)+ct.height/2}}),Ze.nodes().forEach(function($e){var gt;((gt=Ze.node($e))===null||gt===void 0?void 0:gt.dummy)==="border"&&Ze.removeNode($e)})},We=function(Ze){Ze.edges().forEach(function($e){if($e.v===$e.w){var gt=Ze.node($e.v);gt.selfEdges||(gt.selfEdges=[]),gt.selfEdges.push({e:$e,label:Ze.edge($e)}),Ze.removeEdgeObj($e)}})},Ge=function(Ze){var $e=(0,O.buildLayerMatrix)(Ze);$e==null||$e.forEach(function(gt){var At=0;gt==null||gt.forEach(function(yt,ct){var Kt,$t=Ze.node(yt);$t.order=ct+At,(Kt=$t.selfEdges)===null||Kt===void 0||Kt.forEach(function(jt){(0,O.addDummyNode)(Ze,"selfedge",{width:jt.label.width,height:jt.label.height,rank:$t.rank,order:ct+ ++At,e:jt.e,label:jt.label},"_se")}),delete $t.selfEdges})})},Je=function(Ze){Ze.nodes().forEach(function($e){var gt=Ze.node($e);if(gt.dummy==="selfedge"){var At=Ze.node(gt.e.v),yt=At.x+At.width/2,ct=At.y,Kt=gt.x-yt,$t=At.height/2;Ze.setEdgeObj(gt.e,gt.label),Ze.removeNode($e),gt.label.points=[{x:yt+2*Kt/3,y:ct-$t},{x:yt+5*Kt/6,y:ct-$t},{y:ct,x:yt+Kt},{x:yt+5*Kt/6,y:ct+$t},{x:yt+2*Kt/3,y:ct+$t}],gt.label.x=gt.x,gt.label.y=gt.y}})},mt=function(Ze,$e){var gt={};return $e==null||$e.forEach(function(At){Ze[At]!==void 0&&(gt[At]=+Ze[At])}),gt},xt=function(Ze){Ze===void 0&&(Ze={});var $e={};return Object.keys(Ze).forEach(function(gt){$e[gt.toLowerCase()]=Ze[gt]}),$e};U.default=T},59596:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=G(69209),Y=function(x){var E,y=(0,F.addDummyNode)(x,"root",{},"_root"),m=A(x),g=Math.max.apply(Math,Object.values(m));Math.abs(g)===1/0&&(g=1);var v=g-1,u=2*v+1;x.graph().nestingRoot=y,x.edges().forEach(function(T){x.edge(T).minlen*=u});var b=N(x)+1;(E=x.children())===null||E===void 0||E.forEach(function(T){P(x,y,u,b,v,m,T)}),x.graph().nodeRankFactor=u},P=function(x,E,y,m,g,v,u){var b=x.children(u);if(!(b!=null&&b.length)){u!==E&&x.setEdge(E,u,{weight:0,minlen:y});return}var T=(0,F.addBorderNode)(x,"_bt"),D=(0,F.addBorderNode)(x,"_bb"),k=x.node(u);x.setParent(T,u),k.borderTop=T,x.setParent(D,u),k.borderBottom=D,b==null||b.forEach(function(V){P(x,E,y,m,g,v,V);var J=x.node(V),W=J.borderTop?J.borderTop:V,X=J.borderBottom?J.borderBottom:V,K=J.borderTop?m:2*m,Q=W!==X?1:g-v[u]+1;x.setEdge(T,W,{minlen:Q,weight:K,nestingEdge:!0}),x.setEdge(X,D,{minlen:Q,weight:K,nestingEdge:!0})}),x.parent(u)||x.setEdge(E,T,{weight:0,minlen:g+v[u]})},A=function(x){var E,y={},m=function(g,v){var u=x.children(g);u==null||u.forEach(function(b){return m(b,v+1)}),y[g]=v};return(E=x.children())===null||E===void 0||E.forEach(function(g){return m(g,1)}),y},N=function(x){var E=0;return x.edges().forEach(function(y){E+=x.edge(y).weight}),E},O=function(x){var E=x.graph();E.nestingRoot&&x.removeNode(E.nestingRoot),delete E.nestingRoot,x.edges().forEach(function(y){var m=x.edge(y);m.nestingEdge&&x.removeEdgeObj(y)})};U.default={run:Y,cleanup:O}},46171:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=G(69209),Y=function(N){N.graph().dummyChains=[],N.edges().forEach(function(O){return P(N,O)})},P=function(N,O){var x=O.v,E=N.node(x).rank,y=O.w,m=N.node(y).rank,g=O.name,v=N.edge(O),u=v.labelRank;if(m!==E+1){N.removeEdgeObj(O);var b=N.graph(),T,D,k;for(k=0,++E;E<m;++k,++E)v.points=[],D={edgeLabel:v,width:0,height:0,edgeObj:O,rank:E},T=(0,F.addDummyNode)(N,"edge",D,"_d"),E===u&&(D.width=v.width,D.height=v.height,D.dummy="edge-label",D.labelpos=v.labelpos),N.setEdge(x,T,{weight:v.weight},g),k===0&&(b.dummyChains||(b.dummyChains=[]),b.dummyChains.push(T)),x=T;N.setEdge(x,y,{weight:v.weight},g)}},A=function(N){var O;(O=N.graph().dummyChains)===null||O===void 0||O.forEach(function(x){var E=N.node(x),y=E.edgeLabel,m;E.edgeObj&&N.setEdgeObj(E.edgeObj,y);for(var g=x;E.dummy;)m=N.successors(g)[0],N.removeNode(g),y.points.push({x:E.x,y:E.y}),E.dummy==="edge-label"&&(y.x=E.x,y.y=E.y,y.width=E.width,y.height=E.height),g=m,E=N.node(g)})};U.default={run:Y,undo:A}},80314:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var G=function(F,Y,P){var A={},N;P==null||P.forEach(function(O){for(var x=F.parent(O),E,y;x;){if(E=F.parent(x),E?(y=A[E],A[E]=x):(y=N,N=x),y&&y!==x){Y.setEdge(y,x);return}x=E}})};U.default=G},89921:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var G=function(F,Y){return Y.map(function(P){var A=F.inEdges(P);if(!(A!=null&&A.length))return{v:P};{var N={sum:0,weight:0};return A==null||A.forEach(function(O){var x=F.edge(O),E=F.node(O.v);N.sum+=x.weight*E.order,N.weight+=x.weight}),{v:P,barycenter:N.sum/N.weight,weight:N.weight}}})};U.default=G},77006:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=G(27652),Y=function(A,N,O){var x=P(A),E=new F.Graph({compound:!0}).setGraph({root:x}).setDefaultNodeLabel(function(y){return A.node(y)});return A.nodes().forEach(function(y){var m,g=A.node(y),v=A.parent(y);(g.rank===N||g.minRank<=N&&N<=g.maxRank)&&(E.setNode(y),E.setParent(y,v||x),(m=A[O](y))===null||m===void 0||m.forEach(function(u){var b=u.v===y?u.w:u.v,T=E.edgeFromArgs(b,y),D=T!==void 0?T.weight:0;E.setEdge(b,y,{weight:A.edge(u).weight+D})}),g.hasOwnProperty("minRank")&&E.setNode(y,{borderLeft:g.borderLeft[N],borderRight:g.borderRight[N]}))}),E},P=function(A){for(var N;A.hasNode(N="_root".concat(Math.random())););return N};U.default=Y},32957:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=G(69209),Y=function(A,N,O){for(var x=(0,F.zipObject)(O,O.map(function(b,T){return T})),E=N.map(function(b){var T,D=(T=A.outEdges(b))===null||T===void 0?void 0:T.map(function(k){return{pos:x[k.w]||0,weight:A.edge(k).weight}});return D==null?void 0:D.sort(function(k,V){return k.pos-V.pos})}),y=E.flat().filter(function(b){return b!==void 0}),m=1;m<O.length;)m<<=1;var g=2*m-1;m-=1;var v=Array(g).fill(0,0,g),u=0;return y==null||y.forEach(function(b){if(b){var T=b.pos+m;v[T]+=b.weight;for(var D=0;T>0;)T%2&&(D+=v[T+1]),T=T-1>>1,v[T]+=b.weight;u+=b.weight*D}}),u},P=function(A,N){for(var O=0,x=1;x<(N==null?void 0:N.length);x+=1)O+=Y(A,N[x-1],N[x]);return O};U.default=P},19597:function(pr,U,G){"use strict";var F=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(U,"__esModule",{value:!0});var Y=F(G(15697)),P=F(G(32957)),A=F(G(77006)),N=F(G(80314)),O=F(G(99455)),x=G(49784),E=G(27652),y=G(69209),m=function(b,T){for(var D=(0,y.maxRank)(b),k=[],V=[],J=1;J<D+1;J++)k.push(J);for(var J=D-1;J>-1;J--)V.push(J);var W=g(b,k,"inEdges"),X=g(b,V,"outEdges"),K=(0,Y.default)(b);u(b,K);for(var Q=Number.POSITIVE_INFINITY,re,J=0,q=0;q<4;++J,++q){v(J%2?W:X,J%4>=2,!1,T),K=(0,y.buildLayerMatrix)(b);var ae=(0,P.default)(b,K);ae<Q&&(q=0,re=(0,x.clone)(K),Q=ae)}K=(0,Y.default)(b),u(b,K);for(var J=0,q=0;q<4;++J,++q){v(J%2?W:X,J%4>=2,!0,T),K=(0,y.buildLayerMatrix)(b);var ae=(0,P.default)(b,K);ae<Q&&(q=0,re=(0,x.clone)(K),Q=ae)}u(b,re)},g=function(b,T,D){return T.map(function(k){return(0,A.default)(b,k,D)})},v=function(b,T,D,k){var V=new E.Graph;b==null||b.forEach(function(J){for(var W,X=J.graph().root,K=(0,O.default)(J,X,V,T,D,k),Q=0;Q<((W=K.vs)===null||W===void 0?void 0:W.length);Q++){var re=J.node(K.vs[Q]);re&&(re.order=Q)}(0,N.default)(J,V,K.vs)})},u=function(b,T){T==null||T.forEach(function(D){D==null||D.forEach(function(k,V){b.node(k).order=V})})};U.default=m},24956:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var G=function(F,Y){for(var P=F.nodes().filter(function(E){var y;return!(!((y=F.children(E))===null||y===void 0)&&y.length)}),A=P.map(function(E){return F.node(E).rank}),N=Math.max.apply(Math,A),O=[],x=0;x<N+1;x++)O[x]=[];Y==null||Y.forEach(function(E){var y=F.node(E);!y||y!=null&&y.dummy||isNaN(y.rank)||(y.fixorder=O[y.rank].length,O[y.rank].push(E))})};U.default=G},15697:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=G(33446),Y=function(P){for(var A={},N=P.nodes().filter(function(b){var T;return!(!((T=P.children(b))===null||T===void 0)&&T.length)}),O=N.map(function(b){return P.node(b).rank}),x=(0,F.max)(O),E=[],y=0;y<x+1;y++)E.push([]);var m=function(b){var T;if(!A.hasOwnProperty(b)){A[b]=!0;var D=P.node(b);isNaN(D.rank)||E[D.rank].push(b),(T=P.successors(b))===null||T===void 0||T.forEach(function(k){return m(k)})}},g=N.sort(function(b,T){return P.node(b).rank-P.node(T).rank}),v=g.filter(function(b){return P.node(b).fixorder!==void 0}),u=v.sort(function(b,T){return P.node(b).fixorder-P.node(T).fixorder});return u==null||u.forEach(function(b){isNaN(P.node(b).rank)||E[P.node(b).rank].push(b),A[b]=!0}),g==null||g.forEach(m),E};U.default=Y},7043:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var G=function(P,A){var N,O,x,E={};P==null||P.forEach(function(m,g){E[m.v]={i:g,indegree:0,in:[],out:[],vs:[m.v]};var v=E[m.v];m.barycenter!==void 0&&(v.barycenter=m.barycenter,v.weight=m.weight)}),(N=A.edges())===null||N===void 0||N.forEach(function(m){var g=E[m.v],v=E[m.w];g!==void 0&&v!==void 0&&(v.indegree++,g.out.push(E[m.w]))});var y=(x=(O=Object.values(E)).filter)===null||x===void 0?void 0:x.call(O,function(m){return!m.indegree});return F(y)},F=function(P){for(var A,N,O=[],x=function(v){return function(u){u.merged||(u.barycenter===void 0||v.barycenter===void 0||u.barycenter>=v.barycenter)&&Y(v,u)}},E=function(v){return function(u){u.in.push(v),--u.indegree===0&&P.push(u)}},y=function(){var v=P.pop();O.push(v),(A=v.in.reverse())===null||A===void 0||A.forEach(function(u){return x(v)(u)}),(N=v.out)===null||N===void 0||N.forEach(function(u){return E(v)(u)})};P!=null&&P.length;)y();var m=O.filter(function(v){return!v.merged}),g=["vs","i","barycenter","weight"];return m.map(function(v){var u={};return g==null||g.forEach(function(b){v[b]!==void 0&&(u[b]=v[b])}),u})},Y=function(P,A){var N,O=0,x=0;P.weight&&(O+=P.barycenter*P.weight,x+=P.weight),A.weight&&(O+=A.barycenter*A.weight,x+=A.weight),P.vs=(N=A.vs)===null||N===void 0?void 0:N.concat(P.vs),P.barycenter=O/x,P.weight=x,P.i=Math.min(A.i,P.i),A.merged=!0};U.default=G},99455:function(pr,U,G){"use strict";var F=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(U,"__esModule",{value:!0});var Y=F(G(89921)),P=F(G(7043)),A=F(G(21498)),N=function(E,y,m,g,v,u){var b,T,D,k,V=E.children(y),J=E.node(y),W=J?J.borderLeft:void 0,X=J?J.borderRight:void 0,K={};W&&(V=V==null?void 0:V.filter(function(ce){return ce!==W&&ce!==X}));var Q=(0,Y.default)(E,V||[]);Q==null||Q.forEach(function(ce){var De;if(!((De=E.children(ce.v))===null||De===void 0)&&De.length){var Ie=N(E,ce.v,m,g,u);K[ce.v]=Ie,Ie.hasOwnProperty("barycenter")&&x(ce,Ie)}});var re=(0,P.default)(Q,m);O(re,K),(b=re.filter(function(ce){return ce.vs.length>0}))===null||b===void 0||b.forEach(function(ce){var De=E.node(ce.vs[0]);De&&(ce.fixorder=De.fixorder,ce.order=De.order)});var q=(0,A.default)(re,g,v,u);if(W&&(q.vs=[W,q.vs,X].flat(),!((T=E.predecessors(W))===null||T===void 0)&&T.length)){var ae=E.node(((D=E.predecessors(W))===null||D===void 0?void 0:D[0])||""),ue=E.node(((k=E.predecessors(X))===null||k===void 0?void 0:k[0])||"");q.hasOwnProperty("barycenter")||(q.barycenter=0,q.weight=0),q.barycenter=(q.barycenter*q.weight+ae.order+ue.order)/(q.weight+2),q.weight+=2}return q},O=function(E,y){E==null||E.forEach(function(m){var g,v=(g=m.vs)===null||g===void 0?void 0:g.map(function(u){return y[u]?y[u].vs:u});m.vs=v.flat()})},x=function(E,y){E.barycenter!==void 0?(E.barycenter=(E.barycenter*E.weight+y.barycenter*y.weight)/(E.weight+y.weight),E.weight+=y.weight):(E.barycenter=y.barycenter,E.weight=y.weight)};U.default=N},21498:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=G(69209),Y=function(N,O,x,E){var y=(0,F.partition)(N,function(k){var V=k.hasOwnProperty("fixorder")&&!isNaN(k.fixorder);return E?!V&&k.hasOwnProperty("barycenter"):V||k.hasOwnProperty("barycenter")}),m=y.lhs,g=y.rhs.sort(function(k,V){return-k.i- -V.i}),v=[],u=0,b=0,T=0;m==null||m.sort(A(!!O,!!x)),T=P(v,g,T),m==null||m.forEach(function(k){var V;T+=(V=k.vs)===null||V===void 0?void 0:V.length,v.push(k.vs),u+=k.barycenter*k.weight,b+=k.weight,T=P(v,g,T)});var D={vs:v.flat()};return b&&(D.barycenter=u/b,D.weight=b),D},P=function(N,O,x){for(var E=x,y;O.length&&(y=O[O.length-1]).i<=E;)O.pop(),N==null||N.push(y.vs),E++;return E},A=function(N,O){return function(x,E){if(x.fixorder!==void 0&&E.fixorder!==void 0)return x.fixorder-E.fixorder;if(x.barycenter<E.barycenter)return-1;if(x.barycenter>E.barycenter)return 1;if(O&&x.order!==void 0&&E.order!==void 0){if(x.order<E.order)return-1;if(x.order>E.order)return 1}return N?E.i-x.i:x.i-E.i}};U.default=Y},33562:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var G=function(P){var A,N={},O=0,x=function(E){var y,m=O;(y=P.children(E))===null||y===void 0||y.forEach(x),N[E]={low:m,lim:O++}};return(A=P.children())===null||A===void 0||A.forEach(x),N},F=function(P,A,N,O){var x=[],E=[],y=Math.min(A[N].low,A[O].low),m=Math.max(A[N].lim,A[O].lim),g,v;g=N;do g=P.parent(g),x.push(g);while(g&&(A[g].low>y||m>A[g].lim));for(v=g,g=O;g&&g!==v;)E.push(g),g=P.parent(g);return{lca:v,path:x.concat(E.reverse())}},Y=function(P){var A,N=G(P);(A=P.graph().dummyChains)===null||A===void 0||A.forEach(function(O){var x,E,y=O,m=P.node(y),g=m.edgeObj;if(g)for(var v=F(P,N,g.v,g.w),u=v.path,b=v.lca,T=0,D=u[T],k=!0;y!==g.w;){if(m=P.node(y),k){for(;D!==b&&((x=P.node(D))===null||x===void 0?void 0:x.maxRank)<m.rank;)T++,D=u[T];D===b&&(k=!1)}if(!k){for(;T<u.length-1&&((E=P.node(u[T+1]))===null||E===void 0?void 0:E.minRank)<=m.rank;)T++;D=u[T]}P.setParent(y,D),y=P.successors(y)[0]}})};U.default=Y},71963:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var W=function(X,K){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,re){Q.__proto__=re}||function(Q,re){for(var q in re)Object.prototype.hasOwnProperty.call(re,q)&&(Q[q]=re[q])},W(X,K)};return function(X,K){if(typeof K!="function"&&K!==null)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");W(X,K);function Q(){this.constructor=X}X.prototype=K===null?Object.create(K):(Q.prototype=K.prototype,new Q)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.width=U.sep=U.positionX=U.balance=U.alignCoordinates=U.findSmallestWidthAlignment=U.buildBlockGraph=U.horizontalCompaction=U.verticalAlignment=U.hasConflict=U.addConflict=U.findOtherInnerSegmentNode=U.findType2Conflicts=U.findType1Conflicts=void 0;var Y=G(99905),P=G(33446),A=G(69209),N=function(W){F(X,W);function X(){return W!==null&&W.apply(this,arguments)||this}return X}(Y.Graph),O=function(W,X){var K={},Q=function(re,q){var ae=0,ue=0,ce=re.length,De=q==null?void 0:q[(q==null?void 0:q.length)-1];return q==null||q.forEach(function(Ie,Pe){var we,xe=(0,U.findOtherInnerSegmentNode)(W,Ie),ve=xe?W.node(xe).order:ce;(xe||Ie===De)&&((we=q.slice(ue,Pe+1))===null||we===void 0||we.forEach(function(Se){var Te;(Te=W.predecessors(Se))===null||Te===void 0||Te.forEach(function(We){var Ge,Je=W.node(We),mt=Je.order;(mt<ae||ve<mt)&&!(Je.dummy&&(!((Ge=W.node(Se))===null||Ge===void 0)&&Ge.dummy))&&(0,U.addConflict)(K,We,Se)})}),ue=Pe+1,ae=ve)}),q};return X!=null&&X.length&&X.reduce(Q),K};U.findType1Conflicts=O;var x=function(W,X){var K={};function Q(ue,ce,De,Ie,Pe){for(var we,xe,ve,Se=ce;Se<De;Se++)ve=ue[Se],!((we=W.node(ve))===null||we===void 0)&&we.dummy&&((xe=W.predecessors(ve))===null||xe===void 0||xe.forEach(function(Te){var We=W.node(Te);We.dummy&&(We.order<Ie||We.order>Pe)&&(0,U.addConflict)(K,Te,ve)}))}function re(ue){return JSON.stringify(ue.slice(1))}function q(ue,ce){var De=re(ue);ce.get(De)||(Q.apply(void 0,ue),ce.set(De,!0))}var ae=function(ue,ce){var De=-1,Ie,Pe=0,we=new Map;return ce==null||ce.forEach(function(xe,ve){var Se;if(((Se=W.node(xe))===null||Se===void 0?void 0:Se.dummy)==="border"){var Te=W.predecessors(xe)||[];Te.length&&(Ie=W.node(Te[0]).order,q([ce,Pe,ve,De,Ie],we),Pe=ve,De=Ie)}q([ce,Pe,ce.length,Ie,ue.length],we)}),ce};return X!=null&&X.length&&X.reduce(ae),K};U.findType2Conflicts=x;var E=function(W,X){var K,Q;if(!((K=W.node(X))===null||K===void 0)&&K.dummy)return(Q=W.predecessors(X))===null||Q===void 0?void 0:Q.find(function(re){return W.node(re).dummy})};U.findOtherInnerSegmentNode=E;var y=function(W,X,K){var Q=X,re=K;if(Q>re){var q=Q;Q=re,re=q}var ae=W[Q];ae||(W[Q]=ae={}),ae[re]=!0};U.addConflict=y;var m=function(W,X,K){var Q=X,re=K;if(Q>re){var q=X;Q=re,re=q}return!!W[Q]};U.hasConflict=m;var g=function(W,X,K,Q){var re={},q={},ae={};return X==null||X.forEach(function(ue){ue==null||ue.forEach(function(ce,De){re[ce]=ce,q[ce]=ce,ae[ce]=De})}),X==null||X.forEach(function(ue){var ce=-1;ue==null||ue.forEach(function(De){var Ie=Q(De);if(Ie.length){Ie=Ie.sort(function(Se,Te){return ae[Se]-ae[Te]});for(var Pe=(Ie.length-1)/2,we=Math.floor(Pe),xe=Math.ceil(Pe);we<=xe;++we){var ve=Ie[we];q[De]===De&&ce<ae[ve]&&!(0,U.hasConflict)(K,De,ve)&&(q[ve]=De,q[De]=re[De]=re[ve],ce=ae[ve])}}})}),{root:re,align:q}};U.verticalAlignment=g;var v=function(W,X,K,Q,re){var q,ae={},ue=(0,U.buildBlockGraph)(W,X,K,re),ce=re?"borderLeft":"borderRight",De=function(we,xe){for(var ve=ue.nodes(),Se=ve.pop(),Te={};Se;)Te[Se]?we(Se):(Te[Se]=!0,ve.push(Se),ve=ve.concat(xe(Se))),Se=ve.pop()},Ie=function(we){ae[we]=(ue.inEdges(we)||[]).reduce(function(xe,ve){return Math.max(xe,(ae[ve.v]||0)+ue.edge(ve))},0)},Pe=function(we){var xe=(ue.outEdges(we)||[]).reduce(function(Se,Te){return Math.min(Se,(ae[Te.w]||0)-ue.edge(Te))},Number.POSITIVE_INFINITY),ve=W.node(we);xe!==Number.POSITIVE_INFINITY&&ve.borderType!==ce&&(ae[we]=Math.max(ae[we],xe))};return De(Ie,ue.predecessors.bind(ue)),De(Pe,ue.successors.bind(ue)),(q=Object.values(Q))===null||q===void 0||q.forEach(function(we){ae[we]=ae[K[we]]}),ae};U.horizontalCompaction=v;var u=function(W,X,K,Q){var re=new N,q=W.graph(),ae=(0,U.sep)(q.nodesep,q.edgesep,Q);return X==null||X.forEach(function(ue){var ce;ue==null||ue.forEach(function(De){var Ie=K[De];if(re.setNode(Ie),ce){var Pe=K[ce],we=re.edgeFromArgs(Pe,Ie);re.setEdge(Pe,Ie,Math.max(ae(W,De,ce),we||0))}ce=De})}),re};U.buildBlockGraph=u;var b=function(W,X){return(0,A.minBy)(Object.values(X),function(K){var Q,re=Number.NEGATIVE_INFINITY,q=Number.POSITIVE_INFINITY;return(Q=Object.keys(K))===null||Q===void 0||Q.forEach(function(ae){var ue=K[ae],ce=(0,U.width)(W,ae)/2;re=Math.max(ue+ce,re),q=Math.min(ue-ce,q)}),re-q})};U.findSmallestWidthAlignment=b;function T(W,X){var K=Object.values(X),Q=(0,P.min)(K),re=(0,P.max)(K);["u","d"].forEach(function(q){["l","r"].forEach(function(ae){var ue=q+ae,ce=W[ue],De;if(ce!==X){var Ie=Object.values(ce);De=ae==="l"?Q-(0,P.min)(Ie):re-(0,P.max)(Ie),De&&(W[ue]={},Object.keys(ce).forEach(function(Pe){W[ue][Pe]=ce[Pe]+De}))}})})}U.alignCoordinates=T;var D=function(W,X){var K={};return Object.keys(W.ul).forEach(function(Q){if(X)K[Q]=W[X.toLowerCase()][Q];else{var re=Object.values(W).map(function(q){return q[Q]});K[Q]=(re[0]+re[1])/2}}),K};U.balance=D;var k=function(W){var X=(0,A.buildLayerMatrix)(W),K=Object.assign((0,U.findType1Conflicts)(W,X),(0,U.findType2Conflicts)(W,X)),Q={},re;["u","d"].forEach(function(ae){re=ae==="u"?X:Object.values(X).reverse(),["l","r"].forEach(function(ue){ue==="r"&&(re=re.map(function(Pe){return Object.values(Pe).reverse()}));var ce=(ae==="u"?W.predecessors:W.successors).bind(W),De=(0,U.verticalAlignment)(W,re,K,ce),Ie=(0,U.horizontalCompaction)(W,re,De.root,De.align,ue==="r");ue==="r"&&Object.keys(Ie).forEach(function(Pe){Ie[Pe]=-Ie[Pe]}),Q[ae+ue]=Ie})});var q=(0,U.findSmallestWidthAlignment)(W,Q);return T(Q,q),(0,U.balance)(Q,W.graph().align)};U.positionX=k;var V=function(W,X,K){return function(Q,re,q){var ae=Q.node(re),ue=Q.node(q),ce=0,De;if(ce+=ae.width/2,ae.hasOwnProperty("labelpos"))switch((ae.labelpos||"").toLowerCase()){case"l":De=-ae.width/2;break;case"r":De=ae.width/2;break}if(De&&(ce+=K?De:-De),De=0,ce+=(ae.dummy?X:W)/2,ce+=(ue.dummy?X:W)/2,ce+=ue.width/2,ue.labelpos)switch((ue.labelpos||"").toLowerCase()){case"l":De=ue.width/2;break;case"r":De=-ue.width/2;break}return De&&(ce+=K?De:-De),De=0,ce}};U.sep=V;var J=function(W,X){return W.node(X).width||0};U.width=J},95:function(pr,U,G){"use strict";var F=this&&this.__spreadArray||function(x,E,y){if(y||arguments.length===2)for(var m=0,g=E.length,v;m<g;m++)(v||!(m in E))&&(v||(v=Array.prototype.slice.call(E,0,m)),v[m]=E[m]);return x.concat(v||Array.prototype.slice.call(E))};Object.defineProperty(U,"__esModule",{value:!0});var Y=G(69209),P=G(71963),A=function(x){var E=(0,Y.buildLayerMatrix)(x),y=x.graph().ranksep,m=0;E==null||E.forEach(function(g){var v=g.map(function(b){return x.node(b).height}),u=Math.max.apply(Math,F(F([],v,!1),[0],!1));g==null||g.forEach(function(b){x.node(b).y=m+u/2}),m+=u+y})},N=function(x){var E=(0,Y.buildLayerMatrix)(x),y=Object.assign((0,P.findType1Conflicts)(x,E),(0,P.findType2Conflicts)(x,E)),m={},g=[];["u","d"].forEach(function(u){g=u==="u"?E:Object.values(E).reverse(),["l","r"].forEach(function(b){b==="r"&&(g=g.map(function(V){return Object.values(V).reverse()}));var T=(u==="u"?x.predecessors:x.successors).bind(x),D=(0,P.verticalAlignment)(x,g,y,T),k=(0,P.horizontalCompaction)(x,g,D.root,D.align,b==="r");b==="r"&&Object.keys(k).forEach(function(V){return k[V]=-k[V]}),m[u+b]=k})});var v=(0,P.findSmallestWidthAlignment)(x,m);return v&&(0,P.alignCoordinates)(m,v),(0,P.balance)(m,x.graph().align)},O=function(x){var E,y=(0,Y.asNonCompoundGraph)(x);A(y);var m=N(y);(E=Object.keys(m))===null||E===void 0||E.forEach(function(g){y.node(g).x=m[g]})};U.default=O},13614:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.feasibleTreeWithLayer=U.feasibleTree=void 0;var F=G(37323),Y=G(69209),P=G(27652),A=function(m){var g=new P.Graph({directed:!1}),v=m.nodes()[0],u=m.nodeCount();g.setNode(v,{});for(var b,T;N(g,m)<u;)b=E(g,m),T=g.hasNode(b.v)?(0,F.slack)(m,b):-(0,F.slack)(m,b),y(g,m,T);return g};U.feasibleTree=A;var N=function(m,g){var v=function(u){g.nodeEdges(u).forEach(function(b){var T=b.v,D=u===T?b.w:T;!m.hasNode(D)&&!(0,F.slack)(g,b)&&(m.setNode(D,{}),m.setEdge(u,D,{}),v(D))})};return m.nodes().forEach(v),m.nodeCount()},O=function(m){var g=new P.Graph({directed:!1}),v=m.nodes()[0],u=m.nodes().filter(function(D){return!!m.node(D)}).length;g.setNode(v,{});for(var b,T;x(g,m)<u;)b=E(g,m),T=g.hasNode(b.v)?(0,F.slack)(m,b):-(0,F.slack)(m,b),y(g,m,T);return g};U.feasibleTreeWithLayer=O;var x=function(m,g){var v=function(u){var b;(b=g.nodeEdges(u))===null||b===void 0||b.forEach(function(T){var D=T.v,k=u===D?T.w:D;!m.hasNode(k)&&(g.node(k).layer!==void 0||!(0,F.slack)(g,T))&&(m.setNode(k,{}),m.setEdge(u,k,{}),v(k))})};return m.nodes().forEach(v),m.nodeCount()},E=function(m,g){return(0,Y.minBy)(g.edges(),function(v){return m.hasNode(v.v)!==m.hasNode(v.w)?(0,F.slack)(g,v):1/0})},y=function(m,g,v){m.nodes().forEach(function(u){g.node(u).rank||(g.node(u).rank=0),g.node(u).rank+=v})};U.default={feasibleTree:A,feasibleTreeWithLayer:O}},76827:function(pr,U,G){"use strict";var F=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(U,"__esModule",{value:!0});var Y=G(37323),P=G(13614),A=F(G(32253)),N=function(y){switch(y.graph().ranker){case"network-simplex":E(y);break;case"tight-tree":x(y);break;case"longest-path":O(y);break;default:x(y)}},O=Y.longestPath,x=function(y){(0,Y.longestPathWithLayer)(y),(0,P.feasibleTreeWithLayer)(y)},E=function(y){(0,A.default)(y)};U.default=N},32253:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.exchangeEdges=U.enterEdge=U.leaveEdge=U.initLowLimValues=U.calcCutValue=U.initCutValues=void 0;var F=G(13614),Y=G(37323),P=G(69209),A=G(99905),N=A.algorithm.preorder,O=A.algorithm.postorder,x=function(J){var W=(0,P.simplify)(J);(0,Y.longestPath)(W);var X=(0,F.feasibleTree)(W);(0,U.initLowLimValues)(X),(0,U.initCutValues)(X,W);for(var K,Q;K=(0,U.leaveEdge)(X);)Q=(0,U.enterEdge)(X,W,K),(0,U.exchangeEdges)(X,W,K,Q)},E=function(J,W){var X=O(J,J.nodes());X=X==null?void 0:X.slice(0,(X==null?void 0:X.length)-1),X==null||X.forEach(function(K){y(J,W,K)})};U.initCutValues=E;var y=function(J,W,X){var K=J.node(X),Q=K.parent;J.edgeFromArgs(X,Q).cutvalue=(0,U.calcCutValue)(J,W,X)},m=function(J,W,X){var K,Q=J.node(X),re=Q.parent,q=!0,ae=W.edgeFromArgs(X,re),ue=0;return ae||(q=!1,ae=W.edgeFromArgs(re,X)),ue=ae.weight,(K=W.nodeEdges(X))===null||K===void 0||K.forEach(function(ce){var De=ce.v===X,Ie=De?ce.w:ce.v;if(Ie!==re){var Pe=De===q,we=W.edge(ce).weight;if(ue+=Pe?we:-we,k(J,X,Ie)){var xe=J.edgeFromArgs(X,Ie).cutvalue;ue+=Pe?-xe:xe}}}),ue};U.calcCutValue=m;var g=function(J,W){W===void 0&&(W=J.nodes()[0]),v(J,{},1,W)};U.initLowLimValues=g;var v=function(J,W,X,K,Q){var re,q=X,ae=X,ue=J.node(K);return W[K]=!0,(re=J.neighbors(K))===null||re===void 0||re.forEach(function(ce){W[ce]||(ae=v(J,W,ae,ce,K))}),ue.low=q,ue.lim=ae++,Q?ue.parent=Q:delete ue.parent,ae},u=function(J){return J.edges().find(function(W){return J.edge(W).cutvalue<0})};U.leaveEdge=u;var b=function(J,W,X){var K=X.v,Q=X.w;W.hasEdge(K,Q)||(K=X.w,Q=X.v);var re=J.node(K),q=J.node(Q),ae=re,ue=!1;re.lim>q.lim&&(ae=q,ue=!0);var ce=W.edges().filter(function(De){return ue===V(J,J.node(De.v),ae)&&ue!==V(J,J.node(De.w),ae)});return(0,P.minBy)(ce,function(De){return(0,Y.slack)(W,De)})};U.enterEdge=b;var T=function(J,W,X,K){var Q=X.v,re=X.w;J.removeEdge(Q,re),J.setEdge(K.v,K.w,{}),(0,U.initLowLimValues)(J),(0,U.initCutValues)(J,W),D(J,W)};U.exchangeEdges=T;var D=function(J,W){var X=J.nodes().find(function(Q){var re;return!(!((re=W.node(Q))===null||re===void 0)&&re.parent)}),K=N(J,X);K=K==null?void 0:K.slice(1),K==null||K.forEach(function(Q){var re=J.node(Q).parent,q=W.edgeFromArgs(Q,re),ae=!1;q||(q=W.edgeFromArgs(re,Q),ae=!0),W.node(Q).rank=W.node(re).rank+(ae?q.minlen:-q.minlen)})},k=function(J,W,X){return J.hasEdge(W,X)},V=function(J,W,X){return X.low<=W.lim&&W.lim<=X.lim};U.default=x},37323:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.slack=U.longestPathWithLayer=U.longestPath=void 0;var G=function(P){var A,N={},O=function(x){var E,y=P.node(x);if(!y)return 0;if(N[x])return y.rank;N[x]=!0;var m;return(E=P.outEdges(x))===null||E===void 0||E.forEach(function(g){var v=O(g.w),u=P.edge(g).minlen,b=v-u;b&&(m===void 0||b<m)&&(m=b)}),m||(m=0),y.rank=m,m};(A=P.sources())===null||A===void 0||A.forEach(function(x){return O(x)})};U.longestPath=G;var F=function(P){var A,N={},O,x=function(m){var g,v=P.node(m);if(!v)return 0;if(N[m])return v.rank;N[m]=!0;var u;return(g=P.outEdges(m))===null||g===void 0||g.forEach(function(b){var T=x(b.w),D=P.edge(b).minlen,k=T-D;k&&(u===void 0||k<u)&&(u=k)}),u||(u=0),(O===void 0||u<O)&&(O=u),v.rank=u,u};(A=P.sources())===null||A===void 0||A.forEach(function(m){P.node(m)&&x(m)}),O===void 0&&(O=0);var E={},y=function(m,g){var v,u=P.node(m),b=isNaN(u.layer)?g:u.layer;(u.rank===void 0||u.rank<b)&&(u.rank=b),!E[m]&&(E[m]=!0,(v=P.outEdges(m))===null||v===void 0||v.map(function(T){y(T.w,b+P.edge(T).minlen)}))};P.nodes().forEach(function(m){var g=P.node(m);g&&(isNaN(g.layer)?g.rank-=O:y(m,g.layer))})};U.longestPathWithLayer=F;var Y=function(P,A){return P.node(A.w).rank-P.node(A.v).rank-P.edge(A).minlen};U.slack=Y,U.default={longestPath:G,longestPathWithLayer:F,slack:Y}},69209:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.minBy=U.notime=U.time=U.partition=U.maxRank=U.addBorderNode=U.removeEmptyRanks=U.normalizeRanks=U.buildLayerMatrix=U.intersectRect=U.predecessorWeights=U.successorWeights=U.zipObject=U.asNonCompoundGraph=U.simplify=U.addDummyNode=void 0;var F=G(49784),Y=G(27652),P=function(W,X){return Number(W)-Number(X)},A=function(W,X,K,Q){var re;do re="".concat(Q).concat(Math.random());while(W.hasNode(re));return K.dummy=X,W.setNode(re,K),re};U.addDummyNode=A;var N=function(W){var X=new Y.Graph().setGraph(W.graph());return W.nodes().forEach(function(K){X.setNode(K,W.node(K))}),W.edges().forEach(function(K){var Q=X.edgeFromArgs(K.v,K.w)||{weight:0,minlen:1},re=W.edge(K);X.setEdge(K.v,K.w,{weight:Q.weight+re.weight,minlen:Math.max(Q.minlen,re.minlen)})}),X};U.simplify=N;var O=function(W){var X=new Y.Graph({multigraph:W.isMultigraph()}).setGraph(W.graph());return W.nodes().forEach(function(K){var Q;!((Q=W.children(K))===null||Q===void 0)&&Q.length||X.setNode(K,W.node(K))}),W.edges().forEach(function(K){X.setEdgeObj(K,W.edge(K))}),X};U.asNonCompoundGraph=O;var x=function(W,X){return W==null?void 0:W.reduce(function(K,Q,re){return K[Q]=X[re],K},{})};U.zipObject=x;var E=function(W){var X={};return W.nodes().forEach(function(K){var Q,re={};(Q=W.outEdges(K))===null||Q===void 0||Q.forEach(function(q){var ae;re[q.w]=(re[q.w]||0)+(((ae=W.edge(q))===null||ae===void 0?void 0:ae.weight)||0)}),X[K]=re}),X};U.successorWeights=E;var y=function(W){var X=W.nodes(),K=X.map(function(Q){var re,q={};return(re=W.inEdges(Q))===null||re===void 0||re.forEach(function(ae){q[ae.v]=(q[ae.v]||0)+W.edge(ae).weight}),q});return(0,U.zipObject)(X,K)};U.predecessorWeights=y;var m=function(W,X){var K=Number(W.x),Q=Number(W.y),re=Number(X.x)-K,q=Number(X.y)-Q,ae=Number(W.width)/2,ue=Number(W.height)/2;if(!re&&!q)return{x:0,y:0};var ce,De;return Math.abs(q)*ae>Math.abs(re)*ue?(q<0&&(ue=-ue),ce=ue*re/q,De=ue):(re<0&&(ae=-ae),ce=ae,De=ae*q/re),{x:K+ce,y:Q+De}};U.intersectRect=m;var g=function(W){for(var X=[],K=(0,U.maxRank)(W)+1,Q=0;Q<K;Q++)X.push([]);W.nodes().forEach(function(re){var q=W.node(re);if(q){var ae=q.rank;ae!==void 0&&X[ae]&&X[ae].push(re)}});for(var Q=0;Q<K;Q++)X[Q]=X[Q].sort(function(q,ae){var ue,ce;return P((ue=W.node(q))===null||ue===void 0?void 0:ue.order,(ce=W.node(ae))===null||ce===void 0?void 0:ce.order)});return X};U.buildLayerMatrix=g;var v=function(W){var X=W.nodes().filter(function(Q){var re;return((re=W.node(Q))===null||re===void 0?void 0:re.rank)!==void 0}).map(function(Q){return W.node(Q).rank}),K=Math.min.apply(Math,X);W.nodes().forEach(function(Q){var re=W.node(Q);re.hasOwnProperty("rank")&&K!==1/0&&(re.rank-=K)})};U.normalizeRanks=v;var u=function(W){var X=W.nodes(),K=X.filter(function(De){var Ie;return((Ie=W.node(De))===null||Ie===void 0?void 0:Ie.rank)!==void 0}).map(function(De){return W.node(De).rank}),Q=Math.min.apply(Math,K),re=[];X.forEach(function(De){var Ie,Pe=(((Ie=W.node(De))===null||Ie===void 0?void 0:Ie.rank)||0)-Q;re[Pe]||(re[Pe]=[]),re[Pe].push(De)});for(var q=0,ae=W.graph().nodeRankFactor||0,ue=0;ue<re.length;ue++){var ce=re[ue];ce===void 0?ue%ae!==0&&(q-=1):q&&(ce==null||ce.forEach(function(De){var Ie=W.node(De);Ie&&(Ie.rank=Ie.rank||0,Ie.rank+=q)}))}};U.removeEmptyRanks=u;var b=function(W,X,K,Q){var re={width:0,height:0};return(0,F.isNumber)(K)&&(0,F.isNumber)(Q)&&(re.rank=K,re.order=Q),(0,U.addDummyNode)(W,"border",re,X)};U.addBorderNode=b;var T=function(W){var X;return W.nodes().forEach(function(K){var Q,re=(Q=W.node(K))===null||Q===void 0?void 0:Q.rank;re!==void 0&&(X===void 0||re>X)&&(X=re)}),X||(X=0),X};U.maxRank=T;var D=function(W,X){var K={lhs:[],rhs:[]};return W==null||W.forEach(function(Q){X(Q)?K.lhs.push(Q):K.rhs.push(Q)}),K};U.partition=D;var k=function(W,X){var K=Date.now();try{return X()}finally{console.log("".concat(W," time: ").concat(Date.now()-K,"ms"))}};U.time=k;var V=function(W,X){return X()};U.notime=V;var J=function(W,X){return W.reduce(function(K,Q){var re=X(K),q=X(Q);return re>q?Q:K})};U.minBy=J},77057:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var E=function(y,m){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var u in v)Object.prototype.hasOwnProperty.call(v,u)&&(g[u]=v[u])},E(y,m)};return function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");E(y,m);function g(){this.constructor=y}y.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}(),Y=this&&this.__assign||function(){return Y=Object.assign||function(E){for(var y,m=1,g=arguments.length;m<g;m++){y=arguments[m];for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(E[v]=y[v])}return E},Y.apply(this,arguments)},P=this&&this.__spreadArray||function(E,y,m){if(m||arguments.length===2)for(var g=0,v=y.length,u;g<v;g++)(u||!(g in y))&&(u||(u=Array.prototype.slice.call(y,0,g)),u[g]=y[g]);return E.concat(u||Array.prototype.slice.call(y))};Object.defineProperty(U,"__esModule",{value:!0}),U.DagreCompoundLayout=void 0;var A=G(62329),N=G(31969),O=G(49784),x=function(E){F(y,E);function y(m){var g=E.call(this)||this;return g.rankdir="TB",g.nodesep=50,g.edgesep=5,g.ranksep=50,g.controlPoints=!0,g.anchorPoint=!0,g.nodes=[],g.edges=[],g.combos=[],g.onLayoutEnd=function(){},g.updateCfg(m),g}return y.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},y.prototype.init=function(m){var g=m.hiddenNodes||[],v=m.hiddenEdges||[],u=m.hiddenCombos||[];this.nodes=this.getDataByOrder((m.nodes||[]).concat(g)),this.edges=this.getDataByOrder((m.edges||[]).concat(v)),this.combos=(m.combos||[]).concat(u.map(function(b){return Y(Y({},b),{collapsed:!0})}))},y.prototype.execute=function(){var m=this,g=m.nodes,v=m.edges;if(g){var u=m.getLayoutConfig(),b=u.graphDef,T=u.graphOption,D=u.graphSettings,k=(0,N.buildGraph)(b,T,D),V=(0,N.flatGraph)(k,!0);return this.updatePosition(V),m.onLayoutEnd&&m.onLayoutEnd(),{nodes:g,edges:v}}},y.prototype.getNodePath=function(m){var g=this,v=g.nodes,u=g.combos,b=v.find(function(D){return D.id===m}),T=function(D,k){k===void 0&&(k=[]);var V=u.find(function(J){return J.id===D});return V?(k.unshift(D),V.parentId?T(V.parentId,k):k):k};return b&&b.comboId?T(b.comboId,[m]):[m]},y.prototype.getLayoutConfig=function(){var m,g,v,u=this,b=u.nodes,T=u.edges,D=u.combos,k=u.nodeSize,V=u.rankdir,J=u.align,W=u.edgesep,X=u.nodesep,K=u.ranksep,Q=u.settings,re=(D||[]).reduce(function(mt,xt){var Ze=b.filter(function(gt){return gt.comboId===xt.id}).map(function(gt){return gt.id}),$e=(D||[]).filter(function(gt){return gt.parentId===xt.id}).map(function(gt){return gt.id});return(Ze.length||$e.length)&&(mt[xt.id]=P(P([],Ze,!0),$e,!0)),mt},{}),q;k?(0,O.isArray)(k)?q=function(){return k}:q=function(){return[k,k]}:q=function(mt){return mt&&mt.size?(0,O.isArray)(mt.size)?mt.size:(0,O.isObject)(mt.size)?[mt.size.width||40,mt.size.height||40]:[mt.size,mt.size]:[40,40]};var ae=function(mt){return mt&&mt.size?(0,O.isArray)(mt.size)?mt.size:[mt.size,mt.size]:[80,40]},ue=ae(D==null?void 0:D[0]),ce=ue[0],De=ue[1],Ie=(g=(m=u.graphSettings)===null||m===void 0?void 0:m.subScene)===null||g===void 0?void 0:g.meta,Pe=((v=D.find(function(mt){return!mt.collapsed}))===null||v===void 0?void 0:v.padding)||[20,20,20,20],we=Pe[0],xe=Pe[1],ve=Pe[2],Se=Pe[3],Te={compound:re,nodes:P([],(b||[]).map(function(mt){var xt=q(mt),Ze=xt[0],$e=xt[1];return Y(Y({},mt),{width:Ze,height:$e})}),!0),edges:P([],(T||[]).map(function(mt){return Y(Y({},mt),{v:mt.source,w:mt.target})}),!0)},We={expanded:(D||[]).filter(function(mt){return!mt.collapsed}).map(function(mt){return mt.id})},Ge={graph:{meta:{align:J,rankDir:V,nodeSep:X,edgeSep:W,rankSep:K}},subScene:{meta:{paddingTop:we||(Ie==null?void 0:Ie.paddingTop)||20,paddingRight:xe||(Ie==null?void 0:Ie.paddingRight)||20,paddingBottom:ve||(Ie==null?void 0:Ie.paddingBottom)||20,paddingLeft:Se||(Ie==null?void 0:Ie.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:ce,height:De}}},Je=(0,N.mergeConfig)(Q,Y({},(0,N.mergeConfig)(Ge,N.LAYOUT_CONFIG)));return u.graphSettings=Je,{graphDef:Te,graphOption:We,graphSettings:Je}},y.prototype.updatePosition=function(m){var g=m.nodes,v=m.edges;this.updateNodePosition(g,v),this.updateEdgePosition(g,v)},y.prototype.getBegin=function(m,g){var v=this,u=v.begin,b=[0,0];if(u){var T=1/0,D=1/0;m.forEach(function(k){T>k.x&&(T=k.x),D>k.y&&(D=k.y)}),g.forEach(function(k){k.points.forEach(function(V){T>V.x&&(T=V.x),D>V.y&&(D=V.y)})}),b[0]=u[0]-T,b[1]=u[1]-D}return b},y.prototype.updateNodePosition=function(m,g){var v=this,u=v.combos,b=v.nodes,T=v.edges,D=v.anchorPoint,k=v.graphSettings,V=this.getBegin(m,g);m.forEach(function(J){var W,X=J.x,K=J.y,Q=J.id,re=J.type,q=J.coreBox;if(re===N.HierarchyNodeType.META&&Q!==N.ROOT_NAME){var ae=u.findIndex(function(Pe){return Pe.id===Q}),ue=(W=k==null?void 0:k.subScene)===null||W===void 0?void 0:W.meta;u[ae].offsetX=X+V[0],u[ae].offsetY=K+V[1],u[ae].fixSize=[q.width,q.height],u[ae].fixCollapseSize=[q.width,q.height],J.expanded?u[ae].padding=[ue==null?void 0:ue.paddingTop,ue==null?void 0:ue.paddingRight,ue==null?void 0:ue.paddingBottom,ue==null?void 0:ue.paddingLeft]:u[ae].padding=[0,0,0,0]}else if(re===N.HierarchyNodeType.OP){var ae=b.findIndex(function(we){return we.id===Q});if(b[ae].x=X+V[0],b[ae].y=K+V[1],D){var ce=[],De=g.filter(function(we){return we.v===Q}),Ie=g.filter(function(we){return we.w===Q});De.length>0&&De.forEach(function(we){var xe=we.points[0],ve=(xe.x-X)/J.width+.5,Se=(xe.y-K)/J.height+.5;ce.push([ve,Se]),we.baseEdgeList.forEach(function(Te){var We=T.find(function(Ge){return Ge.source===Te.v&&Ge.target===Te.w});We&&(We.sourceAnchor=ce.length-1)})}),Ie.length>0&&Ie.forEach(function(we){var xe=we.points[we.points.length-1],ve=(xe.x-X)/J.width+.5,Se=(xe.y-K)/J.height+.5;ce.push([ve,Se]),we.baseEdgeList.forEach(function(Te){var We=T.find(function(Ge){return Ge.source===Te.v&&Ge.target===Te.w});We&&(We.targetAnchor=ce.length-1)})}),b[ae].anchorPoints=ce.length>0?ce:b[ae].anchorPoints||[]}}})},y.prototype.updateEdgePosition=function(m,g){var v=this,u=v.combos,b=v.edges,T=v.controlPoints,D=this.getBegin(m,g);T&&(u.forEach(function(k){k.inEdges=[],k.outEdges=[]}),b.forEach(function(k){var V,J,W,X,K=m.find(function(Pe){return Pe.id===k.source}),Q=m.find(function(Pe){return Pe.id===k.target}),re=[],q=[];if(K&&Q)q=(0,N.getEdges)(K==null?void 0:K.id,Q==null?void 0:Q.id,m);else if(!K||!Q){var ae=v.getNodePath(k.source),ue=v.getNodePath(k.target),ce=ae.reverse().slice(K?0:1).find(function(Pe){return m.find(function(we){return we.id===Pe})}),De=ue.reverse().slice(Q?0:1).find(function(Pe){return m.find(function(we){return we.id===Pe})});K=m.find(function(Pe){return Pe.id===ce}),Q=m.find(function(Pe){return Pe.id===De}),q=(0,N.getEdges)(K==null?void 0:K.id,Q==null?void 0:Q.id,m,{v:k.source,w:k.target})}if(re=q.reduce(function(Pe,we){return P(P([],Pe,!0),we.points.map(function(xe){return Y(Y({},xe),{x:xe.x+D[0],y:xe.y+D[1]})}),!0)},[]),re=re.slice(1,-1),k.controlPoints=re,(Q==null?void 0:Q.type)===N.NodeType.META){var Ie=u.findIndex(function(Pe){return Pe.id===(Q==null?void 0:Q.id)});if(!u[Ie]||!((V=u[Ie].inEdges)===null||V===void 0)&&V.some(function(Pe){return Pe.source===K.id&&Pe.target===Q.id}))return;(J=u[Ie].inEdges)===null||J===void 0||J.push({source:K.id,target:Q.id,controlPoints:re})}if((K==null?void 0:K.type)===N.NodeType.META){var Ie=u.findIndex(function(we){return we.id===(K==null?void 0:K.id)});if(!u[Ie]||!((W=u[Ie].outEdges)===null||W===void 0)&&W.some(function(we){return we.source===K.id&&we.target===Q.id}))return;(X=u[Ie].outEdges)===null||X===void 0||X.push({source:K.id,target:Q.id,controlPoints:re})}}))},y.prototype.getType=function(){return"dagreCompound"},y.prototype.getDataByOrder=function(m){return m.every(function(g){return g.layoutOrder!==void 0})||m.forEach(function(g,v){g.layoutOrder=v}),m.sort(function(g,v){return g.layoutOrder-v.layoutOrder})},y}(A.Base);U.DagreCompoundLayout=x},34015:function(pr,U,G){"use strict";var F=this&&this.__assign||function(){return F=Object.assign||function(g){for(var v,u=1,b=arguments.length;u<b;u++){v=arguments[u];for(var T in v)Object.prototype.hasOwnProperty.call(v,T)&&(g[T]=v[T])}return g},F.apply(this,arguments)},Y=this&&this.__createBinding||(Object.create?function(g,v,u,b){b===void 0&&(b=u);var T=Object.getOwnPropertyDescriptor(v,u);(!T||("get"in T?!v.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return v[u]}}),Object.defineProperty(g,b,T)}:function(g,v,u,b){b===void 0&&(b=u),g[b]=v[u]}),P=this&&this.__setModuleDefault||(Object.create?function(g,v){Object.defineProperty(g,"default",{enumerable:!0,value:v})}:function(g,v){g.default=v}),A=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var v={};if(g!=null)for(var u in g)u!=="default"&&Object.prototype.hasOwnProperty.call(g,u)&&Y(v,g,u);return P(v,g),v},N=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(U,"__esModule",{value:!0});var O=A(G(71497)),x=N(G(88221)),E=N(G(87064)),y=G(20171);function m(g,v){var u=g.nodes,b=g.edges,T=v.width,D=v.height;if(!(u!=null&&u.length))return Promise.resolve();var k=[];u.forEach(function(q){var ae=b.filter(function(ce){return ce.source===q.id||ce.target===q.id});if(ae.length>1){var ue=F({},q);delete ue.size,k.push(ue)}});var V=[];b.forEach(function(q){var ae=k.find(function(ce){return ce.id===q.source}),ue=k.find(function(ce){return ce.id===q.target});ae&&ue&&V.push(q)});var J=new y.DagreLayout({type:"dagre",ranksep:v.nodeMinGap,nodesep:v.nodeMinGap}),W=J.layout({nodes:k,edges:V}).nodes;u.forEach(function(q){var ae=(W||[]).find(function(ue){return ue.id===q.id});q.x=(ae==null?void 0:ae.x)||T/2,q.y=(ae==null?void 0:ae.y)||D/2});var X=JSON.parse(JSON.stringify(u)),K=JSON.parse(JSON.stringify(b)),Q=O.forceSimulation().nodes(X).force("link",O.forceLink(K).id(function(q){return q.id}).distance(function(q){var ae=V.find(function(ue){return ue.source===q.source&&ue.target===q.target});return ae?30:20})).force("charge",O.forceManyBody()).force("center",O.forceCenter(T/2,D/2)).force("x",O.forceX(T/2)).force("y",O.forceY(D/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),re=new Promise(function(q){Q.on("end",function(){u.forEach(function(we){var xe=X.find(function(ve){return ve.id===we.id});xe&&(we.x=xe.x,we.y=xe.y)});var ae=Math.min.apply(Math,u.map(function(we){return we.x})),ue=Math.max.apply(Math,u.map(function(we){return we.x})),ce=Math.min.apply(Math,u.map(function(we){return we.y})),De=Math.max.apply(Math,u.map(function(we){return we.y})),Ie=T/(ue-ae),Pe=D/(De-ce);u.forEach(function(we){we.x!==void 0&&Ie<1&&(we.x=(we.x-ae)*Ie),we.y!==void 0&&Pe<1&&(we.y=(we.y-ce)*Pe)}),u.forEach(function(we){we.sizeTemp=we.size,we.size=[10,10]}),(0,E.default)(u,b),u.forEach(function(we){we.size=we.sizeTemp||[],delete we.sizeTemp}),(0,x.default)({nodes:u,edges:b},v),q()})});return re}U.default=m},88221:function(pr,U,G){"use strict";var F=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(U,"__esModule",{value:!0});var Y=F(G(28611));function P(A,N){if(!A.nodes||A.nodes.length===0)return A;var O=N.width,x=N.height,E=N.nodeMinGap,y=1e4,m=1e4;A.nodes.forEach(function(K){var Q=K.size[0]||50,re=K.size[1]||50;y=Math.min(Q,y),m=Math.min(re,m)});var g=new Y.default;g.init(O,x,{CELL_H:m,CELL_W:y}),A.nodes.forEach(function(K){var Q=g.occupyNearest(K);Q&&(Q.node={id:K.id,size:K.size},K.x=Q.x,K.y=Q.y,K.dx=Q.dx,K.dy=Q.dy)});for(var v=0;v<A.nodes.length;v++){var u=A.nodes[v],b=g.findGridByNodeId(u.id);if(!b)throw new Error("can not find node cell");var T=b.column,D=b.row;if(u.size[0]+E>y){for(var k=Math.ceil((u.size[0]+E)/y)-1,V=k,J=0;J<k;J++){var W=g.additionColumn.indexOf(T+J+1)>-1;if(W&&!g.cells[T+J+1][D].node)V--;else break}g.insertColumn(T,V)}if(u.size[1]+E>m){for(var k=Math.ceil((u.size[1]+E)/m)-1,V=k,J=0;J<k;J++){var W=g.additionRow.indexOf(D+J+1)>-1;if(W&&!g.cells[T][D+J+1].node)V--;else break}g.insertRow(D,V)}}for(var v=0;v<g.columnNum;v++)for(var X=function(Q){var re=g.cells[v][Q];if(re.node){var q=A.nodes.find(function(ae){var ue;return ae.id===((ue=re==null?void 0:re.node)===null||ue===void 0?void 0:ue.id)});q&&(q.x=re.x+q.size[0]/2,q.y=re.y+q.size[1]/2)}},J=0;J<g.rowNum;J++)X(J)}U.default=P},28611:function(pr,U){"use strict";var G=this&&this.__assign||function(){return G=Object.assign||function(Y){for(var P,A=1,N=arguments.length;A<N;A++){P=arguments[A];for(var O in P)Object.prototype.hasOwnProperty.call(P,O)&&(Y[O]=P[O])}return Y},G.apply(this,arguments)};Object.defineProperty(U,"__esModule",{value:!0});var F=function(){function Y(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return Y.prototype.init=function(P,A,N){this.cells=[],this.CELL_W=N.CELL_W||Y.DEFAULT_CELL_W,this.CELL_H=N.CELL_H||Y.DEFAULT_CELL_H,this.columnNum=Math.ceil(P/this.CELL_W),this.rowNum=Math.ceil(A/this.CELL_H),Y.MIN_DIST=Math.pow(P,2)+Math.pow(A,2);for(var O=0;O<this.columnNum;O++){for(var x=[],E=0;E<this.rowNum;E++){var y={dx:O,dy:E,x:O*this.CELL_W,y:E*this.CELL_H,occupied:!1};x.push(y)}this.cells.push(x)}},Y.prototype.findGridByNodeId=function(P){for(var A,N,O=0;O<this.columnNum;O++)for(var x=0;x<this.rowNum;x++)if(this.cells[O][x].node&&((N=(A=this.cells[O][x])===null||A===void 0?void 0:A.node)===null||N===void 0?void 0:N.id)===P)return{column:O,row:x};return null},Y.prototype.sqdist=function(P,A){return Math.pow(P.x-A.x,2)+Math.pow(P.y-A.y,2)},Y.prototype.occupyNearest=function(P){for(var A=Y.MIN_DIST,N,O=null,x=0;x<this.columnNum;x++)for(var E=0;E<this.rowNum;E++)!this.cells[x][E].occupied&&(N=this.sqdist(P,this.cells[x][E]))<A&&(A=N,O=this.cells[x][E]);return O&&(O.occupied=!0),O},Y.prototype.insertColumn=function(P,A){if(!(A<=0)){for(var N=0;N<A;N++){this.cells[N+this.columnNum]=[];for(var O=0;O<this.rowNum;O++)this.cells[N+this.columnNum][O]={dx:N,dy:O,x:N*this.CELL_W,y:O*this.CELL_H,occupied:!1,node:null}}for(var N=this.columnNum-1;N>P;N--)for(var O=0;O<this.rowNum;O++)this.cells[N+A][O]=G(G({},this.cells[N][O]),{x:(N+A)*this.CELL_W,y:O*this.CELL_H}),this.cells[N][O]={x:N*this.CELL_W,y:O*this.CELL_H,occupied:!0,node:null};for(var O=0;O<this.additionColumn.length;O++)this.additionColumn[O]>=P&&(this.additionColumn[O]+=A);for(var N=0;N<A;N++)this.additionColumn.push(P+N+1);this.columnNum+=A}},Y.prototype.insertRow=function(P,A){if(!(A<=0)){for(var N=0;N<A;N++)for(var O=0;O<this.columnNum;O++)this.cells[O][N+this.rowNum]={dx:O,dy:N,x:O*this.CELL_W,y:N*this.CELL_H,occupied:!1,node:null};for(var O=0;O<this.columnNum;O++)for(var N=this.rowNum-1;N>P;N--)this.cells[O][N+A]=G(G({},this.cells[O][N]),{dx:O,dy:N+A,x:O*this.CELL_W,y:(N+A)*this.CELL_H}),this.cells[O][N]={dx:O,dy:N,x:O*this.CELL_W,y:N*this.CELL_H,occupied:!1,node:null};for(var N=0;N<this.additionRow.length;N++)this.additionRow[N]>=P&&(this.additionRow[N]+=A);for(var O=0;O<A;O++)this.additionRow.push(P+O+1);this.rowNum+=A}},Y.prototype.getNodes=function(){for(var P=[],A=0;A<this.columnNum;A++)for(var N=0;N<this.rowNum;N++)this.cells[A][N].node&&P.push(this.cells[A][N]);return P},Y.MIN_DIST=50,Y.DEFAULT_CELL_W=80,Y.DEFAULT_CELL_H=80,Y}();U.default=F},90441:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var O=function(x,E){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(y[g]=m[g])},O(x,E)};return function(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");O(x,E);function y(){this.constructor=x}x.prototype=E===null?Object.create(E):(y.prototype=E.prototype,new y)}}(),Y=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(U,"__esModule",{value:!0}),U.ERLayout=void 0;var P=G(62329),A=Y(G(34015)),N=function(O){F(x,O);function x(E){var y=O.call(this)||this;return y.width=300,y.height=300,y.nodeMinGap=50,y.onLayoutEnd=function(){},E&&y.updateCfg(E),y}return x.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},x.prototype.execute=function(){var E=this,y=E.nodes,m=E.edges;return y==null||y.forEach(function(g){g.size||(g.size=[50,50])}),(0,A.default)({nodes:y,edges:m},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){E.onLayoutEnd&&E.onLayoutEnd()})},x.prototype.getType=function(){return"er"},x}(P.Base);U.ERLayout=N},87064:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var G=1200,F=800,Y=1e7,P=10,A=3.141592653589793,N=1.5707963267948966,O=A*.375,x=A*.625,E=new Map,y=10,m=10,g=.8,v=.1,u=.5;function b(X,K,Q){var re=X.x-X.size[0]/2,q=X.y-X.size[1]/2,ae=X.x+X.size[0]/2,ue=X.y+X.size[1]/2,ce=K.x-K.size[0]/2,De=K.y-K.size[1]/2,Ie=K.x+K.size[0]/2,Pe=K.y+K.size[1]/2,we=X.x,xe=X.y,ve=K.x,Se=K.y,Te=ve-we,We=Math.atan2(Te,Se-xe),Ge=0,Je=0,mt=0,xt=0;We>N?(Je=q-Pe,Ge=ce-ae,mt=parseFloat(Je?(Je/Math.cos(We)).toFixed(2):Ge.toFixed(2)),xt=parseFloat(Ge?(Ge/Math.sin(We)).toFixed(2):Je.toFixed(2))):0<We&&We<=N?(Je=De-ue,Ge=ce-ae,Je>Ge?mt=xt=parseFloat(Je?(Je/Math.cos(We)).toFixed(2):Ge.toFixed(2)):mt=xt=parseFloat(Ge?(Ge/Math.sin(We)).toFixed(2):Je.toFixed(2))):We<-N?(Je=q-Pe,Ge=-(Ie-re),Je>Ge?mt=xt=parseFloat(Je?(Je/Math.cos(We)).toFixed(2):Ge.toFixed(2)):mt=xt=parseFloat(Ge?(Ge/Math.sin(We)).toFixed(2):Je.toFixed(2))):(Je=De-ue,Math.abs(Te)>(ae-re)/2?Ge=re-Ie:Ge=Te,Je>Ge?mt=xt=parseFloat(Je?(Je/Math.cos(We)).toFixed(2):Ge.toFixed(2)):mt=xt=parseFloat(Ge&&We!==0?(Ge/Math.sin(We)).toFixed(2):Je.toFixed(2)));var Ze=parseFloat(We.toFixed(2)),$e=Q;return Q&&($e=O<Ze&&Ze<x),{distance:Math.abs(mt<xt?mt:xt),isHoriz:$e}}function T(X,K){var Q=E.get(X.id)||[],re=Q.find(function(tn){return tn.source===K.id||tn.target===K.id}),q=X.size[0]*X.size[1],ae=K.size[0]*K.size[1],ue=q>ae?K:X,ce=q>ae?X:K,De=ue.x-ue.size[0]/2,Ie=ue.y-ue.size[1]/2,Pe=ue.x+ue.size[0]/2,we=ue.y+ue.size[1]/2,xe=ce.x-ce.size[0]/2,ve=ce.y-ce.size[1]/2,Se=ce.x+ce.size[0]/2,Te=ce.y+ce.size[1]/2,We=ue.x,Ge=ue.y,Je=ce.x,mt=ce.y,xt=Pe>=xe&&Se>=De&&we>=ve&&Te>=Ie,Ze=0,$e=0;if(xt){$e=Math.sqrt(Math.pow(Je-We,2)+Math.pow(mt-Ge,2));var gt=De>xe?De:xe,At=Ie>ve?Ie:ve,yt=Pe<Se?Pe:Se,ct=we<Te?we:Te,Kt=yt-gt,$t=ct-At,jt=Kt*$t;$e===0&&($e=1e-7),Ze=P*1/$e*100+jt,Ze*=Y}else{var ir=!1,mr=b(ue,ce,ir);$e=mr.distance,ir=mr.isHoriz,$e<=P?$e!==0?re?Ze+=P+Y*1/$e:Ze+=P+Y*P/$e:Ze+=Y:(Ze+=$e,re&&(Ze+=$e*$e))}return Ze}function D(X){for(var K=0,Q=0;Q<X.length;Q++){var re=X[Q];(re.x<0||re.y<0||re.x>G||re.y>F)&&(K+=1e12);for(var q=Q+1;q<X.length;q++)K+=T(re,X[q])}return K}function k(X,K,Q,re){var q=new Map;Q.forEach(function(We,Ge){q.set(We.id,We)});var ae=re.filter(function(We){return We.source===X.id||We.target===X.id})||[],ue=[];ae.forEach(function(We){var Ge=We.source===X.id?We.target:We.source,Je=q.get(Ge);Je&&ue.push(Je)});for(var ce=!0,De=0;De<ue.length;De++){var Ie=ue[De],Pe=Math.atan((X.y-Ie.y)/(Ie.x-X.y))*180,we=Math.atan((K.y-Ie.y)/(Ie.x-K.y))*180,xe=Pe<30||Pe>150,ve=we<30||we>150,Se=Pe>70&&Pe<110,Te=we>70&&we<110;if(xe&&!ve||Pe*we<0){ce=!1;break}else if(Se&&!Te||Pe*we<0){ce=!1;break}else if((Ie.x-X.x)*(Ie.x-K.x)<0){ce=!1;break}else if((Ie.y-X.y)*(Ie.y-K.y)<0){ce=!1;break}}return ce}function V(X,K){for(var Q=!1,re=1,q=y*re,ae=m*re,ue=[q,-q,0,0],ce=[0,0,ae,-ae],De=0;De<X.length;++De)for(var Ie=X[De],Pe=J(Ie,X),we=0;we<ue.length;we++){var xe=k(Ie,{x:Ie.x+ue[we],y:Ie.y+ce[we]},X,K);if(xe){Ie.x+=ue[we],Ie.y+=ce[we];var ve=J(Ie,X),Se=Math.random();ve<Pe||Se<g&&Se>v?(Pe=ve,Q=!0):(Ie.x-=ue[we],Ie.y-=ce[we])}}return g>v&&(g*=u),Q?D(X):0}function J(X,K){var Q=0;(X.x<0||X.y<0||X.x+X.size[0]+20>G||X.y+X.size[1]+20>F)&&(Q+=1e12);for(var re=0;re<K.length;++re)X.id!==K[re].id&&(Q+=T(X,K[re]));return Q}function W(X,K){if(X.length===0)return{nodes:X,edges:K};X.forEach(function(Ie){var Pe=K.filter(function(we){return we.source===Ie.id||we.target===Ie.id});E.set(Ie,Pe)}),X.sort(function(Ie,Pe){var we,xe;return((we=E.get(Ie.id))===null||we===void 0?void 0:we.length)-((xe=E.get(Pe.id))===null||xe===void 0?void 0:xe.length)});for(var Q=D(X),re=20,q=1,ae=0,ue=50,ce=0;re>0&&(ce++,!(ce>=ue));){var De=V(X,K);De!==0&&(ae=De),q=ae-Q,Q=ae,q===0?--re:re=20}return X.forEach(function(Ie){Ie.x=Ie.x-Ie.size[0]/2,Ie.y=Ie.y-Ie.size[1]/2}),{nodes:X,edges:K}}U.default=W},89806:function(pr,U,G){"use strict";var F=this&&this.__createBinding||(Object.create?function(x,E,y,m){m===void 0&&(m=y);var g=Object.getOwnPropertyDescriptor(E,y);(!g||("get"in g?!E.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return E[y]}}),Object.defineProperty(x,m,g)}:function(x,E,y,m){m===void 0&&(m=y),x[m]=E[y]}),Y=this&&this.__setModuleDefault||(Object.create?function(x,E){Object.defineProperty(x,"default",{enumerable:!0,value:E})}:function(x,E){x.default=E}),P=this&&this.__importStar||function(x){if(x&&x.__esModule)return x;var E={};if(x!=null)for(var y in x)y!=="default"&&Object.prototype.hasOwnProperty.call(x,y)&&F(E,x,y);return Y(E,x),E};Object.defineProperty(U,"__esModule",{value:!0});var A=P(G(71497)),N=G(49784);function O(){function x(ct){return function(){return ct}}var E=function(ct){return ct.cluster},y=x(1),m=x(-1),g=x(100),v=x(.1),u=[0,0],b=[],T={},D=[],k=100,V=100,J={none:{x:0,y:0}},W=[],X,K="force",Q=!0,re=.1;function q(ct){if(!Q)return q;X.tick(),Pe();for(var Kt=0,$t=b.length,jt=void 0,ir=ct*re;Kt<$t;++Kt)jt=b[Kt],jt.vx+=(J[E(jt)].x-jt.x)*ir,jt.vy+=(J[E(jt)].y-jt.y)*ir}function ae(){b&&ue()}function ue(){if(!(!b||!b.length)){if(E(b[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var ct=ce();X=A.forceSimulation(ct.nodes).force("x",A.forceX(k).strength(.1)).force("y",A.forceY(V).strength(.1)).force("collide",A.forceCollide(function(Kt){return Kt.r}).iterations(4)).force("charge",A.forceManyBody().strength(m)).force("links",A.forceLink(ct.nodes.length?ct.links:[]).distance(g).strength(v)),W=X.nodes(),Pe()}}function ce(){var ct=[],Kt=[],$t={},jt=[],ir={},mr=[];return ir=De(b),mr=Ie(D),jt=Object.keys(ir),jt.forEach(function(tn,Dr){var Dn=ir[tn];ct.push({id:tn,size:Dn.count,r:Math.sqrt(Dn.sumforceNodeSize/Math.PI)}),$t[tn]=Dr}),mr.forEach(function(tn){var Dr=(0,N.getEdgeTerminal)(tn,"source"),Dn=(0,N.getEdgeTerminal)(tn,"target"),Ve=$t[Dr],Nr=$t[Dn];Ve!==void 0&&Nr!==void 0&&Kt.push({source:Ve,target:Nr,count:tn.count})}),{nodes:ct,links:Kt}}function De(ct){var Kt={};return ct.forEach(function($t){var jt=E($t);Kt[jt]||(Kt[jt]={count:0,sumforceNodeSize:0})}),ct.forEach(function($t){var jt=E($t),ir=y($t),mr=Kt[jt];mr.count=mr.count+1,mr.sumforceNodeSize=mr.sumforceNodeSize+Math.PI*(ir*ir)*1.3,Kt[jt]=mr}),Kt}function Ie(ct){var Kt={},$t=[];ct.forEach(function(ir){var mr=we(ir),tn=0;Kt[mr]!==void 0&&(tn=Kt[mr]),tn+=1,Kt[mr]=tn});var jt=Object.entries(Kt);return jt.forEach(function(ir){var mr=ir[0],tn=ir[1],Dr=mr.split("~")[0],Dn=mr.split("~")[1];Dr!==void 0&&Dn!==void 0&&$t.push({source:Dr,target:Dn,count:tn})}),$t}function Pe(){return J={none:{x:0,y:0}},W.forEach(function(ct){J[ct.id]={x:ct.x-u[0],y:ct.y-u[1]}}),J}function we(ct){var Kt=(0,N.getEdgeTerminal)(ct,"source"),$t=(0,N.getEdgeTerminal)(ct,"target"),jt=E(T[Kt]),ir=E(T[$t]);return jt<=ir?"".concat(jt,"~").concat(ir):"".concat(ir,"~").concat(jt)}function xe(ct){T={},ct.forEach(function(Kt){T[Kt.id]=Kt})}function ve(ct){return arguments.length?(K=ct,ae(),q):K}function Se(ct){return arguments.length?typeof ct=="string"?(E=function(Kt){return Kt[ct]},q):(E=ct,q):E}function Te(ct){return arguments.length?(Q=ct,q):Q}function We(ct){return arguments.length?(re=ct,q):re}function Ge(ct){return arguments.length?(k=ct,q):k}function Je(ct){return arguments.length?(V=ct,q):V}function mt(ct){return arguments.length?(xe(ct||[]),b=ct||[],q):b}function xt(ct){return arguments.length?(D=ct||[],ae(),q):D}function Ze(ct){return arguments.length?(typeof ct=="function"?y=ct:y=x(+ct),ae(),q):y}function $e(ct){return arguments.length?(typeof ct=="function"?m=ct:m=x(+ct),ae(),q):m}function gt(ct){return arguments.length?(typeof ct=="function"?g=ct:g=x(+ct),ae(),q):g}function At(ct){return arguments.length?(typeof ct=="function"?v=ct:v=x(+ct),ae(),q):v}function yt(ct){return arguments.length?(u=ct,q):u}return q.initialize=function(ct){b=ct,ae()},q.template=ve,q.groupBy=Se,q.enableGrouping=Te,q.strength=We,q.centerX=Ge,q.centerY=Je,q.nodes=mt,q.links=xt,q.forceNodeSize=Ze,q.nodeSize=q.forceNodeSize,q.forceCharge=$e,q.forceLinkDistance=gt,q.forceLinkStrength=At,q.offset=yt,q.getFocis=Pe,q}U.default=O},8810:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var b=function(T,D){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,V){k.__proto__=V}||function(k,V){for(var J in V)Object.prototype.hasOwnProperty.call(V,J)&&(k[J]=V[J])},b(T,D)};return function(T,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");b(T,D);function k(){this.constructor=T}T.prototype=D===null?Object.create(D):(k.prototype=D.prototype,new k)}}(),Y=this&&this.__createBinding||(Object.create?function(b,T,D,k){k===void 0&&(k=D);var V=Object.getOwnPropertyDescriptor(T,D);(!V||("get"in V?!T.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return T[D]}}),Object.defineProperty(b,k,V)}:function(b,T,D,k){k===void 0&&(k=D),b[k]=T[D]}),P=this&&this.__setModuleDefault||(Object.create?function(b,T){Object.defineProperty(b,"default",{enumerable:!0,value:T})}:function(b,T){b.default=T}),A=this&&this.__importStar||function(b){if(b&&b.__esModule)return b;var T={};if(b!=null)for(var D in b)D!=="default"&&Object.prototype.hasOwnProperty.call(b,D)&&Y(T,b,D);return P(T,b),T},N=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(U,"__esModule",{value:!0}),U.ForceLayout=void 0;var O=A(G(71497)),x=N(G(89806)),E=G(49784),y=G(62329),m=G(16470),g=function(b){F(T,b);function T(D){var k=b.call(this)||this;return k.center=[0,0],k.nodeStrength=null,k.edgeStrength=null,k.preventOverlap=!1,k.clusterNodeStrength=null,k.clusterEdgeStrength=null,k.clusterEdgeDistance=null,k.clusterNodeSize=null,k.clusterFociStrength=null,k.linkDistance=50,k.alphaDecay=.028,k.alphaMin=.001,k.alpha=.3,k.collideStrength=1,k.workerEnabled=!1,k.tick=function(){},k.onLayoutEnd=function(){},k.ticking=void 0,D&&k.updateCfg(D),k}return T.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},T.prototype.init=function(D){var k=this;k.nodes=D.nodes||[];var V=D.edges||[];k.edges=V.map(function(J){var W={},X=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(J).forEach(function(K){X.indexOf(K)>-1||(W[K]=J[K])}),W}),k.ticking=!1},T.prototype.execute=function(D){var k=this,V=k.nodes,J=k.edges;if(!k.ticking){var W=k.forceSimulation,X=k.alphaMin,K=k.alphaDecay,Q=k.alpha;if(W){if(D){if(k.clustering&&k.clusterForce&&(k.clusterForce.nodes(V),k.clusterForce.links(J)),W.nodes(V),J&&k.edgeForce)k.edgeForce.links(J);else if(J&&!k.edgeForce){var ae=O.forceLink().id(function(Ie){return Ie.id}).links(J);k.edgeStrength&&ae.strength(k.edgeStrength),k.linkDistance&&ae.distance(k.linkDistance),k.edgeForce=ae,W.force("link",ae)}}k.preventOverlap&&k.overlapProcess(W),W.alpha(Q).restart(),this.ticking=!0}else try{var re=O.forceManyBody();if(k.nodeStrength&&re.strength(k.nodeStrength),W=O.forceSimulation().nodes(V),k.clustering){var q=(0,x.default)();q.centerX(k.center[0]).centerY(k.center[1]).template("force").strength(k.clusterFociStrength),J&&q.links(J),V&&q.nodes(V),q.forceLinkDistance(k.clusterEdgeDistance).forceLinkStrength(k.clusterEdgeStrength).forceCharge(k.clusterNodeStrength).forceNodeSize(k.clusterNodeSize),k.clusterForce=q,W.force("group",q)}if(W.force("center",O.forceCenter(k.center[0],k.center[1])).force("charge",re).alpha(Q).alphaDecay(K).alphaMin(X),k.preventOverlap&&k.overlapProcess(W),J){var ae=O.forceLink().id(function(De){return De.id}).links(J);k.edgeStrength&&ae.strength(k.edgeStrength),k.linkDistance&&ae.distance(k.linkDistance),k.edgeForce=ae,W.force("link",ae)}if(k.workerEnabled&&!u()&&(k.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!k.workerEnabled)W.on("tick",function(){k.tick()}).on("end",function(){k.ticking=!1,k.onLayoutEnd&&k.onLayoutEnd()}),k.ticking=!0;else{W.stop();for(var ue=v(W),ce=1;ce<=ue;ce++)W.tick(),postMessage({nodes:V,currentTick:ce,totalTicks:ue,type:m.LAYOUT_MESSAGE.TICK},void 0);k.ticking=!1}k.forceSimulation=W,k.ticking=!0}catch(De){k.ticking=!1,console.warn(De)}}},T.prototype.overlapProcess=function(D){var k=this,V=k.nodeSize,J=k.nodeSpacing,W,X,K=k.collideStrength;if((0,E.isNumber)(J)?X=function(){return J}:(0,E.isFunction)(J)?X=J:X=function(){return 0},!V)W=function(ae){if(ae.size){if((0,E.isArray)(ae.size)){var ue=ae.size[0]>ae.size[1]?ae.size[0]:ae.size[1];return ue/2+X(ae)}if((0,E.isObject)(ae.size)){var ue=ae.size.width>ae.size.height?ae.size.width:ae.size.height;return ue/2+X(ae)}return ae.size/2+X(ae)}return 10+X(ae)};else if((0,E.isFunction)(V))W=function(ae){var ue=V(ae);return ue+X(ae)};else if((0,E.isArray)(V)){var Q=V[0]>V[1]?V[0]:V[1],re=Q/2;W=function(ae){return re+X(ae)}}else if((0,E.isNumber)(V)){var q=V/2;W=function(ae){return q+X(ae)}}else W=function(){return 10};D.force("collisionForce",O.forceCollide(W).strength(K))},T.prototype.updateCfg=function(D){var k=this;k.ticking&&(k.forceSimulation.stop(),k.ticking=!1),k.forceSimulation=null,Object.assign(k,D)},T.prototype.destroy=function(){var D=this;D.ticking&&(D.forceSimulation.stop(),D.ticking=!1),D.nodes=null,D.edges=null,D.destroyed=!0},T}(y.Base);U.ForceLayout=g;function v(b){var T=b.alphaMin(),D=b.alphaTarget(),k=b.alpha(),V=Math.log((T-D)/(k-D))/Math.log(1-b.alphaDecay()),J=Math.ceil(V);return J}function u(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},85717:function(pr,U,G){"use strict";var F=this&&this.__createBinding||(Object.create?function(P,A,N,O){O===void 0&&(O=N);var x=Object.getOwnPropertyDescriptor(A,N);(!x||("get"in x?!A.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return A[N]}}),Object.defineProperty(P,O,x)}:function(P,A,N,O){O===void 0&&(O=N),P[O]=A[N]}),Y=this&&this.__exportStar||function(P,A){for(var N in P)N!=="default"&&!Object.prototype.hasOwnProperty.call(A,N)&&F(A,P,N)};Object.defineProperty(U,"__esModule",{value:!0}),Y(G(8810),U)},91019:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.forceNBody=void 0;var F=G(71829),Y=.81,P=.1;function A(E,y,m,g,v){var u=m/g,b=E.map(function(D,k){var V=y[D.id],J=V.data,W=V.x,X=V.y,K=V.size,Q=J.layout.force.nodeStrength;return{x:W,y:X,size:K,index:k,vx:0,vy:0,weight:u*Q}}),T=(0,F.quadtree)(b,function(D){return D.x},function(D){return D.y}).visitAfter(N);return b.forEach(function(D){x(D,T)}),b.map(function(D,k){var V=y[E[k].id],J=V.data.layout.force.mass,W=J===void 0?1:J;v[2*k]=D.vx/W,v[2*k+1]=D.vy/W}),v}U.forceNBody=A;function N(E){var y=0,m=0,g=0;if(E.length){for(var v=0;v<4;v++){var u=E[v];u&&u.weight&&(y+=u.weight,m+=u.x*u.weight,g+=u.y*u.weight)}E.x=m/y,E.y=g/y,E.weight=y}else{var u=E;E.x=u.data.x,E.y=u.data.y,E.weight=u.data.weight}}var O=function(E,y,m,g,v,u){var b=u.x-E.x||P,T=u.y-E.y||P,D=g-y,k=b*b+T*T,V=Math.sqrt(k)*k;if(D*D*Y<k){var J=E.weight/V;return u.vx+=b*J,u.vy+=T*J,!0}if(E.length)return!1;if(E.data!==u){var J=E.data.weight/V;u.vx+=b*J,u.vy+=T*J}};function x(E,y){y.visit(function(m,g,v,u,b){return O(m,g,v,u,b,E)})}},6740:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var E=function(y,m){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var u in v)Object.prototype.hasOwnProperty.call(v,u)&&(g[u]=v[u])},E(y,m)};return function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");E(y,m);function g(){this.constructor=y}y.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}(),Y=this&&this.__assign||function(){return Y=Object.assign||function(E){for(var y,m=1,g=arguments.length;m<g;m++){y=arguments[m];for(var v in y)Object.prototype.hasOwnProperty.call(y,v)&&(E[v]=y[v])}return E},Y.apply(this,arguments)};Object.defineProperty(U,"__esModule",{value:!0}),U.Force2Layout=void 0;var P=G(62329),A=G(49784),N=G(91019),O=function(E,y){var m;return E?(0,A.isNumber)(E)?m=function(g){return E}:m=E:m=function(g){return y||1},m},x=function(E){F(y,E);function y(m){var g=E.call(this)||this;g.maxIteration=1e3,g.workerEnabled=!1,g.edgeStrength=200,g.nodeStrength=1e3,g.coulombDisScale=.005,g.damping=.9,g.maxSpeed=500,g.minMovement=.4,g.interval=.02,g.factor=1,g.linkDistance=200,g.gravity=0,g.clusterNodeStrength=20,g.preventOverlap=!0,g.distanceThresholdMode="mean",g.tick=function(){},g.nodes=[],g.edges=[],g.width=300,g.height=300,g.nodeMap={},g.nodeIdxMap={},g.judgingDistance=0,g.centripetalOptions={leaf:2,single:2,others:1,center:function(u){return{x:g.width/2,y:g.height/2}}};var v=m.getMass;return g.propsGetMass=v,g.updateCfg(m),g}return y.prototype.getCentripetalOptions=function(){var m=this,g=m.leafCluster,v=m.clustering,u=m.nodeClusterBy,b=m.nodes,T=m.nodeMap,D=m.clusterNodeStrength,k=function(ue){return typeof D=="function"?D(ue):D},V={},J;if(g){J=this.getSameTypeLeafMap()||{};var W=Array.from(new Set(b==null?void 0:b.map(function(ue){return ue[u]})))||[];V={single:100,leaf:function(ue,ce,De){var Ie=J[ue.id]||{},Pe=Ie.relativeLeafNodes,we=Ie.sameTypeLeafNodes;return(we==null?void 0:we.length)===(Pe==null?void 0:Pe.length)||(W==null?void 0:W.length)===1?1:k(ue)},others:1,center:function(ue,ce,De){var Ie,Pe=(((Ie=ue.data)===null||Ie===void 0?void 0:Ie.layout)||{}).degree;if(!Pe)return{x:100,y:100};var we;if(Pe===1){var xe=(J[ue.id]||{}).sameTypeLeafNodes,ve=xe===void 0?[]:xe;ve.length===1?we=void 0:ve.length>1&&(we=(0,A.getAvgNodePosition)(ve))}else we=void 0;return{x:we==null?void 0:we.x,y:we==null?void 0:we.y}}}}if(v){J||(J=this.getSameTypeLeafMap());var X=Array.from(new Set(b.map(function(ue,ce){return ue[u]}))).filter(function(ue){return ue!==void 0}),K={};X.forEach(function(ue){var ce=b.filter(function(De){return De[u]===ue}).map(function(De){return T[De.id]});K[ue]=(0,A.getAvgNodePosition)(ce)}),V={single:function(ue){return k(ue)},leaf:function(ue){return k(ue)},others:function(ue){return k(ue)},center:function(ue,ce,De){var Ie=K[ue[u]];return{x:Ie==null?void 0:Ie.x,y:Ie==null?void 0:Ie.y}}}}this.centripetalOptions=Y(Y({},this.centripetalOptions),V);var Q=this.centripetalOptions,re=Q.leaf,q=Q.single,ae=Q.others;re&&typeof re!="function"&&(this.centripetalOptions.leaf=function(){return re}),q&&typeof q!="function"&&(this.centripetalOptions.single=function(){return q}),ae&&typeof ae!="function"&&(this.centripetalOptions.others=function(){return ae})},y.prototype.updateCfg=function(m){m&&Object.assign(this,m)},y.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},y.prototype.execute=function(){var m=this;m.stop();var g=m.nodes,v=m.edges,u=m.defSpringLen;if(m.judgingDistance=0,!g||g.length===0){m.onLayoutEnd([]);return}!m.width&&typeof window!="undefined"&&(m.width=window.innerWidth),!m.height&&typeof window!="undefined"&&(m.height=window.innerHeight),m.center||(m.center=[m.width/2,m.height/2]);var b=m.center;if(g.length===1){g[0].x=b[0],g[0].y=b[1],m.onLayoutEnd([Y({},g[0])]);return}m.degreesMap=(0,A.getDegreeMap)(g,v),m.propsGetMass?m.getMass=m.propsGetMass:m.getMass=function(X){var K=1;(0,A.isNumber)(X.mass)&&(K=X.mass);var Q=m.degreesMap[X.id].all;return!Q||Q<5?K:Q*5*K};var T=m.nodeSize,D;if(m.preventOverlap){var k=m.nodeSpacing,V;(0,A.isNumber)(k)?V=function(){return k}:(0,A.isFunction)(k)?V=k:V=function(){return 0},T?(0,A.isArray)(T)?D=function(X){return Math.max(T[0],T[1])+V(X)}:D=function(X){return T+V(X)}:D=function(X){return X.size?(0,A.isArray)(X.size)?Math.max(X.size[0],X.size[1])+V(X):(0,A.isObject)(X.size)?Math.max(X.size.width,X.size.height)+V(X):X.size+V(X):10+V(X)}}m.nodeSize=D,m.linkDistance=O(m.linkDistance,1),m.nodeStrength=O(m.nodeStrength,1),m.edgeStrength=O(m.edgeStrength,1);var J={},W={};g.forEach(function(X,K){(0,A.isNumber)(X.x)||(X.x=Math.random()*m.width),(0,A.isNumber)(X.y)||(X.y=Math.random()*m.height);var Q=m.degreesMap[X.id];J[X.id]=Y(Y({},X),{data:Y(Y({},X.data),{size:m.nodeSize(X)||30,layout:{inDegree:Q.in,outDegree:Q.out,degree:Q.all,tDegree:Q.in,sDegree:Q.out,force:{mass:m.getMass(X),nodeStrength:m.nodeStrength(X,v)}}})}),W[X.id]=K}),m.nodeMap=J,m.nodeIdxMap=W,m.edgeInfos=[],v==null||v.forEach(function(X){var K=J[X.source],Q=J[X.target];!K||!Q?elf.edgeInfos.push({}):m.edgeInfos.push({edgeStrength:m.edgeStrength(X),linkDistance:u?u(Y(Y({},X),{source:K,target:Q}),K,Q):m.linkDistance(X,K,Q)||1+(T(K)+T(K)||0)/2})}),this.getCentripetalOptions(),m.onLayoutEnd=m.onLayoutEnd||function(){},m.run()},y.prototype.run=function(){var m=this,g=m.maxIteration,v=m.nodes,u=m.edges,b=m.workerEnabled,T=m.minMovement,D=m.animate,k=m.nodeMap,V=m.height;if(m.currentMinY=0,m.currentMaxY=V,!!v){var J=[];if(v.forEach(function(ae,ue){J[2*ue]=0,J[2*ue+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var W={};u.forEach(function(ae){var ue=ae.source,ce=ae.target;W[ue]=W[ue]||[],W[ue].push(ae),W[ce]=W[ce]||[],W[ce].push(ae)}),this.relatedEdges=W}var X=g,K=!D;if(b||K){for(var Q=0,re=0;(m.judgingDistance>T||re<1)&&re<X;re++)Q=re,m.runOneStep(re,J);m.onLayoutEnd(Object.values(k))}else{if(typeof window=="undefined")return;var q=0;this.timeInterval=window.setInterval(function(){v&&(m.runOneStep(q,J),q++,(q>=X||m.judgingDistance<T)&&(m.onLayoutEnd(Object.values(k)),window.clearInterval(m.timeInterval)))},0)}}},y.prototype.runOneStep=function(m,g){var v,u=this,b=u.nodes,T=u.edges,D=u.nodeMap,k=u.monitor,V=[];if(b!=null&&b.length){u.calRepulsive(V),T&&u.calAttractive(V),u.calGravity(V),u.attractToSide(V);var J=u.interval;if(u.updateVelocity(V,g,J),u.updatePosition(g,J),(v=u.tick)===null||v===void 0||v.call(u),k){var W=this.calTotalEnergy(V);k({energy:W,nodes:b,edges:T,iterations:m})}}},y.prototype.calTotalEnergy=function(m){var g=this,v=g.nodes,u=g.nodeMap;if(!(v!=null&&v.length))return 0;var b=0;return v.forEach(function(T,D){var k=m[2*D],V=m[2*D+1],J=k*k+V*V,W=u[T.id].data.layout.force.mass,X=W===void 0?1:W;b+=X*J*.5}),b},y.prototype.calRepulsive=function(m){var g=this,v=g.nodes,u=g.nodeMap,b=g.factor,T=g.coulombDisScale,D=g.nodeSize;(0,N.forceNBody)(v,u,b,T*T,m)},y.prototype.calAttractive=function(m){var g=this,v=g.edges,u=g.nodeMap,b=g.nodeIdxMap,T=g.edgeInfos,D=g.nodeSize;v.forEach(function(k,V){var J=(0,A.getEdgeTerminal)(k,"source"),W=(0,A.getEdgeTerminal)(k,"target"),X=u[J],K=u[W];if(!(!X||!K)){var Q=K.x-X.x,re=K.y-X.y;!Q&&!re&&(Q=Math.random()*.01,re=Math.random()*.01);var q=Math.sqrt(Q*Q+re*re),ae=Q/q,ue=re/q,ce=T[V]||{},De=ce.linkDistance,Ie=De===void 0?200:De,Pe=ce.edgeStrength,we=Pe===void 0?200:Pe,xe=Ie-q,ve=xe*we,Se=X.data.layout.force.mass||1,Te=K.data.layout.force.mass||1,We=1/Se,Ge=1/Te,Je=ae*ve,mt=ue*ve,xt=2*b[J],Ze=2*b[W];m[xt]-=Je*We,m[xt+1]-=mt*We,m[Ze]+=Je*Ge,m[Ze+1]+=mt*Ge}})},y.prototype.calGravity=function(m){var g,v=this,u=v.nodes,b=v.edges,T=b===void 0?[]:b,D=v.nodeMap,k=v.width,V=v.height,J=v.center,W=v.gravity,X=v.degreesMap,K=v.centripetalOptions;if(u)for(var Q=u.length,re=0;re<Q;re++){var q=2*re,ae=D[u[re].id],ue=ae.data.layout.force.mass,ce=ue===void 0?1:ue,De=0,Ie=0,Pe=W,we=X[ae.id],xe=we.in,ve=we.out,Se=we.all,Te=(g=v.getCenter)===null||g===void 0?void 0:g.call(v,ae,Se);if(Te){var We=Te[0],Ge=Te[1],Je=Te[2];De=ae.x-We,Ie=ae.y-Ge,Pe=Je}else De=ae.x-J[0],Ie=ae.y-J[1];if(Pe&&(m[q]-=Pe*De/ce,m[q+1]-=Pe*Ie/ce),K){var mt=K.leaf,xt=K.single,Ze=K.others,$e=K.center,gt=($e==null?void 0:$e(ae,u,T,k,V))||{x:0,y:0,centerStrength:0},At=gt.x,yt=gt.y,ct=gt.centerStrength;if(!(0,A.isNumber)(At)||!(0,A.isNumber)(yt))continue;var Kt=(ae.x-At)/ce,$t=(ae.y-yt)/ce;if(ct&&(m[q]-=ct*Kt,m[q+1]-=ct*$t),Se===0){var jt=xt(ae);if(!jt)continue;m[q]-=jt*Kt,m[q+1]-=jt*$t;continue}if(xe===0||ve===0){var ir=mt(ae,u,T);if(!ir)continue;m[q]-=ir*Kt,m[q+1]-=ir*$t;continue}var mr=Ze(ae);if(!mr)continue;m[q]-=mr*Kt,m[q+1]-=mr*$t}}},y.prototype.attractToSide=function(m){var g=this,v=g.defSideCoe,u=g.height,b=g.nodes,T=g.relatedEdges,D=g.currentMinY,k=D===void 0?0:D,V=g.currentMaxY,J=V===void 0?this.height:V;!v||typeof v!="function"||!(b!=null&&b.length)||b.forEach(function(W,X){var K=v(W,T[W.id]||[]);if(K!==0){var Q=K<0?k:J,re=Math.abs(K);m[2*X+1]-=re*(W.y-Q)}})},y.prototype.updateVelocity=function(m,g,v){var u=this,b=u.nodes,T=u.damping,D=u.maxSpeed;b!=null&&b.length&&b.forEach(function(k,V){var J=(g[2*V]+m[2*V]*v)*T||.01,W=(g[2*V+1]+m[2*V+1]*v)*T||.01,X=Math.sqrt(J*J+W*W);if(X>D){var K=D/X;J=K*J,W=K*W}g[2*V]=J,g[2*V+1]=W})},y.prototype.updatePosition=function(m,g){var v=this,u=v.nodes,b=v.distanceThresholdMode,T=v.nodeMap;if(!(u!=null&&u.length)){this.judgingDistance=0;return}var D=0;b==="max"?v.judgingDistance=-1/0:b==="min"&&(v.judgingDistance=1/0);var k=1/0,V=-1/0;u.forEach(function(J,W){var X=T[J.id];if((0,A.isNumber)(J.fx)&&(0,A.isNumber)(J.fy)){J.x=J.fx,J.y=J.fy,X.x=J.x,X.y=J.y;return}var K=m[2*W]*g,Q=m[2*W+1]*g;J.x+=K,J.y+=Q,X.x=J.x,X.y=J.y,J.y<k&&(k=J.y),J.y>V&&(V=J.y);var re=Math.sqrt(K*K+Q*Q);switch(b){case"max":v.judgingDistance<re&&(v.judgingDistance=re);break;case"min":v.judgingDistance>re&&(v.judgingDistance=re);break;default:D=D+re;break}}),this.currentMinY=k,this.currentMaxY=V,(!b||b==="mean")&&(v.judgingDistance=D/u.length)},y.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},y.prototype.destroy=function(){var m=this;m.stop(),m.tick=null,m.nodes=null,m.edges=null,m.destroyed=!0},y.prototype.getType=function(){return"force2"},y.prototype.getSameTypeLeafMap=function(){var m=this,g=m.nodeClusterBy,v=m.nodes,u=m.edges,b=m.nodeMap,T=m.degreesMap;if(v!=null&&v.length){var D={};return v.forEach(function(k,V){var J=T[k.id].all;J===1&&(D[k.id]=(0,A.getCoreNodeAndRelativeLeafNodes)("leaf",k,u,g,T,b))}),D}},y}(P.Base);U.Force2Layout=x},19712:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var G=function(){function F(Y){this.id=Y.id||0,this.rx=Y.rx,this.ry=Y.ry,this.fx=0,this.fy=0,this.mass=Y.mass,this.degree=Y.degree,this.g=Y.g||0}return F.prototype.distanceTo=function(Y){var P=this.rx-Y.rx,A=this.ry-Y.ry;return Math.hypot(P,A)},F.prototype.setPos=function(Y,P){this.rx=Y,this.ry=P},F.prototype.resetForce=function(){this.fx=0,this.fy=0},F.prototype.addForce=function(Y){var P=Y.rx-this.rx,A=Y.ry-this.ry,N=Math.hypot(P,A);N=N<1e-4?1e-4:N;var O=this.g*(this.degree+1)*(Y.degree+1)/N;this.fx+=O*P/N,this.fy+=O*A/N},F.prototype.in=function(Y){return Y.contains(this.rx,this.ry)},F.prototype.add=function(Y){var P=this.mass+Y.mass,A=(this.rx*this.mass+Y.rx*Y.mass)/P,N=(this.ry*this.mass+Y.ry*Y.mass)/P,O=this.degree+Y.degree,x={rx:A,ry:N,mass:P,degree:O};return new F(x)},F}();U.default=G},48564:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var y=function(m,g){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,u){v.__proto__=u}||function(v,u){for(var b in u)Object.prototype.hasOwnProperty.call(u,b)&&(v[b]=u[b])},y(m,g)};return function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");y(m,g);function v(){this.constructor=m}m.prototype=g===null?Object.create(g):(v.prototype=g.prototype,new v)}}(),Y=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(U,"__esModule",{value:!0}),U.ForceAtlas2Layout=void 0;var P=G(62329),A=G(49784),N=Y(G(19712)),O=Y(G(94350)),x=Y(G(62732)),E=function(y){F(m,y);function m(g){var v=y.call(this)||this;return v.center=[0,0],v.width=300,v.height=300,v.nodes=[],v.edges=[],v.kr=5,v.kg=1,v.mode="normal",v.preventOverlap=!1,v.dissuadeHubs=!1,v.barnesHut=void 0,v.maxIteration=0,v.ks=.1,v.ksmax=10,v.tao=.1,v.onLayoutEnd=function(){},v.prune=void 0,v.updateCfg(g),v}return m.prototype.getDefaultCfg=function(){return{}},m.prototype.execute=function(){var g=this,v=g.nodes,u=g.onLayoutEnd,b=g.prune,T=g.maxIteration;!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight);for(var D=[],k=v.length,V=0;V<k;V+=1){var J=v[V],W=10,X=10;(0,A.isNumber)(J.size)&&(W=J.size,X=J.size),(0,A.isArray)(J.size)?(isNaN(J.size[0])||(W=J.size[0]),isNaN(J.size[1])||(X=J.size[1])):(0,A.isObject)(J.size)&&(W=J.size.width,X=J.size.height),g.getWidth&&!isNaN(g.getWidth(J))&&(X=g.getWidth(J)),g.getHeight&&!isNaN(g.getHeight(J))&&(W=g.getHeight(J));var K=Math.max(W,X);D.push(K)}g.barnesHut===void 0&&k>250&&(g.barnesHut=!0),g.prune===void 0&&k>100&&(g.prune=!0),this.maxIteration===0&&!g.prune?(T=250,k<=200&&k>100?T=1e3:k>200&&(T=1200),this.maxIteration=T):this.maxIteration===0&&b&&(T=100,k<=200&&k>100?T=500:k>200&&(T=950),this.maxIteration=T),g.kr||(g.kr=50,k>100&&k<=500?g.kr=20:k>500&&(g.kr=1)),g.kg||(g.kg=20,k>100&&k<=500?g.kg=10:k>500&&(g.kg=1)),this.nodes=g.updateNodesByForces(D),u()},m.prototype.updateNodesByForces=function(g){for(var v=this,u=v.edges,b=v.maxIteration,T=v.nodes,D=u.filter(function(we){var xe=(0,A.getEdgeTerminal)(we,"source"),ve=(0,A.getEdgeTerminal)(we,"target");return xe!==ve}),k=T.length,V=D.length,J=[],W={},X={},K=[],Q=0;Q<k;Q+=1)W[T[Q].id]=Q,J[Q]=0,(T[Q].x===void 0||isNaN(T[Q].x))&&(T[Q].x=Math.random()*1e3),(T[Q].y===void 0||isNaN(T[Q].y))&&(T[Q].y=Math.random()*1e3),K.push({x:T[Q].x,y:T[Q].y});for(var Q=0;Q<V;Q+=1){for(var re=void 0,q=void 0,ae=0,ue=0,ce=0;ce<k;ce+=1){var De=(0,A.getEdgeTerminal)(D[Q],"source"),Ie=(0,A.getEdgeTerminal)(D[Q],"target");T[ce].id===De?(re=T[ce],ae=ce):T[ce].id===Ie&&(q=T[ce],ue=ce),X[Q]={sourceIdx:ae,targetIdx:ue}}re&&(J[W[re.id]]+=1),q&&(J[W[q.id]]+=1)}var Pe=b;if(T=this.iterate(Pe,W,X,V,J,g),v.prune){for(var ce=0;ce<V;ce+=1)J[X[ce].sourceIdx]<=1?(T[X[ce].sourceIdx].x=T[X[ce].targetIdx].x,T[X[ce].sourceIdx].y=T[X[ce].targetIdx].y):J[X[ce].targetIdx]<=1&&(T[X[ce].targetIdx].x=T[X[ce].sourceIdx].x,T[X[ce].targetIdx].y=T[X[ce].sourceIdx].y);v.prune=!1,v.barnesHut=!1,Pe=100,T=this.iterate(Pe,W,X,V,J,g)}return T},m.prototype.iterate=function(g,v,u,b,T,D){for(var k=this,V=k.nodes,J=k.kr,W=k.preventOverlap,X=k.barnesHut,K=V.length,Q=0,re=100,q=g,ae=50,ue=[],ce=[],De=[],Ie=0;Ie<K;Ie+=1)if(ue[2*Ie]=0,ue[2*Ie+1]=0,X){var Pe={id:Ie,rx:V[Ie].x,ry:V[Ie].y,mass:1,g:J,degree:T[Ie]};De[Ie]=new N.default(Pe)}for(;q>0;){for(var Ie=0;Ie<K;Ie+=1)ce[2*Ie]=ue[2*Ie],ce[2*Ie+1]=ue[2*Ie+1],ue[2*Ie]=0,ue[2*Ie+1]=0;ue=this.getAttrForces(q,ae,b,v,u,T,D,ue),X&&(W&&q>ae||!W)?ue=this.getOptRepGraForces(ue,De,T):ue=this.getRepGraForces(q,ae,ue,re,D,T);var we=this.updatePos(ue,ce,Q,T);V=we.nodes,Q=we.sg,q--,k.tick&&k.tick()}return V},m.prototype.getAttrForces=function(g,v,u,b,T,D,k,V){for(var J=this,W=J.nodes,X=J.preventOverlap,K=J.dissuadeHubs,Q=J.mode,re=J.prune,q=0;q<u;q+=1){var ae=W[T[q].sourceIdx],ue=T[q].sourceIdx,ce=W[T[q].targetIdx],De=T[q].targetIdx;if(!(re&&(D[ue]<=1||D[De]<=1))){var Ie=[ce.x-ae.x,ce.y-ae.y],Pe=Math.hypot(Ie[0],Ie[1]);Pe=Pe<1e-4?1e-4:Pe,Ie[0]=Ie[0]/Pe,Ie[1]=Ie[1]/Pe,X&&g<v&&(Pe=Pe-k[ue]-k[De]);var we=Pe,xe=we;Q==="linlog"&&(we=Math.log(1+Pe),xe=we),K&&(we=Pe/D[ue],xe=Pe/D[De]),X&&g<v&&Pe<=0?(we=0,xe=0):X&&g<v&&Pe>0&&(we=Pe,xe=Pe),V[2*b[ae.id]]+=we*Ie[0],V[2*b[ce.id]]-=xe*Ie[0],V[2*b[ae.id]+1]+=we*Ie[1],V[2*b[ce.id]+1]-=xe*Ie[1]}}return V},m.prototype.getRepGraForces=function(g,v,u,b,T,D){for(var k=this,V=k.nodes,J=k.preventOverlap,W=k.kr,X=k.kg,K=k.center,Q=k.prune,re=V.length,q=0;q<re;q+=1){for(var ae=q+1;ae<re;ae+=1)if(!(Q&&(D[q]<=1||D[ae]<=1))){var ue=[V[ae].x-V[q].x,V[ae].y-V[q].y],ce=Math.hypot(ue[0],ue[1]);ce=ce<1e-4?1e-4:ce,ue[0]=ue[0]/ce,ue[1]=ue[1]/ce,J&&g<v&&(ce=ce-T[q]-T[ae]);var De=W*(D[q]+1)*(D[ae]+1)/ce;J&&g<v&&ce<0?De=b*(D[q]+1)*(D[ae]+1):J&&g<v&&ce===0?De=0:J&&g<v&&ce>0&&(De=W*(D[q]+1)*(D[ae]+1)/ce),u[2*q]-=De*ue[0],u[2*ae]+=De*ue[0],u[2*q+1]-=De*ue[1],u[2*ae+1]+=De*ue[1]}var Ie=[V[q].x-K[0],V[q].y-K[1]],Pe=Math.hypot(Ie[0],Ie[1]);Ie[0]=Ie[0]/Pe,Ie[1]=Ie[1]/Pe;var we=X*(D[q]+1);u[2*q]-=we*Ie[0],u[2*q+1]-=we*Ie[1]}return u},m.prototype.getOptRepGraForces=function(g,v,u){for(var b=this,T=b.nodes,D=b.kg,k=b.center,V=b.prune,J=T.length,W=9e10,X=-9e10,K=9e10,Q=-9e10,re=0;re<J;re+=1)V&&u[re]<=1||(v[re].setPos(T[re].x,T[re].y),T[re].x>=X&&(X=T[re].x),T[re].x<=W&&(W=T[re].x),T[re].y>=Q&&(Q=T[re].y),T[re].y<=K&&(K=T[re].y));for(var q=Math.max(X-W,Q-K),ae={xmid:(X+W)/2,ymid:(Q+K)/2,length:q,massCenter:k,mass:J},ue=new O.default(ae),ce=new x.default(ue),re=0;re<J;re+=1)V&&u[re]<=1||v[re].in(ue)&&ce.insert(v[re]);for(var re=0;re<J;re+=1)if(!(V&&u[re]<=1)){v[re].resetForce(),ce.updateForce(v[re]),g[2*re]-=v[re].fx,g[2*re+1]-=v[re].fy;var De=[T[re].x-k[0],T[re].y-k[1]],Ie=Math.hypot(De[0],De[1]);Ie=Ie<1e-4?1e-4:Ie,De[0]=De[0]/Ie,De[1]=De[1]/Ie;var Pe=D*(u[re]+1);g[2*re]-=Pe*De[0],g[2*re+1]-=Pe*De[1]}return g},m.prototype.updatePos=function(g,v,u,b){for(var T=this,D=T.nodes,k=T.ks,V=T.tao,J=T.prune,W=T.ksmax,X=D.length,K=[],Q=[],re=0,q=0,ae=0;ae<X;ae+=1)if(!(J&&b[ae]<=1)){var ue=[g[2*ae]-v[2*ae],g[2*ae+1]-v[2*ae+1]],ce=Math.hypot(ue[0],ue[1]),De=[g[2*ae]+v[2*ae],g[2*ae+1]+v[2*ae+1]],Ie=Math.hypot(De[0],De[1]);K[ae]=ce,Q[ae]=Ie/2,re+=(b[ae]+1)*K[ae],q+=(b[ae]+1)*Q[ae]}var Pe=u;u=V*q/re,Pe!==0&&(u=u>1.5*Pe?1.5*Pe:u);for(var ae=0;ae<X;ae+=1)if(!(J&&b[ae]<=1)&&!((0,A.isNumber)(D[ae].fx)&&(0,A.isNumber)(D[ae].fy))){var we=k*u/(1+u*Math.sqrt(K[ae])),xe=Math.hypot(g[2*ae],g[2*ae+1]);xe=xe<1e-4?1e-4:xe;var ve=W/xe;we=we>ve?ve:we;var Se=we*g[2*ae],Te=we*g[2*ae+1];D[ae].x+=Se,D[ae].y+=Te}return{nodes:D,sg:u}},m}(P.Base);U.ForceAtlas2Layout=E},94350:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var G=function(){function F(Y){this.xmid=Y.xmid,this.ymid=Y.ymid,this.length=Y.length,this.massCenter=Y.massCenter||[0,0],this.mass=Y.mass||1}return F.prototype.getLength=function(){return this.length},F.prototype.contains=function(Y,P){var A=this.length/2;return Y<=this.xmid+A&&Y>=this.xmid-A&&P<=this.ymid+A&&P>=this.ymid-A},F.prototype.NW=function(){var Y=this.xmid-this.length/4,P=this.ymid+this.length/4,A=this.length/2,N={xmid:Y,ymid:P,length:A},O=new F(N);return O},F.prototype.NE=function(){var Y=this.xmid+this.length/4,P=this.ymid+this.length/4,A=this.length/2,N={xmid:Y,ymid:P,length:A},O=new F(N);return O},F.prototype.SW=function(){var Y=this.xmid-this.length/4,P=this.ymid-this.length/4,A=this.length/2,N={xmid:Y,ymid:P,length:A},O=new F(N);return O},F.prototype.SE=function(){var Y=this.xmid+this.length/4,P=this.ymid-this.length/4,A=this.length/2,N={xmid:Y,ymid:P,length:A},O=new F(N);return O},F}();U.default=G},62732:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var G=function(){function F(Y){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,Y!=null&&(this.quad=Y)}return F.prototype.insert=function(Y){if(this.body==null){this.body=Y;return}this._isExternal()?(this.quad&&(this.NW=new F(this.quad.NW()),this.NE=new F(this.quad.NE()),this.SW=new F(this.quad.SW()),this.SE=new F(this.quad.SE())),this._putBody(this.body),this._putBody(Y),this.body=this.body.add(Y)):(this.body=this.body.add(Y),this._putBody(Y))},F.prototype._putBody=function(Y){this.quad&&(Y.in(this.quad.NW())&&this.NW?this.NW.insert(Y):Y.in(this.quad.NE())&&this.NE?this.NE.insert(Y):Y.in(this.quad.SW())&&this.SW?this.SW.insert(Y):Y.in(this.quad.SE())&&this.SE&&this.SE.insert(Y))},F.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},F.prototype.updateForce=function(Y){if(!(this.body==null||Y===this.body))if(this._isExternal())Y.addForce(this.body);else{var P=this.quad?this.quad.getLength():0,A=this.body.distanceTo(Y);P/A<this.theta?Y.addForce(this.body):(this.NW&&this.NW.updateForce(Y),this.NE&&this.NE.updateForce(Y),this.SW&&this.SW.updateForce(Y),this.SE&&this.SE.updateForce(Y))}},F}();U.default=G},80374:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var O=function(x,E){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(y[g]=m[g])},O(x,E)};return function(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");O(x,E);function y(){this.constructor=x}x.prototype=E===null?Object.create(E):(y.prototype=E.prototype,new y)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.FruchtermanLayout=void 0;var Y=G(62329),P=G(49784),A=800,N=function(O){F(x,O);function x(E){var y=O.call(this)||this;return y.maxIteration=1e3,y.workerEnabled=!1,y.gravity=10,y.speed=5,y.clustering=!1,y.clusterGravity=10,y.nodes=[],y.edges=[],y.width=300,y.height=300,y.nodeMap={},y.nodeIdxMap={},y.onLayoutEnd=function(){},y.tick=function(){},y.animate=!0,y.updateCfg(E),y}return x.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},x.prototype.execute=function(){var E=this,y,m,g=this,v=g.nodes;if(g.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(g.timeInterval),!v||v.length===0){(y=g.onLayoutEnd)===null||y===void 0||y.call(g);return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var u=g.center;if(v.length===1){v[0].x=u[0],v[0].y=u[1],(m=g.onLayoutEnd)===null||m===void 0||m.call(g);return}var b={},T={};return v.forEach(function(D,k){(0,P.isNumber)(D.x)||(D.x=Math.random()*E.width),(0,P.isNumber)(D.y)||(D.y=Math.random()*E.height),b[D.id]=D,T[D.id]=k}),g.nodeMap=b,g.nodeIdxMap=T,g.run()},x.prototype.run=function(){var E,y=this,m=y.nodes;if(m){var g=y.edges,v=y.maxIteration,u=y.workerEnabled,b=y.clustering,T=y.animate,D={};if(b&&m.forEach(function(J){D[J.cluster]===void 0&&(D[J.cluster]={name:J.cluster,cx:0,cy:0,count:0})}),u||!T){for(var k=0;k<v;k++)y.runOneStep(D);(E=y.onLayoutEnd)===null||E===void 0||E.call(y)}else{if(typeof window=="undefined")return;var V=0;this.timeInterval=window.setInterval(function(){var J;y.runOneStep(D),V++,V>=v&&((J=y.onLayoutEnd)===null||J===void 0||J.call(y),window.clearInterval(y.timeInterval))},0)}return{nodes:m,edges:g}}},x.prototype.runOneStep=function(E){var y,m=this,g=m.nodes;if(g){var v=m.edges,u=m.center,b=m.gravity,T=m.speed,D=m.clustering,k=m.height*m.width,V=Math.sqrt(k)/10,J=k/(g.length+1),W=Math.sqrt(J),X=[];if(g.forEach(function(re,q){X[q]={x:0,y:0}}),m.applyCalculate(g,v,X,W,J),D){for(var K in E)E[K].cx=0,E[K].cy=0,E[K].count=0;g.forEach(function(re){var q=E[re.cluster];(0,P.isNumber)(re.x)&&(q.cx+=re.x),(0,P.isNumber)(re.y)&&(q.cy+=re.y),q.count++});for(var K in E)E[K].cx/=E[K].count,E[K].cy/=E[K].count;var Q=m.clusterGravity||b;g.forEach(function(re,q){if(!(!(0,P.isNumber)(re.x)||!(0,P.isNumber)(re.y))){var ae=E[re.cluster],ue=Math.sqrt((re.x-ae.cx)*(re.x-ae.cx)+(re.y-ae.cy)*(re.y-ae.cy)),ce=W*Q;X[q].x-=ce*(re.x-ae.cx)/ue,X[q].y-=ce*(re.y-ae.cy)/ue}})}g.forEach(function(re,q){if(!(!(0,P.isNumber)(re.x)||!(0,P.isNumber)(re.y))){var ae=.01*W*b;X[q].x-=ae*(re.x-u[0]),X[q].y-=ae*(re.y-u[1])}}),g.forEach(function(re,q){if((0,P.isNumber)(re.fx)&&(0,P.isNumber)(re.fy)){re.x=re.fx,re.y=re.fy;return}if(!(!(0,P.isNumber)(re.x)||!(0,P.isNumber)(re.y))){var ae=Math.sqrt(X[q].x*X[q].x+X[q].y*X[q].y);if(ae>0){var ue=Math.min(V*(T/A),ae);re.x+=X[q].x/ae*ue,re.y+=X[q].y/ae*ue}}}),(y=m.tick)===null||y===void 0||y.call(m)}},x.prototype.applyCalculate=function(E,y,m,g,v){var u=this;u.calRepulsive(E,m,v),y&&u.calAttractive(y,m,g)},x.prototype.calRepulsive=function(E,y,m){E.forEach(function(g,v){y[v]={x:0,y:0},E.forEach(function(u,b){if(v!==b&&!(!(0,P.isNumber)(g.x)||!(0,P.isNumber)(u.x)||!(0,P.isNumber)(g.y)||!(0,P.isNumber)(u.y))){var T=g.x-u.x,D=g.y-u.y,k=T*T+D*D;if(k===0){k=1;var V=v>b?1:-1;T=.01*V,D=.01*V}var J=m/k;y[v].x+=T*J,y[v].y+=D*J}})})},x.prototype.calAttractive=function(E,y,m){var g=this;E.forEach(function(v){var u=(0,P.getEdgeTerminal)(v,"source"),b=(0,P.getEdgeTerminal)(v,"target");if(!(!u||!b)){var T=g.nodeIdxMap[u],D=g.nodeIdxMap[b];if(T!==D){var k=g.nodeMap[u],V=g.nodeMap[b];if(!(!(0,P.isNumber)(V.x)||!(0,P.isNumber)(k.x)||!(0,P.isNumber)(V.y)||!(0,P.isNumber)(k.y))){var J=V.x-k.x,W=V.y-k.y,X=Math.sqrt(J*J+W*W),K=X*X/m;y[D].x-=J/X*K,y[D].y-=W/X*K,y[T].x+=J/X*K,y[T].y+=W/X*K}}}})},x.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},x.prototype.destroy=function(){var E=this;E.stop(),E.tick=null,E.nodes=null,E.edges=null,E.destroyed=!0},x.prototype.getType=function(){return"fruchterman"},x}(Y.Base);U.FruchtermanLayout=N},13653:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var O=function(x,E){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(y[g]=m[g])},O(x,E)};return function(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");O(x,E);function y(){this.constructor=x}x.prototype=E===null?Object.create(E):(y.prototype=E.prototype,new y)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.GForceLayout=void 0;var Y=G(62329),P=G(49784),A=function(O,x){var E;return O?(0,P.isNumber)(O)?E=function(y){return O}:E=O:E=function(y){return x||1},E},N=function(O){F(x,O);function x(E){var y=O.call(this)||this;return y.maxIteration=500,y.workerEnabled=!1,y.edgeStrength=200,y.nodeStrength=1e3,y.coulombDisScale=.005,y.damping=.9,y.maxSpeed=1e3,y.minMovement=.5,y.interval=.02,y.factor=1,y.linkDistance=1,y.gravity=10,y.preventOverlap=!0,y.collideStrength=1,y.tick=function(){},y.nodes=[],y.edges=[],y.width=300,y.height=300,y.nodeMap={},y.nodeIdxMap={},y.animate=!0,y.updateCfg(E),y}return x.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},x.prototype.execute=function(){var E,y,m=this,g=m.nodes;if(m.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(m.timeInterval),!g||g.length===0){(E=m.onLayoutEnd)===null||E===void 0||E.call(m);return}!m.width&&typeof window!="undefined"&&(m.width=window.innerWidth),!m.height&&typeof window!="undefined"&&(m.height=window.innerHeight),m.center||(m.center=[m.width/2,m.height/2]);var v=m.center;if(g.length===1){g[0].x=v[0],g[0].y=v[1],(y=m.onLayoutEnd)===null||y===void 0||y.call(m);return}var u={},b={};g.forEach(function(W,X){(0,P.isNumber)(W.x)||(W.x=Math.random()*m.width),(0,P.isNumber)(W.y)||(W.y=Math.random()*m.height),u[W.id]=W,b[W.id]=X}),m.nodeMap=u,m.nodeIdxMap=b,m.linkDistance=A(m.linkDistance,1),m.nodeStrength=A(m.nodeStrength,1),m.edgeStrength=A(m.edgeStrength,1);var T=m.nodeSize,D;if(m.preventOverlap){var k=m.nodeSpacing,V;(0,P.isNumber)(k)?V=function(){return k}:(0,P.isFunction)(k)?V=k:V=function(){return 0},T?(0,P.isArray)(T)?D=function(W){return Math.max(T[0],T[1])+V(W)}:D=function(W){return T+V(W)}:D=function(W){return W.size?(0,P.isArray)(W.size)?Math.max(W.size[0],W.size[1])+V(W):(0,P.isObject)(W.size)?Math.max(W.size.width,W.size.height)+V(W):W.size+V(W):10+V(W)}}m.nodeSize=D;var J=m.edges;m.degrees=(0,P.getDegree)(g.length,m.nodeIdxMap,J),m.getMass||(m.getMass=function(W){var X=W.mass||m.degrees[m.nodeIdxMap[W.id]].all||1;return X}),m.run()},x.prototype.run=function(){var E,y=this,m=y.maxIteration,g=y.nodes,v=y.workerEnabled,u=y.minMovement,b=y.animate;if(g)if(v||!b){for(var T=0;T<m;T++){var D=y.runOneStep(T);if(y.reachMoveThreshold(g,D,u))break}(E=y.onLayoutEnd)===null||E===void 0||E.call(y)}else{if(typeof window=="undefined")return;var k=0;this.timeInterval=window.setInterval(function(){var V,J;if(g){var W=y.runOneStep(k)||[];y.reachMoveThreshold(g,W,u)&&((V=y.onLayoutEnd)===null||V===void 0||V.call(y),window.clearInterval(y.timeInterval)),k++,k>=m&&((J=y.onLayoutEnd)===null||J===void 0||J.call(y),window.clearInterval(y.timeInterval))}},0)}},x.prototype.reachMoveThreshold=function(E,y,m){var g=0;return E.forEach(function(v,u){var b=v.x-y[u].x,T=v.y-y[u].y;g+=Math.sqrt(b*b+T*T)}),g/=E.length,g<m},x.prototype.runOneStep=function(E){var y,m=this,g=m.nodes,v=m.edges,u=[],b=[];if(g){g.forEach(function(k,V){u[2*V]=0,u[2*V+1]=0,b[2*V]=0,b[2*V+1]=0}),m.calRepulsive(u,g),v&&m.calAttractive(u,v),m.calGravity(u,g);var T=Math.max(.02,m.interval-E*.002);m.updateVelocity(u,b,T,g);var D=[];return g.forEach(function(k){D.push({x:k.x,y:k.y})}),m.updatePosition(b,T,g),(y=m.tick)===null||y===void 0||y.call(m),D}},x.prototype.calRepulsive=function(E,y){var m=this,g=m.getMass,v=m.factor,u=m.coulombDisScale,b=m.preventOverlap,T=m.collideStrength,D=T===void 0?1:T,k=m.nodeStrength,V=m.nodeSize;y.forEach(function(J,W){var X=g?g(J):1;y.forEach(function(K,Q){if(!(W>=Q)){var re=J.x-K.x,q=J.y-K.y;re===0&&q===0&&(re=Math.random()*.01,q=Math.random()*.01);var ae=re*re+q*q,ue=Math.sqrt(ae),ce=(ue+.1)*u,De=re/ue,Ie=q/ue,Pe=(k(J)+k(K))*.5*v/(ce*ce),we=g?g(K):1;if(E[2*W]+=De*Pe,E[2*W+1]+=Ie*Pe,E[2*Q]-=De*Pe,E[2*Q+1]-=Ie*Pe,b&&(V(J)+V(K))/2>ue){var xe=D*(k(J)+k(K))*.5/ae;E[2*W]+=De*xe/X,E[2*W+1]+=Ie*xe/X,E[2*Q]-=De*xe/we,E[2*Q+1]-=Ie*xe/we}}})})},x.prototype.calAttractive=function(E,y){var m=this,g=m.nodeMap,v=m.nodeIdxMap,u=m.linkDistance,b=m.edgeStrength,T=m.nodeSize,D=m.getMass;y.forEach(function(k,V){var J=(0,P.getEdgeTerminal)(k,"source"),W=(0,P.getEdgeTerminal)(k,"target"),X=g[J],K=g[W],Q=K.x-X.x,re=K.y-X.y;Q===0&&re===0&&(Q=Math.random()*.01,re=Math.random()*.01);var q=Math.sqrt(Q*Q+re*re),ae=Q/q,ue=re/q,ce=u(k,X,K)||1+(T(X)+T(K)||0)/2,De=ce-q,Ie=De*b(k),Pe=v[J],we=v[W],xe=D?D(X):1,ve=D?D(K):1;E[2*Pe]-=ae*Ie/xe,E[2*Pe+1]-=ue*Ie/xe,E[2*we]+=ae*Ie/ve,E[2*we+1]+=ue*Ie/ve})},x.prototype.calGravity=function(E,y){for(var m=this,g=m.center,v=m.gravity,u=m.degrees,b=y.length,T=0;T<b;T++){var D=y[T],k=D.x-g[0],V=D.y-g[1],J=v;if(m.getCenter){var W=m.getCenter(D,u[T].all);W&&(0,P.isNumber)(W[0])&&(0,P.isNumber)(W[1])&&(0,P.isNumber)(W[2])&&(k=D.x-W[0],V=D.y-W[1],J=W[2])}J&&(E[2*T]-=J*k,E[2*T+1]-=J*V)}},x.prototype.updateVelocity=function(E,y,m,g){var v=this,u=m*v.damping;g.forEach(function(b,T){var D=E[2*T]*u||.01,k=E[2*T+1]*u||.01,V=Math.sqrt(D*D+k*k);if(V>v.maxSpeed){var J=v.maxSpeed/V;D=J*D,k=J*k}y[2*T]=D,y[2*T+1]=k})},x.prototype.updatePosition=function(E,y,m){m.forEach(function(g,v){if((0,P.isNumber)(g.fx)&&(0,P.isNumber)(g.fy)){g.x=g.fx,g.y=g.fy;return}var u=E[2*v]*y,b=E[2*v+1]*y;g.x+=u,g.y+=b})},x.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},x.prototype.destroy=function(){var E=this;E.stop(),E.tick=null,E.nodes=null,E.edges=null,E.destroyed=!0},x.prototype.getType=function(){return"gForce"},x}(Y.Base);U.GForceLayout=N},87745:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var g=function(v,u){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,T){b.__proto__=T}||function(b,T){for(var D in T)Object.prototype.hasOwnProperty.call(T,D)&&(b[D]=T[D])},g(v,u)};return function(v,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");g(v,u);function b(){this.constructor=v}v.prototype=u===null?Object.create(u):(b.prototype=u.prototype,new b)}}(),Y=this&&this.__awaiter||function(g,v,u,b){function T(D){return D instanceof u?D:new u(function(k){k(D)})}return new(u||(u=Promise))(function(D,k){function V(X){try{W(b.next(X))}catch(K){k(K)}}function J(X){try{W(b.throw(X))}catch(K){k(K)}}function W(X){X.done?D(X.value):T(X.value).then(V,J)}W((b=b.apply(g,v||[])).next())})},P=this&&this.__generator||function(g,v){var u={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},b,T,D,k;return k={next:V(0),throw:V(1),return:V(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function V(W){return function(X){return J([W,X])}}function J(W){if(b)throw new TypeError("Generator is already executing.");for(;k&&(k=0,W[0]&&(u=0)),u;)try{if(b=1,T&&(D=W[0]&2?T.return:W[0]?T.throw||((D=T.return)&&D.call(T),0):T.next)&&!(D=D.call(T,W[1])).done)return D;switch(T=0,D&&(W=[W[0]&2,D.value]),W[0]){case 0:case 1:D=W;break;case 4:return u.label++,{value:W[1],done:!1};case 5:u.label++,T=W[1],W=[0];continue;case 7:W=u.ops.pop(),u.trys.pop();continue;default:if(D=u.trys,!(D=D.length>0&&D[D.length-1])&&(W[0]===6||W[0]===2)){u=0;continue}if(W[0]===3&&(!D||W[1]>D[0]&&W[1]<D[3])){u.label=W[1];break}if(W[0]===6&&u.label<D[1]){u.label=D[1],D=W;break}if(D&&u.label<D[2]){u.label=D[2],u.ops.push(W);break}D[2]&&u.ops.pop(),u.trys.pop();continue}W=v.call(g,u)}catch(X){W=[6,X],T=0}finally{b=D=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}};Object.defineProperty(U,"__esModule",{value:!0}),U.FruchtermanGPULayout=void 0;var A=G(62329),N=G(49784),O=G(1029),x=G(48835),E=G(8574),y=G(16470),m=function(g){F(v,g);function v(u){var b=g.call(this)||this;return b.maxIteration=1e3,b.gravity=10,b.speed=1,b.clustering=!1,b.clusterField="cluster",b.clusterGravity=10,b.workerEnabled=!1,b.nodes=[],b.edges=[],b.width=300,b.height=300,b.nodeMap={},b.nodeIdxMap={},b.updateCfg(u),b}return v.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},v.prototype.execute=function(){return Y(this,void 0,void 0,function(){var u,b,T,D,k,V=this;return P(this,function(J){switch(J.label){case 0:return u=this,b=u.nodes,!b||b.length===0?(u.onLayoutEnd&&u.onLayoutEnd(),[2]):(!u.width&&typeof window!="undefined"&&(u.width=window.innerWidth),!u.height&&typeof window!="undefined"&&(u.height=window.innerHeight),u.center||(u.center=[u.width/2,u.height/2]),T=u.center,b.length===1?(b[0].x=T[0],b[0].y=T[1],u.onLayoutEnd&&u.onLayoutEnd(),[2]):(D={},k={},b.forEach(function(W,X){(0,N.isNumber)(W.x)||(W.x=Math.random()*V.width),(0,N.isNumber)(W.y)||(W.y=Math.random()*V.height),D[W.id]=W,k[W.id]=X}),u.nodeMap=D,u.nodeIdxMap=k,[4,u.run()]));case 1:return J.sent(),[2]}})})},v.prototype.executeWithWorker=function(u,b){return Y(this,void 0,void 0,function(){var T,D,k,V,J,W=this;return P(this,function(X){switch(X.label){case 0:return T=this,D=T.nodes,k=T.center,!D||D.length===0?[2]:D.length===1?(D[0].x=k[0],D[0].y=k[1],[2]):(V={},J={},D.forEach(function(K,Q){(0,N.isNumber)(K.x)||(K.x=Math.random()*W.width),(0,N.isNumber)(K.y)||(K.y=Math.random()*W.height),V[K.id]=K,J[K.id]=Q}),T.nodeMap=V,T.nodeIdxMap=J,[4,T.run(u,b)]);case 1:return X.sent(),[2]}})})},v.prototype.run=function(u,b){return Y(this,void 0,void 0,function(){var T,D,k,V,J,W,X,K,Q,re,q,ae,ue,ce,De,Ie,Pe,we,xe,ve,Se,Te,We,Ge,Je,mt,xt=this;return P(this,function(Ze){switch(Ze.label){case 0:for(T=this,D=T.nodes,k=T.edges,V=T.maxIteration,J=T.center,W=T.height*T.width,X=Math.sqrt(W)/10,K=W/(D.length+1),Q=Math.sqrt(K),re=T.speed,q=T.clustering,ae=(0,x.attributesToTextureData)([T.clusterField],D),ue=ae.array,ce=ae.count,D.forEach(function($e,gt){var At=0,yt=0;(0,N.isNumber)($e.fx)&&(0,N.isNumber)($e.fy)&&(At=$e.fx||.001,yt=$e.fy||.001),ue[4*gt+1]=At,ue[4*gt+2]=yt}),De=D.length,Ie=(0,x.buildTextureData)(D,k),Pe=Ie.maxEdgePerVetex,we=Ie.array,xe=T.workerEnabled,xe?ve=O.World.create({canvas:u,engineOptions:{supportCompute:!0}}):ve=O.World.create({engineOptions:{supportCompute:!0}}),Se=T.onLayoutEnd,Te=[],We=0;We<ce;We++)Te.push(0,0,0,0);return Ge=ve.createKernel(E.fruchtermanBundle).setDispatch([De,1,1]).setBinding({u_Data:we,u_K:Q,u_K2:K,u_Gravity:T.gravity,u_ClusterGravity:T.clusterGravity||T.gravity||1,u_Speed:re,u_MaxDisplace:X,u_Clustering:q?1:0,u_Center:J,u_AttributeArray:ue,u_ClusterCenters:Te,MAX_EDGE_PER_VERTEX:Pe,VERTEX_COUNT:De}),q&&(Je=ve.createKernel(E.clusterBundle).setDispatch([ce,1,1]).setBinding({u_Data:we,u_NodeAttributes:ue,u_ClusterCenters:Te,VERTEX_COUNT:De,CLUSTER_COUNT:ce})),mt=function(){return Y(xt,void 0,void 0,function(){var $e,gt;return P(this,function(At){switch(At.label){case 0:$e=0,At.label=1;case 1:return $e<V?[4,Ge.execute()]:[3,6];case 2:return At.sent(),q?(Je.setBinding({u_Data:Ge}),[4,Je.execute()]):[3,4];case 3:At.sent(),Ge.setBinding({u_ClusterCenters:Je}),At.label=4;case 4:Ge.setBinding({u_MaxDisplace:X*=.99}),At.label=5;case 5:return $e++,[3,1];case 6:return[4,Ge.getOutput()];case 7:return gt=At.sent(),u?b.postMessage({type:y.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:gt}):D.forEach(function(yt,ct){var Kt=gt[4*ct],$t=gt[4*ct+1];yt.x=Kt,yt.y=$t}),Se&&Se(),[2]}})})},[4,mt()];case 1:return Ze.sent(),[2]}})})},v.prototype.getType=function(){return"fruchterman-gpu"},v}(A.Base);U.FruchtermanGPULayout=m},8574:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.clusterBundle=U.clusterCode=U.fruchtermanBundle=U.fruchtermanCode=void 0,U.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,U.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',U.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,U.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},85194:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var v=function(u,b){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,D){T.__proto__=D}||function(T,D){for(var k in D)Object.prototype.hasOwnProperty.call(D,k)&&(T[k]=D[k])},v(u,b)};return function(u,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");v(u,b);function T(){this.constructor=u}u.prototype=b===null?Object.create(b):(T.prototype=b.prototype,new T)}}(),Y=this&&this.__awaiter||function(v,u,b,T){function D(k){return k instanceof b?k:new b(function(V){V(k)})}return new(b||(b=Promise))(function(k,V){function J(K){try{X(T.next(K))}catch(Q){V(Q)}}function W(K){try{X(T.throw(K))}catch(Q){V(Q)}}function X(K){K.done?k(K.value):D(K.value).then(J,W)}X((T=T.apply(v,u||[])).next())})},P=this&&this.__generator||function(v,u){var b={label:0,sent:function(){if(k[0]&1)throw k[1];return k[1]},trys:[],ops:[]},T,D,k,V;return V={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(V[Symbol.iterator]=function(){return this}),V;function J(X){return function(K){return W([X,K])}}function W(X){if(T)throw new TypeError("Generator is already executing.");for(;V&&(V=0,X[0]&&(b=0)),b;)try{if(T=1,D&&(k=X[0]&2?D.return:X[0]?D.throw||((k=D.return)&&k.call(D),0):D.next)&&!(k=k.call(D,X[1])).done)return k;switch(D=0,k&&(X=[X[0]&2,k.value]),X[0]){case 0:case 1:k=X;break;case 4:return b.label++,{value:X[1],done:!1};case 5:b.label++,D=X[1],X=[0];continue;case 7:X=b.ops.pop(),b.trys.pop();continue;default:if(k=b.trys,!(k=k.length>0&&k[k.length-1])&&(X[0]===6||X[0]===2)){b=0;continue}if(X[0]===3&&(!k||X[1]>k[0]&&X[1]<k[3])){b.label=X[1];break}if(X[0]===6&&b.label<k[1]){b.label=k[1],k=X;break}if(k&&b.label<k[2]){b.label=k[2],b.ops.push(X);break}k[2]&&b.ops.pop(),b.trys.pop();continue}X=u.call(v,b)}catch(K){X=[6,K],D=0}finally{T=k=0}if(X[0]&5)throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}};Object.defineProperty(U,"__esModule",{value:!0}),U.GForceGPULayout=void 0;var A=G(62329),N=G(49784),O=G(1029),x=G(48835),E=G(80628),y=G(49762),m=G(16470),g=function(v){F(u,v);function u(b){var T=v.call(this)||this;return T.maxIteration=1e3,T.edgeStrength=200,T.nodeStrength=1e3,T.coulombDisScale=.005,T.damping=.9,T.maxSpeed=1e3,T.minMovement=.5,T.interval=.02,T.factor=1,T.linkDistance=1,T.gravity=10,T.workerEnabled=!1,T.nodes=[],T.edges=[],T.width=300,T.height=300,T.nodeMap={},T.nodeIdxMap={},T.updateCfg(b),T}return u.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},u.prototype.execute=function(){return Y(this,void 0,void 0,function(){var b,T,D,k,V;return P(this,function(J){switch(J.label){case 0:return b=this,T=b.nodes,!T||T.length===0?(b.onLayoutEnd&&b.onLayoutEnd(),[2]):(!b.width&&typeof window!="undefined"&&(b.width=window.innerWidth),!b.height&&typeof window!="undefined"&&(b.height=window.innerHeight),b.center||(b.center=[b.width/2,b.height/2]),D=b.center,T.length===1?(T[0].x=D[0],T[0].y=D[1],b.onLayoutEnd&&b.onLayoutEnd(),[2]):(k={},V={},T.forEach(function(W,X){(0,N.isNumber)(W.x)||(W.x=Math.random()*b.width),(0,N.isNumber)(W.y)||(W.y=Math.random()*b.height),k[W.id]=W,V[W.id]=X}),b.nodeMap=k,b.nodeIdxMap=V,b.nodeStrength=(0,x.proccessToFunc)(b.nodeStrength,1),b.edgeStrength=(0,x.proccessToFunc)(b.edgeStrength,1),[4,b.run()]));case 1:return J.sent(),[2]}})})},u.prototype.executeWithWorker=function(b,T){var D=this,k=D.nodes,V=D.center;if(!(!k||k.length===0)){if(k.length===1){k[0].x=V[0],k[0].y=V[1];return}var J={},W={};k.forEach(function(X,K){(0,N.isNumber)(X.x)||(X.x=Math.random()*D.width),(0,N.isNumber)(X.y)||(X.y=Math.random()*D.height),J[X.id]=X,W[X.id]=K}),D.nodeMap=J,D.nodeIdxMap=W,D.nodeStrength=(0,x.proccessToFunc)(D.nodeStrength,1),D.edgeStrength=(0,x.proccessToFunc)(D.edgeStrength,1),D.run(b,T)}},u.prototype.run=function(b,T){return Y(this,void 0,void 0,function(){var D,k,V,J,W,X,K,Q,re,q,ae,ue,ce,De,Ie,Pe,we,xe,ve,Se,Te,We,Ge,Je,mt,xt,Ze,$e=this;return P(this,function(gt){switch(gt.label){case 0:for(D=this,k=D.nodes,V=D.edges,J=D.maxIteration,!D.width&&typeof window!="undefined"&&(D.width=window.innerWidth),!D.height&&typeof window!="undefined"&&(D.height=window.innerHeight),W=k.length,D.linkDistance=(0,x.proccessToFunc)(D.linkDistance),D.edgeStrength=(0,x.proccessToFunc)(D.edgeStrength),X=(0,x.buildTextureDataWithTwoEdgeAttr)(k,V,D.linkDistance,D.edgeStrength),K=X.maxEdgePerVetex,Q=X.array,D.degrees=(0,E.getDegree)(k.length,D.nodeIdxMap,V).map(function(At){return At.all}),re=[],q=[],ae=[],ue=[],ce=[],De=[],Ie=[],D.getMass||(D.getMass=function(At){return D.degrees[D.nodeIdxMap[At.id]]||1}),Pe=D.gravity,we=D.center,k.forEach(function(At,yt){re.push(D.getMass(At)),q.push(D.nodeStrength(At)),D.degrees[yt]||(D.degrees[yt]=0);var ct=[we[0],we[1],Pe];if(D.getCenter){var Kt=D.getCenter(At,D.degrees[yt]);Kt&&(0,N.isNumber)(Kt[0])&&(0,N.isNumber)(Kt[1])&&(0,N.isNumber)(Kt[2])&&(ct=Kt)}ae.push(ct[0]),ue.push(ct[1]),ce.push(ct[2]),(0,N.isNumber)(At.fx)&&(0,N.isNumber)(At.fy)?(De.push(At.fx||.001),Ie.push(At.fy||.001)):(De.push(0),Ie.push(0))}),xe=(0,x.arrayToTextureData)([re,D.degrees,q,De]),ve=(0,x.arrayToTextureData)([ae,ue,ce,Ie]),Se=D.workerEnabled,Se?Te=O.World.create({canvas:b,engineOptions:{supportCompute:!0}}):Te=O.World.create({engineOptions:{supportCompute:!0}}),We=D.onLayoutEnd,Ge=[],Q.forEach(function(At){Ge.push(At)}),Je=0;Je<4;Je++)Ge.push(0);return mt=Te.createKernel(y.gForceBundle).setDispatch([W,1,1]).setBinding({u_Data:Q,u_damping:D.damping,u_maxSpeed:D.maxSpeed,u_minMovement:D.minMovement,u_coulombDisScale:D.coulombDisScale,u_factor:D.factor,u_NodeAttributeArray1:xe,u_NodeAttributeArray2:ve,MAX_EDGE_PER_VERTEX:K,VERTEX_COUNT:W,u_AveMovement:Ge,u_interval:D.interval}),xt=Te.createKernel(y.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:Q,VERTEX_COUNT:W,u_AveMovement:[0,0,0,0]}),Ze=function(){return Y($e,void 0,void 0,function(){var At,yt,ct;return P(this,function(Kt){switch(Kt.label){case 0:At=0,Kt.label=1;case 1:return At<J?[4,mt.execute()]:[3,5];case 2:return Kt.sent(),xt.setBinding({u_Data:mt}),[4,xt.execute()];case 3:Kt.sent(),yt=Math.max(.02,D.interval-At*.002),mt.setBinding({u_interval:yt,u_AveMovement:xt}),Kt.label=4;case 4:return At++,[3,1];case 5:return[4,mt.getOutput()];case 6:return ct=Kt.sent(),b?T.postMessage({type:m.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:ct}):k.forEach(function($t,jt){var ir=ct[4*jt],mr=ct[4*jt+1];$t.x=ir,$t.y=mr}),We&&We(),[2]}})})},[4,Ze()];case 1:return gt.sent(),[2]}})})},u.prototype.getType=function(){return"gForce-gpu"},u}(A.Base);U.GForceGPULayout=g},49762:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.aveMovementBundle=U.aveMovementCode=U.gForceBundle=U.gForceCode=void 0,U.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,U.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',U.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,U.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},94414:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var N=function(O,x){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,y){E.__proto__=y}||function(E,y){for(var m in y)Object.prototype.hasOwnProperty.call(y,m)&&(E[m]=y[m])},N(O,x)};return function(O,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");N(O,x);function E(){this.constructor=O}O.prototype=x===null?Object.create(x):(E.prototype=x.prototype,new E)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.GridLayout=void 0;var Y=G(49784),P=G(62329),A=function(N){F(O,N);function O(x){var E=N.call(this)||this;return E.begin=[0,0],E.preventOverlap=!0,E.preventOverlapPadding=10,E.condense=!1,E.sortBy="degree",E.nodes=[],E.edges=[],E.width=300,E.height=300,E.row=0,E.col=0,E.cellWidth=0,E.cellHeight=0,E.cellUsed={},E.id2manPos={},E.onLayoutEnd=function(){},E.updateCfg(x),E}return O.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},O.prototype.execute=function(){var x=this,E=x.nodes,y=x.edges,m=x.begin,g=E.length;if(g===0)return x.onLayoutEnd&&x.onLayoutEnd(),{nodes:E,edges:y};if(g===1)return E[0].x=m[0],E[0].y=m[1],x.onLayoutEnd&&x.onLayoutEnd(),{nodes:E,edges:y};var v=x.sortBy,u=x.width,b=x.height,T=x.condense,D=x.preventOverlapPadding,k=x.preventOverlap,V=x.nodeSpacing,J=x.nodeSize,W=[];E.forEach(function(xe){W.push(xe)});var X={};if(W.forEach(function(xe,ve){X[xe.id]=ve}),(v==="degree"||!(0,Y.isString)(v)||W[0][v]===void 0)&&(v="degree",(0,Y.isNaN)(E[0].degree))){var K=(0,Y.getDegree)(W.length,X,y);W.forEach(function(xe,ve){xe.degree=K[ve].all})}W.sort(function(xe,ve){return ve[v]-xe[v]}),!u&&typeof window!="undefined"&&(u=window.innerWidth),!b&&typeof window!="undefined"&&(b=window.innerHeight);var Q=x.rows,re=x.cols!=null?x.cols:x.columns;if(x.cells=g,Q!=null&&re!=null?(x.rows=Q,x.cols=re):Q!=null&&re==null?(x.rows=Q,x.cols=Math.ceil(x.cells/x.rows)):Q==null&&re!=null?(x.cols=re,x.rows=Math.ceil(x.cells/x.cols)):(x.splits=Math.sqrt(x.cells*x.height/x.width),x.rows=Math.round(x.splits),x.cols=Math.round(x.width/x.height*x.splits)),x.rows=Math.max(x.rows,1),x.cols=Math.max(x.cols,1),x.cols*x.rows>x.cells){var q=x.small(),ae=x.large();(q-1)*ae>=x.cells?x.small(q-1):(ae-1)*q>=x.cells&&x.large(ae-1)}else for(;x.cols*x.rows<x.cells;){var q=x.small(),ae=x.large();(ae+1)*q>=x.cells?x.large(ae+1):x.small(q+1)}if(x.cellWidth=u/x.cols,x.cellHeight=b/x.rows,T&&(x.cellWidth=0,x.cellHeight=0),k||V){var ue=(0,Y.getFuncByUnknownType)(10,V),ce=(0,Y.getFuncByUnknownType)(30,J,!1);W.forEach(function(xe){(!xe.x||!xe.y)&&(xe.x=0,xe.y=0);var ve=ce(xe)||30,Se,Te;(0,Y.isArray)(ve)?(Se=ve[0],Te=ve[1]):(Se=ve,Te=ve);var We=ue!==void 0?ue(xe):D,Ge=Se+We,Je=Te+We;x.cellWidth=Math.max(x.cellWidth,Ge),x.cellHeight=Math.max(x.cellHeight,Je)})}x.cellUsed={},x.row=0,x.col=0,x.id2manPos={};for(var De=0;De<W.length;De++){var Ie=W[De],Pe=void 0;if(x.position&&(Pe=x.position(Ie)),Pe&&(Pe.row!==void 0||Pe.col!==void 0)){var we={row:Pe.row,col:Pe.col};if(we.col===void 0)for(we.col=0;x.used(we.row,we.col);)we.col++;else if(we.row===void 0)for(we.row=0;x.used(we.row,we.col);)we.row++;x.id2manPos[Ie.id]=we,x.use(we.row,we.col)}x.getPos(Ie)}return x.onLayoutEnd&&x.onLayoutEnd(),{edges:y,nodes:W}},O.prototype.small=function(x){var E=this,y,m=E.rows||5,g=E.cols||5;if(x==null)y=Math.min(m,g);else{var v=Math.min(m,g);v===E.rows?E.rows=x:E.cols=x}return y},O.prototype.large=function(x){var E=this,y,m=E.rows||5,g=E.cols||5;if(x==null)y=Math.max(m,g);else{var v=Math.max(m,g);v===E.rows?E.rows=x:E.cols=x}return y},O.prototype.used=function(x,E){var y=this;return y.cellUsed["c-".concat(x,"-").concat(E)]||!1},O.prototype.use=function(x,E){var y=this;y.cellUsed["c-".concat(x,"-").concat(E)]=!0},O.prototype.moveToNextCell=function(){var x=this,E=x.cols||5;x.col++,x.col>=E&&(x.col=0,x.row++)},O.prototype.getPos=function(x){var E=this,y=E.begin,m=E.cellWidth,g=E.cellHeight,v,u,b=E.id2manPos[x.id];if(b)v=b.col*m+m/2+y[0],u=b.row*g+g/2+y[1];else{for(;E.used(E.row,E.col);)E.moveToNextCell();v=E.col*m+m/2+y[0],u=E.row*g+g/2+y[1],E.use(E.row,E.col),E.moveToNextCell()}x.x=v,x.y=u},O.prototype.getType=function(){return"grid"},O}(P.Base);U.GridLayout=A},2584:function(pr,U,G){"use strict";var F=this&&this.__createBinding||(Object.create?function(K,Q,re,q){q===void 0&&(q=re);var ae=Object.getOwnPropertyDescriptor(Q,re);(!ae||("get"in ae?!Q.__esModule:ae.writable||ae.configurable))&&(ae={enumerable:!0,get:function(){return Q[re]}}),Object.defineProperty(K,q,ae)}:function(K,Q,re,q){q===void 0&&(q=re),K[q]=Q[re]}),Y=this&&this.__exportStar||function(K,Q){for(var re in K)re!=="default"&&!Object.prototype.hasOwnProperty.call(Q,re)&&F(Q,K,re)};Object.defineProperty(U,"__esModule",{value:!0}),U.ERLayout=U.ForceAtlas2Layout=U.ComboCombinedLayout=U.ComboForceLayout=U.GForceGPULayout=U.FruchtermanGPULayout=U.FruchtermanLayout=U.MDSLayout=U.ConcentricLayout=U.RadialLayout=U.DagreCompoundLayout=U.DagreLayout=U.CircularLayout=U.ForceLayout=U.Force2Layout=U.GForceLayout=U.RandomLayout=U.GridLayout=U.Layouts=U.Layout=void 0;var P=G(94414);Object.defineProperty(U,"GridLayout",{enumerable:!0,get:function(){return P.GridLayout}});var A=G(47473);Object.defineProperty(U,"RandomLayout",{enumerable:!0,get:function(){return A.RandomLayout}});var N=G(13653);Object.defineProperty(U,"GForceLayout",{enumerable:!0,get:function(){return N.GForceLayout}});var O=G(6740);Object.defineProperty(U,"Force2Layout",{enumerable:!0,get:function(){return O.Force2Layout}});var x=G(85717);Object.defineProperty(U,"ForceLayout",{enumerable:!0,get:function(){return x.ForceLayout}});var E=G(64885);Object.defineProperty(U,"CircularLayout",{enumerable:!0,get:function(){return E.CircularLayout}});var y=G(20171);Object.defineProperty(U,"DagreLayout",{enumerable:!0,get:function(){return y.DagreLayout}});var m=G(77057);Object.defineProperty(U,"DagreCompoundLayout",{enumerable:!0,get:function(){return m.DagreCompoundLayout}});var g=G(47944);Object.defineProperty(U,"RadialLayout",{enumerable:!0,get:function(){return g.RadialLayout}});var v=G(43281);Object.defineProperty(U,"ConcentricLayout",{enumerable:!0,get:function(){return v.ConcentricLayout}});var u=G(52899);Object.defineProperty(U,"MDSLayout",{enumerable:!0,get:function(){return u.MDSLayout}});var b=G(80374);Object.defineProperty(U,"FruchtermanLayout",{enumerable:!0,get:function(){return b.FruchtermanLayout}});var T=G(87745);Object.defineProperty(U,"FruchtermanGPULayout",{enumerable:!0,get:function(){return T.FruchtermanGPULayout}});var D=G(85194);Object.defineProperty(U,"GForceGPULayout",{enumerable:!0,get:function(){return D.GForceGPULayout}});var k=G(66590);Object.defineProperty(U,"ComboForceLayout",{enumerable:!0,get:function(){return k.ComboForceLayout}});var V=G(63861);Object.defineProperty(U,"ComboCombinedLayout",{enumerable:!0,get:function(){return V.ComboCombinedLayout}});var J=G(48564);Object.defineProperty(U,"ForceAtlas2Layout",{enumerable:!0,get:function(){return J.ForceAtlas2Layout}});var W=G(90441);Object.defineProperty(U,"ERLayout",{enumerable:!0,get:function(){return W.ERLayout}});var X=G(42875);Object.defineProperty(U,"Layout",{enumerable:!0,get:function(){return X.Layout}}),Object.defineProperty(U,"Layouts",{enumerable:!0,get:function(){return X.Layouts}}),Y(G(32867),U)},42875:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.Layouts=U.Layout=void 0;var F=G(95326),Y=G(94414),P=G(47473),A=G(6740),N=G(13653),O=G(85717),x=G(64885),E=G(20171),y=G(47944),m=G(43281),g=G(52899),v=G(80374),u=G(87745),b=G(85194),T=G(66590),D=G(63861),k=G(48564),V=G(90441),J=G(77057),W=G(49784),X=function(){function K(Q){var re=(0,F.getLayoutByName)(Q.type);this.layoutInstance=new re(Q)}return K.prototype.layout=function(Q){return this.layoutInstance.layout(Q)},K.prototype.updateCfg=function(Q){this.layoutInstance.updateCfg(Q)},K.prototype.init=function(Q){this.correctLayers(Q.nodes),this.layoutInstance.init(Q)},K.prototype.correctLayers=function(Q){if(Q!=null&&Q.length){var re=1/0,q=[];if(Q.forEach(function(ue){(0,W.isString)(ue.layer)&&(ue.layer=parseInt(ue.layer,10)),!(ue.layer===void 0||isNaN(ue.layer))&&(q.push(ue),ue.layer<re&&(re=ue.layer))}),re<=0){var ae=Math.abs(re)+1;q.forEach(function(ue){return ue.layer+=ae})}}},K.prototype.execute=function(){this.layoutInstance.execute()},K.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},K.prototype.destroy=function(){return this.layoutInstance.destroy()},K}();U.Layout=X,U.Layouts={force:O.ForceLayout,fruchterman:v.FruchtermanLayout,forceAtlas2:k.ForceAtlas2Layout,gForce:N.GForceLayout,force2:A.Force2Layout,dagre:E.DagreLayout,dagreCompound:J.DagreCompoundLayout,circular:x.CircularLayout,radial:y.RadialLayout,concentric:m.ConcentricLayout,grid:Y.GridLayout,mds:g.MDSLayout,comboForce:T.ComboForceLayout,comboCombined:D.ComboCombinedLayout,random:P.RandomLayout,"gForce-gpu":b.GForceGPULayout,"fruchterman-gpu":u.FruchtermanGPULayout,er:V.ERLayout}},52899:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var O=function(x,E){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(y[g]=m[g])},O(x,E)};return function(x,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");O(x,E);function y(){this.constructor=x}x.prototype=E===null?Object.create(E):(y.prototype=E.prototype,new y)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.MDSLayout=void 0;var Y=G(5237),P=G(49784),A=G(62329),N=function(O){F(x,O);function x(E){var y=O.call(this)||this;return y.center=[0,0],y.linkDistance=50,y.nodes=[],y.edges=[],y.onLayoutEnd=function(){},y.updateCfg(E),y}return x.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},x.prototype.execute=function(){var E=this,y=E.nodes,m=E.edges,g=m===void 0?[]:m,v=E.center;if(!y||y.length===0){E.onLayoutEnd&&E.onLayoutEnd();return}if(y.length===1){y[0].x=v[0],y[0].y=v[1],E.onLayoutEnd&&E.onLayoutEnd();return}var u=E.linkDistance,b=(0,P.getAdjMatrix)({nodes:y,edges:g},!1),T=(0,P.floydWarshall)(b);E.handleInfinity(T);var D=(0,P.scaleMatrix)(T,u);E.scaledDistances=D;var k=E.runMDS();return E.positions=k,k.forEach(function(V,J){y[J].x=V[0]+v[0],y[J].y=V[1]+v[1]}),E.onLayoutEnd&&E.onLayoutEnd(),{nodes:y,edges:g}},x.prototype.runMDS=function(){var E=this,y=2,m=E.scaledDistances,g=Y.Matrix.mul(Y.Matrix.pow(m,2),-.5),v=g.mean("row"),u=g.mean("column"),b=g.mean();g.add(b).subRowVector(v).subColumnVector(u);var T=new Y.SingularValueDecomposition(g),D=Y.Matrix.sqrt(T.diagonalMatrix).diagonal();return T.leftSingularVectors.toJSON().map(function(k){return Y.Matrix.mul([k],[D]).toJSON()[0].splice(0,y)})},x.prototype.handleInfinity=function(E){var y=-999999;E.forEach(function(m){m.forEach(function(g){g!==1/0&&y<g&&(y=g)})}),E.forEach(function(m,g){m.forEach(function(v,u){v===1/0&&(E[g][u]=y)})})},x.prototype.getType=function(){return"mds"},x}(A.Base);U.MDSLayout=N},47944:function(pr,U,G){"use strict";var F=this&&this.__createBinding||(Object.create?function(P,A,N,O){O===void 0&&(O=N);var x=Object.getOwnPropertyDescriptor(A,N);(!x||("get"in x?!A.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return A[N]}}),Object.defineProperty(P,O,x)}:function(P,A,N,O){O===void 0&&(O=N),P[O]=A[N]}),Y=this&&this.__exportStar||function(P,A){for(var N in P)N!=="default"&&!Object.prototype.hasOwnProperty.call(A,N)&&F(A,P,N)};Object.defineProperty(U,"__esModule",{value:!0}),Y(G(55974),U)},66082:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var F=G(5237),Y=function(){function P(A){this.distances=A.distances,this.dimension=A.dimension||2,this.linkDistance=A.linkDistance}return P.prototype.layout=function(){var A=this,N=A.dimension,O=A.distances,x=A.linkDistance;try{var E=F.Matrix.mul(F.Matrix.pow(O,2),-.5),y=E.mean("row"),m=E.mean("column"),g=E.mean();E.add(g).subRowVector(y).subColumnVector(m);var v=new F.SingularValueDecomposition(E),u=F.Matrix.sqrt(v.diagonalMatrix).diagonal();return v.leftSingularVectors.toJSON().map(function(V){return F.Matrix.mul([V],[u]).toJSON()[0].splice(0,N)})}catch(V){for(var b=[],T=0;T<O.length;T++){var D=Math.random()*x,k=Math.random()*x;b.push([D,k])}return b}},P}();U.default=Y},55974:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var g=function(v,u){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,T){b.__proto__=T}||function(b,T){for(var D in T)Object.prototype.hasOwnProperty.call(T,D)&&(b[D]=T[D])},g(v,u)};return function(v,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");g(v,u);function b(){this.constructor=v}v.prototype=u===null?Object.create(u):(b.prototype=u.prototype,new b)}}(),Y=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(U,"__esModule",{value:!0}),U.RadialLayout=void 0;var P=G(49784),A=G(62329),N=Y(G(66082)),O=Y(G(6290));function x(g){for(var v=g.length,u=g[0].length,b=[],T=0;T<v;T++){for(var D=[],k=0;k<u;k++)g[T][k]!==0?D.push(1/(g[T][k]*g[T][k])):D.push(0);b.push(D)}return b}function E(g,v){var u=-1;return g.forEach(function(b,T){b.id===v&&(u=T)}),u}function y(g,v){return Math.sqrt((g[0]-v[0])*(g[0]-v[0])+(g[1]-v[1])*(g[1]-v[1]))}var m=function(g){F(v,g);function v(u){var b=g.call(this)||this;return b.maxIteration=1e3,b.focusNode=null,b.unitRadius=null,b.linkDistance=50,b.preventOverlap=!1,b.strictRadial=!0,b.maxPreventOverlapIteration=200,b.sortStrength=10,b.nodes=[],b.edges=[],b.updateCfg(u),b}return v.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},v.prototype.execute=function(){var u=this,b=u.nodes,T=u.edges||[];if(!b||b.length===0){u.onLayoutEnd&&u.onLayoutEnd();return}!u.width&&typeof window!="undefined"&&(u.width=window.innerWidth),!u.height&&typeof window!="undefined"&&(u.height=window.innerHeight),u.center||(u.center=[u.width/2,u.height/2]);var D=u.center;if(b.length===1){b[0].x=D[0],b[0].y=D[1],u.onLayoutEnd&&u.onLayoutEnd();return}var k=u.linkDistance,V=null;if((0,P.isString)(u.focusNode)){for(var J=!1,W=0;W<b.length;W++)b[W].id===u.focusNode&&(V=b[W],u.focusNode=V,J=!0,W=b.length);J||(V=null)}else V=u.focusNode;V||(V=b[0],u.focusNode=V);var X=E(b,V.id);X<0&&(X=0),u.focusIndex=X;var K=(0,P.getAdjMatrix)({nodes:b,edges:T},!1),Q=(0,P.floydWarshall)(K),re=u.maxToFocus(Q,X);u.handleInfinity(Q,X,re+1),u.distances=Q;var q=Q[X],ae=u.width||500,ue=u.height||500,ce=ae-D[0]>D[0]?D[0]:ae-D[0],De=ue-D[1]>D[1]?D[1]:ue-D[1];ce===0&&(ce=ae/2),De===0&&(De=ue/2);var Ie=De>ce?ce:De,Pe=Math.max.apply(Math,q),we=[];q.forEach(function(At,yt){u.unitRadius||(u.unitRadius=Ie/Pe),we[yt]=At*u.unitRadius}),u.radii=we;var xe=u.eIdealDisMatrix();u.eIdealDistances=xe;var ve=x(xe);u.weights=ve;var Se=new N.default({linkDistance:k,distances:xe}),Te=Se.layout();Te.forEach(function(At){(0,P.isNaN)(At[0])&&(At[0]=Math.random()*k),(0,P.isNaN)(At[1])&&(At[1]=Math.random()*k)}),u.positions=Te,Te.forEach(function(At,yt){b[yt].x=At[0]+D[0],b[yt].y=At[1]+D[1]}),Te.forEach(function(At){At[0]-=Te[X][0],At[1]-=Te[X][1]}),u.run();var We=u.preventOverlap,Ge=u.nodeSize,Je,mt=u.strictRadial;if(We){var xt=u.nodeSpacing,Ze;(0,P.isNumber)(xt)?Ze=function(){return xt}:(0,P.isFunction)(xt)?Ze=xt:Ze=function(){return 0},Ge?(0,P.isArray)(Ge)?Je=function(At){var yt=Ge[0]>Ge[1]?Ge[0]:Ge[1];return yt+Ze(At)}:Je=function(At){return Ge+Ze(At)}:Je=function(At){if(At.size){if((0,P.isArray)(At.size)){var yt=At.size[0]>At.size[1]?At.size[0]:At.size[1];return yt+Ze(At)}if((0,P.isObject)(At.size)){var yt=At.size.width>At.size.height?At.size.width:At.size.height;return yt+Ze(At)}return At.size+Ze(At)}return 10+Ze(At)};var $e={nodes:b,nodeSizeFunc:Je,adjMatrix:K,positions:Te,radii:we,height:ue,width:ae,strictRadial:mt,focusID:X,iterations:u.maxPreventOverlapIteration||200,k:Te.length/4.5},gt=new O.default($e);Te=gt.layout()}return Te.forEach(function(At,yt){b[yt].x=At[0]+D[0],b[yt].y=At[1]+D[1]}),u.onLayoutEnd&&u.onLayoutEnd(),{nodes:b,edges:T}},v.prototype.run=function(){for(var u=this,b=u.maxIteration,T=u.positions||[],D=u.weights||[],k=u.eIdealDistances||[],V=u.radii||[],J=0;J<=b;J++){var W=J/b;u.oneIteration(W,T,V,k,D)}},v.prototype.oneIteration=function(u,b,T,D,k){var V=this,J=1-u,W=V.focusIndex;b.forEach(function(X,K){var Q=y(X,[0,0]),re=Q===0?0:1/Q;if(K!==W){var q=0,ae=0,ue=0;b.forEach(function(De,Ie){if(K!==Ie){var Pe=y(X,De),we=Pe===0?0:1/Pe,xe=D[Ie][K];ue+=k[K][Ie],q+=k[K][Ie]*(De[0]+xe*(X[0]-De[0])*we),ae+=k[K][Ie]*(De[1]+xe*(X[1]-De[1])*we)}});var ce=T[K]===0?0:1/T[K];ue*=J,ue+=u*ce*ce,q*=J,q+=u*ce*X[0]*re,X[0]=q/ue,ae*=J,ae+=u*ce*X[1]*re,X[1]=ae/ue}})},v.prototype.eIdealDisMatrix=function(){var u=this,b=u.nodes;if(!b)return[];var T=u.distances,D=u.linkDistance,k=u.radii||[],V=u.unitRadius||50,J=[];return T&&T.forEach(function(W,X){var K=[];W.forEach(function(Q,re){if(X===re)K.push(0);else if(k[X]===k[re])if(u.sortBy==="data")K.push(Q*(Math.abs(X-re)*u.sortStrength)/(k[X]/V));else if(u.sortBy){var q=b[X][u.sortBy]||0,ae=b[re][u.sortBy]||0;(0,P.isString)(q)&&(q=q.charCodeAt(0)),(0,P.isString)(ae)&&(ae=ae.charCodeAt(0)),K.push(Q*(Math.abs(q-ae)*u.sortStrength)/(k[X]/V))}else K.push(Q*D/(k[X]/V));else{var ue=(D+V)/2;K.push(Q*ue)}}),J.push(K)}),J},v.prototype.handleInfinity=function(u,b,T){for(var D=u.length,k=0;k<D;k++)if(u[b][k]===1/0){u[b][k]=T,u[k][b]=T;for(var V=0;V<D;V++)u[k][V]!==1/0&&u[b][V]===1/0&&(u[b][V]=T+u[k][V],u[V][b]=T+u[k][V])}for(var k=0;k<D;k++)if(k!==b){for(var V=0;V<D;V++)if(u[k][V]===1/0){var J=Math.abs(u[b][k]-u[b][V]);J=J===0?1:J,u[k][V]=J}}},v.prototype.maxToFocus=function(u,b){for(var T=0,D=0;D<u[b].length;D++)u[b][D]!==1/0&&(T=u[b][D]>T?u[b][D]:T);return T},v.prototype.getType=function(){return"radial"},v}(A.Base);U.RadialLayout=m},6290:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0});var G=800,F=function(){function Y(P){this.disp=[],this.positions=P.positions,this.adjMatrix=P.adjMatrix,this.focusID=P.focusID,this.radii=P.radii,this.iterations=P.iterations||10,this.height=P.height||10,this.width=P.width||10,this.speed=P.speed||100,this.gravity=P.gravity||10,this.nodeSizeFunc=P.nodeSizeFunc,this.k=P.k||5,this.strictRadial=P.strictRadial,this.nodes=P.nodes}return Y.prototype.layout=function(){var P=this,A=P.positions,N=[],O=P.iterations,x=P.width/10;P.maxDisplace=x,P.disp=N;for(var E=0;E<O;E++)A.forEach(function(y,m){N[m]={x:0,y:0}}),P.getRepulsion(),P.updatePositions();return A},Y.prototype.getRepulsion=function(){var P=this,A=P.positions,N=P.nodes,O=P.disp,x=P.k,E=P.radii||[];A.forEach(function(y,m){O[m]={x:0,y:0},A.forEach(function(g,v){if(m!==v&&E[m]===E[v]){var u=y[0]-g[0],b=y[1]-g[1],T=Math.sqrt(u*u+b*b);if(T===0){T=1;var D=m>v?1:-1;u=.01*D,b=.01*D}if(T<P.nodeSizeFunc(N[m])/2+P.nodeSizeFunc(N[v])/2){var k=x*x/T;O[m].x+=u/T*k,O[m].y+=b/T*k}}})})},Y.prototype.updatePositions=function(){var P=this,A=P.positions,N=P.disp,O=P.speed,x=P.strictRadial,E=P.focusID,y=P.maxDisplace||P.width/10;x&&N.forEach(function(g,v){var u=A[v][0]-A[E][0],b=A[v][1]-A[E][1],T=Math.sqrt(u*u+b*b),D=b/T,k=-u/T,V=Math.sqrt(g.x*g.x+g.y*g.y),J=Math.acos((D*g.x+k*g.y)/V);J>Math.PI/2&&(J-=Math.PI/2,D*=-1,k*=-1);var W=Math.cos(J)*V;g.x=D*W,g.y=k*W});var m=P.radii;A.forEach(function(g,v){if(v!==E){var u=Math.sqrt(N[v].x*N[v].x+N[v].y*N[v].y);if(u>0&&v!==E){var b=Math.min(y*(O/G),u);if(g[0]+=N[v].x/u*b,g[1]+=N[v].y/u*b,x){var T=g[0]-A[E][0],D=g[1]-A[E][1],k=Math.sqrt(T*T+D*D);T=T/k*m[v],D=D/k*m[v],g[0]=A[E][0]+T,g[1]=A[E][1]+D}}}})},Y}();U.default=F},47473:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var A=function(N,O){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,E){x.__proto__=E}||function(x,E){for(var y in E)Object.prototype.hasOwnProperty.call(E,y)&&(x[y]=E[y])},A(N,O)};return function(N,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");A(N,O);function x(){this.constructor=N}N.prototype=O===null?Object.create(O):(x.prototype=O.prototype,new x)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.RandomLayout=void 0;var Y=G(62329),P=function(A){F(N,A);function N(O){var x=A.call(this)||this;return x.center=[0,0],x.width=300,x.height=300,x.nodes=[],x.edges=[],x.onLayoutEnd=function(){},x.updateCfg(O),x}return N.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},N.prototype.execute=function(){var O=this,x=O.nodes,E=.9,y=O.center;return!O.width&&typeof window!="undefined"&&(O.width=window.innerWidth),!O.height&&typeof window!="undefined"&&(O.height=window.innerHeight),x&&x.forEach(function(m){m.x=(Math.random()-.5)*E*O.width+y[0],m.y=(Math.random()-.5)*E*O.height+y[1]}),O.onLayoutEnd&&O.onLayoutEnd(),{nodes:x,edges:this.edges}},N.prototype.getType=function(){return"random"},N}(Y.Base);U.RandomLayout=P},32867:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0})},95326:function(pr,U,G){"use strict";var F=this&&this.__extends||function(){var E=function(y,m){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var u in v)Object.prototype.hasOwnProperty.call(v,u)&&(g[u]=v[u])},E(y,m)};return function(y,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");E(y,m);function g(){this.constructor=y}y.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}();Object.defineProperty(U,"__esModule",{value:!0}),U.getLayoutByName=U.unRegisterLayout=U.registerLayout=void 0;var Y=G(62329),P=G(49784),A=new Map,N=function(E,y){if(A.get(E)&&console.warn("The layout with the name ".concat(E," exists already, it will be overridden")),(0,P.isObject)(y)){var m=function(g){F(v,g);function v(u){var b=this,T;b=g.call(this)||this;var D=b,k={},V=Object.assign({},D.getDefaultCfg(),((T=y.getDefaultCfg)===null||T===void 0?void 0:T.call(y))||{});return Object.assign(k,V,y,u),Object.keys(k).forEach(function(J){var W=k[J];D[J]=W}),b}return v}(Y.Base);A.set(E,m)}else A.set(E,y);return A.get(E)};U.registerLayout=N;var O=function(E){A.has(E)&&A.delete(E)};U.unRegisterLayout=O;var x=function(E){return A.has(E)?A.get(E):null};U.getLayoutByName=x},85087:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.isArray=void 0,U.isArray=Array.isArray},78732:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.getFuncByUnknownType=U.getFunc=U.isFunction=void 0;var F=G(49784),Y=G(30627),P=function(O){return typeof O=="function"};U.isFunction=P;var A=function(O,x,E){var y;return E?y=E:(0,Y.isNumber)(O)?y=function(){return O}:y=function(){return x},y};U.getFunc=A;var N=function(O,x,E){return E===void 0&&(E=!0),!x&&x!==0?function(y){return y.size?(0,F.isArray)(y.size)?y.size[0]>y.size[1]?y.size[0]:y.size[1]:(0,F.isObject)(y.size)?y.size.width>y.size.height?y.size.width:y.size.height:y.size:O}:(0,U.isFunction)(x)?x:(0,Y.isNumber)(x)?function(){return x}:(0,F.isArray)(x)?function(){if(E){var y=Math.max.apply(Math,x);return isNaN(y)?O:y}return x}:(0,F.isObject)(x)?function(){if(E){var y=Math.max(x.width,x.height);return isNaN(y)?O:y}return[x.width,x.height]}:function(){return O}};U.getFuncByUnknownType=N},48835:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.arrayToTextureData=U.attributesToTextureData=U.buildTextureDataWithTwoEdgeAttr=U.buildTextureData=U.proccessToFunc=void 0;var F=G(49784),Y=G(80628),P=function(E,y){var m;return E?(0,F.isNumber)(E)?m=function(){return E}:m=E:m=function(){return y||1},m};U.proccessToFunc=P;var A=function(E,y){var m=[],g=[],v={},u=0;for(u=0;u<E.length;u++){var b=E[u];v[b.id]=u,m.push(b.x),m.push(b.y),m.push(0),m.push(0),g.push([])}for(u=0;u<y.length;u++){var T=y[u],D=(0,Y.getEdgeTerminal)(T,"source"),k=(0,Y.getEdgeTerminal)(T,"target");!isNaN(v[D])&&!isNaN(v[k])&&(g[v[D]].push(v[k]),g[v[k]].push(v[D]))}var V=0;for(u=0;u<E.length;u++){var J=m.length,W=g[u],X=W.length;m[u*4+2]=J,m[u*4+3]=X,V=Math.max(V,X);for(var K=0;K<X;++K){var Q=W[K];m.push(+Q)}}for(;m.length%4!==0;)m.push(0);return{maxEdgePerVetex:V,array:new Float32Array(m)}};U.buildTextureData=A;var N=function(E,y,m,g){var v=[],u=[],b={},T=0;for(T=0;T<E.length;T++){var D=E[T];b[D.id]=T,v.push(D.x),v.push(D.y),v.push(0),v.push(0),u.push([])}for(T=0;T<y.length;T++){var k=y[T],V=(0,Y.getEdgeTerminal)(k,"source"),J=(0,Y.getEdgeTerminal)(k,"target");u[b[V]].push(b[J]),u[b[V]].push(m(k)),u[b[V]].push(g(k)),u[b[V]].push(0),u[b[J]].push(b[V]),u[b[J]].push(m(k)),u[b[J]].push(g(k)),u[b[J]].push(0)}var W=0;for(T=0;T<E.length;T++){var X=v.length,K=u[T],Q=K.length;v[T*4+2]=X+1048576*Q/4,v[T*4+3]=0,W=Math.max(W,Q/4);for(var re=0;re<Q;++re){var q=K[re];v.push(+q)}}for(;v.length%4!==0;)v.push(0);return{maxEdgePerVetex:W,array:new Float32Array(v)}};U.buildTextureDataWithTwoEdgeAttr=N;var O=function(E,y){var m=[],g=E.length,v={};return y.forEach(function(u){E.forEach(function(b,T){if(v[u[b]]===void 0&&(v[u[b]]=Object.keys(v).length),m.push(v[u[b]]),T===g-1)for(;m.length%4!==0;)m.push(0)})}),{array:new Float32Array(m),count:Object.keys(v).length}};U.attributesToTextureData=O;var x=function(E){for(var y=[],m=E.length,g=E[0].length,v=function(b){E.forEach(function(T,D){if(y.push(T[b]),D===m-1)for(;y.length%4!==0;)y.push(0)})},u=0;u<g;u++)v(u);return new Float32Array(y)};U.arrayToTextureData=x},49784:function(pr,U,G){"use strict";var F=this&&this.__createBinding||(Object.create?function(P,A,N,O){O===void 0&&(O=N);var x=Object.getOwnPropertyDescriptor(A,N);(!x||("get"in x?!A.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return A[N]}}),Object.defineProperty(P,O,x)}:function(P,A,N,O){O===void 0&&(O=N),P[O]=A[N]}),Y=this&&this.__exportStar||function(P,A){for(var N in P)N!=="default"&&!Object.prototype.hasOwnProperty.call(A,N)&&F(A,P,N)};Object.defineProperty(U,"__esModule",{value:!0}),Y(G(8055),U),Y(G(85087),U),Y(G(30627),U),Y(G(80628),U),Y(G(98130),U),Y(G(78732),U)},80628:function(pr,U,G){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.getCoreNodeAndRelativeLeafNodes=U.getAvgNodePosition=U.getLayoutBBox=U.traverseTreeUp=U.scaleMatrix=U.getAdjMatrix=U.floydWarshall=U.getDegreeMap=U.getDegree=U.getEdgeTerminal=void 0;var F=G(85087),Y=G(30627),P=G(98130),A=function(V,J){var W=V[J];return(0,P.isObject)(W)?W.cell:W};U.getEdgeTerminal=A;var N=function(V,J,W){for(var X=[],K=0;K<V;K++)X[K]={in:0,out:0,all:0};return W&&W.forEach(function(Q){var re=(0,U.getEdgeTerminal)(Q,"source"),q=(0,U.getEdgeTerminal)(Q,"target");re&&X[J[re]]&&(X[J[re]].out+=1,X[J[re]].all+=1),q&&X[J[q]]&&(X[J[q]].in+=1,X[J[q]].all+=1)}),X};U.getDegree=N;var O=function(V,J){var W={};return V.forEach(function(X){W[X.id]={in:0,out:0,all:0}}),J&&J.forEach(function(X){var K=(0,U.getEdgeTerminal)(X,"source"),Q=(0,U.getEdgeTerminal)(X,"target");K&&(W[K].out+=1,W[K].all+=1),Q&&(W[Q].in+=1,W[Q].all+=1)}),W};U.getDegreeMap=O;var x=function(V){for(var J=[],W=V.length,X=0;X<W;X+=1){J[X]=[];for(var K=0;K<W;K+=1)X===K?J[X][K]=0:V[X][K]===0||!V[X][K]?J[X][K]=1/0:J[X][K]=V[X][K]}for(var Q=0;Q<W;Q+=1)for(var X=0;X<W;X+=1)for(var K=0;K<W;K+=1)J[X][K]>J[X][Q]+J[Q][K]&&(J[X][K]=J[X][Q]+J[Q][K]);return J};U.floydWarshall=x;var E=function(V,J){var W=V.nodes,X=V.edges,K=[],Q={};if(!W)throw new Error("invalid nodes data!");return W&&W.forEach(function(re,q){Q[re.id]=q;var ae=[];K.push(ae)}),X==null||X.forEach(function(re){var q=(0,U.getEdgeTerminal)(re,"source"),ae=(0,U.getEdgeTerminal)(re,"target"),ue=Q[q],ce=Q[ae];ue===void 0||ce===void 0||(K[ue][ce]=1,J||(K[ce][ue]=1))}),K};U.getAdjMatrix=E;var y=function(V,J){var W=[];return V.forEach(function(X){var K=[];X.forEach(function(Q){K.push(Q*J)}),W.push(K)}),W};U.scaleMatrix=y;var m=function(V,J){if(V&&V.children){for(var W=V.children.length-1;W>=0;W--)if(!m(V.children[W],J))return}return!!J(V)},g=function(V,J){typeof J=="function"&&m(V,J)};U.traverseTreeUp=g;var v=function(V){var J=1/0,W=1/0,X=-1/0,K=-1/0;return V.forEach(function(Q){var re=Q.size;(0,F.isArray)(re)?re.length===1&&(re=[re[0],re[0]]):(0,Y.isNumber)(re)?re=[re,re]:(re===void 0||isNaN(re))&&(re=[30,30]);var q=[re[0]/2,re[1]/2],ae=Q.x-q[0],ue=Q.x+q[0],ce=Q.y-q[1],De=Q.y+q[1];J>ae&&(J=ae),W>ce&&(W=ce),X<ue&&(X=ue),K<De&&(K=De)}),{minX:J,minY:W,maxX:X,maxY:K}};U.getLayoutBBox=v;var u=function(V){var J={x:0,y:0};V.forEach(function(X){J.x+=X.x||0,J.y+=X.y||0});var W=V.length||1;return{x:J.x/W,y:J.y/W}};U.getAvgNodePosition=u;var b=function(V,J,W){var X,K;return V==="source"?((X=W==null?void 0:W.find(function(Q){return Q.target===J.id}))===null||X===void 0?void 0:X.source)||{}:((K=W==null?void 0:W.find(function(Q){return Q.source===J.id}))===null||K===void 0?void 0:K.target)||{}},T=function(V,J,W){var X=[];switch(V){case"source":X=W==null?void 0:W.filter(function(Q){return Q.source===J.id}).map(function(Q){return Q.target});break;case"target":X=W==null?void 0:W.filter(function(Q){return Q.target===J.id}).map(function(Q){return Q.source});break;case"both":X=W==null?void 0:W.filter(function(Q){return Q.source===J.id}).map(function(Q){return Q.target}).concat(W==null?void 0:W.filter(function(Q){return Q.target===J.id}).map(function(Q){return Q.source}));break;default:break}var K=new Set(X);return Array.from(K)},D=function(V,J,W,X,K){var Q=W[J]||"",re=(X==null?void 0:X.filter(function(q){return q[J]===Q}))||[];return V==="leaf"&&(re=re.filter(function(q){var ae,ue;return((ae=K[q.id])===null||ae===void 0?void 0:ae.in)===0||((ue=K[q.id])===null||ue===void 0?void 0:ue.out)===0})),re},k=function(V,J,W,X,K,Q){var re=K[J.id],q=re.in,ae=re.out,ue=J,ce=[];q===0?(ue=b("source",J,W),ce=T("both",ue,W).map(function(Ie){return Q[Ie]})):ae===0&&(ue=b("target",J,W),ce=T("both",ue,W).map(function(Ie){return Q[Ie]})),ce=ce.filter(function(Ie){return K[Ie.id]&&(K[Ie.id].in===0||K[Ie.id].out===0)});var De=D(V,X,J,ce,K);return{coreNode:ue,relativeLeafNodes:ce,sameTypeLeafNodes:De}};U.getCoreNodeAndRelativeLeafNodes=k},30627:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.toNumber=U.isNaN=U.isNumber=void 0;var G=function(P){return typeof P=="number"};U.isNumber=G;var F=function(P){return Number.isNaN(Number(P))};U.isNaN=F;var Y=function(P){var A=parseFloat(P);return(0,U.isNaN)(A)?P:A};U.toNumber=Y},98130:function(pr,U){"use strict";var G=this&&this.__assign||function(){return G=Object.assign||function(P){for(var A,N=1,O=arguments.length;N<O;N++){A=arguments[N];for(var x in A)Object.prototype.hasOwnProperty.call(A,x)&&(P[x]=A[x])}return P},G.apply(this,arguments)};Object.defineProperty(U,"__esModule",{value:!0}),U.clone=U.isObject=void 0;var F=function(P){return P!==null&&typeof P=="object"};U.isObject=F;var Y=function(P){if(P===null)return P;if(P instanceof Date)return new Date(P.getTime());if(P instanceof Array){var A=[];return P.forEach(function(O){A.push(O)}),A.map(function(O){return(0,U.clone)(O)})}if(typeof P=="object"&&Object.keys(P).length){var N=G({},P);return Object.keys(N).forEach(function(O){N[O]=(0,U.clone)(N[O])}),N}return P};U.clone=Y},8055:function(pr,U){"use strict";Object.defineProperty(U,"__esModule",{value:!0}),U.camelize=U.isString=void 0;var G=function(P){return typeof P=="string"};U.isString=G;var F=function(P){var A=Object.create(null);return function(N){var O=A[N];return O||(A[N]=P(N))}},Y=/-(\w)/g;U.camelize=F(function(P){return P.replace(Y,function(A,N){return N?N.toUpperCase():""})})},33446:function(pr,U,G){"use strict";G.r(U),G.d(U,{Cache:function(){return ou},angleTo:function(){return re},arcToCubic:function(){return mr},assign:function(){return It},augment:function(){return vr},clamp:function(){return no},clearAnimationFrame:function(){return st},clone:function(){return Ur},clonePath:function(){return Fn},contains:function(){return Sr},debounce:function(){return Er},deepMix:function(){return Xn},difference:function(){return le},direction:function(){return Q},distanceSquareRoot:function(){return va},each:function(){return Ot},endsWith:function(){return qi},equalizeSegments:function(){return lt},every:function(){return Cs},extend:function(){return Ei},filter:function(){return an},find:function(){return Fr},findIndex:function(){return Ae},firstValue:function(){return ft},fixedBase:function(){return ts},flatten:function(){return St},flattenDeep:function(){return qt},forIn:function(){return Eu},get:function(){return Lf},getDrawDirection:function(){return mn},getPathArea:function(){return Ka},getPathBBox:function(){return wn},getPathBBoxTotalLength:function(){return Gn},getPointAtLength:function(){return jn},getRange:function(){return Hn},getRotatedCurve:function(){return oa},getTotalLength:function(){return On},getType:function(){return Xs},getWrapBehavior:function(){return Ii},gradient:function(){return m},group:function(){return Ji},groupBy:function(){return Is},groupToMap:function(){return Nn},has:function(){return Fs},hasKey:function(){return li},hasValue:function(){return ru},head:function(){return Ui},identity:function(){return Ys},includes:function(){return Sr},indexOf:function(){return di},isArguments:function(){return Su},isArray:function(){return Ne},isArrayLike:function(){return Ft},isBoolean:function(){return Po},isDate:function(){return Mu},isDecimal:function(){return fi},isElement:function(){return Ue},isEmpty:function(){return Pi},isEqual:function(){return Ha},isEqualWith:function(){return $o},isError:function(){return vo},isEven:function(){return lo},isFinite:function(){return Wu},isFunction:function(){return ge},isInteger:function(){return Do},isMatch:function(){return or},isNegative:function(){return zo},isNil:function(){return _},isNull:function(){return Xu},isNumber:function(){return Ja},isNumberEqual:function(){return Uo},isObject:function(){return Le},isObjectLike:function(){return Sn},isOdd:function(){return Ma},isPlainObject:function(){return nr},isPointInPolygon:function(){return Ns},isPointInStroke:function(){return ma},isPolygonsIntersect:function(){return ju},isPositive:function(){return Hi},isPrototype:function(){return c},isRegExp:function(){return fe},isString:function(){return Tr},isType:function(){return Ee},isUndefined:function(){return Oe},keys:function(){return Zt},last:function(){return Ni},lowerCase:function(){return Ls},lowerFirst:function(){return xu},map:function(){return wo},mapValues:function(){return Of},max:function(){return Xr},maxBy:function(){return En},memoize:function(){return sn},min:function(){return vn},minBy:function(){return cn},mix:function(){return It},mod:function(){return oi},noop:function(){return Wc},normalizePath:function(){return $t},number2color:function(){return hs},omit:function(){return ff},parseRadius:function(){return Oa},path2Absolute:function(){return ct},path2Curve:function(){return Nr},path2String:function(){return ue},pick:function(){return oc},pull:function(){return Aa},pullAt:function(){return qa},reduce:function(){return fs},remove:function(){return so},requestAnimationFrame:function(){return nt},reverseCurve:function(){return Vn},rgb2arr:function(){return F},set:function(){return ms},size:function(){return Nf},some:function(){return uo},sortBy:function(){return cs},startsWith:function(){return ls},substitute:function(){return is},throttle:function(){return Df},toArray:function(){return sc},toCSSGradient:function(){return T},toDegree:function(){return Xa},toInteger:function(){return ci},toRGB:function(){return x},toRadian:function(){return Bs},toString:function(){return as},transform:function(){return K},union:function(){return Ho},uniq:function(){return ja},uniqueId:function(){return uc},upperCase:function(){return wu},upperFirst:function(){return Us},values:function(){return bu},valuesOfKey:function(){return Fo},vertical:function(){return q},wrapBehavior:function(){return co}});function F(te){return[parseInt(te.substr(1,2),16),parseInt(te.substr(3,2),16),parseInt(te.substr(5,2),16)]}function Y(te){var de=Math.round(te).toString(16);return de.length===1?"0"+de:de}function P(te){return"#"+Y(te[0])+Y(te[1])+Y(te[2])}var A=/rgba?\(([\s.,0-9]+)\)/;function N(){var te=document.createElement("i");return te.title="Web Colour Picker",te.style.display="none",document.body.appendChild(te),te}var O;function x(te){if(te[0]==="#"&&te.length===7)return te;O||(O=N()),O.style.color=te;var de=document.defaultView.getComputedStyle(O,"").getPropertyValue("color"),Me=A.exec(de),Fe=Me[1].split(/\s*,\s*/).map(function(tt){return Number(tt)});return de=P(Fe),de}function E(te,de,Me,Fe){return te[Fe]+(de[Fe]-te[Fe])*Me}function y(te,de){var Me=isNaN(Number(de))||de<0?0:de>1?1:Number(de),Fe=te.length-1,tt=Math.floor(Fe*Me),Dt=Fe*Me-tt,Rt=te[tt],ur=tt===Fe?Rt:te[tt+1];return P([E(Rt,ur,Dt,0),E(Rt,ur,Dt,1),E(Rt,ur,Dt,2)])}function m(te){var de=typeof te=="string"?te.split("-"):te,Me=de.map(function(Fe){return F(Fe.indexOf("#")===-1?x(Fe):Fe)});return function(Fe){return y(Me,Fe)}}var g=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,v=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,u=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function b(te){return/^[r,R,L,l]{1}[\s]*\(/.test(te)}function T(te){if(b(te)){var de,Me=void 0;if(te[0]==="l"){var Fe=g.exec(te),tt=+Fe[1]+90;Me=Fe[2],de="linear-gradient("+tt+"deg, "}else if(te[0]==="r"){de="radial-gradient(";var Fe=v.exec(te);Me=Fe[4]}var Dt=Me.match(u);return Dt.forEach(function(Rt,ur){var Pr=Rt.split(":");de+=Pr[1]+" "+Number(Pr[0])*100+"%",ur!==Dt.length-1&&(de+=", ")}),de+=")",de}return te}var D=G(35600),k=G(31437);function V(te,de,Me){var Fe=[0,0,0,0,0,0,0,0,0];return D.fromTranslation(Fe,Me),D.multiply(te,Fe,de)}function J(te,de,Me){var Fe=[0,0,0,0,0,0,0,0,0];return D.fromRotation(Fe,Me),D.multiply(te,Fe,de)}function W(te,de,Me){var Fe=[0,0,0,0,0,0,0,0,0];return D.fromScaling(Fe,Me),D.multiply(te,Fe,de)}function X(te,de,Me){return D.multiply(te,Me,de)}function K(te,de){for(var Me=te?[].concat(te):[1,0,0,0,1,0,0,0,1],Fe=0,tt=de.length;Fe<tt;Fe++){var Dt=de[Fe];switch(Dt[0]){case"t":V(Me,Me,[Dt[1],Dt[2]]);break;case"s":W(Me,Me,[Dt[1],Dt[2]]);break;case"r":J(Me,Me,Dt[1]);break;case"m":X(Me,Me,Dt[1]);break;default:break}}return Me}function Q(te,de){return te[0]*de[1]-de[0]*te[1]}function re(te,de,Me){var Fe=k.angle(te,de),tt=Q(te,de)>=0;return Me?tt?Math.PI*2-Fe:Fe:tt?Fe:Math.PI*2-Fe}function q(te,de,Me){return Me?(te[0]=de[1],te[1]=-1*de[0]):(te[0]=-1*de[1],te[1]=de[0]),te}function ae(te,de){if(de==="off")return[].concat(te);var Me=typeof de=="number"&&de>=1?Math.pow(10,de):1;return te.map(function(Fe){var tt=Fe.slice(1).map(Number).map(function(Dt){return de?Math.round(Dt*Me)/Me:Math.round(Dt)});return[Fe[0]].concat(tt)})}function ue(te,de){return de===void 0&&(de="off"),ae(te,de).map(function(Me){return Me[0]+Me.slice(1).join(" ")}).join("")}var ce=G(97582),De={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function Ie(te,de,Me){if(te[Me].length>7){te[Me].shift();for(var Fe=te[Me],tt=Me;Fe.length;)de[Me]="A",te.splice(tt+=1,0,["C"].concat(Fe.splice(0,6)));te.splice(Me,1)}}var Pe={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function we(te){return Array.isArray(te)&&te.every(function(de){var Me=de[0].toLowerCase();return Pe[Me]===de.length-1&&"achlmqstvz".includes(Me)})}function xe(te){return we(te)&&te.every(function(de){var Me=de[0];return Me===Me.toUpperCase()})}function ve(te){return xe(te)&&te.every(function(de){var Me=de[0];return"ACLMQZ".includes(Me)})}function Se(te){for(var de=te.pathValue[te.segmentStart],Me=de.toLowerCase(),Fe=te.data;Fe.length>=Pe[Me]&&(Me==="m"&&Fe.length>2?(te.segments.push([de].concat(Fe.splice(0,2))),Me="l",de=de==="m"?"l":"L"):te.segments.push([de].concat(Fe.splice(0,Pe[Me]))),!!Pe[Me]););}function Te(te){var de=te.index,Me=te.pathValue,Fe=Me.charCodeAt(de);if(Fe===48){te.param=0,te.index+=1;return}if(Fe===49){te.param=1,te.index+=1;return}te.err='[path-util]: invalid Arc flag "'+Me[de]+'", expecting 0 or 1 at index '+de}function We(te){return te>=48&&te<=57||te===43||te===45||te===46}function Ge(te){return te>=48&&te<=57}function Je(te){var de=te.max,Me=te.pathValue,Fe=te.index,tt=Fe,Dt=!1,Rt=!1,ur=!1,Pr=!1,Rr;if(tt>=de){te.err="[path-util]: Invalid path value at index "+tt+', "pathValue" is missing param';return}if(Rr=Me.charCodeAt(tt),(Rr===43||Rr===45)&&(tt+=1,Rr=Me.charCodeAt(tt)),!Ge(Rr)&&Rr!==46){te.err="[path-util]: Invalid path value at index "+tt+', "'+Me[tt]+'" is not a number';return}if(Rr!==46){if(Dt=Rr===48,tt+=1,Rr=Me.charCodeAt(tt),Dt&&tt<de&&Rr&&Ge(Rr)){te.err="[path-util]: Invalid path value at index "+Fe+', "'+Me[Fe]+'" illegal number';return}for(;tt<de&&Ge(Me.charCodeAt(tt));)tt+=1,Rt=!0;Rr=Me.charCodeAt(tt)}if(Rr===46){for(Pr=!0,tt+=1;Ge(Me.charCodeAt(tt));)tt+=1,ur=!0;Rr=Me.charCodeAt(tt)}if(Rr===101||Rr===69){if(Pr&&!Rt&&!ur){te.err="[path-util]: Invalid path value at index "+tt+', "'+Me[tt]+'" invalid float exponent';return}if(tt+=1,Rr=Me.charCodeAt(tt),(Rr===43||Rr===45)&&(tt+=1),tt<de&&Ge(Me.charCodeAt(tt)))for(;tt<de&&Ge(Me.charCodeAt(tt));)tt+=1;else{te.err="[path-util]: Invalid path value at index "+tt+', "'+Me[tt]+'" invalid integer exponent';return}}te.index=tt,te.param=+te.pathValue.slice(Fe,tt)}function mt(te){var de=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return te===10||te===13||te===8232||te===8233||te===32||te===9||te===11||te===12||te===160||te>=5760&&de.includes(te)}function xt(te){for(var de=te.pathValue,Me=te.max;te.index<Me&&mt(de.charCodeAt(te.index));)te.index+=1}function Ze(te){switch(te|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function $e(te){return(te|32)===97}function gt(te){var de=te.max,Me=te.pathValue,Fe=te.index,tt=Me.charCodeAt(Fe),Dt=Pe[Me[Fe].toLowerCase()];if(te.segmentStart=Fe,!Ze(tt)){te.err='[path-util]: Invalid path value "'+Me[Fe]+'" is not a path command';return}if(te.index+=1,xt(te),te.data=[],!Dt){Se(te);return}for(;;){for(var Rt=Dt;Rt>0;Rt-=1){if($e(tt)&&(Rt===3||Rt===4)?Te(te):Je(te),te.err.length)return;te.data.push(te.param),xt(te),te.index<de&&Me.charCodeAt(te.index)===44&&(te.index+=1,xt(te))}if(te.index>=te.max||!We(Me.charCodeAt(te.index)))break}Se(te)}var At=function(){function te(de){this.pathValue=de,this.segments=[],this.max=de.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return te}();function yt(te){if(we(te))return[].concat(te);var de=new At(te);for(xt(de);de.index<de.max&&!de.err.length;)gt(de);return de.err?de.err:de.segments}function ct(te){if(xe(te))return[].concat(te);var de=yt(te),Me=0,Fe=0,tt=0,Dt=0;return de.map(function(Rt){var ur=Rt.slice(1).map(Number),Pr=Rt[0],Rr=Pr.toUpperCase();if(Pr==="M")return Me=ur[0],Fe=ur[1],tt=Me,Dt=Fe,["M",Me,Fe];var hn;if(Pr!==Rr)switch(Rr){case"A":hn=[Rr,ur[0],ur[1],ur[2],ur[3],ur[4],ur[5]+Me,ur[6]+Fe];break;case"V":hn=[Rr,ur[0]+Fe];break;case"H":hn=[Rr,ur[0]+Me];break;default:{var pn=ur.map(function(Yn,sa){return Yn+(sa%2?Fe:Me)});hn=[Rr].concat(pn)}}else hn=[Rr].concat(ur);var on=hn.length;switch(Rr){case"Z":Me=tt,Fe=Dt;break;case"H":Me=hn[1];break;case"V":Fe=hn[1];break;default:Me=hn[on-2],Fe=hn[on-1],Rr==="M"&&(tt=Me,Dt=Fe)}return hn})}function Kt(te,de){var Me=te[0],Fe=de.x1,tt=de.y1,Dt=de.x2,Rt=de.y2,ur=te.slice(1).map(Number),Pr=te;if("TQ".includes(Me)||(de.qx=null,de.qy=null),Me==="H")Pr=["L",te[1],tt];else if(Me==="V")Pr=["L",Fe,te[1]];else if(Me==="S"){var Rr=Fe*2-Dt,hn=tt*2-Rt;de.x1=Rr,de.y1=hn,Pr=["C",Rr,hn].concat(ur)}else if(Me==="T"){var pn=Fe*2-de.qx,on=tt*2-de.qy;de.qx=pn,de.qy=on,Pr=["Q",pn,on].concat(ur)}else if(Me==="Q"){var Yn=ur[0],sa=ur[1];de.qx=Yn,de.qy=sa}return Pr}function $t(te){if(ve(te))return[].concat(te);for(var de=ct(te),Me=(0,ce.__assign)({},De),Fe=0;Fe<de.length;Fe+=1){de[Fe]=Kt(de[Fe],Me);var tt=de[Fe],Dt=tt.length;Me.x1=+tt[Dt-2],Me.y1=+tt[Dt-1],Me.x2=+tt[Dt-4]||Me.x1,Me.y2=+tt[Dt-3]||Me.y1}return de}function jt(te){return ve(te)&&te.every(function(de){var Me=de[0];return"MC".includes(Me)})}function ir(te,de,Me){var Fe=te*Math.cos(Me)-de*Math.sin(Me),tt=te*Math.sin(Me)+de*Math.cos(Me);return{x:Fe,y:tt}}function mr(te,de,Me,Fe,tt,Dt,Rt,ur,Pr,Rr){var hn=te,pn=de,on=Me,Yn=Fe,sa=ur,ta=Pr,In=Math.PI*120/180,ba=Math.PI/180*(+tt||0),Mn=[],ha,Zn,Cn,fa,Fa;if(Rr)Zn=Rr[0],Cn=Rr[1],fa=Rr[2],Fa=Rr[3];else{ha=ir(hn,pn,-ba),hn=ha.x,pn=ha.y,ha=ir(sa,ta,-ba),sa=ha.x,ta=ha.y;var ii=(hn-sa)/2,Ga=(pn-ta)/2,Na=ii*ii/(on*on)+Ga*Ga/(Yn*Yn);Na>1&&(Na=Math.sqrt(Na),on*=Na,Yn*=Na);var si=on*on,Oi=Yn*Yn,gi=(Dt===Rt?-1:1)*Math.sqrt(Math.abs((si*Oi-si*Ga*Ga-Oi*ii*ii)/(si*Ga*Ga+Oi*ii*ii)));fa=gi*on*Ga/Yn+(hn+sa)/2,Fa=gi*-Yn*ii/on+(pn+ta)/2,Zn=Math.asin(((pn-Fa)/Yn*Math.pow(10,9)>>0)/Math.pow(10,9)),Cn=Math.asin(((ta-Fa)/Yn*Math.pow(10,9)>>0)/Math.pow(10,9)),Zn=hn<fa?Math.PI-Zn:Zn,Cn=sa<fa?Math.PI-Cn:Cn,Zn<0&&(Zn=Math.PI*2+Zn),Cn<0&&(Cn=Math.PI*2+Cn),Rt&&Zn>Cn&&(Zn-=Math.PI*2),!Rt&&Cn>Zn&&(Cn-=Math.PI*2)}var Iu=Cn-Zn;if(Math.abs(Iu)>In){var kf=Cn,Ps=sa,su=ta;Cn=Zn+In*(Rt&&Cn>Zn?1:-1),sa=fa+on*Math.cos(Cn),ta=Fa+Yn*Math.sin(Cn),Mn=mr(sa,ta,on,Yn,tt,0,Rt,Ps,su,[Cn,kf,fa,Fa])}Iu=Cn-Zn;var Yo=Math.cos(Zn),Hu=Math.sin(Zn),Au=Math.cos(Cn),uu=Math.sin(Cn),Ou=Math.tan(Iu/4),df=4/3*on*Ou,fu=4/3*Yn*Ou,Zu=[hn,pn],Hs=[hn+df*Hu,pn-fu*Yo],hf=[sa+df*uu,ta-fu*Au],vf=[sa,ta];if(Hs[0]=2*Zu[0]-Hs[0],Hs[1]=2*Zu[1]-Hs[1],Rr)return Hs.concat(hf,vf,Mn);Mn=Hs.concat(hf,vf,Mn);for(var gf=[],jo=0,pf=Mn.length;jo<pf;jo+=1)gf[jo]=jo%2?ir(Mn[jo-1],Mn[jo],ba).y:ir(Mn[jo],Mn[jo+1],ba).x;return gf}function tn(te,de,Me,Fe,tt,Dt){var Rt=.3333333333333333,ur=2/3;return[Rt*te+ur*Me,Rt*de+ur*Fe,Rt*tt+ur*Me,Rt*Dt+ur*Fe,tt,Dt]}function Dr(te,de,Me){var Fe=te[0],tt=te[1],Dt=de[0],Rt=de[1];return[Fe+(Dt-Fe)*Me,tt+(Rt-tt)*Me]}var Dn=function(te,de,Me,Fe){var tt=.5,Dt=Dr([te,de],[Me,Fe],tt);return(0,ce.__spreadArray)((0,ce.__spreadArray)([],Dt,!0),[Me,Fe,Me,Fe],!1)};function Ve(te,de){var Me=te[0],Fe=te.slice(1).map(Number),tt=Fe[0],Dt=Fe[1],Rt,ur=de.x1,Pr=de.y1,Rr=de.x,hn=de.y;switch("TQ".includes(Me)||(de.qx=null,de.qy=null),Me){case"M":return de.x=tt,de.y=Dt,te;case"A":return Rt=[ur,Pr].concat(Fe),["C"].concat(mr(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5],Rt[6],Rt[7],Rt[8],Rt[9]));case"Q":return de.qx=tt,de.qy=Dt,Rt=[ur,Pr].concat(Fe),["C"].concat(tn(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5]));case"L":return["C"].concat(Dn(ur,Pr,tt,Dt));case"Z":return ur===Rr&&Pr===hn?["C",ur,Pr,Rr,hn,Rr,hn]:["C"].concat(Dn(ur,Pr,Rr,hn));default:}return te}function Nr(te,de){if(de===void 0&&(de=!1),jt(te)){var Me=[].concat(te);return de?[Me,[]]:Me}for(var Fe=$t(te),tt=(0,ce.__assign)({},De),Dt=[],Rt="",ur=Fe.length,Pr,Rr,hn=[],pn=0;pn<ur;pn+=1){Fe[pn]&&(Rt=Fe[pn][0]),Dt[pn]=Rt;var on=Ve(Fe[pn],tt);Fe[pn]=on,Ie(Fe,Dt,pn),ur=Fe.length,Rt==="Z"&&hn.push(pn),Pr=Fe[pn],Rr=Pr.length,tt.x1=+Pr[Rr-2],tt.y1=+Pr[Rr-1],tt.x2=+Pr[Rr-4]||tt.x1,tt.y2=+Pr[Rr-3]||tt.y1}return de?[Fe,hn]:Fe}function Fn(te){return te.map(function(de){return Array.isArray(de)?[].concat(de):de})}function Vn(te){var de=te.slice(1).map(function(Me,Fe,tt){return Fe?tt[Fe-1].slice(-2).concat(Me.slice(1)):te[0].slice(1).concat(Me.slice(1))}).map(function(Me){return Me.map(function(Fe,tt){return Me[Me.length-tt-2*(1-tt%2)]})}).reverse();return[["M"].concat(de[0].slice(0,2))].concat(de.map(function(Me){return["C"].concat(Me.slice(2))}))}function va(te,de){return Math.sqrt((te[0]-de[0])*(te[0]-de[0])+(te[1]-de[1])*(te[1]-de[1]))}function aa(te,de,Me,Fe,tt){var Dt=va([te,de],[Me,Fe]),Rt={x:0,y:0};if(typeof tt=="number")if(tt<=0)Rt={x:te,y:de};else if(tt>=Dt)Rt={x:Me,y:Fe};else{var ur=Dr([te,de],[Me,Fe],tt/Dt),Pr=ur[0],Rr=ur[1];Rt={x:Pr,y:Rr}}return{length:Dt,point:Rt,min:{x:Math.min(te,Me),y:Math.min(de,Fe)},max:{x:Math.max(te,Me),y:Math.max(de,Fe)}}}function Ya(te,de){var Me=te.x,Fe=te.y,tt=de.x,Dt=de.y,Rt=Me*tt+Fe*Dt,ur=Math.sqrt((Math.pow(Me,2)+Math.pow(Fe,2))*(Math.pow(tt,2)+Math.pow(Dt,2))),Pr=Me*Dt-Fe*tt<0?-1:1,Rr=Pr*Math.acos(Rt/ur);return Rr}function la(te,de,Me,Fe,tt,Dt,Rt,ur,Pr,Rr){var hn=Math.abs,pn=Math.sin,on=Math.cos,Yn=Math.sqrt,sa=Math.PI,ta=hn(Me),In=hn(Fe),ba=(tt%360+360)%360,Mn=ba*(sa/180);if(te===ur&&de===Pr)return{x:te,y:de};if(ta===0||In===0)return aa(te,de,ur,Pr,Rr).point;var ha=(te-ur)/2,Zn=(de-Pr)/2,Cn={x:on(Mn)*ha+pn(Mn)*Zn,y:-pn(Mn)*ha+on(Mn)*Zn},fa=Math.pow(Cn.x,2)/Math.pow(ta,2)+Math.pow(Cn.y,2)/Math.pow(In,2);fa>1&&(ta*=Yn(fa),In*=Yn(fa));var Fa=Math.pow(ta,2)*Math.pow(In,2)-Math.pow(ta,2)*Math.pow(Cn.y,2)-Math.pow(In,2)*Math.pow(Cn.x,2),ii=Math.pow(ta,2)*Math.pow(Cn.y,2)+Math.pow(In,2)*Math.pow(Cn.x,2),Ga=Fa/ii;Ga=Ga<0?0:Ga;var Na=(Dt!==Rt?1:-1)*Yn(Ga),si={x:Na*(ta*Cn.y/In),y:Na*(-(In*Cn.x)/ta)},Oi={x:on(Mn)*si.x-pn(Mn)*si.y+(te+ur)/2,y:pn(Mn)*si.x+on(Mn)*si.y+(de+Pr)/2},gi={x:(Cn.x-si.x)/ta,y:(Cn.y-si.y)/In},Iu=Ya({x:1,y:0},gi),kf={x:(-Cn.x-si.x)/ta,y:(-Cn.y-si.y)/In},Ps=Ya(gi,kf);!Rt&&Ps>0?Ps-=2*sa:Rt&&Ps<0&&(Ps+=2*sa),Ps%=2*sa;var su=Iu+Ps*Rr,Yo=ta*on(su),Hu=In*pn(su),Au={x:on(Mn)*Yo-pn(Mn)*Hu+Oi.x,y:pn(Mn)*Yo+on(Mn)*Hu+Oi.y};return Au}function Qa(te,de,Me,Fe,tt,Dt,Rt,ur,Pr,Rr,hn){var pn,on=hn.bbox,Yn=on===void 0?!0:on,sa=hn.length,ta=sa===void 0?!0:sa,In=hn.sampleSize,ba=In===void 0?30:In,Mn=typeof Rr=="number",ha=te,Zn=de,Cn=0,fa=[ha,Zn,Cn],Fa=[ha,Zn],ii=0,Ga={x:0,y:0},Na=[{x:ha,y:Zn}];Mn&&Rr<=0&&(Ga={x:ha,y:Zn});for(var si=0;si<=ba;si+=1){if(ii=si/ba,pn=la(te,de,Me,Fe,tt,Dt,Rt,ur,Pr,ii),ha=pn.x,Zn=pn.y,Yn&&Na.push({x:ha,y:Zn}),ta&&(Cn+=va(Fa,[ha,Zn])),Fa=[ha,Zn],Mn&&Cn>=Rr&&Rr>fa[2]){var Oi=(Cn-Rr)/(Cn-fa[2]);Ga={x:Fa[0]*(1-Oi)+fa[0]*Oi,y:Fa[1]*(1-Oi)+fa[1]*Oi}}fa=[ha,Zn,Cn]}return Mn&&Rr>=Cn&&(Ga={x:ur,y:Pr}),{length:Cn,point:Ga,min:{x:Math.min.apply(null,Na.map(function(gi){return gi.x})),y:Math.min.apply(null,Na.map(function(gi){return gi.y}))},max:{x:Math.max.apply(null,Na.map(function(gi){return gi.x})),y:Math.max.apply(null,Na.map(function(gi){return gi.y}))}}}function Wa(te,de,Me,Fe,tt,Dt,Rt,ur,Pr){var Rr=1-Pr;return{x:Math.pow(Rr,3)*te+3*Math.pow(Rr,2)*Pr*Me+3*Rr*Math.pow(Pr,2)*tt+Math.pow(Pr,3)*Rt,y:Math.pow(Rr,3)*de+3*Math.pow(Rr,2)*Pr*Fe+3*Rr*Math.pow(Pr,2)*Dt+Math.pow(Pr,3)*ur}}function Da(te,de,Me,Fe,tt,Dt,Rt,ur,Pr,Rr){var hn,pn=Rr.bbox,on=pn===void 0?!0:pn,Yn=Rr.length,sa=Yn===void 0?!0:Yn,ta=Rr.sampleSize,In=ta===void 0?10:ta,ba=typeof Pr=="number",Mn=te,ha=de,Zn=0,Cn=[Mn,ha,Zn],fa=[Mn,ha],Fa=0,ii={x:0,y:0},Ga=[{x:Mn,y:ha}];ba&&Pr<=0&&(ii={x:Mn,y:ha});for(var Na=0;Na<=In;Na+=1){if(Fa=Na/In,hn=Wa(te,de,Me,Fe,tt,Dt,Rt,ur,Fa),Mn=hn.x,ha=hn.y,on&&Ga.push({x:Mn,y:ha}),sa&&(Zn+=va(fa,[Mn,ha])),fa=[Mn,ha],ba&&Zn>=Pr&&Pr>Cn[2]){var si=(Zn-Pr)/(Zn-Cn[2]);ii={x:fa[0]*(1-si)+Cn[0]*si,y:fa[1]*(1-si)+Cn[1]*si}}Cn=[Mn,ha,Zn]}return ba&&Pr>=Zn&&(ii={x:Rt,y:ur}),{length:Zn,point:ii,min:{x:Math.min.apply(null,Ga.map(function(Oi){return Oi.x})),y:Math.min.apply(null,Ga.map(function(Oi){return Oi.y}))},max:{x:Math.max.apply(null,Ga.map(function(Oi){return Oi.x})),y:Math.max.apply(null,Ga.map(function(Oi){return Oi.y}))}}}function ar(te,de,Me,Fe,tt,Dt,Rt){var ur=1-Rt;return{x:Math.pow(ur,2)*te+2*ur*Rt*Me+Math.pow(Rt,2)*tt,y:Math.pow(ur,2)*de+2*ur*Rt*Fe+Math.pow(Rt,2)*Dt}}function Or(te,de,Me,Fe,tt,Dt,Rt,ur){var Pr,Rr=ur.bbox,hn=Rr===void 0?!0:Rr,pn=ur.length,on=pn===void 0?!0:pn,Yn=ur.sampleSize,sa=Yn===void 0?10:Yn,ta=typeof Rt=="number",In=te,ba=de,Mn=0,ha=[In,ba,Mn],Zn=[In,ba],Cn=0,fa={x:0,y:0},Fa=[{x:In,y:ba}];ta&&Rt<=0&&(fa={x:In,y:ba});for(var ii=0;ii<=sa;ii+=1){if(Cn=ii/sa,Pr=ar(te,de,Me,Fe,tt,Dt,Cn),In=Pr.x,ba=Pr.y,hn&&Fa.push({x:In,y:ba}),on&&(Mn+=va(Zn,[In,ba])),Zn=[In,ba],ta&&Mn>=Rt&&Rt>ha[2]){var Ga=(Mn-Rt)/(Mn-ha[2]);fa={x:Zn[0]*(1-Ga)+ha[0]*Ga,y:Zn[1]*(1-Ga)+ha[1]*Ga}}ha=[In,ba,Mn]}return ta&&Rt>=Mn&&(fa={x:tt,y:Dt}),{length:Mn,point:fa,min:{x:Math.min.apply(null,Fa.map(function(Na){return Na.x})),y:Math.min.apply(null,Fa.map(function(Na){return Na.y}))},max:{x:Math.max.apply(null,Fa.map(function(Na){return Na.x})),y:Math.max.apply(null,Fa.map(function(Na){return Na.y}))}}}function Qr(te,de,Me){for(var Fe,tt,Dt,Rt,ur,Pr,Rr=$t(te),hn=typeof de=="number",pn,on=[],Yn,sa=0,ta=0,In=0,ba=0,Mn,ha=[],Zn=[],Cn=0,fa={x:0,y:0},Fa=fa,ii=fa,Ga=fa,Na=0,si=0,Oi=Rr.length;si<Oi;si+=1)Mn=Rr[si],Yn=Mn[0],pn=Yn==="M",on=pn?on:[sa,ta].concat(Mn.slice(1)),pn?(In=Mn[1],ba=Mn[2],fa={x:In,y:ba},Fa=fa,Cn=0,hn&&de<.001&&(Ga=fa)):Yn==="L"?(Fe=aa(on[0],on[1],on[2],on[3],(de||0)-Na),Cn=Fe.length,fa=Fe.min,Fa=Fe.max,ii=Fe.point):Yn==="A"?(tt=Qa(on[0],on[1],on[2],on[3],on[4],on[5],on[6],on[7],on[8],(de||0)-Na,Me||{}),Cn=tt.length,fa=tt.min,Fa=tt.max,ii=tt.point):Yn==="C"?(Dt=Da(on[0],on[1],on[2],on[3],on[4],on[5],on[6],on[7],(de||0)-Na,Me||{}),Cn=Dt.length,fa=Dt.min,Fa=Dt.max,ii=Dt.point):Yn==="Q"?(Rt=Or(on[0],on[1],on[2],on[3],on[4],on[5],(de||0)-Na,Me||{}),Cn=Rt.length,fa=Rt.min,Fa=Rt.max,ii=Rt.point):Yn==="Z"&&(on=[sa,ta,In,ba],ur=aa(on[0],on[1],on[2],on[3],(de||0)-Na),Cn=ur.length,fa=ur.min,Fa=ur.max,ii=ur.point),hn&&Na<de&&Na+Cn>=de&&(Ga=ii),Zn.push(Fa),ha.push(fa),Na+=Cn,Pr=Yn!=="Z"?Mn.slice(-2):[In,ba],sa=Pr[0],ta=Pr[1];return hn&&de>=Na&&(Ga={x:sa,y:ta}),{length:Na,point:Ga,min:{x:Math.min.apply(null,ha.map(function(gi){return gi.x})),y:Math.min.apply(null,ha.map(function(gi){return gi.y}))},max:{x:Math.max.apply(null,Zn.map(function(gi){return gi.x})),y:Math.max.apply(null,Zn.map(function(gi){return gi.y}))}}}function wn(te,de){if(!te)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var Me=Qr(te,void 0,(0,ce.__assign)((0,ce.__assign)({},de),{length:!1})),Fe=Me.min,tt=Fe.x,Dt=Fe.y,Rt=Me.max,ur=Rt.x,Pr=Rt.y,Rr=ur-tt,hn=Pr-Dt;return{width:Rr,height:hn,x:tt,y:Dt,x2:ur,y2:Pr,cx:tt+Rr/2,cy:Dt+hn/2,cz:Math.max(Rr,hn)+Math.min(Rr,hn)/2}}function On(te,de){return Qr(te,void 0,(0,ce.__assign)((0,ce.__assign)({},de),{bbox:!1,length:!0})).length}function Gn(te,de){if(!te)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var Me=Qr(te,void 0,(0,ce.__assign)((0,ce.__assign)({},de),{bbox:!0,length:!0})),Fe=Me.length,tt=Me.min,Dt=tt.x,Rt=tt.y,ur=Me.max,Pr=ur.x,Rr=ur.y,hn=Pr-Dt,pn=Rr-Rt;return{length:Fe,width:hn,height:pn,x:Dt,y:Rt,x2:Pr,y2:Rr,cx:Dt+hn/2,cy:Rt+pn/2,cz:Math.max(hn,pn)+Math.min(hn,pn)/2}}function qn(te){var de=te.length,Me=de-1;return te.map(function(Fe,tt){return te.map(function(Dt,Rt){var ur=tt+Rt,Pr;return Rt===0||te[ur]&&te[ur][0]==="M"?(Pr=te[ur],["M"].concat(Pr.slice(-2))):(ur>=de&&(ur-=Me),te[ur])})})}function oa(te,de){var Me=te.length-1,Fe=[],tt=0,Dt=0,Rt=qn(te);return Rt.forEach(function(ur,Pr){te.slice(1).forEach(function(Rr,hn){Dt+=va(te[(Pr+hn)%Me].slice(-2),de[hn%Me].slice(-2))}),Fe[Pr]=Dt,Dt=0}),tt=Fe.indexOf(Math.min.apply(null,Fe)),Rt[tt]}function ya(te,de,Me,Fe,tt,Dt,Rt,ur){return 3*((ur-de)*(Me+tt)-(Rt-te)*(Fe+Dt)+Fe*(te-tt)-Me*(de-Dt)+ur*(tt+te/3)-Rt*(Dt+de/3))/20}function Ka(te){var de=0,Me=0,Fe=0;return Nr(te).map(function(tt){var Dt;switch(tt[0]){case"M":return de=tt[1],Me=tt[2],0;default:var Rt=tt.slice(1),ur=Rt[0],Pr=Rt[1],Rr=Rt[2],hn=Rt[3],pn=Rt[4],on=Rt[5];return Fe=ya(de,Me,ur,Pr,Rr,hn,pn,on),Dt=tt.slice(-2),de=Dt[0],Me=Dt[1],Fe}}).reduce(function(tt,Dt){return tt+Dt},0)}function mn(te){return Ka(te)>=0}function jn(te,de,Me){return Qr(te,de,(0,ce.__assign)((0,ce.__assign)({},Me),{bbox:!1,length:!0})).point}function Jn(te,de){var Me=yt(te);if(typeof Me=="string")throw TypeError(Me);var Fe=Me.slice(),tt=On(Fe),Dt=Fe.length-1,Rt=0,ur=0,Pr=Me[0],Rr=Pr.slice(-2),hn=Rr[0],pn=Rr[1],on={x:hn,y:pn};if(Dt<=0||!de||!Number.isFinite(de))return{segment:Pr,index:0,length:ur,point:on,lengthAtSegment:Rt};if(de>=tt)return Fe=Me.slice(0,-1),Rt=On(Fe),ur=tt-Rt,{segment:Me[Dt],index:Dt,length:ur,lengthAtSegment:Rt};for(var Yn=[];Dt>0;)Pr=Fe[Dt],Fe=Fe.slice(0,-1),Rt=On(Fe),ur=tt-Rt,tt=Rt,Yn.push({segment:Pr,index:Dt,length:ur,lengthAtSegment:Rt}),Dt-=1;return Yn.find(function(sa){var ta=sa.lengthAtSegment;return ta<=de})}function Ln(te,de){for(var Me=yt(te),Fe=$t(Me),tt=On(Me),Dt=function(Cn){var fa=Cn.x-de.x,Fa=Cn.y-de.y;return fa*fa+Fa*Fa},Rt=8,ur,Pr=0,Rr,hn=0,pn=1/0,on=0;on<=tt;on+=Rt)ur=jn(Fe,on),Pr=Dt(ur),Pr<pn&&(Rr=ur,hn=on,pn=Pr);Rt/=2;for(var Yn,sa,ta=0,In=0,ba=0,Mn=0;Rt>.5;)ta=hn-Rt,Yn=jn(Fe,ta),ba=Dt(Yn),In=hn+Rt,sa=jn(Fe,In),Mn=Dt(sa),ta>=0&&ba<pn?(Rr=Yn,hn=ta,pn=ba):In<=tt&&Mn<pn?(Rr=sa,hn=In,pn=Mn):Rt/=2;var ha=Jn(Me,hn),Zn=Math.sqrt(pn);return{closest:Rr,distance:Zn,segment:ha}}function ma(te,de){var Me=Ln(te,de).distance;return Math.abs(Me)<.001}function Z(te,de){de===void 0&&(de=.5);var Me=te.slice(0,2),Fe=te.slice(2,4),tt=te.slice(4,6),Dt=te.slice(6,8),Rt=Dr(Me,Fe,de),ur=Dr(Fe,tt,de),Pr=Dr(tt,Dt,de),Rr=Dr(Rt,ur,de),hn=Dr(ur,Pr,de),pn=Dr(Rr,hn,de);return[["C"].concat(Rt,Rr,pn),["C"].concat(hn,Pr,Dt)]}function Gt(te){return te.map(function(de,Me,Fe){var tt=Me&&Fe[Me-1].slice(-2).concat(de.slice(1)),Dt=Me?Da(tt[0],tt[1],tt[2],tt[3],tt[4],tt[5],tt[6],tt[7],tt[8],{bbox:!1}).length:0,Rt;return Me?Rt=Dt?Z(tt):[de,de]:Rt=[de],{s:de,ss:Rt,l:Dt}})}function lt(te,de,Me){var Fe=Gt(te),tt=Gt(de),Dt=Fe.length,Rt=tt.length,ur=Fe.filter(function(In){return In.l}).length,Pr=tt.filter(function(In){return In.l}).length,Rr=Fe.filter(function(In){return In.l}).reduce(function(In,ba){var Mn=ba.l;return In+Mn},0)/ur||0,hn=tt.filter(function(In){return In.l}).reduce(function(In,ba){var Mn=ba.l;return In+Mn},0)/Pr||0,pn=Me||Math.max(Dt,Rt),on=[Rr,hn],Yn=[pn-Dt,pn-Rt],sa=0,ta=[Fe,tt].map(function(In,ba){return In.l===pn?In.map(function(Mn){return Mn.s}):In.map(function(Mn,ha){return sa=ha&&Yn[ba]&&Mn.l>=on[ba],Yn[ba]-=sa?1:0,sa?Mn.ss:[Mn.s]}).flat()});return ta[0].length===ta[1].length?ta:lt(ta[0],ta[1],pn)}var Ht=function(te){return te!==null&&typeof te!="function"&&isFinite(te.length)},Ft=Ht,Ir=function(te,de){return Ft(te)?te.indexOf(de)>-1:!1},Sr=Ir,nn=function(te,de){if(!Ft(te))return te;for(var Me=[],Fe=0;Fe<te.length;Fe++){var tt=te[Fe];de(tt,Fe)&&Me.push(tt)}return Me},an=nn,qr=function(te,de){return de===void 0&&(de=[]),an(te,function(Me){return!Sr(de,Me)})},le=qr,ge=function(te){return typeof te=="function"},B=function(te){return te==null},_=B,M={}.toString,$=function(te,de){return M.call(te)==="[object "+de+"]"},Ee=$,Ne=function(te){return Array.isArray?Array.isArray(te):Ee(te,"Array")},Le=function(te){var de=typeof te;return te!==null&&de==="object"||de==="function"};function Ye(te,de){if(te){var Me;if(Ne(te))for(var Fe=0,tt=te.length;Fe<tt&&(Me=de(te[Fe],Fe),Me!==!1);Fe++);else if(Le(te)){for(var Dt in te)if(te.hasOwnProperty(Dt)&&(Me=de(te[Dt],Dt),Me===!1))break}}}var Ot=Ye,Et=Object.keys?function(te){return Object.keys(te)}:function(te){var de=[];return Ot(te,function(Me,Fe){ge(te)&&Fe==="prototype"||de.push(Fe)}),de},Zt=Et;function Lr(te,de){var Me=Zt(de),Fe=Me.length;if(_(te))return!Fe;for(var tt=0;tt<Fe;tt+=1){var Dt=Me[tt];if(de[Dt]!==te[Dt]||!(Dt in te))return!1}return!0}var or=Lr,$r=function(te){return typeof te=="object"&&te!==null},Sn=$r,kt=function(te){if(!Sn(te)||!Ee(te,"Object"))return!1;if(Object.getPrototypeOf(te)===null)return!0;for(var de=te;Object.getPrototypeOf(de)!==null;)de=Object.getPrototypeOf(de);return Object.getPrototypeOf(te)===de},nr=kt;function _r(te,de){if(!Ne(te))return null;var Me;if(ge(de)&&(Me=de),nr(de)&&(Me=function(tt){return or(tt,de)}),Me){for(var Fe=0;Fe<te.length;Fe+=1)if(Me(te[Fe]))return te[Fe]}return null}var Fr=_r;function He(te,de,Me){Me===void 0&&(Me=0);for(var Fe=Me;Fe<te.length;Fe++)if(de(te[Fe],Fe))return Fe;return-1}var Ae=He,Qe=function(te,de){for(var Me=null,Fe=0;Fe<te.length;Fe++){var tt=te[Fe],Dt=tt[de];if(!_(Dt)){Ne(Dt)?Me=Dt[0]:Me=Dt;break}}return Me},ft=Qe,ut=function(te){if(!Ne(te))return[];for(var de=[],Me=0;Me<te.length;Me++)de=de.concat(te[Me]);return de},St=ut,Qt=function(te,de){if(de===void 0&&(de=[]),!Ne(te))de.push(te);else for(var Me=0;Me<te.length;Me+=1)Qt(te[Me],de);return de},qt=Qt,Xr=function(te){if(Ne(te))return te.reduce(function(de,Me){return Math.max(de,Me)},te[0])},vn=function(te){if(Ne(te))return te.reduce(function(de,Me){return Math.min(de,Me)},te[0])},fn=function(te){var de=te.filter(function(Rt){return!isNaN(Rt)});if(!de.length)return{min:0,max:0};if(Ne(te[0])){for(var Me=[],Fe=0;Fe<te.length;Fe++)Me=Me.concat(te[Fe]);de=Me}var tt=Xr(de),Dt=vn(de);return{min:Dt,max:tt}},Hn=fn,kn=Array.prototype,da=kn.splice,ka=kn.indexOf,Ra=function(te){for(var de=[],Me=1;Me<arguments.length;Me++)de[Me-1]=arguments[Me];for(var Fe=0;Fe<de.length;Fe++)for(var tt=de[Fe],Dt=-1;(Dt=ka.call(te,tt))>-1;)da.call(te,Dt,1);return te},Aa=Ra,Eo=Array.prototype.splice,_i=function(de,Me){if(!Ft(de))return[];for(var Fe=de?Me.length:0,tt=Fe-1;Fe--;){var Dt=void 0,Rt=Me[Fe];(Fe===tt||Rt!==Dt)&&(Dt=Rt,Eo.call(de,Rt,1))}return de},qa=_i,Qi=function(te,de,Me){if(!Ne(te)&&!nr(te))return te;var Fe=Me;return Ot(te,function(tt,Dt){Fe=de(Fe,tt,Dt)}),Fe},fs=Qi,oo=function(te,de){var Me=[];if(!Ft(te))return Me;for(var Fe=-1,tt=[],Dt=te.length;++Fe<Dt;){var Rt=te[Fe];de(Rt,Fe,te)&&(Me.push(Rt),tt.push(Fe))}return qa(te,tt),Me},so=oo,Tr=function(te){return Ee(te,"String")};function ro(te,de){var Me;if(ge(de))Me=function(tt,Dt){return de(tt)-de(Dt)};else{var Fe=[];Tr(de)?Fe.push(de):Ne(de)&&(Fe=de),Me=function(tt,Dt){for(var Rt=0;Rt<Fe.length;Rt+=1){var ur=Fe[Rt];if(tt[ur]>Dt[ur])return 1;if(tt[ur]<Dt[ur])return-1}return 0}}return te.sort(Me),te}var cs=ro;function ja(te,de){de===void 0&&(de=new Map);var Me=[];if(Array.isArray(te))for(var Fe=0,tt=te.length;Fe<tt;Fe++){var Dt=te[Fe];de.has(Dt)||(Me.push(Dt),de.set(Dt,!0))}return Me}var bo=function(){for(var te=[],de=0;de<arguments.length;de++)te[de]=arguments[de];return ja([].concat.apply([],te))},Ho=bo,Fo=function(te,de){for(var Me=[],Fe={},tt=0;tt<te.length;tt++){var Dt=te[tt],Rt=Dt[de];if(!_(Rt)){Ne(Rt)||(Rt=[Rt]);for(var ur=0;ur<Rt.length;ur++){var Pr=Rt[ur];Fe[Pr]||(Me.push(Pr),Fe[Pr]=!0)}}}return Me};function Ui(te){if(Ft(te))return te[0]}function Ni(te){if(Ft(te)){var de=te;return de[de.length-1]}}function _s(te,de){return Ne(te)||Tr(te)?te[0]===de:!1}var ls=_s;function mi(te,de){return Ne(te)||Tr(te)?te[te.length-1]===de:!1}var qi=mi,Ms=function(te,de){for(var Me=0;Me<te.length;Me++)if(!de(te[Me],Me))return!1;return!0},Cs=Ms,Lo=function(te,de){for(var Me=0;Me<te.length;Me++)if(de(te[Me],Me))return!0;return!1},uo=Lo,Ts=Object.prototype.hasOwnProperty;function ds(te,de){if(!de||!Ne(te))return{};for(var Me={},Fe=ge(de)?de:function(ur){return ur[de]},tt,Dt=0;Dt<te.length;Dt++){var Rt=te[Dt];tt=Fe(Rt),Ts.call(Me,tt)?Me[tt].push(Rt):Me[tt]=[Rt]}return Me}var Is=ds;function Nn(te,de){if(!de)return{0:te};if(!ge(de)){var Me=Ne(de)?de:de.replace(/\s+/g,"").split("*");de=function(Fe){for(var tt="_",Dt=0,Rt=Me.length;Dt<Rt;Dt++)tt+=Fe[Me[Dt]]&&Fe[Me[Dt]].toString();return tt}}return Is(te,de)}var Ji=function(te,de){if(!de)return[te];var Me=Nn(te,de),Fe=[];for(var tt in Me)Fe.push(Me[tt]);return Fe};function fo(te,de){return te["_wrap_"+de]}var Ii=fo;function As(te,de){if(te["_wrap_"+de])return te["_wrap_"+de];var Me=function(Fe){te[de](Fe)};return te["_wrap_"+de]=Me,Me}var co=As,Bi={};function es(te){var de=Bi[te];if(!de){for(var Me=te.toString(16),Fe=Me.length;Fe<6;Fe++)Me="0"+Me;de="#"+Me,Bi[te]=de}return de}var hs=es;function Go(te){var de=0,Me=0,Fe=0,tt=0;return Ne(te)?te.length===1?de=Me=Fe=tt=te[0]:te.length===2?(de=Fe=te[0],Me=tt=te[1]):te.length===3?(de=te[0],Me=tt=te[1],Fe=te[2]):(de=te[0],Me=te[1],Fe=te[2],tt=te[3]):de=Me=Fe=tt=te,{r1:de,r2:Me,r3:Fe,r4:tt}}var Oa=Go,Zo=function(te,de,Me){return te<de?de:te>Me?Me:te},no=Zo,Wi=function(te,de){var Me=de.toString(),Fe=Me.indexOf(".");if(Fe===-1)return Math.round(te);var tt=Me.substr(Fe+1).length;return tt>20&&(tt=20),parseFloat(te.toFixed(tt))},ts=Wi,vs=function(te){return Ee(te,"Number")},Ja=vs,eo=function(te){return Ja(te)&&te%1!==0},fi=eo,Os=function(te){return Ja(te)&&te%2===0},lo=Os,rs=Number.isInteger?Number.isInteger:function(te){return Ja(te)&&te%1===0},Do=rs,ji=function(te){return Ja(te)&&te<0},zo=ji,ho=1e-5;function Uo(te,de,Me){return Me===void 0&&(Me=ho),Math.abs(te-de)<Me}var xo=function(te){return Ja(te)&&te%2!==0},Ma=xo,Ai=function(te){return Ja(te)&&te>0},Hi=Ai,En=function(te,de){if(Ne(te)){for(var Me,Fe=-1/0,tt=0;tt<te.length;tt++){var Dt=te[tt],Rt=ge(de)?de(Dt):Dt[de];Rt>Fe&&(Me=Dt,Fe=Rt)}return Me}},cn=function(te,de){if(Ne(te)){for(var Me,Fe=1/0,tt=0;tt<te.length;tt++){var Dt=te[tt],Rt=ge(de)?de(Dt):Dt[de];Rt<Fe&&(Me=Dt,Fe=Rt)}return Me}},Wo=function(te,de){return(te%de+de)%de},oi=Wo,No=180/Math.PI,ao=function(te){return No*te},Xa=ao,ci=parseInt,ns=Math.PI/180,gs=function(te){return ns*te},Bs=gs,Eu=Ot,Fs=function(te,de){return te.hasOwnProperty(de)},li=Fs,Xo=Object.values?function(te){return Object.values(te)}:function(te){var de=[];return Ot(te,function(Me,Fe){ge(te)&&Fe==="prototype"||de.push(Me)}),de},bu=Xo,ru=function(te,de){return Sr(bu(te),de)},as=function(te){return _(te)?"":te.toString()},Gs=function(te){return as(te).toLowerCase()},Ls=Gs,Ds=function(te){var de=as(te);return de.charAt(0).toLowerCase()+de.substring(1)},xu=Ds;function io(te,de){return!te||!de?te:te.replace(/\\?\{([^{}]+)\}/g,function(Me,Fe){return Me.charAt(0)==="\\"?Me.slice(1):de[Fe]===void 0?"":de[Fe]})}var is=io,zs=function(te){return as(te).toUpperCase()},wu=zs,nu=function(te){var de=as(te);return de.charAt(0).toUpperCase()+de.substring(1)},Us=nu,ps={}.toString,Ws=function(te){return ps.call(te).replace(/^\[object /,"").replace(/]$/,"")},Xs=Ws,Vs=function(te){return Ee(te,"Arguments")},Su=Vs,_u=function(te){return Ee(te,"Boolean")},Po=_u,Ko=function(te){return Ee(te,"Date")},Mu=Ko,ys=function(te){return Ee(te,"Error")},vo=ys;function Wu(te){return Ja(te)&&isFinite(te)}var Cu=function(te){return te===null},Xu=Cu,au=Object.prototype,uf=function(te){var de=te&&te.constructor,Me=typeof de=="function"&&de.prototype||au;return te===Me},c=uf,I=function(te){return Ee(te,"RegExp")},fe=I,be=function(te){return te===void 0},Oe=be,ze=function(te){return te instanceof Element||te instanceof Document},Ue=ze;function nt(te){var de=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Me){return setTimeout(Me,16)};return de(te)}function st(te){var de=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;de(te)}function bt(te,de){for(var Me in de)de.hasOwnProperty(Me)&&Me!=="constructor"&&de[Me]!==void 0&&(te[Me]=de[Me])}function It(te,de,Me,Fe){return de&&bt(te,de),Me&&bt(te,Me),Fe&&bt(te,Fe),te}var fr=function(){for(var te=[],de=0;de<arguments.length;de++)te[de]=arguments[de];for(var Me=te[0],Fe=1;Fe<te.length;Fe++){var tt=te[Fe];ge(tt)&&(tt=tt.prototype),It(Me.prototype,tt)}},vr=fr,lr=function(te){if(typeof te!="object"||te===null)return te;var de;if(Ne(te)){de=[];for(var Me=0,Fe=te.length;Me<Fe;Me++)typeof te[Me]=="object"&&te[Me]!=null?de[Me]=lr(te[Me]):de[Me]=te[Me]}else{de={};for(var tt in te)typeof te[tt]=="object"&&te[tt]!=null?de[tt]=lr(te[tt]):de[tt]=te[tt]}return de},Ur=lr;function Zr(te,de,Me){var Fe;return function(){var tt=this,Dt=arguments,Rt=function(){Fe=null,Me||te.apply(tt,Dt)},ur=Me&&!Fe;clearTimeout(Fe),Fe=setTimeout(Rt,de),ur&&te.apply(tt,Dt)}}var Er=Zr,sn=function(te,de){if(!ge(te))throw new TypeError("Expected a function");var Me=function(){for(var Fe=[],tt=0;tt<arguments.length;tt++)Fe[tt]=arguments[tt];var Dt=de?de.apply(this,Fe):Fe[0],Rt=Me.cache;if(Rt.has(Dt))return Rt.get(Dt);var ur=te.apply(this,Fe);return Rt.set(Dt,ur),ur};return Me.cache=new Map,Me},Kn=5;function ua(te,de){if(Object.hasOwn)return Object.hasOwn(te,de);if(te==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(te),de)}function $n(te,de,Me,Fe){Me=Me||0,Fe=Fe||Kn;for(var tt in de)if(ua(de,tt)){var Dt=de[tt];Dt!==null&&nr(Dt)?(nr(te[tt])||(te[tt]={}),Me<Fe?$n(te[tt],Dt,Me+1,Fe):te[tt]=de[tt]):Ne(Dt)?(te[tt]=[],te[tt]=te[tt].concat(Dt)):Dt!==void 0&&(te[tt]=Dt)}}var Rn=function(te){for(var de=[],Me=1;Me<arguments.length;Me++)de[Me-1]=arguments[Me];for(var Fe=0;Fe<de.length;Fe+=1)$n(te,de[Fe]);return te},Xn=Rn,Mi=function(te,de,Me,Fe){ge(de)||(Me=de,de=te,te=function(){});var tt=Object.create?function(Rt,ur){return Object.create(Rt,{constructor:{value:ur}})}:function(Rt,ur){function Pr(){}Pr.prototype=Rt;var Rr=new Pr;return Rr.constructor=ur,Rr},Dt=tt(de.prototype,te);return te.prototype=It(Dt,te.prototype),te.superclass=tt(de.prototype,de),It(Dt,Me),It(te,Fe),te},Ei=Mi,ai=function(te,de){if(!Ft(te))return-1;var Me=Array.prototype.indexOf;if(Me)return Me.call(te,de);for(var Fe=-1,tt=0;tt<te.length;tt++)if(te[tt]===de){Fe=tt;break}return Fe},di=ai,hi=Object.prototype.hasOwnProperty;function vi(te){if(_(te))return!0;if(Ft(te))return!te.length;var de=Xs(te);if(de==="Map"||de==="Set")return!te.size;if(c(te))return!Object.keys(te).length;for(var Me in te)if(hi.call(te,Me))return!1;return!0}var Pi=vi,Ea=function(te,de){if(te===de)return!0;if(!te||!de||Tr(te)||Tr(de))return!1;if(Ft(te)||Ft(de)){if(te.length!==de.length)return!1;for(var Me=!0,Fe=0;Fe<te.length&&(Me=Ea(te[Fe],de[Fe]),!!Me);Fe++);return Me}if(Sn(te)||Sn(de)){var tt=Object.keys(te),Dt=Object.keys(de);if(tt.length!==Dt.length)return!1;for(var Me=!0,Fe=0;Fe<tt.length&&(Me=Ea(te[tt[Fe]],de[tt[Fe]]),!!Me);Fe++);return Me}return!1},Ha=Ea,$o=function(te,de,Me){return ge(Me)?!!Me(te,de):Ha(te,de)},Vo=function(te,de){if(!Ft(te))return te;for(var Me=[],Fe=0;Fe<te.length;Fe++){var tt=te[Fe];Me.push(de(tt,Fe))}return Me},wo=Vo,os=function(te){return te},Of=function(te,de){de===void 0&&(de=os);var Me={};return Le(te)&&!_(te)&&Object.keys(te).forEach(function(Fe){Me[Fe]=de(te[Fe],Fe)}),Me},Lf=function(te,de,Me){for(var Fe=0,tt=Tr(de)?de.split("."):de;te&&Fe<tt.length;)te=te[tt[Fe++]];return te===void 0||Fe<tt.length?Me:te},ms=function(te,de,Me){var Fe=te,tt=Tr(de)?de.split("."):de;return tt.forEach(function(Dt,Rt){Rt<tt.length-1?(Le(Fe[Dt])||(Fe[Dt]=Ja(tt[Rt+1])?[]:{}),Fe=Fe[Dt]):Fe[Dt]=Me}),te},ic=Object.prototype.hasOwnProperty,oc=function(te,de){if(te===null||!nr(te))return{};var Me={};return Ot(de,function(Fe){ic.call(te,Fe)&&(Me[Fe]=te[Fe])}),Me},ff=function(te,de){return fs(te,function(Me,Fe,tt){return de.includes(tt)||(Me[tt]=Fe),Me},{})},Df=function(te,de,Me){var Fe,tt,Dt,Rt,ur=0;Me||(Me={});var Pr=function(){ur=Me.leading===!1?0:Date.now(),Fe=null,Rt=te.apply(tt,Dt),Fe||(tt=Dt=null)},Rr=function(){var hn=Date.now();!ur&&Me.leading===!1&&(ur=hn);var pn=de-(hn-ur);return tt=this,Dt=arguments,pn<=0||pn>de?(Fe&&(clearTimeout(Fe),Fe=null),ur=hn,Rt=te.apply(tt,Dt),Fe||(tt=Dt=null)):!Fe&&Me.trailing!==!1&&(Fe=setTimeout(Pr,pn)),Rt};return Rr.cancel=function(){clearTimeout(Fe),ur=0,Fe=tt=Dt=null},Rr},sc=function(te){return Ft(te)?Array.prototype.slice.call(te):[]},iu={},uc=function(te){return te=te||"g",iu[te]?iu[te]+=1:iu[te]=1,te+iu[te]},Wc=function(){},Ys=function(te){return te};function Nf(te){return _(te)?0:Ft(te)?te.length:Object.keys(te).length}var ln=function(){function te(){this.map={}}return te.prototype.has=function(de){return this.map[de]!==void 0},te.prototype.get=function(de,Me){var Fe=this.map[de];return Fe===void 0?Me:Fe},te.prototype.set=function(de,Me){this.map[de]=Me},te.prototype.clear=function(){this.map={}},te.prototype.delete=function(de){delete this.map[de]},te.prototype.size=function(){return Object.keys(this.map).length},te}(),ou=ln,Ca=1e-6;function Vu(te){return Math.abs(te)<Ca?0:te<0?-1:1}function js(te,de,Me){return(Me[0]-te[0])*(de[1]-te[1])===(de[0]-te[0])*(Me[1]-te[1])&&Math.min(te[0],de[0])<=Me[0]&&Me[0]<=Math.max(te[0],de[0])&&Math.min(te[1],de[1])<=Me[1]&&Me[1]<=Math.max(te[1],de[1])}function Ns(te,de,Me){var Fe=!1,tt=te.length;if(tt<=2)return!1;for(var Dt=0;Dt<tt;Dt++){var Rt=te[Dt],ur=te[(Dt+1)%tt];if(js(Rt,ur,[de,Me]))return!0;Vu(Rt[1]-Me)>0!=Vu(ur[1]-Me)>0&&Vu(de-(Me-Rt[1])*(Rt[0]-ur[0])/(Rt[1]-ur[1])-Rt[0])<0&&(Fe=!Fe)}return Fe}var cf=function(te,de,Me){return te>=de&&te<=Me};function Tu(te,de,Me,Fe){var tt=.001,Dt={x:Me.x-te.x,y:Me.y-te.y},Rt={x:de.x-te.x,y:de.y-te.y},ur={x:Fe.x-Me.x,y:Fe.y-Me.y},Pr=Rt.x*ur.y-Rt.y*ur.x,Rr=Pr*Pr,hn=Rt.x*Rt.x+Rt.y*Rt.y,pn=ur.x*ur.x+ur.y*ur.y,on=null;if(Rr>tt*hn*pn){var Yn=(Dt.x*ur.y-Dt.y*ur.x)/Pr,sa=(Dt.x*Rt.y-Dt.y*Rt.x)/Pr;cf(Yn,0,1)&&cf(sa,0,1)&&(on={x:te.x+Yn*Rt.x,y:te.y+Yn*Rt.y})}return on}function Yu(te){for(var de=[],Me=te.length,Fe=0;Fe<Me-1;Fe++){var tt=te[Fe],Dt=te[Fe+1];de.push({from:{x:tt[0],y:tt[1]},to:{x:Dt[0],y:Dt[1]}})}if(de.length>1){var Rt=te[0],ur=te[Me-1];de.push({from:{x:ur[0],y:ur[1]},to:{x:Rt[0],y:Rt[1]}})}return de}function lf(te,de){var Me=!1;return te.forEach(function(Fe){if(Tu(Fe.from,Fe.to,de.from,de.to))return Me=!0,!1}),Me}function Pf(te){var de=te.map(function(Fe){return Fe[0]}),Me=te.map(function(Fe){return Fe[1]});return{minX:Math.min.apply(null,de),maxX:Math.max.apply(null,de),minY:Math.min.apply(null,Me),maxY:Math.max.apply(null,Me)}}function go(te,de){return!(de.minX>te.maxX||de.maxX<te.minX||de.minY>te.maxY||de.maxY<te.minY)}function ju(te,de){if(te.length<2||de.length<2)return!1;var Me=Pf(te),Fe=Pf(de);if(!go(Me,Fe))return!1;var tt=!1;if(de.forEach(function(Pr){if(Ns(te,Pr[0],Pr[1]))return tt=!0,!1}),tt||(te.forEach(function(Pr){if(Ns(de,Pr[0],Pr[1]))return tt=!0,!1}),tt))return!0;var Dt=Yu(te),Rt=Yu(de),ur=!1;return Rt.forEach(function(Pr){if(lf(Dt,Pr))return ur=!0,!1}),ur}},31278:function(pr,U,G){"use strict";var F;F={value:!0};var Y=G(58204);function P(g,v,u){var b=[0,0,0,0,0,0,0,0,0];return Y.mat3.fromTranslation(b,u),Y.mat3.multiply(g,b,v)}F=P;function A(g,v,u){var b=[0,0,0,0,0,0,0,0,0];return Y.mat3.fromRotation(b,u),Y.mat3.multiply(g,b,v)}F=A;function N(g,v,u){var b=[0,0,0,0,0,0,0,0,0];return Y.mat3.fromScaling(b,u),Y.mat3.multiply(g,b,v)}F=N;function O(g,v,u){return Y.mat3.multiply(g,u,v)}function x(g,v){for(var u=g?[].concat(g):[1,0,0,0,1,0,0,0,1],b=0,T=v.length;b<T;b++){var D=v[b];switch(D[0]){case"t":P(u,u,[D[1],D[2]]);break;case"s":N(u,u,[D[1],D[2]]);break;case"r":A(u,u,D[1]);break;case"m":O(u,u,D[1]);break;default:break}}return u}U.vs=x;function E(g,v){return g[0]*v[1]-v[0]*g[1]}F=E;function y(g,v,u){var b=Y.vec2.angle(g,v),T=E(g,v)>=0;return u?T?Math.PI*2-b:b:T?b:Math.PI*2-b}F=y;function m(g,v,u){return u?(g[0]=v[1],g[1]=-1*v[0]):(g[0]=-1*v[1],g[1]=v[0]),g}F=m},71497:function(pr,U,G){"use strict";G.r(U),G.d(U,{forceCenter:function(){return F},forceCollide:function(){return x},forceLink:function(){return v},forceManyBody:function(){return Ie},forceRadial:function(){return Pe},forceSimulation:function(){return De},forceX:function(){return we},forceY:function(){return xe}});function F(ve,Se){var Te,We=1;ve==null&&(ve=0),Se==null&&(Se=0);function Ge(){var Je,mt=Te.length,xt,Ze=0,$e=0;for(Je=0;Je<mt;++Je)xt=Te[Je],Ze+=xt.x,$e+=xt.y;for(Ze=(Ze/mt-ve)*We,$e=($e/mt-Se)*We,Je=0;Je<mt;++Je)xt=Te[Je],xt.x-=Ze,xt.y-=$e}return Ge.initialize=function(Je){Te=Je},Ge.x=function(Je){return arguments.length?(ve=+Je,Ge):ve},Ge.y=function(Je){return arguments.length?(Se=+Je,Ge):Se},Ge.strength=function(Je){return arguments.length?(We=+Je,Ge):We},Ge}var Y=G(47148);function P(ve){return function(){return ve}}function A(ve){return(ve()-.5)*1e-6}function N(ve){return ve.x+ve.vx}function O(ve){return ve.y+ve.vy}function x(ve){var Se,Te,We,Ge=1,Je=1;typeof ve!="function"&&(ve=P(ve==null?1:+ve));function mt(){for(var $e,gt=Se.length,At,yt,ct,Kt,$t,jt,ir=0;ir<Je;++ir)for(At=(0,Y.Z)(Se,N,O).visitAfter(xt),$e=0;$e<gt;++$e)yt=Se[$e],$t=Te[yt.index],jt=$t*$t,ct=yt.x+yt.vx,Kt=yt.y+yt.vy,At.visit(mr);function mr(tn,Dr,Dn,Ve,Nr){var Fn=tn.data,Vn=tn.r,va=$t+Vn;if(Fn){if(Fn.index>yt.index){var aa=ct-Fn.x-Fn.vx,Ya=Kt-Fn.y-Fn.vy,la=aa*aa+Ya*Ya;la<va*va&&(aa===0&&(aa=A(We),la+=aa*aa),Ya===0&&(Ya=A(We),la+=Ya*Ya),la=(va-(la=Math.sqrt(la)))/la*Ge,yt.vx+=(aa*=la)*(va=(Vn*=Vn)/(jt+Vn)),yt.vy+=(Ya*=la)*va,Fn.vx-=aa*(va=1-va),Fn.vy-=Ya*va)}return}return Dr>ct+va||Ve<ct-va||Dn>Kt+va||Nr<Kt-va}}function xt($e){if($e.data)return $e.r=Te[$e.data.index];for(var gt=$e.r=0;gt<4;++gt)$e[gt]&&$e[gt].r>$e.r&&($e.r=$e[gt].r)}function Ze(){if(Se){var $e,gt=Se.length,At;for(Te=new Array(gt),$e=0;$e<gt;++$e)At=Se[$e],Te[At.index]=+ve(At,$e,Se)}}return mt.initialize=function($e,gt){Se=$e,We=gt,Ze()},mt.iterations=function($e){return arguments.length?(Je=+$e,mt):Je},mt.strength=function($e){return arguments.length?(Ge=+$e,mt):Ge},mt.radius=function($e){return arguments.length?(ve=typeof $e=="function"?$e:P(+$e),Ze(),mt):ve},mt}var E=G(52677),y=G.n(E);function m(ve){return ve.index}function g(ve,Se){var Te=ve.get(Se);if(!Te)throw new Error("node not found: "+Se);return Te}function v(ve){var Se=m,Te=At,We,Ge=P(30),Je,mt,xt,Ze,$e,gt=1;ve==null&&(ve=[]);function At(jt){return 1/Math.min(xt[jt.source.index],xt[jt.target.index])}function yt(jt){for(var ir=0,mr=ve.length;ir<gt;++ir)for(var tn=0,Dr,Dn,Ve,Nr,Fn,Vn,va;tn<mr;++tn)Dr=ve[tn],Dn=Dr.source,Ve=Dr.target,Nr=Ve.x+Ve.vx-Dn.x-Dn.vx||A($e),Fn=Ve.y+Ve.vy-Dn.y-Dn.vy||A($e),Vn=Math.sqrt(Nr*Nr+Fn*Fn),Vn=(Vn-Je[tn])/Vn*jt*We[tn],Nr*=Vn,Fn*=Vn,Ve.vx-=Nr*(va=Ze[tn]),Ve.vy-=Fn*va,Dn.vx+=Nr*(va=1-va),Dn.vy+=Fn*va}function ct(){if(mt){var jt,ir=mt.length,mr=ve.length,tn=new Map(mt.map(function(Dn,Ve){return[Se(Dn,Ve,mt),Dn]})),Dr;for(jt=0,xt=new Array(ir);jt<mr;++jt)Dr=ve[jt],Dr.index=jt,y()(Dr.source)!=="object"&&(Dr.source=g(tn,Dr.source)),y()(Dr.target)!=="object"&&(Dr.target=g(tn,Dr.target)),xt[Dr.source.index]=(xt[Dr.source.index]||0)+1,xt[Dr.target.index]=(xt[Dr.target.index]||0)+1;for(jt=0,Ze=new Array(mr);jt<mr;++jt)Dr=ve[jt],Ze[jt]=xt[Dr.source.index]/(xt[Dr.source.index]+xt[Dr.target.index]);We=new Array(mr),Kt(),Je=new Array(mr),$t()}}function Kt(){if(mt)for(var jt=0,ir=ve.length;jt<ir;++jt)We[jt]=+Te(ve[jt],jt,ve)}function $t(){if(mt)for(var jt=0,ir=ve.length;jt<ir;++jt)Je[jt]=+Ge(ve[jt],jt,ve)}return yt.initialize=function(jt,ir){mt=jt,$e=ir,ct()},yt.links=function(jt){return arguments.length?(ve=jt,ct(),yt):ve},yt.id=function(jt){return arguments.length?(Se=jt,yt):Se},yt.iterations=function(jt){return arguments.length?(gt=+jt,yt):gt},yt.strength=function(jt){return arguments.length?(Te=typeof jt=="function"?jt:P(+jt),Kt(),yt):Te},yt.distance=function(jt){return arguments.length?(Ge=typeof jt=="function"?jt:P(+jt),$t(),yt):Ge},yt}var u={value:function(){}};function b(){for(var ve=0,Se=arguments.length,Te={},We;ve<Se;++ve){if(!(We=arguments[ve]+"")||We in Te||/[\s.]/.test(We))throw new Error("illegal type: "+We);Te[We]=[]}return new T(Te)}function T(ve){this._=ve}function D(ve,Se){return ve.trim().split(/^|\s+/).map(function(Te){var We="",Ge=Te.indexOf(".");if(Ge>=0&&(We=Te.slice(Ge+1),Te=Te.slice(0,Ge)),Te&&!Se.hasOwnProperty(Te))throw new Error("unknown type: "+Te);return{type:Te,name:We}})}T.prototype=b.prototype={constructor:T,on:function(Se,Te){var We=this._,Ge=D(Se+"",We),Je,mt=-1,xt=Ge.length;if(arguments.length<2){for(;++mt<xt;)if((Je=(Se=Ge[mt]).type)&&(Je=k(We[Je],Se.name)))return Je;return}if(Te!=null&&typeof Te!="function")throw new Error("invalid callback: "+Te);for(;++mt<xt;)if(Je=(Se=Ge[mt]).type)We[Je]=V(We[Je],Se.name,Te);else if(Te==null)for(Je in We)We[Je]=V(We[Je],Se.name,null);return this},copy:function(){var Se={},Te=this._;for(var We in Te)Se[We]=Te[We].slice();return new T(Se)},call:function(Se,Te){if((Je=arguments.length-2)>0)for(var We=new Array(Je),Ge=0,Je,mt;Ge<Je;++Ge)We[Ge]=arguments[Ge+2];if(!this._.hasOwnProperty(Se))throw new Error("unknown type: "+Se);for(mt=this._[Se],Ge=0,Je=mt.length;Ge<Je;++Ge)mt[Ge].value.apply(Te,We)},apply:function(Se,Te,We){if(!this._.hasOwnProperty(Se))throw new Error("unknown type: "+Se);for(var Ge=this._[Se],Je=0,mt=Ge.length;Je<mt;++Je)Ge[Je].value.apply(Te,We)}};function k(ve,Se){for(var Te=0,We=ve.length,Ge;Te<We;++Te)if((Ge=ve[Te]).name===Se)return Ge.value}function V(ve,Se,Te){for(var We=0,Ge=ve.length;We<Ge;++We)if(ve[We].name===Se){ve[We]=u,ve=ve.slice(0,We).concat(ve.slice(We+1));break}return Te!=null&&ve.push({name:Se,value:Te}),ve}var J=b,W=G(35374),X=1664525,K=1013904223,Q=4294967296;function re(){var ve=1;return function(){return(ve=(X*ve+K)%Q)/Q}}function q(ve){return ve.x}function ae(ve){return ve.y}var ue=10,ce=Math.PI*(3-Math.sqrt(5));function De(ve){var Se,Te=1,We=.001,Ge=1-Math.pow(We,1/300),Je=0,mt=.6,xt=new Map,Ze=(0,W.HT)(At),$e=J("tick","end"),gt=re();ve==null&&(ve=[]);function At(){yt(),$e.call("tick",Se),Te<We&&(Ze.stop(),$e.call("end",Se))}function yt($t){var jt,ir=ve.length,mr;$t===void 0&&($t=1);for(var tn=0;tn<$t;++tn)for(Te+=(Je-Te)*Ge,xt.forEach(function(Dr){Dr(Te)}),jt=0;jt<ir;++jt)mr=ve[jt],mr.fx==null?mr.x+=mr.vx*=mt:(mr.x=mr.fx,mr.vx=0),mr.fy==null?mr.y+=mr.vy*=mt:(mr.y=mr.fy,mr.vy=0);return Se}function ct(){for(var $t=0,jt=ve.length,ir;$t<jt;++$t){if(ir=ve[$t],ir.index=$t,ir.fx!=null&&(ir.x=ir.fx),ir.fy!=null&&(ir.y=ir.fy),isNaN(ir.x)||isNaN(ir.y)){var mr=ue*Math.sqrt(.5+$t),tn=$t*ce;ir.x=mr*Math.cos(tn),ir.y=mr*Math.sin(tn)}(isNaN(ir.vx)||isNaN(ir.vy))&&(ir.vx=ir.vy=0)}}function Kt($t){return $t.initialize&&$t.initialize(ve,gt),$t}return ct(),Se={tick:yt,restart:function(){return Ze.restart(At),Se},stop:function(){return Ze.stop(),Se},nodes:function(jt){return arguments.length?(ve=jt,ct(),xt.forEach(Kt),Se):ve},alpha:function(jt){return arguments.length?(Te=+jt,Se):Te},alphaMin:function(jt){return arguments.length?(We=+jt,Se):We},alphaDecay:function(jt){return arguments.length?(Ge=+jt,Se):+Ge},alphaTarget:function(jt){return arguments.length?(Je=+jt,Se):Je},velocityDecay:function(jt){return arguments.length?(mt=1-jt,Se):1-mt},randomSource:function(jt){return arguments.length?(gt=jt,xt.forEach(Kt),Se):gt},force:function(jt,ir){return arguments.length>1?(ir==null?xt.delete(jt):xt.set(jt,Kt(ir)),Se):xt.get(jt)},find:function(jt,ir,mr){var tn=0,Dr=ve.length,Dn,Ve,Nr,Fn,Vn;for(mr==null?mr=1/0:mr*=mr,tn=0;tn<Dr;++tn)Fn=ve[tn],Dn=jt-Fn.x,Ve=ir-Fn.y,Nr=Dn*Dn+Ve*Ve,Nr<mr&&(Vn=Fn,mr=Nr);return Vn},on:function(jt,ir){return arguments.length>1?($e.on(jt,ir),Se):$e.on(jt)}}}function Ie(){var ve,Se,Te,We,Ge=P(-30),Je,mt=1,xt=1/0,Ze=.81;function $e(ct){var Kt,$t=ve.length,jt=(0,Y.Z)(ve,q,ae).visitAfter(At);for(We=ct,Kt=0;Kt<$t;++Kt)Se=ve[Kt],jt.visit(yt)}function gt(){if(ve){var ct,Kt=ve.length,$t;for(Je=new Array(Kt),ct=0;ct<Kt;++ct)$t=ve[ct],Je[$t.index]=+Ge($t,ct,ve)}}function At(ct){var Kt=0,$t,jt,ir=0,mr,tn,Dr;if(ct.length){for(mr=tn=Dr=0;Dr<4;++Dr)($t=ct[Dr])&&(jt=Math.abs($t.value))&&(Kt+=$t.value,ir+=jt,mr+=jt*$t.x,tn+=jt*$t.y);ct.x=mr/ir,ct.y=tn/ir}else{$t=ct,$t.x=$t.data.x,$t.y=$t.data.y;do Kt+=Je[$t.data.index];while($t=$t.next)}ct.value=Kt}function yt(ct,Kt,$t,jt){if(!ct.value)return!0;var ir=ct.x-Se.x,mr=ct.y-Se.y,tn=jt-Kt,Dr=ir*ir+mr*mr;if(tn*tn/Ze<Dr)return Dr<xt&&(ir===0&&(ir=A(Te),Dr+=ir*ir),mr===0&&(mr=A(Te),Dr+=mr*mr),Dr<mt&&(Dr=Math.sqrt(mt*Dr)),Se.vx+=ir*ct.value*We/Dr,Se.vy+=mr*ct.value*We/Dr),!0;if(ct.length||Dr>=xt)return;(ct.data!==Se||ct.next)&&(ir===0&&(ir=A(Te),Dr+=ir*ir),mr===0&&(mr=A(Te),Dr+=mr*mr),Dr<mt&&(Dr=Math.sqrt(mt*Dr)));do ct.data!==Se&&(tn=Je[ct.data.index]*We/Dr,Se.vx+=ir*tn,Se.vy+=mr*tn);while(ct=ct.next)}return $e.initialize=function(ct,Kt){ve=ct,Te=Kt,gt()},$e.strength=function(ct){return arguments.length?(Ge=typeof ct=="function"?ct:P(+ct),gt(),$e):Ge},$e.distanceMin=function(ct){return arguments.length?(mt=ct*ct,$e):Math.sqrt(mt)},$e.distanceMax=function(ct){return arguments.length?(xt=ct*ct,$e):Math.sqrt(xt)},$e.theta=function(ct){return arguments.length?(Ze=ct*ct,$e):Math.sqrt(Ze)},$e}function Pe(ve,Se,Te){var We,Ge=P(.1),Je,mt;typeof ve!="function"&&(ve=P(+ve)),Se==null&&(Se=0),Te==null&&(Te=0);function xt($e){for(var gt=0,At=We.length;gt<At;++gt){var yt=We[gt],ct=yt.x-Se||1e-6,Kt=yt.y-Te||1e-6,$t=Math.sqrt(ct*ct+Kt*Kt),jt=(mt[gt]-$t)*Je[gt]*$e/$t;yt.vx+=ct*jt,yt.vy+=Kt*jt}}function Ze(){if(We){var $e,gt=We.length;for(Je=new Array(gt),mt=new Array(gt),$e=0;$e<gt;++$e)mt[$e]=+ve(We[$e],$e,We),Je[$e]=isNaN(mt[$e])?0:+Ge(We[$e],$e,We)}}return xt.initialize=function($e){We=$e,Ze()},xt.strength=function($e){return arguments.length?(Ge=typeof $e=="function"?$e:P(+$e),Ze(),xt):Ge},xt.radius=function($e){return arguments.length?(ve=typeof $e=="function"?$e:P(+$e),Ze(),xt):ve},xt.x=function($e){return arguments.length?(Se=+$e,xt):Se},xt.y=function($e){return arguments.length?(Te=+$e,xt):Te},xt}function we(ve){var Se=P(.1),Te,We,Ge;typeof ve!="function"&&(ve=P(ve==null?0:+ve));function Je(xt){for(var Ze=0,$e=Te.length,gt;Ze<$e;++Ze)gt=Te[Ze],gt.vx+=(Ge[Ze]-gt.x)*We[Ze]*xt}function mt(){if(Te){var xt,Ze=Te.length;for(We=new Array(Ze),Ge=new Array(Ze),xt=0;xt<Ze;++xt)We[xt]=isNaN(Ge[xt]=+ve(Te[xt],xt,Te))?0:+Se(Te[xt],xt,Te)}}return Je.initialize=function(xt){Te=xt,mt()},Je.strength=function(xt){return arguments.length?(Se=typeof xt=="function"?xt:P(+xt),mt(),Je):Se},Je.x=function(xt){return arguments.length?(ve=typeof xt=="function"?xt:P(+xt),mt(),Je):ve},Je}function xe(ve){var Se=P(.1),Te,We,Ge;typeof ve!="function"&&(ve=P(ve==null?0:+ve));function Je(xt){for(var Ze=0,$e=Te.length,gt;Ze<$e;++Ze)gt=Te[Ze],gt.vy+=(Ge[Ze]-gt.y)*We[Ze]*xt}function mt(){if(Te){var xt,Ze=Te.length;for(We=new Array(Ze),Ge=new Array(Ze),xt=0;xt<Ze;++xt)We[xt]=isNaN(Ge[xt]=+ve(Te[xt],xt,Te))?0:+Se(Te[xt],xt,Te)}}return Je.initialize=function(xt){Te=xt,mt()},Je.strength=function(xt){return arguments.length?(Se=typeof xt=="function"?xt:P(+xt),mt(),Je):Se},Je.y=function(xt){return arguments.length?(ve=typeof xt=="function"?xt:P(+xt),mt(),Je):ve},Je}},5237:function(pr,U,G){"use strict";G.r(U),G.d(U,{AbstractMatrix:function(){return Dr},CHO:function(){return an},CholeskyDecomposition:function(){return an},EVD:function(){return lt},EigenvalueDecomposition:function(){return lt},LU:function(){return On},LuDecomposition:function(){return On},Matrix:function(){return Nr},MatrixColumnSelectionView:function(){return va},MatrixColumnView:function(){return Vn},MatrixFlipColumnView:function(){return aa},MatrixFlipRowView:function(){return Ya},MatrixRowSelectionView:function(){return Qa},MatrixRowView:function(){return la},MatrixSelectionView:function(){return Wa},MatrixSubView:function(){return Da},MatrixTransposeView:function(){return ar},NIPALS:function(){return qr},Nipals:function(){return qr},QR:function(){return qn},QrDecomposition:function(){return qn},SVD:function(){return oa},SingularValueDecomposition:function(){return oa},WrapperMatrix1D:function(){return Or},WrapperMatrix2D:function(){return Qr},correlation:function(){return Gt},covariance:function(){return Z},default:function(){return Nr},determinant:function(){return mn},inverse:function(){return ya},linearDependencies:function(){return Ln},pseudoInverse:function(){return ma},solve:function(){return Ka},wrap:function(){return wn}});var F=G(73408),Y=G.n(F),P=G(31996),A=G.n(P),N=G(26037),O=G.n(N),x=G(52677),E=G.n(x),y=G(12444),m=G.n(y),g=G(72004),v=G.n(g);const u=Object.prototype.toString;function b(le){const ge=u.call(le);return ge.endsWith("Array]")&&!ge.includes("Big")}function T(le){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!b(le))throw new TypeError("input must be an array");if(le.length===0)throw new TypeError("input must not be empty");var B=ge.fromIndex,_=B===void 0?0:B,M=ge.toIndex,$=M===void 0?le.length:M;if(_<0||_>=le.length||!Number.isInteger(_))throw new Error("fromIndex must be a positive integer smaller than length");if($<=_||$>le.length||!Number.isInteger($))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var Ee=le[_],Ne=_+1;Ne<$;Ne++)le[Ne]>Ee&&(Ee=le[Ne]);return Ee}function D(le){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!b(le))throw new TypeError("input must be an array");if(le.length===0)throw new TypeError("input must not be empty");var B=ge.fromIndex,_=B===void 0?0:B,M=ge.toIndex,$=M===void 0?le.length:M;if(_<0||_>=le.length||!Number.isInteger(_))throw new Error("fromIndex must be a positive integer smaller than length");if($<=_||$>le.length||!Number.isInteger($))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var Ee=le[_],Ne=_+1;Ne<$;Ne++)le[Ne]<Ee&&(Ee=le[Ne]);return Ee}function k(le){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(b(le)){if(le.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var B;if(ge.output!==void 0){if(!b(ge.output))throw new TypeError("output option must be an array if specified");B=ge.output}else B=new Array(le.length);var _=D(le),M=T(le);if(_===M)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var $=ge.min,Ee=$===void 0?ge.autoMinMax?_:0:$,Ne=ge.max,Le=Ne===void 0?ge.autoMinMax?M:1:Ne;if(Ee>=Le)throw new RangeError("min option must be smaller than max option");for(var Ye=(Le-Ee)/(M-_),Ot=0;Ot<le.length;Ot++)B[Ot]=(le[Ot]-_)*Ye+Ee;return B}var V=" ".repeat(2),J=" ".repeat(4);function W(){return X(this)}function X(le){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=ge.maxRows,_=B===void 0?15:B,M=ge.maxColumns,$=M===void 0?10:M,Ee=ge.maxNumSize,Ne=Ee===void 0?8:Ee,Le=ge.padMinus,Ye=Le===void 0?"auto":Le;return"".concat(le.constructor.name,` {
`).concat(V,`[
`).concat(J).concat(K(le,_,$,Ne,Ye),`
`).concat(V,`]
`).concat(V,"rows: ").concat(le.rows,`
`).concat(V,"columns: ").concat(le.columns,`
}`)}function K(le,ge,B,_,M){var $=le.rows,Ee=le.columns,Ne=Math.min($,ge),Le=Math.min(Ee,B),Ye=[];if(M==="auto"){M=!1;e:for(var Ot=0;Ot<Ne;Ot++)for(var Et=0;Et<Le;Et++)if(le.get(Ot,Et)<0){M=!0;break e}}for(var Zt=0;Zt<Ne;Zt++){for(var Lr=[],or=0;or<Le;or++)Lr.push(Q(le.get(Zt,or),_,M));Ye.push("".concat(Lr.join(" ")))}return Le!==Ee&&(Ye[Ye.length-1]+=" ... ".concat(Ee-B," more columns")),Ne!==$&&Ye.push("... ".concat($-ge," more rows")),Ye.join(`
`.concat(J))}function Q(le,ge,B){return(le>=0&&B?" ".concat(re(le,ge-1)):re(le,ge)).padEnd(ge)}function re(le,ge){var B=le.toString();if(B.length<=ge)return B;var _=le.toFixed(ge);if(_.length>ge&&(_=le.toFixed(Math.max(0,ge-(_.length-ge)))),_.length<=ge&&!_.startsWith("0.000")&&!_.startsWith("-0.000"))return _;var M=le.toExponential(ge);return M.length>ge&&(M=le.toExponential(Math.max(0,ge-(M.length-ge)))),M.slice(0)}function q(le,ge){le.prototype.add=function(_){return typeof _=="number"?this.addS(_):this.addM(_)},le.prototype.addS=function(_){for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)+_);return this},le.prototype.addM=function(_){if(_=ge.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)+_.get(M,$));return this},le.add=function(_,M){var $=new ge(_);return $.add(M)},le.prototype.sub=function(_){return typeof _=="number"?this.subS(_):this.subM(_)},le.prototype.subS=function(_){for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)-_);return this},le.prototype.subM=function(_){if(_=ge.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)-_.get(M,$));return this},le.sub=function(_,M){var $=new ge(_);return $.sub(M)},le.prototype.subtract=le.prototype.sub,le.prototype.subtractS=le.prototype.subS,le.prototype.subtractM=le.prototype.subM,le.subtract=le.sub,le.prototype.mul=function(_){return typeof _=="number"?this.mulS(_):this.mulM(_)},le.prototype.mulS=function(_){for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)*_);return this},le.prototype.mulM=function(_){if(_=ge.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)*_.get(M,$));return this},le.mul=function(_,M){var $=new ge(_);return $.mul(M)},le.prototype.multiply=le.prototype.mul,le.prototype.multiplyS=le.prototype.mulS,le.prototype.multiplyM=le.prototype.mulM,le.multiply=le.mul,le.prototype.div=function(_){return typeof _=="number"?this.divS(_):this.divM(_)},le.prototype.divS=function(_){for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)/_);return this},le.prototype.divM=function(_){if(_=ge.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)/_.get(M,$));return this},le.div=function(_,M){var $=new ge(_);return $.div(M)},le.prototype.divide=le.prototype.div,le.prototype.divideS=le.prototype.divS,le.prototype.divideM=le.prototype.divM,le.divide=le.div,le.prototype.mod=function(_){return typeof _=="number"?this.modS(_):this.modM(_)},le.prototype.modS=function(_){for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)%_);return this},le.prototype.modM=function(_){if(_=ge.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)%_.get(M,$));return this},le.mod=function(_,M){var $=new ge(_);return $.mod(M)},le.prototype.modulus=le.prototype.mod,le.prototype.modulusS=le.prototype.modS,le.prototype.modulusM=le.prototype.modM,le.modulus=le.mod,le.prototype.and=function(_){return typeof _=="number"?this.andS(_):this.andM(_)},le.prototype.andS=function(_){for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)&_);return this},le.prototype.andM=function(_){if(_=ge.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)&_.get(M,$));return this},le.and=function(_,M){var $=new ge(_);return $.and(M)},le.prototype.or=function(_){return typeof _=="number"?this.orS(_):this.orM(_)},le.prototype.orS=function(_){for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)|_);return this},le.prototype.orM=function(_){if(_=ge.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)|_.get(M,$));return this},le.or=function(_,M){var $=new ge(_);return $.or(M)},le.prototype.xor=function(_){return typeof _=="number"?this.xorS(_):this.xorM(_)},le.prototype.xorS=function(_){for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)^_);return this},le.prototype.xorM=function(_){if(_=ge.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)^_.get(M,$));return this},le.xor=function(_,M){var $=new ge(_);return $.xor(M)},le.prototype.leftShift=function(_){return typeof _=="number"?this.leftShiftS(_):this.leftShiftM(_)},le.prototype.leftShiftS=function(_){for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)<<_);return this},le.prototype.leftShiftM=function(_){if(_=ge.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)<<_.get(M,$));return this},le.leftShift=function(_,M){var $=new ge(_);return $.leftShift(M)},le.prototype.signPropagatingRightShift=function(_){return typeof _=="number"?this.signPropagatingRightShiftS(_):this.signPropagatingRightShiftM(_)},le.prototype.signPropagatingRightShiftS=function(_){for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)>>_);return this},le.prototype.signPropagatingRightShiftM=function(_){if(_=ge.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)>>_.get(M,$));return this},le.signPropagatingRightShift=function(_,M){var $=new ge(_);return $.signPropagatingRightShift(M)},le.prototype.rightShift=function(_){return typeof _=="number"?this.rightShiftS(_):this.rightShiftM(_)},le.prototype.rightShiftS=function(_){for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)>>>_);return this},le.prototype.rightShiftM=function(_){if(_=ge.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,this.get(M,$)>>>_.get(M,$));return this},le.rightShift=function(_,M){var $=new ge(_);return $.rightShift(M)},le.prototype.zeroFillRightShift=le.prototype.rightShift,le.prototype.zeroFillRightShiftS=le.prototype.rightShiftS,le.prototype.zeroFillRightShiftM=le.prototype.rightShiftM,le.zeroFillRightShift=le.rightShift,le.prototype.not=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,~this.get(_,M));return this},le.not=function(_){var M=new ge(_);return M.not()},le.prototype.abs=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.abs(this.get(_,M)));return this},le.abs=function(_){var M=new ge(_);return M.abs()},le.prototype.acos=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.acos(this.get(_,M)));return this},le.acos=function(_){var M=new ge(_);return M.acos()},le.prototype.acosh=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.acosh(this.get(_,M)));return this},le.acosh=function(_){var M=new ge(_);return M.acosh()},le.prototype.asin=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.asin(this.get(_,M)));return this},le.asin=function(_){var M=new ge(_);return M.asin()},le.prototype.asinh=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.asinh(this.get(_,M)));return this},le.asinh=function(_){var M=new ge(_);return M.asinh()},le.prototype.atan=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.atan(this.get(_,M)));return this},le.atan=function(_){var M=new ge(_);return M.atan()},le.prototype.atanh=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.atanh(this.get(_,M)));return this},le.atanh=function(_){var M=new ge(_);return M.atanh()},le.prototype.cbrt=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.cbrt(this.get(_,M)));return this},le.cbrt=function(_){var M=new ge(_);return M.cbrt()},le.prototype.ceil=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.ceil(this.get(_,M)));return this},le.ceil=function(_){var M=new ge(_);return M.ceil()},le.prototype.clz32=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.clz32(this.get(_,M)));return this},le.clz32=function(_){var M=new ge(_);return M.clz32()},le.prototype.cos=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.cos(this.get(_,M)));return this},le.cos=function(_){var M=new ge(_);return M.cos()},le.prototype.cosh=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.cosh(this.get(_,M)));return this},le.cosh=function(_){var M=new ge(_);return M.cosh()},le.prototype.exp=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.exp(this.get(_,M)));return this},le.exp=function(_){var M=new ge(_);return M.exp()},le.prototype.expm1=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.expm1(this.get(_,M)));return this},le.expm1=function(_){var M=new ge(_);return M.expm1()},le.prototype.floor=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.floor(this.get(_,M)));return this},le.floor=function(_){var M=new ge(_);return M.floor()},le.prototype.fround=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.fround(this.get(_,M)));return this},le.fround=function(_){var M=new ge(_);return M.fround()},le.prototype.log=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.log(this.get(_,M)));return this},le.log=function(_){var M=new ge(_);return M.log()},le.prototype.log1p=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.log1p(this.get(_,M)));return this},le.log1p=function(_){var M=new ge(_);return M.log1p()},le.prototype.log10=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.log10(this.get(_,M)));return this},le.log10=function(_){var M=new ge(_);return M.log10()},le.prototype.log2=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.log2(this.get(_,M)));return this},le.log2=function(_){var M=new ge(_);return M.log2()},le.prototype.round=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.round(this.get(_,M)));return this},le.round=function(_){var M=new ge(_);return M.round()},le.prototype.sign=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.sign(this.get(_,M)));return this},le.sign=function(_){var M=new ge(_);return M.sign()},le.prototype.sin=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.sin(this.get(_,M)));return this},le.sin=function(_){var M=new ge(_);return M.sin()},le.prototype.sinh=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.sinh(this.get(_,M)));return this},le.sinh=function(_){var M=new ge(_);return M.sinh()},le.prototype.sqrt=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.sqrt(this.get(_,M)));return this},le.sqrt=function(_){var M=new ge(_);return M.sqrt()},le.prototype.tan=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.tan(this.get(_,M)));return this},le.tan=function(_){var M=new ge(_);return M.tan()},le.prototype.tanh=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.tanh(this.get(_,M)));return this},le.tanh=function(_){var M=new ge(_);return M.tanh()},le.prototype.trunc=function(){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,Math.trunc(this.get(_,M)));return this},le.trunc=function(_){var M=new ge(_);return M.trunc()},le.pow=function(_,M){var $=new ge(_);return $.pow(M)},le.prototype.pow=function(_){return typeof _=="number"?this.powS(_):this.powM(_)},le.prototype.powS=function(_){for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,Math.pow(this.get(M,$),_));return this},le.prototype.powM=function(_){if(_=ge.checkMatrix(_),this.rows!==_.rows||this.columns!==_.columns)throw new RangeError("Matrices dimensions must be equal");for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.set(M,$,Math.pow(this.get(M,$),_.get(M,$)));return this}}function ae(le,ge,B){var _=B?le.rows:le.rows-1;if(ge<0||ge>_)throw new RangeError("Row index out of range")}function ue(le,ge,B){var _=B?le.columns:le.columns-1;if(ge<0||ge>_)throw new RangeError("Column index out of range")}function ce(le,ge){if(ge.to1DArray&&(ge=ge.to1DArray()),ge.length!==le.columns)throw new RangeError("vector size must be the same as the number of columns");return ge}function De(le,ge){if(ge.to1DArray&&(ge=ge.to1DArray()),ge.length!==le.rows)throw new RangeError("vector size must be the same as the number of rows");return ge}function Ie(le,ge){if(!b(ge))throw new TypeError("row indices must be an array");for(var B=0;B<ge.length;B++)if(ge[B]<0||ge[B]>=le.rows)throw new RangeError("row indices are out of range")}function Pe(le,ge){if(!b(ge))throw new TypeError("column indices must be an array");for(var B=0;B<ge.length;B++)if(ge[B]<0||ge[B]>=le.columns)throw new RangeError("column indices are out of range")}function we(le,ge,B,_,M){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(ve("startRow",ge),ve("endRow",B),ve("startColumn",_),ve("endColumn",M),ge>B||_>M||ge<0||ge>=le.rows||B<0||B>=le.rows||_<0||_>=le.columns||M<0||M>=le.columns)throw new RangeError("Submatrix indices are out of range")}function xe(le){for(var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,B=[],_=0;_<le;_++)B.push(ge);return B}function ve(le,ge){if(typeof ge!="number")throw new TypeError("".concat(le," must be a number"))}function Se(le){if(le.isEmpty())throw new Error("Empty matrix has no elements to index")}function Te(le){for(var ge=xe(le.rows),B=0;B<le.rows;++B)for(var _=0;_<le.columns;++_)ge[B]+=le.get(B,_);return ge}function We(le){for(var ge=xe(le.columns),B=0;B<le.rows;++B)for(var _=0;_<le.columns;++_)ge[_]+=le.get(B,_);return ge}function Ge(le){for(var ge=0,B=0;B<le.rows;B++)for(var _=0;_<le.columns;_++)ge+=le.get(B,_);return ge}function Je(le){for(var ge=xe(le.rows,1),B=0;B<le.rows;++B)for(var _=0;_<le.columns;++_)ge[B]*=le.get(B,_);return ge}function mt(le){for(var ge=xe(le.columns,1),B=0;B<le.rows;++B)for(var _=0;_<le.columns;++_)ge[_]*=le.get(B,_);return ge}function xt(le){for(var ge=1,B=0;B<le.rows;B++)for(var _=0;_<le.columns;_++)ge*=le.get(B,_);return ge}function Ze(le,ge,B){for(var _=le.rows,M=le.columns,$=[],Ee=0;Ee<_;Ee++){for(var Ne=0,Le=0,Ye=0,Ot=0;Ot<M;Ot++)Ye=le.get(Ee,Ot)-B[Ee],Ne+=Ye,Le+=Ye*Ye;ge?$.push((Le-Ne*Ne/M)/(M-1)):$.push((Le-Ne*Ne/M)/M)}return $}function $e(le,ge,B){for(var _=le.rows,M=le.columns,$=[],Ee=0;Ee<M;Ee++){for(var Ne=0,Le=0,Ye=0,Ot=0;Ot<_;Ot++)Ye=le.get(Ot,Ee)-B[Ee],Ne+=Ye,Le+=Ye*Ye;ge?$.push((Le-Ne*Ne/_)/(_-1)):$.push((Le-Ne*Ne/_)/_)}return $}function gt(le,ge,B){for(var _=le.rows,M=le.columns,$=_*M,Ee=0,Ne=0,Le=0,Ye=0;Ye<_;Ye++)for(var Ot=0;Ot<M;Ot++)Le=le.get(Ye,Ot)-B,Ee+=Le,Ne+=Le*Le;return ge?(Ne-Ee*Ee/$)/($-1):(Ne-Ee*Ee/$)/$}function At(le,ge){for(var B=0;B<le.rows;B++)for(var _=0;_<le.columns;_++)le.set(B,_,le.get(B,_)-ge[B])}function yt(le,ge){for(var B=0;B<le.rows;B++)for(var _=0;_<le.columns;_++)le.set(B,_,le.get(B,_)-ge[_])}function ct(le,ge){for(var B=0;B<le.rows;B++)for(var _=0;_<le.columns;_++)le.set(B,_,le.get(B,_)-ge)}function Kt(le){for(var ge=[],B=0;B<le.rows;B++){for(var _=0,M=0;M<le.columns;M++)_+=Math.pow(le.get(B,M),2)/(le.columns-1);ge.push(Math.sqrt(_))}return ge}function $t(le,ge){for(var B=0;B<le.rows;B++)for(var _=0;_<le.columns;_++)le.set(B,_,le.get(B,_)/ge[B])}function jt(le){for(var ge=[],B=0;B<le.columns;B++){for(var _=0,M=0;M<le.rows;M++)_+=Math.pow(le.get(M,B),2)/(le.rows-1);ge.push(Math.sqrt(_))}return ge}function ir(le,ge){for(var B=0;B<le.rows;B++)for(var _=0;_<le.columns;_++)le.set(B,_,le.get(B,_)/ge[_])}function mr(le){for(var ge=le.size-1,B=0,_=0;_<le.columns;_++)for(var M=0;M<le.rows;M++)B+=Math.pow(le.get(M,_),2)/ge;return Math.sqrt(B)}function tn(le,ge){for(var B=0;B<le.rows;B++)for(var _=0;_<le.columns;_++)le.set(B,_,le.get(B,_)/ge)}var Dr=function(){function le(){m()(this,le)}return v()(le,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(B){if(typeof B!="function")throw new TypeError("callback must be a function");for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)B.call(this,_,M);return this}},{key:"to1DArray",value:function(){for(var B=[],_=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)B.push(this.get(_,M));return B}},{key:"to2DArray",value:function(){for(var B=[],_=0;_<this.rows;_++){B.push([]);for(var M=0;M<this.columns;M++)B[_].push(this.get(_,M))}return B}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var B=0;B<this.rows;B++)for(var _=0;_<=B;_++)if(this.get(B,_)!==this.get(_,B))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var B=0,_=0,M=-1,$=!0,Ee=!1;B<this.rows&&$;){for(_=0,Ee=!1;_<this.columns&&Ee===!1;)this.get(B,_)===0?_++:this.get(B,_)===1&&_>M?(Ee=!0,M=_):($=!1,Ee=!0);B++}return $}},{key:"isReducedEchelonForm",value:function(){for(var B=0,_=0,M=-1,$=!0,Ee=!1;B<this.rows&&$;){for(_=0,Ee=!1;_<this.columns&&Ee===!1;)this.get(B,_)===0?_++:this.get(B,_)===1&&_>M?(Ee=!0,M=_):($=!1,Ee=!0);for(var Ne=_+1;Ne<this.rows;Ne++)this.get(B,Ne)!==0&&($=!1);B++}return $}},{key:"echelonForm",value:function(){for(var B=this.clone(),_=0,M=0;_<B.rows&&M<B.columns;){for(var $=_,Ee=_;Ee<B.rows;Ee++)B.get(Ee,M)>B.get($,M)&&($=Ee);if(B.get($,M)===0)M++;else{B.swapRows(_,$);for(var Ne=B.get(_,M),Le=M;Le<B.columns;Le++)B.set(_,Le,B.get(_,Le)/Ne);for(var Ye=_+1;Ye<B.rows;Ye++){var Ot=B.get(Ye,M)/B.get(_,M);B.set(Ye,M,0);for(var Et=M+1;Et<B.columns;Et++)B.set(Ye,Et,B.get(Ye,Et)-B.get(_,Et)*Ot)}_++,M++}}return B}},{key:"reducedEchelonForm",value:function(){for(var B=this.echelonForm(),_=B.columns,M=B.rows,$=M-1;$>=0;)if(B.maxRow($)===0)$--;else{for(var Ee=0,Ne=!1;Ee<M&&Ne===!1;)B.get($,Ee)===1?Ne=!0:Ee++;for(var Le=0;Le<$;Le++)for(var Ye=B.get(Le,Ee),Ot=Ee;Ot<_;Ot++){var Et=B.get(Le,Ot)-Ye*B.get($,Ot);B.set(Le,Ot,Et)}$--}return B}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(E()(B)!=="object")throw new TypeError("options must be an object");var _=B.rows,M=_===void 0?1:_,$=B.columns,Ee=$===void 0?1:$;if(!Number.isInteger(M)||M<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(Ee)||Ee<=0)throw new TypeError("columns must be a positive integer");for(var Ne=new Nr(this.rows*M,this.columns*Ee),Le=0;Le<M;Le++)for(var Ye=0;Ye<Ee;Ye++)Ne.setSubMatrix(this,this.rows*Le,this.columns*Ye);return Ne}},{key:"fill",value:function(B){for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,B);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(B){ae(this,B);for(var _=[],M=0;M<this.columns;M++)_.push(this.get(B,M));return _}},{key:"getRowVector",value:function(B){return Nr.rowVector(this.getRow(B))}},{key:"setRow",value:function(B,_){ae(this,B),_=ce(this,_);for(var M=0;M<this.columns;M++)this.set(B,M,_[M]);return this}},{key:"swapRows",value:function(B,_){ae(this,B),ae(this,_);for(var M=0;M<this.columns;M++){var $=this.get(B,M);this.set(B,M,this.get(_,M)),this.set(_,M,$)}return this}},{key:"getColumn",value:function(B){ue(this,B);for(var _=[],M=0;M<this.rows;M++)_.push(this.get(M,B));return _}},{key:"getColumnVector",value:function(B){return Nr.columnVector(this.getColumn(B))}},{key:"setColumn",value:function(B,_){ue(this,B),_=De(this,_);for(var M=0;M<this.rows;M++)this.set(M,B,_[M]);return this}},{key:"swapColumns",value:function(B,_){ue(this,B),ue(this,_);for(var M=0;M<this.rows;M++){var $=this.get(M,B);this.set(M,B,this.get(M,_)),this.set(M,_,$)}return this}},{key:"addRowVector",value:function(B){B=ce(this,B);for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,this.get(_,M)+B[M]);return this}},{key:"subRowVector",value:function(B){B=ce(this,B);for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,this.get(_,M)-B[M]);return this}},{key:"mulRowVector",value:function(B){B=ce(this,B);for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,this.get(_,M)*B[M]);return this}},{key:"divRowVector",value:function(B){B=ce(this,B);for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,this.get(_,M)/B[M]);return this}},{key:"addColumnVector",value:function(B){B=De(this,B);for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,this.get(_,M)+B[_]);return this}},{key:"subColumnVector",value:function(B){B=De(this,B);for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,this.get(_,M)-B[_]);return this}},{key:"mulColumnVector",value:function(B){B=De(this,B);for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,this.get(_,M)*B[_]);return this}},{key:"divColumnVector",value:function(B){B=De(this,B);for(var _=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)this.set(_,M,this.get(_,M)/B[_]);return this}},{key:"mulRow",value:function(B,_){ae(this,B);for(var M=0;M<this.columns;M++)this.set(B,M,this.get(B,M)*_);return this}},{key:"mulColumn",value:function(B,_){ue(this,B);for(var M=0;M<this.rows;M++)this.set(M,B,this.get(M,B)*_);return this}},{key:"max",value:function(B){if(this.isEmpty())return NaN;switch(B){case"row":{for(var _=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.get(M,$)>_[M]&&(_[M]=this.get(M,$));return _}case"column":{for(var Ee=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),Ne=0;Ne<this.rows;Ne++)for(var Le=0;Le<this.columns;Le++)this.get(Ne,Le)>Ee[Le]&&(Ee[Le]=this.get(Ne,Le));return Ee}case void 0:{for(var Ye=this.get(0,0),Ot=0;Ot<this.rows;Ot++)for(var Et=0;Et<this.columns;Et++)this.get(Ot,Et)>Ye&&(Ye=this.get(Ot,Et));return Ye}default:throw new Error("invalid option: ".concat(B))}}},{key:"maxIndex",value:function(){Se(this);for(var B=this.get(0,0),_=[0,0],M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.get(M,$)>B&&(B=this.get(M,$),_[0]=M,_[1]=$);return _}},{key:"min",value:function(B){if(this.isEmpty())return NaN;switch(B){case"row":{for(var _=new Array(this.rows).fill(Number.POSITIVE_INFINITY),M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.get(M,$)<_[M]&&(_[M]=this.get(M,$));return _}case"column":{for(var Ee=new Array(this.columns).fill(Number.POSITIVE_INFINITY),Ne=0;Ne<this.rows;Ne++)for(var Le=0;Le<this.columns;Le++)this.get(Ne,Le)<Ee[Le]&&(Ee[Le]=this.get(Ne,Le));return Ee}case void 0:{for(var Ye=this.get(0,0),Ot=0;Ot<this.rows;Ot++)for(var Et=0;Et<this.columns;Et++)this.get(Ot,Et)<Ye&&(Ye=this.get(Ot,Et));return Ye}default:throw new Error("invalid option: ".concat(B))}}},{key:"minIndex",value:function(){Se(this);for(var B=this.get(0,0),_=[0,0],M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)this.get(M,$)<B&&(B=this.get(M,$),_[0]=M,_[1]=$);return _}},{key:"maxRow",value:function(B){if(ae(this,B),this.isEmpty())return NaN;for(var _=this.get(B,0),M=1;M<this.columns;M++)this.get(B,M)>_&&(_=this.get(B,M));return _}},{key:"maxRowIndex",value:function(B){ae(this,B),Se(this);for(var _=this.get(B,0),M=[B,0],$=1;$<this.columns;$++)this.get(B,$)>_&&(_=this.get(B,$),M[1]=$);return M}},{key:"minRow",value:function(B){if(ae(this,B),this.isEmpty())return NaN;for(var _=this.get(B,0),M=1;M<this.columns;M++)this.get(B,M)<_&&(_=this.get(B,M));return _}},{key:"minRowIndex",value:function(B){ae(this,B),Se(this);for(var _=this.get(B,0),M=[B,0],$=1;$<this.columns;$++)this.get(B,$)<_&&(_=this.get(B,$),M[1]=$);return M}},{key:"maxColumn",value:function(B){if(ue(this,B),this.isEmpty())return NaN;for(var _=this.get(0,B),M=1;M<this.rows;M++)this.get(M,B)>_&&(_=this.get(M,B));return _}},{key:"maxColumnIndex",value:function(B){ue(this,B),Se(this);for(var _=this.get(0,B),M=[0,B],$=1;$<this.rows;$++)this.get($,B)>_&&(_=this.get($,B),M[0]=$);return M}},{key:"minColumn",value:function(B){if(ue(this,B),this.isEmpty())return NaN;for(var _=this.get(0,B),M=1;M<this.rows;M++)this.get(M,B)<_&&(_=this.get(M,B));return _}},{key:"minColumnIndex",value:function(B){ue(this,B),Se(this);for(var _=this.get(0,B),M=[0,B],$=1;$<this.rows;$++)this.get($,B)<_&&(_=this.get($,B),M[0]=$);return M}},{key:"diag",value:function(){for(var B=Math.min(this.rows,this.columns),_=[],M=0;M<B;M++)_.push(this.get(M,M));return _}},{key:"norm",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",_=0;if(B==="max")return this.max();if(B==="frobenius"){for(var M=0;M<this.rows;M++)for(var $=0;$<this.columns;$++)_=_+this.get(M,$)*this.get(M,$);return Math.sqrt(_)}else throw new RangeError("unknown norm type: ".concat(B))}},{key:"cumulativeSum",value:function(){for(var B=0,_=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)B+=this.get(_,M),this.set(_,M,B);return this}},{key:"dot",value:function(B){le.isMatrix(B)&&(B=B.to1DArray());var _=this.to1DArray();if(_.length!==B.length)throw new RangeError("vectors do not have the same size");for(var M=0,$=0;$<_.length;$++)M+=_[$]*B[$];return M}},{key:"mmul",value:function(B){B=Nr.checkMatrix(B);for(var _=this.rows,M=this.columns,$=B.columns,Ee=new Nr(_,$),Ne=new Float64Array(M),Le=0;Le<$;Le++){for(var Ye=0;Ye<M;Ye++)Ne[Ye]=B.get(Ye,Le);for(var Ot=0;Ot<_;Ot++){for(var Et=0,Zt=0;Zt<M;Zt++)Et+=this.get(Ot,Zt)*Ne[Zt];Ee.set(Ot,Le,Et)}}return Ee}},{key:"strassen2x2",value:function(B){B=Nr.checkMatrix(B);var _=new Nr(2,2),M=this.get(0,0),$=B.get(0,0),Ee=this.get(0,1),Ne=B.get(0,1),Le=this.get(1,0),Ye=B.get(1,0),Ot=this.get(1,1),Et=B.get(1,1),Zt=(M+Ot)*($+Et),Lr=(Le+Ot)*$,or=M*(Ne-Et),$r=Ot*(Ye-$),Sn=(M+Ee)*Et,kt=(Le-M)*($+Ne),nr=(Ee-Ot)*(Ye+Et),_r=Zt+$r-Sn+nr,Fr=or+Sn,He=Lr+$r,Ae=Zt-Lr+or+kt;return _.set(0,0,_r),_.set(0,1,Fr),_.set(1,0,He),_.set(1,1,Ae),_}},{key:"strassen3x3",value:function(B){B=Nr.checkMatrix(B);var _=new Nr(3,3),M=this.get(0,0),$=this.get(0,1),Ee=this.get(0,2),Ne=this.get(1,0),Le=this.get(1,1),Ye=this.get(1,2),Ot=this.get(2,0),Et=this.get(2,1),Zt=this.get(2,2),Lr=B.get(0,0),or=B.get(0,1),$r=B.get(0,2),Sn=B.get(1,0),kt=B.get(1,1),nr=B.get(1,2),_r=B.get(2,0),Fr=B.get(2,1),He=B.get(2,2),Ae=(M+$+Ee-Ne-Le-Et-Zt)*kt,Qe=(M-Ne)*(-or+kt),ft=Le*(-Lr+or+Sn-kt-nr-_r+He),ut=(-M+Ne+Le)*(Lr-or+kt),St=(Ne+Le)*(-Lr+or),Qt=M*Lr,qt=(-M+Ot+Et)*(Lr-$r+nr),Xr=(-M+Ot)*($r-nr),vn=(Ot+Et)*(-Lr+$r),fn=(M+$+Ee-Le-Ye-Ot-Et)*nr,Hn=Et*(-Lr+$r+Sn-kt-nr-_r+Fr),kn=(-Ee+Et+Zt)*(kt+_r-Fr),da=(Ee-Zt)*(kt-Fr),ka=Ee*_r,Ra=(Et+Zt)*(-_r+Fr),Aa=(-Ee+Le+Ye)*(nr+_r-He),Eo=(Ee-Ye)*(nr-He),_i=(Le+Ye)*(-_r+He),qa=$*Sn,Qi=Ye*Fr,fs=Ne*$r,oo=Ot*or,so=Zt*He,Tr=Qt+ka+qa,ro=Ae+ut+St+Qt+kn+ka+Ra,cs=Qt+qt+vn+fn+ka+Aa+_i,ja=Qe+ft+ut+Qt+ka+Aa+Eo,bo=Qe+ut+St+Qt+Qi,Ho=ka+Aa+Eo+_i+fs,Fo=Qt+qt+Xr+Hn+kn+da+ka,Ui=kn+da+ka+Ra+oo,Ni=Qt+qt+Xr+vn+so;return _.set(0,0,Tr),_.set(0,1,ro),_.set(0,2,cs),_.set(1,0,ja),_.set(1,1,bo),_.set(1,2,Ho),_.set(2,0,Fo),_.set(2,1,Ui),_.set(2,2,Ni),_}},{key:"mmulStrassen",value:function(B){B=Nr.checkMatrix(B);var _=this.clone(),M=_.rows,$=_.columns,Ee=B.rows,Ne=B.columns;$!==Ee&&console.warn("Multiplying ".concat(M," x ").concat($," and ").concat(Ee," x ").concat(Ne," matrix: dimensions do not match."));function Le(Zt,Lr,or){var $r=Zt.rows,Sn=Zt.columns;if($r===Lr&&Sn===or)return Zt;var kt=le.zeros(Lr,or);return kt=kt.setSubMatrix(Zt,0,0),kt}var Ye=Math.max(M,Ee),Ot=Math.max($,Ne);_=Le(_,Ye,Ot),B=Le(B,Ye,Ot);function Et(Zt,Lr,or,$r){if(or<=512||$r<=512)return Zt.mmul(Lr);or%2===1&&$r%2===1?(Zt=Le(Zt,or+1,$r+1),Lr=Le(Lr,or+1,$r+1)):or%2===1?(Zt=Le(Zt,or+1,$r),Lr=Le(Lr,or+1,$r)):$r%2===1&&(Zt=Le(Zt,or,$r+1),Lr=Le(Lr,or,$r+1));var Sn=parseInt(Zt.rows/2,10),kt=parseInt(Zt.columns/2,10),nr=Zt.subMatrix(0,Sn-1,0,kt-1),_r=Lr.subMatrix(0,Sn-1,0,kt-1),Fr=Zt.subMatrix(0,Sn-1,kt,Zt.columns-1),He=Lr.subMatrix(0,Sn-1,kt,Lr.columns-1),Ae=Zt.subMatrix(Sn,Zt.rows-1,0,kt-1),Qe=Lr.subMatrix(Sn,Lr.rows-1,0,kt-1),ft=Zt.subMatrix(Sn,Zt.rows-1,kt,Zt.columns-1),ut=Lr.subMatrix(Sn,Lr.rows-1,kt,Lr.columns-1),St=Et(le.add(nr,ft),le.add(_r,ut),Sn,kt),Qt=Et(le.add(Ae,ft),_r,Sn,kt),qt=Et(nr,le.sub(He,ut),Sn,kt),Xr=Et(ft,le.sub(Qe,_r),Sn,kt),vn=Et(le.add(nr,Fr),ut,Sn,kt),fn=Et(le.sub(Ae,nr),le.add(_r,He),Sn,kt),Hn=Et(le.sub(Fr,ft),le.add(Qe,ut),Sn,kt),kn=le.add(St,Xr);kn.sub(vn),kn.add(Hn);var da=le.add(qt,vn),ka=le.add(Qt,Xr),Ra=le.sub(St,Qt);Ra.add(qt),Ra.add(fn);var Aa=le.zeros(2*kn.rows,2*kn.columns);return Aa=Aa.setSubMatrix(kn,0,0),Aa=Aa.setSubMatrix(da,kn.rows,0),Aa=Aa.setSubMatrix(ka,0,kn.columns),Aa=Aa.setSubMatrix(Ra,kn.rows,kn.columns),Aa.subMatrix(0,or-1,0,$r-1)}return Et(_,B,Ye,Ot)}},{key:"scaleRows",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(E()(B)!=="object")throw new TypeError("options must be an object");var _=B.min,M=_===void 0?0:_,$=B.max,Ee=$===void 0?1:$;if(!Number.isFinite(M))throw new TypeError("min must be a number");if(!Number.isFinite(Ee))throw new TypeError("max must be a number");if(M>=Ee)throw new RangeError("min must be smaller than max");for(var Ne=new Nr(this.rows,this.columns),Le=0;Le<this.rows;Le++){var Ye=this.getRow(Le);Ye.length>0&&k(Ye,{min:M,max:Ee,output:Ye}),Ne.setRow(Le,Ye)}return Ne}},{key:"scaleColumns",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(E()(B)!=="object")throw new TypeError("options must be an object");var _=B.min,M=_===void 0?0:_,$=B.max,Ee=$===void 0?1:$;if(!Number.isFinite(M))throw new TypeError("min must be a number");if(!Number.isFinite(Ee))throw new TypeError("max must be a number");if(M>=Ee)throw new RangeError("min must be smaller than max");for(var Ne=new Nr(this.rows,this.columns),Le=0;Le<this.columns;Le++){var Ye=this.getColumn(Le);Ye.length&&k(Ye,{min:M,max:Ee,output:Ye}),Ne.setColumn(Le,Ye)}return Ne}},{key:"flipRows",value:function(){for(var B=Math.ceil(this.columns/2),_=0;_<this.rows;_++)for(var M=0;M<B;M++){var $=this.get(_,M),Ee=this.get(_,this.columns-1-M);this.set(_,M,Ee),this.set(_,this.columns-1-M,$)}return this}},{key:"flipColumns",value:function(){for(var B=Math.ceil(this.rows/2),_=0;_<this.columns;_++)for(var M=0;M<B;M++){var $=this.get(M,_),Ee=this.get(this.rows-1-M,_);this.set(M,_,Ee),this.set(this.rows-1-M,_,$)}return this}},{key:"kroneckerProduct",value:function(B){B=Nr.checkMatrix(B);for(var _=this.rows,M=this.columns,$=B.rows,Ee=B.columns,Ne=new Nr(_*$,M*Ee),Le=0;Le<_;Le++)for(var Ye=0;Ye<M;Ye++)for(var Ot=0;Ot<$;Ot++)for(var Et=0;Et<Ee;Et++)Ne.set($*Le+Ot,Ee*Ye+Et,this.get(Le,Ye)*B.get(Ot,Et));return Ne}},{key:"kroneckerSum",value:function(B){if(B=Nr.checkMatrix(B),!this.isSquare()||!B.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var _=this.rows,M=B.rows,$=this.kroneckerProduct(Nr.eye(M,M)),Ee=Nr.eye(_,_).kroneckerProduct(B);return $.add(Ee)}},{key:"transpose",value:function(){for(var B=new Nr(this.columns,this.rows),_=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)B.set(M,_,this.get(_,M));return B}},{key:"sortRows",value:function(){for(var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dn,_=0;_<this.rows;_++)this.setRow(_,this.getRow(_).sort(B));return this}},{key:"sortColumns",value:function(){for(var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dn,_=0;_<this.columns;_++)this.setColumn(_,this.getColumn(_).sort(B));return this}},{key:"subMatrix",value:function(B,_,M,$){we(this,B,_,M,$);for(var Ee=new Nr(_-B+1,$-M+1),Ne=B;Ne<=_;Ne++)for(var Le=M;Le<=$;Le++)Ee.set(Ne-B,Le-M,this.get(Ne,Le));return Ee}},{key:"subMatrixRow",value:function(B,_,M){if(_===void 0&&(_=0),M===void 0&&(M=this.columns-1),_>M||_<0||_>=this.columns||M<0||M>=this.columns)throw new RangeError("Argument out of range");for(var $=new Nr(B.length,M-_+1),Ee=0;Ee<B.length;Ee++)for(var Ne=_;Ne<=M;Ne++){if(B[Ee]<0||B[Ee]>=this.rows)throw new RangeError("Row index out of range: ".concat(B[Ee]));$.set(Ee,Ne-_,this.get(B[Ee],Ne))}return $}},{key:"subMatrixColumn",value:function(B,_,M){if(_===void 0&&(_=0),M===void 0&&(M=this.rows-1),_>M||_<0||_>=this.rows||M<0||M>=this.rows)throw new RangeError("Argument out of range");for(var $=new Nr(M-_+1,B.length),Ee=0;Ee<B.length;Ee++)for(var Ne=_;Ne<=M;Ne++){if(B[Ee]<0||B[Ee]>=this.columns)throw new RangeError("Column index out of range: ".concat(B[Ee]));$.set(Ne-_,Ee,this.get(Ne,B[Ee]))}return $}},{key:"setSubMatrix",value:function(B,_,M){if(B=Nr.checkMatrix(B),B.isEmpty())return this;var $=_+B.rows-1,Ee=M+B.columns-1;we(this,_,$,M,Ee);for(var Ne=0;Ne<B.rows;Ne++)for(var Le=0;Le<B.columns;Le++)this.set(_+Ne,M+Le,B.get(Ne,Le));return this}},{key:"selection",value:function(B,_){Ie(this,B),Pe(this,_);for(var M=new Nr(B.length,_.length),$=0;$<B.length;$++)for(var Ee=B[$],Ne=0;Ne<_.length;Ne++){var Le=_[Ne];M.set($,Ne,this.get(Ee,Le))}return M}},{key:"trace",value:function(){for(var B=Math.min(this.rows,this.columns),_=0,M=0;M<B;M++)_+=this.get(M,M);return _}},{key:"clone",value:function(){for(var B=new Nr(this.rows,this.columns),_=0;_<this.rows;_++)for(var M=0;M<this.columns;M++)B.set(_,M,this.get(_,M));return B}},{key:"sum",value:function(B){switch(B){case"row":return Te(this);case"column":return We(this);case void 0:return Ge(this);default:throw new Error("invalid option: ".concat(B))}}},{key:"product",value:function(B){switch(B){case"row":return Je(this);case"column":return mt(this);case void 0:return xt(this);default:throw new Error("invalid option: ".concat(B))}}},{key:"mean",value:function(B){var _=this.sum(B);switch(B){case"row":{for(var M=0;M<this.rows;M++)_[M]/=this.columns;return _}case"column":{for(var $=0;$<this.columns;$++)_[$]/=this.rows;return _}case void 0:return _/this.size;default:throw new Error("invalid option: ".concat(B))}}},{key:"variance",value:function(B){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(E()(B)==="object"&&(_=B,B=void 0),E()(_)!=="object")throw new TypeError("options must be an object");var M=_,$=M.unbiased,Ee=$===void 0?!0:$,Ne=M.mean,Le=Ne===void 0?this.mean(B):Ne;if(typeof Ee!="boolean")throw new TypeError("unbiased must be a boolean");switch(B){case"row":{if(!b(Le))throw new TypeError("mean must be an array");return Ze(this,Ee,Le)}case"column":{if(!b(Le))throw new TypeError("mean must be an array");return $e(this,Ee,Le)}case void 0:{if(typeof Le!="number")throw new TypeError("mean must be a number");return gt(this,Ee,Le)}default:throw new Error("invalid option: ".concat(B))}}},{key:"standardDeviation",value:function(B,_){E()(B)==="object"&&(_=B,B=void 0);var M=this.variance(B,_);if(B===void 0)return Math.sqrt(M);for(var $=0;$<M.length;$++)M[$]=Math.sqrt(M[$]);return M}},{key:"center",value:function(B){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(E()(B)==="object"&&(_=B,B=void 0),E()(_)!=="object")throw new TypeError("options must be an object");var M=_,$=M.center,Ee=$===void 0?this.mean(B):$;switch(B){case"row":{if(!b(Ee))throw new TypeError("center must be an array");return At(this,Ee),this}case"column":{if(!b(Ee))throw new TypeError("center must be an array");return yt(this,Ee),this}case void 0:{if(typeof Ee!="number")throw new TypeError("center must be a number");return ct(this,Ee),this}default:throw new Error("invalid option: ".concat(B))}}},{key:"scale",value:function(B){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(E()(B)==="object"&&(_=B,B=void 0),E()(_)!=="object")throw new TypeError("options must be an object");var M=_.scale;switch(B){case"row":{if(M===void 0)M=Kt(this);else if(!b(M))throw new TypeError("scale must be an array");return $t(this,M),this}case"column":{if(M===void 0)M=jt(this);else if(!b(M))throw new TypeError("scale must be an array");return ir(this,M),this}case void 0:{if(M===void 0)M=mr(this);else if(typeof M!="number")throw new TypeError("scale must be a number");return tn(this,M),this}default:throw new Error("invalid option: ".concat(B))}}},{key:"toString",value:function(B){return X(this,B)}}],[{key:"from1DArray",value:function(B,_,M){var $=B*_;if($!==M.length)throw new RangeError("data length does not match given dimensions");for(var Ee=new Nr(B,_),Ne=0;Ne<B;Ne++)for(var Le=0;Le<_;Le++)Ee.set(Ne,Le,M[Ne*_+Le]);return Ee}},{key:"rowVector",value:function(B){for(var _=new Nr(1,B.length),M=0;M<B.length;M++)_.set(0,M,B[M]);return _}},{key:"columnVector",value:function(B){for(var _=new Nr(B.length,1),M=0;M<B.length;M++)_.set(M,0,B[M]);return _}},{key:"zeros",value:function(B,_){return new Nr(B,_)}},{key:"ones",value:function(B,_){return new Nr(B,_).fill(1)}},{key:"rand",value:function(B,_){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(E()(M)!=="object")throw new TypeError("options must be an object");for(var $=M.random,Ee=$===void 0?Math.random:$,Ne=new Nr(B,_),Le=0;Le<B;Le++)for(var Ye=0;Ye<_;Ye++)Ne.set(Le,Ye,Ee());return Ne}},{key:"randInt",value:function(B,_){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(E()(M)!=="object")throw new TypeError("options must be an object");var $=M.min,Ee=$===void 0?0:$,Ne=M.max,Le=Ne===void 0?1e3:Ne,Ye=M.random,Ot=Ye===void 0?Math.random:Ye;if(!Number.isInteger(Ee))throw new TypeError("min must be an integer");if(!Number.isInteger(Le))throw new TypeError("max must be an integer");if(Ee>=Le)throw new RangeError("min must be smaller than max");for(var Et=Le-Ee,Zt=new Nr(B,_),Lr=0;Lr<B;Lr++)for(var or=0;or<_;or++){var $r=Ee+Math.round(Ot()*Et);Zt.set(Lr,or,$r)}return Zt}},{key:"eye",value:function(B,_,M){_===void 0&&(_=B),M===void 0&&(M=1);for(var $=Math.min(B,_),Ee=this.zeros(B,_),Ne=0;Ne<$;Ne++)Ee.set(Ne,Ne,M);return Ee}},{key:"diag",value:function(B,_,M){var $=B.length;_===void 0&&(_=$),M===void 0&&(M=_);for(var Ee=Math.min($,_,M),Ne=this.zeros(_,M),Le=0;Le<Ee;Le++)Ne.set(Le,Le,B[Le]);return Ne}},{key:"min",value:function(B,_){B=this.checkMatrix(B),_=this.checkMatrix(_);for(var M=B.rows,$=B.columns,Ee=new Nr(M,$),Ne=0;Ne<M;Ne++)for(var Le=0;Le<$;Le++)Ee.set(Ne,Le,Math.min(B.get(Ne,Le),_.get(Ne,Le)));return Ee}},{key:"max",value:function(B,_){B=this.checkMatrix(B),_=this.checkMatrix(_);for(var M=B.rows,$=B.columns,Ee=new this(M,$),Ne=0;Ne<M;Ne++)for(var Le=0;Le<$;Le++)Ee.set(Ne,Le,Math.max(B.get(Ne,Le),_.get(Ne,Le)));return Ee}},{key:"checkMatrix",value:function(B){return le.isMatrix(B)?B:new Nr(B)}},{key:"isMatrix",value:function(B){return B!=null&&B.klass==="Matrix"}}]),le}();Dr.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Dr.prototype[Symbol.for("nodejs.util.inspect.custom")]=W);function Dn(le,ge){return le-ge}function Ve(le){return le.every(function(ge){return typeof ge=="number"})}Dr.random=Dr.rand,Dr.randomInt=Dr.randInt,Dr.diagonal=Dr.diag,Dr.prototype.diagonal=Dr.prototype.diag,Dr.identity=Dr.eye,Dr.prototype.negate=Dr.prototype.neg,Dr.prototype.tensorProduct=Dr.prototype.kroneckerProduct;var Nr=function(le){A()(B,le);var ge=O()(B);function B(_,M){var $;if(m()(this,B),$=ge.call(this),B.isMatrix(_))return Y()($,_.clone());if(Number.isInteger(_)&&_>=0)if($.data=[],Number.isInteger(M)&&M>=0)for(var Ee=0;Ee<_;Ee++)$.data.push(new Float64Array(M));else throw new TypeError("nColumns must be a positive integer");else if(b(_)){var Ne=_;if(_=Ne.length,M=_?Ne[0].length:0,typeof M!="number")throw new TypeError("Data must be a 2D array with at least one element");$.data=[];for(var Le=0;Le<_;Le++){if(Ne[Le].length!==M)throw new RangeError("Inconsistent array dimensions");if(!Ve(Ne[Le]))throw new TypeError("Input data contains non-numeric values");$.data.push(Float64Array.from(Ne[Le]))}}else throw new TypeError("First argument must be a positive number or an array");return $.rows=_,$.columns=M,$}return v()(B,[{key:"set",value:function(M,$,Ee){return this.data[M][$]=Ee,this}},{key:"get",value:function(M,$){return this.data[M][$]}},{key:"removeRow",value:function(M){return ae(this,M),this.data.splice(M,1),this.rows-=1,this}},{key:"addRow",value:function(M,$){return $===void 0&&($=M,M=this.rows),ae(this,M,!0),$=Float64Array.from(ce(this,$)),this.data.splice(M,0,$),this.rows+=1,this}},{key:"removeColumn",value:function(M){ue(this,M);for(var $=0;$<this.rows;$++){for(var Ee=new Float64Array(this.columns-1),Ne=0;Ne<M;Ne++)Ee[Ne]=this.data[$][Ne];for(var Le=M+1;Le<this.columns;Le++)Ee[Le-1]=this.data[$][Le];this.data[$]=Ee}return this.columns-=1,this}},{key:"addColumn",value:function(M,$){typeof $=="undefined"&&($=M,M=this.columns),ue(this,M,!0),$=De(this,$);for(var Ee=0;Ee<this.rows;Ee++){for(var Ne=new Float64Array(this.columns+1),Le=0;Le<M;Le++)Ne[Le]=this.data[Ee][Le];for(Ne[Le++]=$[Ee];Le<this.columns+1;Le++)Ne[Le]=this.data[Ee][Le-1];this.data[Ee]=Ne}return this.columns+=1,this}}]),B}(Dr);q(Dr,Nr);var Fn=function(le){A()(B,le);var ge=O()(B);function B(_,M,$){var Ee;return m()(this,B),Ee=ge.call(this),Ee.matrix=_,Ee.rows=M,Ee.columns=$,Ee}return v()(B)}(Dr),Vn=function(le){A()(B,le);var ge=O()(B);function B(_,M){var $;return m()(this,B),ue(_,M),$=ge.call(this,_,_.rows,1),$.column=M,$}return v()(B,[{key:"set",value:function(M,$,Ee){return this.matrix.set(M,this.column,Ee),this}},{key:"get",value:function(M){return this.matrix.get(M,this.column)}}]),B}(Fn),va=function(le){A()(B,le);var ge=O()(B);function B(_,M){var $;return m()(this,B),Pe(_,M),$=ge.call(this,_,_.rows,M.length),$.columnIndices=M,$}return v()(B,[{key:"set",value:function(M,$,Ee){return this.matrix.set(M,this.columnIndices[$],Ee),this}},{key:"get",value:function(M,$){return this.matrix.get(M,this.columnIndices[$])}}]),B}(Fn),aa=function(le){A()(B,le);var ge=O()(B);function B(_){return m()(this,B),ge.call(this,_,_.rows,_.columns)}return v()(B,[{key:"set",value:function(M,$,Ee){return this.matrix.set(M,this.columns-$-1,Ee),this}},{key:"get",value:function(M,$){return this.matrix.get(M,this.columns-$-1)}}]),B}(Fn),Ya=function(le){A()(B,le);var ge=O()(B);function B(_){return m()(this,B),ge.call(this,_,_.rows,_.columns)}return v()(B,[{key:"set",value:function(M,$,Ee){return this.matrix.set(this.rows-M-1,$,Ee),this}},{key:"get",value:function(M,$){return this.matrix.get(this.rows-M-1,$)}}]),B}(Fn),la=function(le){A()(B,le);var ge=O()(B);function B(_,M){var $;return m()(this,B),ae(_,M),$=ge.call(this,_,1,_.columns),$.row=M,$}return v()(B,[{key:"set",value:function(M,$,Ee){return this.matrix.set(this.row,$,Ee),this}},{key:"get",value:function(M,$){return this.matrix.get(this.row,$)}}]),B}(Fn),Qa=function(le){A()(B,le);var ge=O()(B);function B(_,M){var $;return m()(this,B),Ie(_,M),$=ge.call(this,_,M.length,_.columns),$.rowIndices=M,$}return v()(B,[{key:"set",value:function(M,$,Ee){return this.matrix.set(this.rowIndices[M],$,Ee),this}},{key:"get",value:function(M,$){return this.matrix.get(this.rowIndices[M],$)}}]),B}(Fn),Wa=function(le){A()(B,le);var ge=O()(B);function B(_,M,$){var Ee;return m()(this,B),Ie(_,M),Pe(_,$),Ee=ge.call(this,_,M.length,$.length),Ee.rowIndices=M,Ee.columnIndices=$,Ee}return v()(B,[{key:"set",value:function(M,$,Ee){return this.matrix.set(this.rowIndices[M],this.columnIndices[$],Ee),this}},{key:"get",value:function(M,$){return this.matrix.get(this.rowIndices[M],this.columnIndices[$])}}]),B}(Fn),Da=function(le){A()(B,le);var ge=O()(B);function B(_,M,$,Ee,Ne){var Le;return m()(this,B),we(_,M,$,Ee,Ne),Le=ge.call(this,_,$-M+1,Ne-Ee+1),Le.startRow=M,Le.startColumn=Ee,Le}return v()(B,[{key:"set",value:function(M,$,Ee){return this.matrix.set(this.startRow+M,this.startColumn+$,Ee),this}},{key:"get",value:function(M,$){return this.matrix.get(this.startRow+M,this.startColumn+$)}}]),B}(Fn),ar=function(le){A()(B,le);var ge=O()(B);function B(_){return m()(this,B),ge.call(this,_,_.columns,_.rows)}return v()(B,[{key:"set",value:function(M,$,Ee){return this.matrix.set($,M,Ee),this}},{key:"get",value:function(M,$){return this.matrix.get($,M)}}]),B}(Fn),Or=function(le){A()(B,le);var ge=O()(B);function B(_){var M,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};m()(this,B);var Ee=$.rows,Ne=Ee===void 0?1:Ee;if(_.length%Ne!==0)throw new Error("the data length is not divisible by the number of rows");return M=ge.call(this),M.rows=Ne,M.columns=_.length/Ne,M.data=_,M}return v()(B,[{key:"set",value:function(M,$,Ee){var Ne=this._calculateIndex(M,$);return this.data[Ne]=Ee,this}},{key:"get",value:function(M,$){var Ee=this._calculateIndex(M,$);return this.data[Ee]}},{key:"_calculateIndex",value:function(M,$){return M*this.columns+$}}]),B}(Dr),Qr=function(le){A()(B,le);var ge=O()(B);function B(_){var M;return m()(this,B),M=ge.call(this),M.data=_,M.rows=_.length,M.columns=_[0].length,M}return v()(B,[{key:"set",value:function(M,$,Ee){return this.data[M][$]=Ee,this}},{key:"get",value:function(M,$){return this.data[M][$]}}]),B}(Dr);function wn(le,ge){if(b(le))return le[0]&&b(le[0])?new Qr(le):new Or(le,ge);throw new Error("the argument is not an array")}var On=function(){function le(ge){m()(this,le),ge=Qr.checkMatrix(ge);var B=ge.clone(),_=B.rows,M=B.columns,$=new Float64Array(_),Ee=1,Ne,Le,Ye,Ot,Et,Zt,Lr,or,$r;for(Ne=0;Ne<_;Ne++)$[Ne]=Ne;for(or=new Float64Array(_),Le=0;Le<M;Le++){for(Ne=0;Ne<_;Ne++)or[Ne]=B.get(Ne,Le);for(Ne=0;Ne<_;Ne++){for($r=Math.min(Ne,Le),Et=0,Ye=0;Ye<$r;Ye++)Et+=B.get(Ne,Ye)*or[Ye];or[Ne]-=Et,B.set(Ne,Le,or[Ne])}for(Ot=Le,Ne=Le+1;Ne<_;Ne++)Math.abs(or[Ne])>Math.abs(or[Ot])&&(Ot=Ne);if(Ot!==Le){for(Ye=0;Ye<M;Ye++)Zt=B.get(Ot,Ye),B.set(Ot,Ye,B.get(Le,Ye)),B.set(Le,Ye,Zt);Lr=$[Ot],$[Ot]=$[Le],$[Le]=Lr,Ee=-Ee}if(Le<_&&B.get(Le,Le)!==0)for(Ne=Le+1;Ne<_;Ne++)B.set(Ne,Le,B.get(Ne,Le)/B.get(Le,Le))}this.LU=B,this.pivotVector=$,this.pivotSign=Ee}return v()(le,[{key:"isSingular",value:function(){for(var B=this.LU,_=B.columns,M=0;M<_;M++)if(B.get(M,M)===0)return!0;return!1}},{key:"solve",value:function(B){B=Nr.checkMatrix(B);var _=this.LU,M=_.rows;if(M!==B.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var $=B.columns,Ee=B.subMatrixRow(this.pivotVector,0,$-1),Ne=_.columns,Le,Ye,Ot;for(Ot=0;Ot<Ne;Ot++)for(Le=Ot+1;Le<Ne;Le++)for(Ye=0;Ye<$;Ye++)Ee.set(Le,Ye,Ee.get(Le,Ye)-Ee.get(Ot,Ye)*_.get(Le,Ot));for(Ot=Ne-1;Ot>=0;Ot--){for(Ye=0;Ye<$;Ye++)Ee.set(Ot,Ye,Ee.get(Ot,Ye)/_.get(Ot,Ot));for(Le=0;Le<Ot;Le++)for(Ye=0;Ye<$;Ye++)Ee.set(Le,Ye,Ee.get(Le,Ye)-Ee.get(Ot,Ye)*_.get(Le,Ot))}return Ee}},{key:"determinant",get:function(){var B=this.LU;if(!B.isSquare())throw new Error("Matrix must be square");for(var _=this.pivotSign,M=B.columns,$=0;$<M;$++)_*=B.get($,$);return _}},{key:"lowerTriangularMatrix",get:function(){for(var B=this.LU,_=B.rows,M=B.columns,$=new Nr(_,M),Ee=0;Ee<_;Ee++)for(var Ne=0;Ne<M;Ne++)Ee>Ne?$.set(Ee,Ne,B.get(Ee,Ne)):Ee===Ne?$.set(Ee,Ne,1):$.set(Ee,Ne,0);return $}},{key:"upperTriangularMatrix",get:function(){for(var B=this.LU,_=B.rows,M=B.columns,$=new Nr(_,M),Ee=0;Ee<_;Ee++)for(var Ne=0;Ne<M;Ne++)Ee<=Ne?$.set(Ee,Ne,B.get(Ee,Ne)):$.set(Ee,Ne,0);return $}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),le}();function Gn(le,ge){var B=0;return Math.abs(le)>Math.abs(ge)?(B=ge/le,Math.abs(le)*Math.sqrt(1+B*B)):ge!==0?(B=le/ge,Math.abs(ge)*Math.sqrt(1+B*B)):0}var qn=function(){function le(ge){m()(this,le),ge=Qr.checkMatrix(ge);var B=ge.clone(),_=ge.rows,M=ge.columns,$=new Float64Array(M),Ee,Ne,Le,Ye;for(Le=0;Le<M;Le++){var Ot=0;for(Ee=Le;Ee<_;Ee++)Ot=Gn(Ot,B.get(Ee,Le));if(Ot!==0){for(B.get(Le,Le)<0&&(Ot=-Ot),Ee=Le;Ee<_;Ee++)B.set(Ee,Le,B.get(Ee,Le)/Ot);for(B.set(Le,Le,B.get(Le,Le)+1),Ne=Le+1;Ne<M;Ne++){for(Ye=0,Ee=Le;Ee<_;Ee++)Ye+=B.get(Ee,Le)*B.get(Ee,Ne);for(Ye=-Ye/B.get(Le,Le),Ee=Le;Ee<_;Ee++)B.set(Ee,Ne,B.get(Ee,Ne)+Ye*B.get(Ee,Le))}}$[Le]=-Ot}this.QR=B,this.Rdiag=$}return v()(le,[{key:"solve",value:function(B){B=Nr.checkMatrix(B);var _=this.QR,M=_.rows;if(B.rows!==M)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var $=B.columns,Ee=B.clone(),Ne=_.columns,Le,Ye,Ot,Et;for(Ot=0;Ot<Ne;Ot++)for(Ye=0;Ye<$;Ye++){for(Et=0,Le=Ot;Le<M;Le++)Et+=_.get(Le,Ot)*Ee.get(Le,Ye);for(Et=-Et/_.get(Ot,Ot),Le=Ot;Le<M;Le++)Ee.set(Le,Ye,Ee.get(Le,Ye)+Et*_.get(Le,Ot))}for(Ot=Ne-1;Ot>=0;Ot--){for(Ye=0;Ye<$;Ye++)Ee.set(Ot,Ye,Ee.get(Ot,Ye)/this.Rdiag[Ot]);for(Le=0;Le<Ot;Le++)for(Ye=0;Ye<$;Ye++)Ee.set(Le,Ye,Ee.get(Le,Ye)-Ee.get(Ot,Ye)*_.get(Le,Ot))}return Ee.subMatrix(0,Ne-1,0,$-1)}},{key:"isFullRank",value:function(){for(var B=this.QR.columns,_=0;_<B;_++)if(this.Rdiag[_]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var B=this.QR,_=B.columns,M=new Nr(_,_),$,Ee;for($=0;$<_;$++)for(Ee=0;Ee<_;Ee++)$<Ee?M.set($,Ee,B.get($,Ee)):$===Ee?M.set($,Ee,this.Rdiag[$]):M.set($,Ee,0);return M}},{key:"orthogonalMatrix",get:function(){var B=this.QR,_=B.rows,M=B.columns,$=new Nr(_,M),Ee,Ne,Le,Ye;for(Le=M-1;Le>=0;Le--){for(Ee=0;Ee<_;Ee++)$.set(Ee,Le,0);for($.set(Le,Le,1),Ne=Le;Ne<M;Ne++)if(B.get(Le,Le)!==0){for(Ye=0,Ee=Le;Ee<_;Ee++)Ye+=B.get(Ee,Le)*$.get(Ee,Ne);for(Ye=-Ye/B.get(Le,Le),Ee=Le;Ee<_;Ee++)$.set(Ee,Ne,$.get(Ee,Ne)+Ye*B.get(Ee,Le))}}return $}}]),le}(),oa=function(){function le(ge){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(m()(this,le),ge=Qr.checkMatrix(ge),ge.isEmpty())throw new Error("Matrix must be non-empty");var _=ge.rows,M=ge.columns,$=B.computeLeftSingularVectors,Ee=$===void 0?!0:$,Ne=B.computeRightSingularVectors,Le=Ne===void 0?!0:Ne,Ye=B.autoTranspose,Ot=Ye===void 0?!1:Ye,Et=!!Ee,Zt=!!Le,Lr=!1,or;if(_<M)if(!Ot)or=ge.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{or=ge.transpose(),_=or.rows,M=or.columns,Lr=!0;var $r=Et;Et=Zt,Zt=$r}else or=ge.clone();for(var Sn=Math.min(_,M),kt=Math.min(_+1,M),nr=new Float64Array(kt),_r=new Nr(_,Sn),Fr=new Nr(M,M),He=new Float64Array(M),Ae=new Float64Array(_),Qe=new Float64Array(kt),ft=0;ft<kt;ft++)Qe[ft]=ft;for(var ut=Math.min(_-1,M),St=Math.max(0,Math.min(M-2,_)),Qt=Math.max(ut,St),qt=0;qt<Qt;qt++){if(qt<ut){nr[qt]=0;for(var Xr=qt;Xr<_;Xr++)nr[qt]=Gn(nr[qt],or.get(Xr,qt));if(nr[qt]!==0){or.get(qt,qt)<0&&(nr[qt]=-nr[qt]);for(var vn=qt;vn<_;vn++)or.set(vn,qt,or.get(vn,qt)/nr[qt]);or.set(qt,qt,or.get(qt,qt)+1)}nr[qt]=-nr[qt]}for(var fn=qt+1;fn<M;fn++){if(qt<ut&&nr[qt]!==0){for(var Hn=0,kn=qt;kn<_;kn++)Hn+=or.get(kn,qt)*or.get(kn,fn);Hn=-Hn/or.get(qt,qt);for(var da=qt;da<_;da++)or.set(da,fn,or.get(da,fn)+Hn*or.get(da,qt))}He[fn]=or.get(qt,fn)}if(Et&&qt<ut)for(var ka=qt;ka<_;ka++)_r.set(ka,qt,or.get(ka,qt));if(qt<St){He[qt]=0;for(var Ra=qt+1;Ra<M;Ra++)He[qt]=Gn(He[qt],He[Ra]);if(He[qt]!==0){He[qt+1]<0&&(He[qt]=0-He[qt]);for(var Aa=qt+1;Aa<M;Aa++)He[Aa]/=He[qt];He[qt+1]+=1}if(He[qt]=-He[qt],qt+1<_&&He[qt]!==0){for(var Eo=qt+1;Eo<_;Eo++)Ae[Eo]=0;for(var _i=qt+1;_i<_;_i++)for(var qa=qt+1;qa<M;qa++)Ae[_i]+=He[qa]*or.get(_i,qa);for(var Qi=qt+1;Qi<M;Qi++)for(var fs=-He[Qi]/He[qt+1],oo=qt+1;oo<_;oo++)or.set(oo,Qi,or.get(oo,Qi)+fs*Ae[oo])}if(Zt)for(var so=qt+1;so<M;so++)Fr.set(so,qt,He[so])}}var Tr=Math.min(M,_+1);if(ut<M&&(nr[ut]=or.get(ut,ut)),_<Tr&&(nr[Tr-1]=0),St+1<Tr&&(He[St]=or.get(St,Tr-1)),He[Tr-1]=0,Et){for(var ro=ut;ro<Sn;ro++){for(var cs=0;cs<_;cs++)_r.set(cs,ro,0);_r.set(ro,ro,1)}for(var ja=ut-1;ja>=0;ja--)if(nr[ja]!==0){for(var bo=ja+1;bo<Sn;bo++){for(var Ho=0,Fo=ja;Fo<_;Fo++)Ho+=_r.get(Fo,ja)*_r.get(Fo,bo);Ho=-Ho/_r.get(ja,ja);for(var Ui=ja;Ui<_;Ui++)_r.set(Ui,bo,_r.get(Ui,bo)+Ho*_r.get(Ui,ja))}for(var Ni=ja;Ni<_;Ni++)_r.set(Ni,ja,-_r.get(Ni,ja));_r.set(ja,ja,1+_r.get(ja,ja));for(var _s=0;_s<ja-1;_s++)_r.set(_s,ja,0)}else{for(var ls=0;ls<_;ls++)_r.set(ls,ja,0);_r.set(ja,ja,1)}}if(Zt)for(var mi=M-1;mi>=0;mi--){if(mi<St&&He[mi]!==0)for(var qi=mi+1;qi<M;qi++){for(var Ms=0,Cs=mi+1;Cs<M;Cs++)Ms+=Fr.get(Cs,mi)*Fr.get(Cs,qi);Ms=-Ms/Fr.get(mi+1,mi);for(var Lo=mi+1;Lo<M;Lo++)Fr.set(Lo,qi,Fr.get(Lo,qi)+Ms*Fr.get(Lo,mi))}for(var uo=0;uo<M;uo++)Fr.set(uo,mi,0);Fr.set(mi,mi,1)}for(var Ts=Tr-1,ds=0,Is=Number.EPSILON;Tr>0;){var Nn=void 0,Ji=void 0;for(Nn=Tr-2;Nn>=-1&&Nn!==-1;Nn--){var fo=Number.MIN_VALUE+Is*Math.abs(nr[Nn]+Math.abs(nr[Nn+1]));if(Math.abs(He[Nn])<=fo||Number.isNaN(He[Nn])){He[Nn]=0;break}}if(Nn===Tr-2)Ji=4;else{var Ii=void 0;for(Ii=Tr-1;Ii>=Nn&&Ii!==Nn;Ii--){var As=(Ii!==Tr?Math.abs(He[Ii]):0)+(Ii!==Nn+1?Math.abs(He[Ii-1]):0);if(Math.abs(nr[Ii])<=Is*As){nr[Ii]=0;break}}Ii===Nn?Ji=3:Ii===Tr-1?Ji=1:(Ji=2,Nn=Ii)}switch(Nn++,Ji){case 1:{var co=He[Tr-2];He[Tr-2]=0;for(var Bi=Tr-2;Bi>=Nn;Bi--){var es=Gn(nr[Bi],co),hs=nr[Bi]/es,Go=co/es;if(nr[Bi]=es,Bi!==Nn&&(co=-Go*He[Bi-1],He[Bi-1]=hs*He[Bi-1]),Zt)for(var Oa=0;Oa<M;Oa++)es=hs*Fr.get(Oa,Bi)+Go*Fr.get(Oa,Tr-1),Fr.set(Oa,Tr-1,-Go*Fr.get(Oa,Bi)+hs*Fr.get(Oa,Tr-1)),Fr.set(Oa,Bi,es)}break}case 2:{var Zo=He[Nn-1];He[Nn-1]=0;for(var no=Nn;no<Tr;no++){var Wi=Gn(nr[no],Zo),ts=nr[no]/Wi,vs=Zo/Wi;if(nr[no]=Wi,Zo=-vs*He[no],He[no]=ts*He[no],Et)for(var Ja=0;Ja<_;Ja++)Wi=ts*_r.get(Ja,no)+vs*_r.get(Ja,Nn-1),_r.set(Ja,Nn-1,-vs*_r.get(Ja,no)+ts*_r.get(Ja,Nn-1)),_r.set(Ja,no,Wi)}break}case 3:{var eo=Math.max(Math.abs(nr[Tr-1]),Math.abs(nr[Tr-2]),Math.abs(He[Tr-2]),Math.abs(nr[Nn]),Math.abs(He[Nn])),fi=nr[Tr-1]/eo,Os=nr[Tr-2]/eo,lo=He[Tr-2]/eo,rs=nr[Nn]/eo,Do=He[Nn]/eo,ji=((Os+fi)*(Os-fi)+lo*lo)/2,zo=fi*lo*(fi*lo),ho=0;(ji!==0||zo!==0)&&(ji<0?ho=0-Math.sqrt(ji*ji+zo):ho=Math.sqrt(ji*ji+zo),ho=zo/(ji+ho));for(var Uo=(rs+fi)*(rs-fi)+ho,xo=rs*Do,Ma=Nn;Ma<Tr-1;Ma++){var Ai=Gn(Uo,xo);Ai===0&&(Ai=Number.MIN_VALUE);var Hi=Uo/Ai,En=xo/Ai;if(Ma!==Nn&&(He[Ma-1]=Ai),Uo=Hi*nr[Ma]+En*He[Ma],He[Ma]=Hi*He[Ma]-En*nr[Ma],xo=En*nr[Ma+1],nr[Ma+1]=Hi*nr[Ma+1],Zt)for(var cn=0;cn<M;cn++)Ai=Hi*Fr.get(cn,Ma)+En*Fr.get(cn,Ma+1),Fr.set(cn,Ma+1,-En*Fr.get(cn,Ma)+Hi*Fr.get(cn,Ma+1)),Fr.set(cn,Ma,Ai);if(Ai=Gn(Uo,xo),Ai===0&&(Ai=Number.MIN_VALUE),Hi=Uo/Ai,En=xo/Ai,nr[Ma]=Ai,Uo=Hi*He[Ma]+En*nr[Ma+1],nr[Ma+1]=-En*He[Ma]+Hi*nr[Ma+1],xo=En*He[Ma+1],He[Ma+1]=Hi*He[Ma+1],Et&&Ma<_-1)for(var Wo=0;Wo<_;Wo++)Ai=Hi*_r.get(Wo,Ma)+En*_r.get(Wo,Ma+1),_r.set(Wo,Ma+1,-En*_r.get(Wo,Ma)+Hi*_r.get(Wo,Ma+1)),_r.set(Wo,Ma,Ai)}He[Tr-2]=Uo,ds=ds+1;break}case 4:{if(nr[Nn]<=0&&(nr[Nn]=nr[Nn]<0?-nr[Nn]:0,Zt))for(var oi=0;oi<=Ts;oi++)Fr.set(oi,Nn,-Fr.get(oi,Nn));for(;Nn<Ts&&!(nr[Nn]>=nr[Nn+1]);){var No=nr[Nn];if(nr[Nn]=nr[Nn+1],nr[Nn+1]=No,Zt&&Nn<M-1)for(var ao=0;ao<M;ao++)No=Fr.get(ao,Nn+1),Fr.set(ao,Nn+1,Fr.get(ao,Nn)),Fr.set(ao,Nn,No);if(Et&&Nn<_-1)for(var Xa=0;Xa<_;Xa++)No=_r.get(Xa,Nn+1),_r.set(Xa,Nn+1,_r.get(Xa,Nn)),_r.set(Xa,Nn,No);Nn++}ds=0,Tr--;break}}}if(Lr){var ci=Fr;Fr=_r,_r=ci}this.m=_,this.n=M,this.s=nr,this.U=_r,this.V=Fr}return v()(le,[{key:"solve",value:function(B){for(var _=B,M=this.threshold,$=this.s.length,Ee=Nr.zeros($,$),Ne=0;Ne<$;Ne++)Math.abs(this.s[Ne])<=M?Ee.set(Ne,Ne,0):Ee.set(Ne,Ne,1/this.s[Ne]);for(var Le=this.U,Ye=this.rightSingularVectors,Ot=Ye.mmul(Ee),Et=Ye.rows,Zt=Le.rows,Lr=Nr.zeros(Et,Zt),or=0;or<Et;or++)for(var $r=0;$r<Zt;$r++){for(var Sn=0,kt=0;kt<$;kt++)Sn+=Ot.get(or,kt)*Le.get($r,kt);Lr.set(or,$r,Sn)}return Lr.mmul(_)}},{key:"solveForDiagonal",value:function(B){return this.solve(Nr.diag(B))}},{key:"inverse",value:function(){for(var B=this.V,_=this.threshold,M=B.rows,$=B.columns,Ee=new Nr(M,this.s.length),Ne=0;Ne<M;Ne++)for(var Le=0;Le<$;Le++)Math.abs(this.s[Le])>_&&Ee.set(Ne,Le,B.get(Ne,Le)/this.s[Le]);for(var Ye=this.U,Ot=Ye.rows,Et=Ye.columns,Zt=new Nr(M,Ot),Lr=0;Lr<M;Lr++)for(var or=0;or<Ot;or++){for(var $r=0,Sn=0;Sn<Et;Sn++)$r+=Ee.get(Lr,Sn)*Ye.get(or,Sn);Zt.set(Lr,or,$r)}return Zt}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var B=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,_=0,M=this.s,$=0,Ee=M.length;$<Ee;$++)M[$]>B&&_++;return _}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Nr.diag(this.s)}}]),le}();function ya(le){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return le=Qr.checkMatrix(le),ge?new oa(le).inverse():Ka(le,Nr.eye(le.rows))}function Ka(le,ge){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return le=Qr.checkMatrix(le),ge=Qr.checkMatrix(ge),B?new oa(le).solve(ge):le.isSquare()?new On(le).solve(ge):new qn(le).solve(ge)}function mn(le){if(le=Nr.checkMatrix(le),le.isSquare()){if(le.columns===0)return 1;var ge,B,_,M;if(le.columns===2)return ge=le.get(0,0),B=le.get(0,1),_=le.get(1,0),M=le.get(1,1),ge*M-B*_;if(le.columns===3){var $,Ee,Ne;return $=new Wa(le,[1,2],[1,2]),Ee=new Wa(le,[1,2],[0,2]),Ne=new Wa(le,[1,2],[0,1]),ge=le.get(0,0),B=le.get(0,1),_=le.get(0,2),ge*mn($)-B*mn(Ee)+_*mn(Ne)}else return new On(le).determinant}else throw Error("determinant can only be calculated for a square matrix")}function jn(le,ge){for(var B=[],_=0;_<le;_++)_!==ge&&B.push(_);return B}function Jn(le,ge,B){var _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(le>M)return new Array(ge.rows+1).fill(0);for(var $=ge.addRow(B,[0]),Ee=0;Ee<$.rows;Ee++)Math.abs($.get(Ee,0))<_&&$.set(Ee,0,0);return $.to1DArray()}function Ln(le){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=ge.thresholdValue,_=B===void 0?1e-9:B,M=ge.thresholdError,$=M===void 0?1e-9:M;le=Nr.checkMatrix(le);for(var Ee=le.rows,Ne=new Nr(Ee,Ee),Le=0;Le<Ee;Le++){var Ye=Nr.columnVector(le.getRow(Le)),Ot=le.subMatrixRow(jn(Ee,Le)).transpose(),Et=new oa(Ot),Zt=Et.solve(Ye),Lr=Nr.sub(Ye,Ot.mmul(Zt)).abs().max();Ne.setRow(Le,Jn(Lr,Zt,Le,_,$))}return Ne}function ma(le){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(le=Nr.checkMatrix(le),le.isEmpty())return le.transpose();for(var B=new oa(le,{autoTranspose:!0}),_=B.leftSingularVectors,M=B.rightSingularVectors,$=B.diagonal,Ee=0;Ee<$.length;Ee++)Math.abs($[Ee])>ge?$[Ee]=1/$[Ee]:$[Ee]=0;return M.mmul(Nr.diag($).mmul(_.transpose()))}function Z(le){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:le,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};le=new Nr(le);var _=!1;if(E()(ge)==="object"&&!Nr.isMatrix(ge)&&!b(ge)?(B=ge,ge=le,_=!0):ge=new Nr(ge),le.rows!==ge.rows)throw new TypeError("Both matrices must have the same number of rows");var M=B,$=M.center,Ee=$===void 0?!0:$;Ee&&(le=le.center("column"),_||(ge=ge.center("column")));for(var Ne=le.transpose().mmul(ge),Le=0;Le<Ne.rows;Le++)for(var Ye=0;Ye<Ne.columns;Ye++)Ne.set(Le,Ye,Ne.get(Le,Ye)*(1/(le.rows-1)));return Ne}function Gt(le){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:le,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};le=new Nr(le);var _=!1;if(E()(ge)==="object"&&!Nr.isMatrix(ge)&&!b(ge)?(B=ge,ge=le,_=!0):ge=new Nr(ge),le.rows!==ge.rows)throw new TypeError("Both matrices must have the same number of rows");var M=B,$=M.center,Ee=$===void 0?!0:$,Ne=M.scale,Le=Ne===void 0?!0:Ne;Ee&&(le.center("column"),_||ge.center("column")),Le&&(le.scale("column"),_||ge.scale("column"));for(var Ye=le.standardDeviation("column",{unbiased:!0}),Ot=_?Ye:ge.standardDeviation("column",{unbiased:!0}),Et=le.transpose().mmul(ge),Zt=0;Zt<Et.rows;Zt++)for(var Lr=0;Lr<Et.columns;Lr++)Et.set(Zt,Lr,Et.get(Zt,Lr)*(1/(Ye[Zt]*Ot[Lr]))*(1/(le.rows-1)));return Et}var lt=function(){function le(ge){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};m()(this,le);var _=B.assumeSymmetric,M=_===void 0?!1:_;if(ge=Qr.checkMatrix(ge),!ge.isSquare())throw new Error("Matrix is not a square matrix");if(ge.isEmpty())throw new Error("Matrix must be non-empty");var $=ge.columns,Ee=new Nr($,$),Ne=new Float64Array($),Le=new Float64Array($),Ye=ge,Ot,Et,Zt=!1;if(M?Zt=!0:Zt=ge.isSymmetric(),Zt){for(Ot=0;Ot<$;Ot++)for(Et=0;Et<$;Et++)Ee.set(Ot,Et,Ye.get(Ot,Et));Ht($,Le,Ne,Ee),Ft($,Le,Ne,Ee)}else{var Lr=new Nr($,$),or=new Float64Array($);for(Et=0;Et<$;Et++)for(Ot=0;Ot<$;Ot++)Lr.set(Ot,Et,Ye.get(Ot,Et));Ir($,Lr,or,Ee),Sr($,Le,Ne,Ee,Lr)}this.n=$,this.e=Le,this.d=Ne,this.V=Ee}return v()(le,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var B=this.n,_=this.e,M=this.d,$=new Nr(B,B),Ee,Ne;for(Ee=0;Ee<B;Ee++){for(Ne=0;Ne<B;Ne++)$.set(Ee,Ne,0);$.set(Ee,Ee,M[Ee]),_[Ee]>0?$.set(Ee,Ee+1,_[Ee]):_[Ee]<0&&$.set(Ee,Ee-1,_[Ee])}return $}}]),le}();function Ht(le,ge,B,_){var M,$,Ee,Ne,Le,Ye,Ot,Et;for(Le=0;Le<le;Le++)B[Le]=_.get(le-1,Le);for(Ne=le-1;Ne>0;Ne--){for(Et=0,Ee=0,Ye=0;Ye<Ne;Ye++)Et=Et+Math.abs(B[Ye]);if(Et===0)for(ge[Ne]=B[Ne-1],Le=0;Le<Ne;Le++)B[Le]=_.get(Ne-1,Le),_.set(Ne,Le,0),_.set(Le,Ne,0);else{for(Ye=0;Ye<Ne;Ye++)B[Ye]/=Et,Ee+=B[Ye]*B[Ye];for(M=B[Ne-1],$=Math.sqrt(Ee),M>0&&($=-$),ge[Ne]=Et*$,Ee=Ee-M*$,B[Ne-1]=M-$,Le=0;Le<Ne;Le++)ge[Le]=0;for(Le=0;Le<Ne;Le++){for(M=B[Le],_.set(Le,Ne,M),$=ge[Le]+_.get(Le,Le)*M,Ye=Le+1;Ye<=Ne-1;Ye++)$+=_.get(Ye,Le)*B[Ye],ge[Ye]+=_.get(Ye,Le)*M;ge[Le]=$}for(M=0,Le=0;Le<Ne;Le++)ge[Le]/=Ee,M+=ge[Le]*B[Le];for(Ot=M/(Ee+Ee),Le=0;Le<Ne;Le++)ge[Le]-=Ot*B[Le];for(Le=0;Le<Ne;Le++){for(M=B[Le],$=ge[Le],Ye=Le;Ye<=Ne-1;Ye++)_.set(Ye,Le,_.get(Ye,Le)-(M*ge[Ye]+$*B[Ye]));B[Le]=_.get(Ne-1,Le),_.set(Ne,Le,0)}}B[Ne]=Ee}for(Ne=0;Ne<le-1;Ne++){if(_.set(le-1,Ne,_.get(Ne,Ne)),_.set(Ne,Ne,1),Ee=B[Ne+1],Ee!==0){for(Ye=0;Ye<=Ne;Ye++)B[Ye]=_.get(Ye,Ne+1)/Ee;for(Le=0;Le<=Ne;Le++){for($=0,Ye=0;Ye<=Ne;Ye++)$+=_.get(Ye,Ne+1)*_.get(Ye,Le);for(Ye=0;Ye<=Ne;Ye++)_.set(Ye,Le,_.get(Ye,Le)-$*B[Ye])}}for(Ye=0;Ye<=Ne;Ye++)_.set(Ye,Ne+1,0)}for(Le=0;Le<le;Le++)B[Le]=_.get(le-1,Le),_.set(le-1,Le,0);_.set(le-1,le-1,1),ge[0]=0}function Ft(le,ge,B,_){var M,$,Ee,Ne,Le,Ye,Ot,Et,Zt,Lr,or,$r,Sn,kt,nr,_r,Fr;for(Ee=1;Ee<le;Ee++)ge[Ee-1]=ge[Ee];ge[le-1]=0;var He=0,Ae=0,Qe=Number.EPSILON;for(Ye=0;Ye<le;Ye++){for(Ae=Math.max(Ae,Math.abs(B[Ye])+Math.abs(ge[Ye])),Ot=Ye;Ot<le&&!(Math.abs(ge[Ot])<=Qe*Ae);)Ot++;if(Ot>Ye){Fr=0;do{for(Fr=Fr+1,M=B[Ye],Et=(B[Ye+1]-M)/(2*ge[Ye]),Zt=Gn(Et,1),Et<0&&(Zt=-Zt),B[Ye]=ge[Ye]/(Et+Zt),B[Ye+1]=ge[Ye]*(Et+Zt),Lr=B[Ye+1],$=M-B[Ye],Ee=Ye+2;Ee<le;Ee++)B[Ee]-=$;for(He=He+$,Et=B[Ot],or=1,$r=or,Sn=or,kt=ge[Ye+1],nr=0,_r=0,Ee=Ot-1;Ee>=Ye;Ee--)for(Sn=$r,$r=or,_r=nr,M=or*ge[Ee],$=or*Et,Zt=Gn(Et,ge[Ee]),ge[Ee+1]=nr*Zt,nr=ge[Ee]/Zt,or=Et/Zt,Et=or*B[Ee]-nr*M,B[Ee+1]=$+nr*(or*M+nr*B[Ee]),Le=0;Le<le;Le++)$=_.get(Le,Ee+1),_.set(Le,Ee+1,nr*_.get(Le,Ee)+or*$),_.set(Le,Ee,or*_.get(Le,Ee)-nr*$);Et=-nr*_r*Sn*kt*ge[Ye]/Lr,ge[Ye]=nr*Et,B[Ye]=or*Et}while(Math.abs(ge[Ye])>Qe*Ae)}B[Ye]=B[Ye]+He,ge[Ye]=0}for(Ee=0;Ee<le-1;Ee++){for(Le=Ee,Et=B[Ee],Ne=Ee+1;Ne<le;Ne++)B[Ne]<Et&&(Le=Ne,Et=B[Ne]);if(Le!==Ee)for(B[Le]=B[Ee],B[Ee]=Et,Ne=0;Ne<le;Ne++)Et=_.get(Ne,Ee),_.set(Ne,Ee,_.get(Ne,Le)),_.set(Ne,Le,Et)}}function Ir(le,ge,B,_){var M=0,$=le-1,Ee,Ne,Le,Ye,Ot,Et,Zt;for(Et=M+1;Et<=$-1;Et++){for(Zt=0,Ye=Et;Ye<=$;Ye++)Zt=Zt+Math.abs(ge.get(Ye,Et-1));if(Zt!==0){for(Le=0,Ye=$;Ye>=Et;Ye--)B[Ye]=ge.get(Ye,Et-1)/Zt,Le+=B[Ye]*B[Ye];for(Ne=Math.sqrt(Le),B[Et]>0&&(Ne=-Ne),Le=Le-B[Et]*Ne,B[Et]=B[Et]-Ne,Ot=Et;Ot<le;Ot++){for(Ee=0,Ye=$;Ye>=Et;Ye--)Ee+=B[Ye]*ge.get(Ye,Ot);for(Ee=Ee/Le,Ye=Et;Ye<=$;Ye++)ge.set(Ye,Ot,ge.get(Ye,Ot)-Ee*B[Ye])}for(Ye=0;Ye<=$;Ye++){for(Ee=0,Ot=$;Ot>=Et;Ot--)Ee+=B[Ot]*ge.get(Ye,Ot);for(Ee=Ee/Le,Ot=Et;Ot<=$;Ot++)ge.set(Ye,Ot,ge.get(Ye,Ot)-Ee*B[Ot])}B[Et]=Zt*B[Et],ge.set(Et,Et-1,Zt*Ne)}}for(Ye=0;Ye<le;Ye++)for(Ot=0;Ot<le;Ot++)_.set(Ye,Ot,Ye===Ot?1:0);for(Et=$-1;Et>=M+1;Et--)if(ge.get(Et,Et-1)!==0){for(Ye=Et+1;Ye<=$;Ye++)B[Ye]=ge.get(Ye,Et-1);for(Ot=Et;Ot<=$;Ot++){for(Ne=0,Ye=Et;Ye<=$;Ye++)Ne+=B[Ye]*_.get(Ye,Ot);for(Ne=Ne/B[Et]/ge.get(Et,Et-1),Ye=Et;Ye<=$;Ye++)_.set(Ye,Ot,_.get(Ye,Ot)+Ne*B[Ye])}}}function Sr(le,ge,B,_,M){var $=le-1,Ee=0,Ne=le-1,Le=Number.EPSILON,Ye=0,Ot=0,Et=0,Zt=0,Lr=0,or=0,$r=0,Sn=0,kt,nr,_r,Fr,He,Ae,Qe,ft,ut,St,Qt,qt,Xr,vn,fn;for(kt=0;kt<le;kt++)for((kt<Ee||kt>Ne)&&(B[kt]=M.get(kt,kt),ge[kt]=0),nr=Math.max(kt-1,0);nr<le;nr++)Ot=Ot+Math.abs(M.get(kt,nr));for(;$>=Ee;){for(Fr=$;Fr>Ee&&(or=Math.abs(M.get(Fr-1,Fr-1))+Math.abs(M.get(Fr,Fr)),or===0&&(or=Ot),!(Math.abs(M.get(Fr,Fr-1))<Le*or));)Fr--;if(Fr===$)M.set($,$,M.get($,$)+Ye),B[$]=M.get($,$),ge[$]=0,$--,Sn=0;else if(Fr===$-1){if(Qe=M.get($,$-1)*M.get($-1,$),Et=(M.get($-1,$-1)-M.get($,$))/2,Zt=Et*Et+Qe,$r=Math.sqrt(Math.abs(Zt)),M.set($,$,M.get($,$)+Ye),M.set($-1,$-1,M.get($-1,$-1)+Ye),ft=M.get($,$),Zt>=0){for($r=Et>=0?Et+$r:Et-$r,B[$-1]=ft+$r,B[$]=B[$-1],$r!==0&&(B[$]=ft-Qe/$r),ge[$-1]=0,ge[$]=0,ft=M.get($,$-1),or=Math.abs(ft)+Math.abs($r),Et=ft/or,Zt=$r/or,Lr=Math.sqrt(Et*Et+Zt*Zt),Et=Et/Lr,Zt=Zt/Lr,nr=$-1;nr<le;nr++)$r=M.get($-1,nr),M.set($-1,nr,Zt*$r+Et*M.get($,nr)),M.set($,nr,Zt*M.get($,nr)-Et*$r);for(kt=0;kt<=$;kt++)$r=M.get(kt,$-1),M.set(kt,$-1,Zt*$r+Et*M.get(kt,$)),M.set(kt,$,Zt*M.get(kt,$)-Et*$r);for(kt=Ee;kt<=Ne;kt++)$r=_.get(kt,$-1),_.set(kt,$-1,Zt*$r+Et*_.get(kt,$)),_.set(kt,$,Zt*_.get(kt,$)-Et*$r)}else B[$-1]=ft+Et,B[$]=ft+Et,ge[$-1]=$r,ge[$]=-$r;$=$-2,Sn=0}else{if(ft=M.get($,$),ut=0,Qe=0,Fr<$&&(ut=M.get($-1,$-1),Qe=M.get($,$-1)*M.get($-1,$)),Sn===10){for(Ye+=ft,kt=Ee;kt<=$;kt++)M.set(kt,kt,M.get(kt,kt)-ft);or=Math.abs(M.get($,$-1))+Math.abs(M.get($-1,$-2)),ft=ut=.75*or,Qe=-.4375*or*or}if(Sn===30&&(or=(ut-ft)/2,or=or*or+Qe,or>0)){for(or=Math.sqrt(or),ut<ft&&(or=-or),or=ft-Qe/((ut-ft)/2+or),kt=Ee;kt<=$;kt++)M.set(kt,kt,M.get(kt,kt)-or);Ye+=or,ft=ut=Qe=.964}for(Sn=Sn+1,He=$-2;He>=Fr&&($r=M.get(He,He),Lr=ft-$r,or=ut-$r,Et=(Lr*or-Qe)/M.get(He+1,He)+M.get(He,He+1),Zt=M.get(He+1,He+1)-$r-Lr-or,Lr=M.get(He+2,He+1),or=Math.abs(Et)+Math.abs(Zt)+Math.abs(Lr),Et=Et/or,Zt=Zt/or,Lr=Lr/or,!(He===Fr||Math.abs(M.get(He,He-1))*(Math.abs(Zt)+Math.abs(Lr))<Le*(Math.abs(Et)*(Math.abs(M.get(He-1,He-1))+Math.abs($r)+Math.abs(M.get(He+1,He+1))))));)He--;for(kt=He+2;kt<=$;kt++)M.set(kt,kt-2,0),kt>He+2&&M.set(kt,kt-3,0);for(_r=He;_r<=$-1&&(vn=_r!==$-1,_r!==He&&(Et=M.get(_r,_r-1),Zt=M.get(_r+1,_r-1),Lr=vn?M.get(_r+2,_r-1):0,ft=Math.abs(Et)+Math.abs(Zt)+Math.abs(Lr),ft!==0&&(Et=Et/ft,Zt=Zt/ft,Lr=Lr/ft)),ft!==0);_r++)if(or=Math.sqrt(Et*Et+Zt*Zt+Lr*Lr),Et<0&&(or=-or),or!==0){for(_r!==He?M.set(_r,_r-1,-or*ft):Fr!==He&&M.set(_r,_r-1,-M.get(_r,_r-1)),Et=Et+or,ft=Et/or,ut=Zt/or,$r=Lr/or,Zt=Zt/Et,Lr=Lr/Et,nr=_r;nr<le;nr++)Et=M.get(_r,nr)+Zt*M.get(_r+1,nr),vn&&(Et=Et+Lr*M.get(_r+2,nr),M.set(_r+2,nr,M.get(_r+2,nr)-Et*$r)),M.set(_r,nr,M.get(_r,nr)-Et*ft),M.set(_r+1,nr,M.get(_r+1,nr)-Et*ut);for(kt=0;kt<=Math.min($,_r+3);kt++)Et=ft*M.get(kt,_r)+ut*M.get(kt,_r+1),vn&&(Et=Et+$r*M.get(kt,_r+2),M.set(kt,_r+2,M.get(kt,_r+2)-Et*Lr)),M.set(kt,_r,M.get(kt,_r)-Et),M.set(kt,_r+1,M.get(kt,_r+1)-Et*Zt);for(kt=Ee;kt<=Ne;kt++)Et=ft*_.get(kt,_r)+ut*_.get(kt,_r+1),vn&&(Et=Et+$r*_.get(kt,_r+2),_.set(kt,_r+2,_.get(kt,_r+2)-Et*Lr)),_.set(kt,_r,_.get(kt,_r)-Et),_.set(kt,_r+1,_.get(kt,_r+1)-Et*Zt)}}}if(Ot!==0){for($=le-1;$>=0;$--)if(Et=B[$],Zt=ge[$],Zt===0)for(Fr=$,M.set($,$,1),kt=$-1;kt>=0;kt--){for(Qe=M.get(kt,kt)-Et,Lr=0,nr=Fr;nr<=$;nr++)Lr=Lr+M.get(kt,nr)*M.get(nr,$);if(ge[kt]<0)$r=Qe,or=Lr;else if(Fr=kt,ge[kt]===0?M.set(kt,$,Qe!==0?-Lr/Qe:-Lr/(Le*Ot)):(ft=M.get(kt,kt+1),ut=M.get(kt+1,kt),Zt=(B[kt]-Et)*(B[kt]-Et)+ge[kt]*ge[kt],Ae=(ft*or-$r*Lr)/Zt,M.set(kt,$,Ae),M.set(kt+1,$,Math.abs(ft)>Math.abs($r)?(-Lr-Qe*Ae)/ft:(-or-ut*Ae)/$r)),Ae=Math.abs(M.get(kt,$)),Le*Ae*Ae>1)for(nr=kt;nr<=$;nr++)M.set(nr,$,M.get(nr,$)/Ae)}else if(Zt<0)for(Fr=$-1,Math.abs(M.get($,$-1))>Math.abs(M.get($-1,$))?(M.set($-1,$-1,Zt/M.get($,$-1)),M.set($-1,$,-(M.get($,$)-Et)/M.get($,$-1))):(fn=nn(0,-M.get($-1,$),M.get($-1,$-1)-Et,Zt),M.set($-1,$-1,fn[0]),M.set($-1,$,fn[1])),M.set($,$-1,0),M.set($,$,1),kt=$-2;kt>=0;kt--){for(St=0,Qt=0,nr=Fr;nr<=$;nr++)St=St+M.get(kt,nr)*M.get(nr,$-1),Qt=Qt+M.get(kt,nr)*M.get(nr,$);if(Qe=M.get(kt,kt)-Et,ge[kt]<0)$r=Qe,Lr=St,or=Qt;else if(Fr=kt,ge[kt]===0?(fn=nn(-St,-Qt,Qe,Zt),M.set(kt,$-1,fn[0]),M.set(kt,$,fn[1])):(ft=M.get(kt,kt+1),ut=M.get(kt+1,kt),qt=(B[kt]-Et)*(B[kt]-Et)+ge[kt]*ge[kt]-Zt*Zt,Xr=(B[kt]-Et)*2*Zt,qt===0&&Xr===0&&(qt=Le*Ot*(Math.abs(Qe)+Math.abs(Zt)+Math.abs(ft)+Math.abs(ut)+Math.abs($r))),fn=nn(ft*Lr-$r*St+Zt*Qt,ft*or-$r*Qt-Zt*St,qt,Xr),M.set(kt,$-1,fn[0]),M.set(kt,$,fn[1]),Math.abs(ft)>Math.abs($r)+Math.abs(Zt)?(M.set(kt+1,$-1,(-St-Qe*M.get(kt,$-1)+Zt*M.get(kt,$))/ft),M.set(kt+1,$,(-Qt-Qe*M.get(kt,$)-Zt*M.get(kt,$-1))/ft)):(fn=nn(-Lr-ut*M.get(kt,$-1),-or-ut*M.get(kt,$),$r,Zt),M.set(kt+1,$-1,fn[0]),M.set(kt+1,$,fn[1]))),Ae=Math.max(Math.abs(M.get(kt,$-1)),Math.abs(M.get(kt,$))),Le*Ae*Ae>1)for(nr=kt;nr<=$;nr++)M.set(nr,$-1,M.get(nr,$-1)/Ae),M.set(nr,$,M.get(nr,$)/Ae)}for(kt=0;kt<le;kt++)if(kt<Ee||kt>Ne)for(nr=kt;nr<le;nr++)_.set(kt,nr,M.get(kt,nr));for(nr=le-1;nr>=Ee;nr--)for(kt=Ee;kt<=Ne;kt++){for($r=0,_r=Ee;_r<=Math.min(nr,Ne);_r++)$r=$r+_.get(kt,_r)*M.get(_r,nr);_.set(kt,nr,$r)}}}function nn(le,ge,B,_){var M,$;return Math.abs(B)>Math.abs(_)?(M=_/B,$=B+M*_,[(le+M*ge)/$,(ge-M*le)/$]):(M=B/_,$=_+M*B,[(M*le+ge)/$,(M*ge-le)/$])}var an=function(){function le(ge){if(m()(this,le),ge=Qr.checkMatrix(ge),!ge.isSymmetric())throw new Error("Matrix is not symmetric");var B=ge,_=B.rows,M=new Nr(_,_),$=!0,Ee,Ne,Le;for(Ne=0;Ne<_;Ne++){var Ye=0;for(Le=0;Le<Ne;Le++){var Ot=0;for(Ee=0;Ee<Le;Ee++)Ot+=M.get(Le,Ee)*M.get(Ne,Ee);Ot=(B.get(Ne,Le)-Ot)/M.get(Le,Le),M.set(Ne,Le,Ot),Ye=Ye+Ot*Ot}for(Ye=B.get(Ne,Ne)-Ye,$&=Ye>0,M.set(Ne,Ne,Math.sqrt(Math.max(Ye,0))),Le=Ne+1;Le<_;Le++)M.set(Ne,Le,0)}this.L=M,this.positiveDefinite=!!$}return v()(le,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(B){B=Qr.checkMatrix(B);var _=this.L,M=_.rows;if(B.rows!==M)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var $=B.columns,Ee=B.clone(),Ne,Le,Ye;for(Ye=0;Ye<M;Ye++)for(Le=0;Le<$;Le++){for(Ne=0;Ne<Ye;Ne++)Ee.set(Ye,Le,Ee.get(Ye,Le)-Ee.get(Ne,Le)*_.get(Ye,Ne));Ee.set(Ye,Le,Ee.get(Ye,Le)/_.get(Ye,Ye))}for(Ye=M-1;Ye>=0;Ye--)for(Le=0;Le<$;Le++){for(Ne=Ye+1;Ne<M;Ne++)Ee.set(Ye,Le,Ee.get(Ye,Le)-Ee.get(Ne,Le)*_.get(Ne,Ye));Ee.set(Ye,Le,Ee.get(Ye,Le)/_.get(Ye,Ye))}return Ee}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),le}(),qr=v()(function le(ge){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};m()(this,le),ge=Qr.checkMatrix(ge);var _=B.Y,M=B.scaleScores,$=M===void 0?!1:M,Ee=B.maxIterations,Ne=Ee===void 0?1e3:Ee,Le=B.terminationCriteria,Ye=Le===void 0?1e-10:Le,Ot;if(_){if(b(_)&&typeof _[0]=="number"?_=Nr.columnVector(_):_=Qr.checkMatrix(_),_.rows!==ge.rows)throw new Error("Y should have the same number of rows as X");Ot=_.getColumnVector(0)}else Ot=ge.getColumnVector(0);for(var Et=1,Zt,Lr,or,$r,Sn=0;Sn<Ne&&Et>Ye;Sn++)or=ge.transpose().mmul(Ot).div(Ot.transpose().mmul(Ot).get(0,0)),or=or.div(or.norm()),Zt=ge.mmul(or).div(or.transpose().mmul(or).get(0,0)),Sn>0&&(Et=Zt.clone().sub($r).pow(2).sum()),$r=Zt.clone(),_?(Lr=_.transpose().mmul(Zt).div(Zt.transpose().mmul(Zt).get(0,0)),Lr=Lr.div(Lr.norm()),Ot=_.mmul(Lr).div(Lr.transpose().mmul(Lr).get(0,0))):Ot=Zt;if(_){var kt=ge.transpose().mmul(Zt).div(Zt.transpose().mmul(Zt).get(0,0));kt=kt.div(kt.norm());var nr=ge.clone().sub(Zt.clone().mmul(kt.transpose())),_r=Ot.transpose().mmul(Zt).div(Zt.transpose().mmul(Zt).get(0,0)),Fr=_.clone().sub(Zt.clone().mulS(_r.get(0,0)).mmul(Lr.transpose()));this.t=Zt,this.p=kt.transpose(),this.w=or.transpose(),this.q=Lr,this.u=Ot,this.s=Zt.transpose().mmul(Zt),this.xResidual=nr,this.yResidual=Fr,this.betas=_r}else this.w=or.transpose(),this.s=Zt.transpose().mmul(Zt).sqrt(),$?this.t=Zt.clone().div(this.s.get(0,0)):this.t=Zt,this.xResidual=ge.sub(Zt.mmul(or.transpose()))})},48168:function(pr,U,G){var F=G(8874),Y={};for(var P in F)F.hasOwnProperty(P)&&(Y[F[P]]=P);var A=pr.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var N in A)if(A.hasOwnProperty(N)){if(!("channels"in A[N]))throw new Error("missing channels property: "+N);if(!("labels"in A[N]))throw new Error("missing channel labels property: "+N);if(A[N].labels.length!==A[N].channels)throw new Error("channel and label counts mismatch: "+N);var O=A[N].channels,x=A[N].labels;delete A[N].channels,delete A[N].labels,Object.defineProperty(A[N],"channels",{value:O}),Object.defineProperty(A[N],"labels",{value:x})}A.rgb.hsl=function(y){var m=y[0]/255,g=y[1]/255,v=y[2]/255,u=Math.min(m,g,v),b=Math.max(m,g,v),T=b-u,D,k,V;return b===u?D=0:m===b?D=(g-v)/T:g===b?D=2+(v-m)/T:v===b&&(D=4+(m-g)/T),D=Math.min(D*60,360),D<0&&(D+=360),V=(u+b)/2,b===u?k=0:V<=.5?k=T/(b+u):k=T/(2-b-u),[D,k*100,V*100]},A.rgb.hsv=function(y){var m,g,v,u,b,T=y[0]/255,D=y[1]/255,k=y[2]/255,V=Math.max(T,D,k),J=V-Math.min(T,D,k),W=function(X){return(V-X)/6/J+1/2};return J===0?u=b=0:(b=J/V,m=W(T),g=W(D),v=W(k),T===V?u=v-g:D===V?u=1/3+m-v:k===V&&(u=2/3+g-m),u<0?u+=1:u>1&&(u-=1)),[u*360,b*100,V*100]},A.rgb.hwb=function(y){var m=y[0],g=y[1],v=y[2],u=A.rgb.hsl(y)[0],b=1/255*Math.min(m,Math.min(g,v));return v=1-1/255*Math.max(m,Math.max(g,v)),[u,b*100,v*100]},A.rgb.cmyk=function(y){var m=y[0]/255,g=y[1]/255,v=y[2]/255,u,b,T,D;return D=Math.min(1-m,1-g,1-v),u=(1-m-D)/(1-D)||0,b=(1-g-D)/(1-D)||0,T=(1-v-D)/(1-D)||0,[u*100,b*100,T*100,D*100]};function E(y,m){return Math.pow(y[0]-m[0],2)+Math.pow(y[1]-m[1],2)+Math.pow(y[2]-m[2],2)}A.rgb.keyword=function(y){var m=Y[y];if(m)return m;var g=1/0,v;for(var u in F)if(F.hasOwnProperty(u)){var b=F[u],T=E(y,b);T<g&&(g=T,v=u)}return v},A.keyword.rgb=function(y){return F[y]},A.rgb.xyz=function(y){var m=y[0]/255,g=y[1]/255,v=y[2]/255;m=m>.04045?Math.pow((m+.055)/1.055,2.4):m/12.92,g=g>.04045?Math.pow((g+.055)/1.055,2.4):g/12.92,v=v>.04045?Math.pow((v+.055)/1.055,2.4):v/12.92;var u=m*.4124+g*.3576+v*.1805,b=m*.2126+g*.7152+v*.0722,T=m*.0193+g*.1192+v*.9505;return[u*100,b*100,T*100]},A.rgb.lab=function(y){var m=A.rgb.xyz(y),g=m[0],v=m[1],u=m[2],b,T,D;return g/=95.047,v/=100,u/=108.883,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,v=v>.008856?Math.pow(v,1/3):7.787*v+16/116,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,b=116*v-16,T=500*(g-v),D=200*(v-u),[b,T,D]},A.hsl.rgb=function(y){var m=y[0]/360,g=y[1]/100,v=y[2]/100,u,b,T,D,k;if(g===0)return k=v*255,[k,k,k];v<.5?b=v*(1+g):b=v+g-v*g,u=2*v-b,D=[0,0,0];for(var V=0;V<3;V++)T=m+1/3*-(V-1),T<0&&T++,T>1&&T--,6*T<1?k=u+(b-u)*6*T:2*T<1?k=b:3*T<2?k=u+(b-u)*(2/3-T)*6:k=u,D[V]=k*255;return D},A.hsl.hsv=function(y){var m=y[0],g=y[1]/100,v=y[2]/100,u=g,b=Math.max(v,.01),T,D;return v*=2,g*=v<=1?v:2-v,u*=b<=1?b:2-b,D=(v+g)/2,T=v===0?2*u/(b+u):2*g/(v+g),[m,T*100,D*100]},A.hsv.rgb=function(y){var m=y[0]/60,g=y[1]/100,v=y[2]/100,u=Math.floor(m)%6,b=m-Math.floor(m),T=255*v*(1-g),D=255*v*(1-g*b),k=255*v*(1-g*(1-b));switch(v*=255,u){case 0:return[v,k,T];case 1:return[D,v,T];case 2:return[T,v,k];case 3:return[T,D,v];case 4:return[k,T,v];case 5:return[v,T,D]}},A.hsv.hsl=function(y){var m=y[0],g=y[1]/100,v=y[2]/100,u=Math.max(v,.01),b,T,D;return D=(2-g)*v,b=(2-g)*u,T=g*u,T/=b<=1?b:2-b,T=T||0,D/=2,[m,T*100,D*100]},A.hwb.rgb=function(y){var m=y[0]/360,g=y[1]/100,v=y[2]/100,u=g+v,b,T,D,k;u>1&&(g/=u,v/=u),b=Math.floor(6*m),T=1-v,D=6*m-b,b&1&&(D=1-D),k=g+D*(T-g);var V,J,W;switch(b){default:case 6:case 0:V=T,J=k,W=g;break;case 1:V=k,J=T,W=g;break;case 2:V=g,J=T,W=k;break;case 3:V=g,J=k,W=T;break;case 4:V=k,J=g,W=T;break;case 5:V=T,J=g,W=k;break}return[V*255,J*255,W*255]},A.cmyk.rgb=function(y){var m=y[0]/100,g=y[1]/100,v=y[2]/100,u=y[3]/100,b,T,D;return b=1-Math.min(1,m*(1-u)+u),T=1-Math.min(1,g*(1-u)+u),D=1-Math.min(1,v*(1-u)+u),[b*255,T*255,D*255]},A.xyz.rgb=function(y){var m=y[0]/100,g=y[1]/100,v=y[2]/100,u,b,T;return u=m*3.2406+g*-1.5372+v*-.4986,b=m*-.9689+g*1.8758+v*.0415,T=m*.0557+g*-.204+v*1.057,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u*12.92,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:b*12.92,T=T>.0031308?1.055*Math.pow(T,1/2.4)-.055:T*12.92,u=Math.min(Math.max(0,u),1),b=Math.min(Math.max(0,b),1),T=Math.min(Math.max(0,T),1),[u*255,b*255,T*255]},A.xyz.lab=function(y){var m=y[0],g=y[1],v=y[2],u,b,T;return m/=95.047,g/=100,v/=108.883,m=m>.008856?Math.pow(m,1/3):7.787*m+16/116,g=g>.008856?Math.pow(g,1/3):7.787*g+16/116,v=v>.008856?Math.pow(v,1/3):7.787*v+16/116,u=116*g-16,b=500*(m-g),T=200*(g-v),[u,b,T]},A.lab.xyz=function(y){var m=y[0],g=y[1],v=y[2],u,b,T;b=(m+16)/116,u=g/500+b,T=b-v/200;var D=Math.pow(b,3),k=Math.pow(u,3),V=Math.pow(T,3);return b=D>.008856?D:(b-16/116)/7.787,u=k>.008856?k:(u-16/116)/7.787,T=V>.008856?V:(T-16/116)/7.787,u*=95.047,b*=100,T*=108.883,[u,b,T]},A.lab.lch=function(y){var m=y[0],g=y[1],v=y[2],u,b,T;return u=Math.atan2(v,g),b=u*360/2/Math.PI,b<0&&(b+=360),T=Math.sqrt(g*g+v*v),[m,T,b]},A.lch.lab=function(y){var m=y[0],g=y[1],v=y[2],u,b,T;return T=v/360*2*Math.PI,u=g*Math.cos(T),b=g*Math.sin(T),[m,u,b]},A.rgb.ansi16=function(y){var m=y[0],g=y[1],v=y[2],u=1 in arguments?arguments[1]:A.rgb.hsv(y)[2];if(u=Math.round(u/50),u===0)return 30;var b=30+(Math.round(v/255)<<2|Math.round(g/255)<<1|Math.round(m/255));return u===2&&(b+=60),b},A.hsv.ansi16=function(y){return A.rgb.ansi16(A.hsv.rgb(y),y[2])},A.rgb.ansi256=function(y){var m=y[0],g=y[1],v=y[2];if(m===g&&g===v)return m<8?16:m>248?231:Math.round((m-8)/247*24)+232;var u=16+36*Math.round(m/255*5)+6*Math.round(g/255*5)+Math.round(v/255*5);return u},A.ansi16.rgb=function(y){var m=y%10;if(m===0||m===7)return y>50&&(m+=3.5),m=m/10.5*255,[m,m,m];var g=(~~(y>50)+1)*.5,v=(m&1)*g*255,u=(m>>1&1)*g*255,b=(m>>2&1)*g*255;return[v,u,b]},A.ansi256.rgb=function(y){if(y>=232){var m=(y-232)*10+8;return[m,m,m]}y-=16;var g,v=Math.floor(y/36)/5*255,u=Math.floor((g=y%36)/6)/5*255,b=g%6/5*255;return[v,u,b]},A.rgb.hex=function(y){var m=((Math.round(y[0])&255)<<16)+((Math.round(y[1])&255)<<8)+(Math.round(y[2])&255),g=m.toString(16).toUpperCase();return"000000".substring(g.length)+g},A.hex.rgb=function(y){var m=y.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!m)return[0,0,0];var g=m[0];m[0].length===3&&(g=g.split("").map(function(D){return D+D}).join(""));var v=parseInt(g,16),u=v>>16&255,b=v>>8&255,T=v&255;return[u,b,T]},A.rgb.hcg=function(y){var m=y[0]/255,g=y[1]/255,v=y[2]/255,u=Math.max(Math.max(m,g),v),b=Math.min(Math.min(m,g),v),T=u-b,D,k;return T<1?D=b/(1-T):D=0,T<=0?k=0:u===m?k=(g-v)/T%6:u===g?k=2+(v-m)/T:k=4+(m-g)/T+4,k/=6,k%=1,[k*360,T*100,D*100]},A.hsl.hcg=function(y){var m=y[1]/100,g=y[2]/100,v=1,u=0;return g<.5?v=2*m*g:v=2*m*(1-g),v<1&&(u=(g-.5*v)/(1-v)),[y[0],v*100,u*100]},A.hsv.hcg=function(y){var m=y[1]/100,g=y[2]/100,v=m*g,u=0;return v<1&&(u=(g-v)/(1-v)),[y[0],v*100,u*100]},A.hcg.rgb=function(y){var m=y[0]/360,g=y[1]/100,v=y[2]/100;if(g===0)return[v*255,v*255,v*255];var u=[0,0,0],b=m%1*6,T=b%1,D=1-T,k=0;switch(Math.floor(b)){case 0:u[0]=1,u[1]=T,u[2]=0;break;case 1:u[0]=D,u[1]=1,u[2]=0;break;case 2:u[0]=0,u[1]=1,u[2]=T;break;case 3:u[0]=0,u[1]=D,u[2]=1;break;case 4:u[0]=T,u[1]=0,u[2]=1;break;default:u[0]=1,u[1]=0,u[2]=D}return k=(1-g)*v,[(g*u[0]+k)*255,(g*u[1]+k)*255,(g*u[2]+k)*255]},A.hcg.hsv=function(y){var m=y[1]/100,g=y[2]/100,v=m+g*(1-m),u=0;return v>0&&(u=m/v),[y[0],u*100,v*100]},A.hcg.hsl=function(y){var m=y[1]/100,g=y[2]/100,v=g*(1-m)+.5*m,u=0;return v>0&&v<.5?u=m/(2*v):v>=.5&&v<1&&(u=m/(2*(1-v))),[y[0],u*100,v*100]},A.hcg.hwb=function(y){var m=y[1]/100,g=y[2]/100,v=m+g*(1-m);return[y[0],(v-m)*100,(1-v)*100]},A.hwb.hcg=function(y){var m=y[1]/100,g=y[2]/100,v=1-g,u=v-m,b=0;return u<1&&(b=(v-u)/(1-u)),[y[0],u*100,b*100]},A.apple.rgb=function(y){return[y[0]/65535*255,y[1]/65535*255,y[2]/65535*255]},A.rgb.apple=function(y){return[y[0]/255*65535,y[1]/255*65535,y[2]/255*65535]},A.gray.rgb=function(y){return[y[0]/100*255,y[0]/100*255,y[0]/100*255]},A.gray.hsl=A.gray.hsv=function(y){return[0,0,y[0]]},A.gray.hwb=function(y){return[0,100,y[0]]},A.gray.cmyk=function(y){return[0,0,0,y[0]]},A.gray.lab=function(y){return[y[0],0,0]},A.gray.hex=function(y){var m=Math.round(y[0]/100*255)&255,g=(m<<16)+(m<<8)+m,v=g.toString(16).toUpperCase();return"000000".substring(v.length)+v},A.rgb.gray=function(y){var m=(y[0]+y[1]+y[2])/3;return[m/255*100]}},12085:function(pr,U,G){var F=G(48168),Y=G(4111),P={},A=Object.keys(F);function N(x){var E=function(y){return y==null?y:(arguments.length>1&&(y=Array.prototype.slice.call(arguments)),x(y))};return"conversion"in x&&(E.conversion=x.conversion),E}function O(x){var E=function(y){if(y==null)return y;arguments.length>1&&(y=Array.prototype.slice.call(arguments));var m=x(y);if(typeof m=="object")for(var g=m.length,v=0;v<g;v++)m[v]=Math.round(m[v]);return m};return"conversion"in x&&(E.conversion=x.conversion),E}A.forEach(function(x){P[x]={},Object.defineProperty(P[x],"channels",{value:F[x].channels}),Object.defineProperty(P[x],"labels",{value:F[x].labels});var E=Y(x),y=Object.keys(E);y.forEach(function(m){var g=E[m];P[x][m]=O(g),P[x][m].raw=N(g)})}),pr.exports=P},4111:function(pr,U,G){var F=G(48168);function Y(){for(var O={},x=Object.keys(F),E=x.length,y=0;y<E;y++)O[x[y]]={distance:-1,parent:null};return O}function P(O){var x=Y(),E=[O];for(x[O].distance=0;E.length;)for(var y=E.pop(),m=Object.keys(F[y]),g=m.length,v=0;v<g;v++){var u=m[v],b=x[u];b.distance===-1&&(b.distance=x[y].distance+1,b.parent=y,E.unshift(u))}return x}function A(O,x){return function(E){return x(O(E))}}function N(O,x){for(var E=[x[O].parent,O],y=F[x[O].parent][O],m=x[O].parent;x[m].parent;)E.unshift(x[m].parent),y=A(F[x[m].parent][m],y),m=x[m].parent;return y.conversion=E,y}pr.exports=function(O){for(var x=P(O),E={},y=Object.keys(x),m=y.length,g=0;g<m;g++){var v=y[g],u=x[v];u.parent!==null&&(E[v]=N(v,x))}return E}},8874:function(pr){"use strict";pr.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(pr,U,G){var F=G(8874),Y=G(86851),P=Object.hasOwnProperty,A=Object.create(null);for(var N in F)P.call(F,N)&&(A[F[N]]=N);var O=pr.exports={to:{},get:{}};O.get=function(y){var m=y.substring(0,3).toLowerCase(),g,v;switch(m){case"hsl":g=O.get.hsl(y),v="hsl";break;case"hwb":g=O.get.hwb(y),v="hwb";break;default:g=O.get.rgb(y),v="rgb";break}return g?{model:v,value:g}:null},O.get.rgb=function(y){if(!y)return null;var m=/^#([a-f0-9]{3,4})$/i,g=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,v=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,u=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,b=/^(\w+)$/,T=[0,0,0,1],D,k,V;if(D=y.match(g)){for(V=D[2],D=D[1],k=0;k<3;k++){var J=k*2;T[k]=parseInt(D.slice(J,J+2),16)}V&&(T[3]=parseInt(V,16)/255)}else if(D=y.match(m)){for(D=D[1],V=D[3],k=0;k<3;k++)T[k]=parseInt(D[k]+D[k],16);V&&(T[3]=parseInt(V+V,16)/255)}else if(D=y.match(v)){for(k=0;k<3;k++)T[k]=parseInt(D[k+1],0);D[4]&&(D[5]?T[3]=parseFloat(D[4])*.01:T[3]=parseFloat(D[4]))}else if(D=y.match(u)){for(k=0;k<3;k++)T[k]=Math.round(parseFloat(D[k+1])*2.55);D[4]&&(D[5]?T[3]=parseFloat(D[4])*.01:T[3]=parseFloat(D[4]))}else return(D=y.match(b))?D[1]==="transparent"?[0,0,0,0]:P.call(F,D[1])?(T=F[D[1]],T[3]=1,T):null:null;for(k=0;k<3;k++)T[k]=x(T[k],0,255);return T[3]=x(T[3],0,1),T},O.get.hsl=function(y){if(!y)return null;var m=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,g=y.match(m);if(g){var v=parseFloat(g[4]),u=(parseFloat(g[1])%360+360)%360,b=x(parseFloat(g[2]),0,100),T=x(parseFloat(g[3]),0,100),D=x(isNaN(v)?1:v,0,1);return[u,b,T,D]}return null},O.get.hwb=function(y){if(!y)return null;var m=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,g=y.match(m);if(g){var v=parseFloat(g[4]),u=(parseFloat(g[1])%360+360)%360,b=x(parseFloat(g[2]),0,100),T=x(parseFloat(g[3]),0,100),D=x(isNaN(v)?1:v,0,1);return[u,b,T,D]}return null},O.to.hex=function(){var y=Y(arguments);return"#"+E(y[0])+E(y[1])+E(y[2])+(y[3]<1?E(Math.round(y[3]*255)):"")},O.to.rgb=function(){var y=Y(arguments);return y.length<4||y[3]===1?"rgb("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+")":"rgba("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+", "+y[3]+")"},O.to.rgb.percent=function(){var y=Y(arguments),m=Math.round(y[0]/255*100),g=Math.round(y[1]/255*100),v=Math.round(y[2]/255*100);return y.length<4||y[3]===1?"rgb("+m+"%, "+g+"%, "+v+"%)":"rgba("+m+"%, "+g+"%, "+v+"%, "+y[3]+")"},O.to.hsl=function(){var y=Y(arguments);return y.length<4||y[3]===1?"hsl("+y[0]+", "+y[1]+"%, "+y[2]+"%)":"hsla("+y[0]+", "+y[1]+"%, "+y[2]+"%, "+y[3]+")"},O.to.hwb=function(){var y=Y(arguments),m="";return y.length>=4&&y[3]!==1&&(m=", "+y[3]),"hwb("+y[0]+", "+y[1]+"%, "+y[2]+"%"+m+")"},O.to.keyword=function(y){return A[y.slice(0,3)]};function x(y,m,g){return Math.min(Math.max(m,y),g)}function E(y){var m=Math.round(y).toString(16).toUpperCase();return m.length<2?"0"+m:m}},6767:function(pr,U,G){"use strict";var F=G(19818),Y=G(12085),P=[].slice,A=["keyword","gray","hex"],N={};Object.keys(Y).forEach(function(b){N[P.call(Y[b].labels).sort().join("")]=b});var O={};function x(b,T){if(!(this instanceof x))return new x(b,T);if(T&&T in A&&(T=null),T&&!(T in Y))throw new Error("Unknown model: "+T);var D,k;if(b==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(b instanceof x)this.model=b.model,this.color=b.color.slice(),this.valpha=b.valpha;else if(typeof b=="string"){var V=F.get(b);if(V===null)throw new Error("Unable to parse color from string: "+b);this.model=V.model,k=Y[this.model].channels,this.color=V.value.slice(0,k),this.valpha=typeof V.value[k]=="number"?V.value[k]:1}else if(b.length){this.model=T||"rgb",k=Y[this.model].channels;var J=P.call(b,0,k);this.color=u(J,k),this.valpha=typeof b[k]=="number"?b[k]:1}else if(typeof b=="number")b&=16777215,this.model="rgb",this.color=[b>>16&255,b>>8&255,b&255],this.valpha=1;else{this.valpha=1;var W=Object.keys(b);"alpha"in b&&(W.splice(W.indexOf("alpha"),1),this.valpha=typeof b.alpha=="number"?b.alpha:0);var X=W.sort().join("");if(!(X in N))throw new Error("Unable to parse color from object: "+JSON.stringify(b));this.model=N[X];var K=Y[this.model].labels,Q=[];for(D=0;D<K.length;D++)Q.push(b[K[D]]);this.color=u(Q)}if(O[this.model])for(k=Y[this.model].channels,D=0;D<k;D++){var re=O[this.model][D];re&&(this.color[D]=re(this.color[D]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}x.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(b){var T=this.model in F.to?this:this.rgb();T=T.round(typeof b=="number"?b:1);var D=T.valpha===1?T.color:T.color.concat(this.valpha);return F.to[T.model](D)},percentString:function(b){var T=this.rgb().round(typeof b=="number"?b:1),D=T.valpha===1?T.color:T.color.concat(this.valpha);return F.to.rgb.percent(D)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var b={},T=Y[this.model].channels,D=Y[this.model].labels,k=0;k<T;k++)b[D[k]]=this.color[k];return this.valpha!==1&&(b.alpha=this.valpha),b},unitArray:function(){var b=this.rgb().color;return b[0]/=255,b[1]/=255,b[2]/=255,this.valpha!==1&&b.push(this.valpha),b},unitObject:function(){var b=this.rgb().object();return b.r/=255,b.g/=255,b.b/=255,this.valpha!==1&&(b.alpha=this.valpha),b},round:function(b){return b=Math.max(b||0,0),new x(this.color.map(y(b)).concat(this.valpha),this.model)},alpha:function(b){return arguments.length?new x(this.color.concat(Math.max(0,Math.min(1,b))),this.model):this.valpha},red:m("rgb",0,g(255)),green:m("rgb",1,g(255)),blue:m("rgb",2,g(255)),hue:m(["hsl","hsv","hsl","hwb","hcg"],0,function(b){return(b%360+360)%360}),saturationl:m("hsl",1,g(100)),lightness:m("hsl",2,g(100)),saturationv:m("hsv",1,g(100)),value:m("hsv",2,g(100)),chroma:m("hcg",1,g(100)),gray:m("hcg",2,g(100)),white:m("hwb",1,g(100)),wblack:m("hwb",2,g(100)),cyan:m("cmyk",0,g(100)),magenta:m("cmyk",1,g(100)),yellow:m("cmyk",2,g(100)),black:m("cmyk",3,g(100)),x:m("xyz",0,g(100)),y:m("xyz",1,g(100)),z:m("xyz",2,g(100)),l:m("lab",0,g(100)),a:m("lab",1),b:m("lab",2),keyword:function(b){return arguments.length?new x(b):Y[this.model].keyword(this.color)},hex:function(b){return arguments.length?new x(b):F.to.hex(this.rgb().round().color)},rgbNumber:function(){var b=this.rgb().color;return(b[0]&255)<<16|(b[1]&255)<<8|b[2]&255},luminosity:function(){for(var b=this.rgb().color,T=[],D=0;D<b.length;D++){var k=b[D]/255;T[D]=k<=.03928?k/12.92:Math.pow((k+.055)/1.055,2.4)}return .2126*T[0]+.7152*T[1]+.0722*T[2]},contrast:function(b){var T=this.luminosity(),D=b.luminosity();return T>D?(T+.05)/(D+.05):(D+.05)/(T+.05)},level:function(b){var T=this.contrast(b);return T>=7.1?"AAA":T>=4.5?"AA":""},isDark:function(){var b=this.rgb().color,T=(b[0]*299+b[1]*587+b[2]*114)/1e3;return T<128},isLight:function(){return!this.isDark()},negate:function(){for(var b=this.rgb(),T=0;T<3;T++)b.color[T]=255-b.color[T];return b},lighten:function(b){var T=this.hsl();return T.color[2]+=T.color[2]*b,T},darken:function(b){var T=this.hsl();return T.color[2]-=T.color[2]*b,T},saturate:function(b){var T=this.hsl();return T.color[1]+=T.color[1]*b,T},desaturate:function(b){var T=this.hsl();return T.color[1]-=T.color[1]*b,T},whiten:function(b){var T=this.hwb();return T.color[1]+=T.color[1]*b,T},blacken:function(b){var T=this.hwb();return T.color[2]+=T.color[2]*b,T},grayscale:function(){var b=this.rgb().color,T=b[0]*.3+b[1]*.59+b[2]*.11;return x.rgb(T,T,T)},fade:function(b){return this.alpha(this.valpha-this.valpha*b)},opaquer:function(b){return this.alpha(this.valpha+this.valpha*b)},rotate:function(b){var T=this.hsl(),D=T.color[0];return D=(D+b)%360,D=D<0?360+D:D,T.color[0]=D,T},mix:function(b,T){if(!b||!b.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof b);var D=b.rgb(),k=this.rgb(),V=T===void 0?.5:T,J=2*V-1,W=D.alpha()-k.alpha(),X=((J*W===-1?J:(J+W)/(1+J*W))+1)/2,K=1-X;return x.rgb(X*D.red()+K*k.red(),X*D.green()+K*k.green(),X*D.blue()+K*k.blue(),D.alpha()*V+k.alpha()*(1-V))}},Object.keys(Y).forEach(function(b){if(A.indexOf(b)===-1){var T=Y[b].channels;x.prototype[b]=function(){if(this.model===b)return new x(this);if(arguments.length)return new x(arguments,b);var D=typeof arguments[T]=="number"?T:this.valpha;return new x(v(Y[this.model][b].raw(this.color)).concat(D),b)},x[b]=function(D){return typeof D=="number"&&(D=u(P.call(arguments),T)),new x(D,b)}}});function E(b,T){return Number(b.toFixed(T))}function y(b){return function(T){return E(T,b)}}function m(b,T,D){return b=Array.isArray(b)?b:[b],b.forEach(function(k){(O[k]||(O[k]=[]))[T]=D}),b=b[0],function(k){var V;return arguments.length?(D&&(k=D(k)),V=this[b](),V.color[T]=k,V):(V=this[b]().color[T],D&&(V=D(V)),V)}}function g(b){return function(T){return Math.max(0,Math.min(b,T))}}function v(b){return Array.isArray(b)?b:[b]}function u(b,T){for(var D=0;D<T;D++)typeof b[D]!="number"&&(b[D]=0);return b}pr.exports=x},71829:function(pr,U,G){"use strict";G.r(U),G.d(U,{quadtree:function(){return F.Z}});var F=G(47148)},47148:function(pr,U,G){"use strict";G.d(U,{Z:function(){return J}});function F(Q){const re=+this._x.call(null,Q),q=+this._y.call(null,Q);return Y(this.cover(re,q),re,q,Q)}function Y(Q,re,q,ae){if(isNaN(re)||isNaN(q))return Q;var ue,ce=Q._root,De={data:ae},Ie=Q._x0,Pe=Q._y0,we=Q._x1,xe=Q._y1,ve,Se,Te,We,Ge,Je,mt,xt;if(!ce)return Q._root=De,Q;for(;ce.length;)if((Ge=re>=(ve=(Ie+we)/2))?Ie=ve:we=ve,(Je=q>=(Se=(Pe+xe)/2))?Pe=Se:xe=Se,ue=ce,!(ce=ce[mt=Je<<1|Ge]))return ue[mt]=De,Q;if(Te=+Q._x.call(null,ce.data),We=+Q._y.call(null,ce.data),re===Te&&q===We)return De.next=ce,ue?ue[mt]=De:Q._root=De,Q;do ue=ue?ue[mt]=new Array(4):Q._root=new Array(4),(Ge=re>=(ve=(Ie+we)/2))?Ie=ve:we=ve,(Je=q>=(Se=(Pe+xe)/2))?Pe=Se:xe=Se;while((mt=Je<<1|Ge)===(xt=(We>=Se)<<1|Te>=ve));return ue[xt]=ce,ue[mt]=De,Q}function P(Q){var re,q,ae=Q.length,ue,ce,De=new Array(ae),Ie=new Array(ae),Pe=1/0,we=1/0,xe=-1/0,ve=-1/0;for(q=0;q<ae;++q)isNaN(ue=+this._x.call(null,re=Q[q]))||isNaN(ce=+this._y.call(null,re))||(De[q]=ue,Ie[q]=ce,ue<Pe&&(Pe=ue),ue>xe&&(xe=ue),ce<we&&(we=ce),ce>ve&&(ve=ce));if(Pe>xe||we>ve)return this;for(this.cover(Pe,we).cover(xe,ve),q=0;q<ae;++q)Y(this,De[q],Ie[q],Q[q]);return this}function A(Q,re){if(isNaN(Q=+Q)||isNaN(re=+re))return this;var q=this._x0,ae=this._y0,ue=this._x1,ce=this._y1;if(isNaN(q))ue=(q=Math.floor(Q))+1,ce=(ae=Math.floor(re))+1;else{for(var De=ue-q||1,Ie=this._root,Pe,we;q>Q||Q>=ue||ae>re||re>=ce;)switch(we=(re<ae)<<1|Q<q,Pe=new Array(4),Pe[we]=Ie,Ie=Pe,De*=2,we){case 0:ue=q+De,ce=ae+De;break;case 1:q=ue-De,ce=ae+De;break;case 2:ue=q+De,ae=ce-De;break;case 3:q=ue-De,ae=ce-De;break}this._root&&this._root.length&&(this._root=Ie)}return this._x0=q,this._y0=ae,this._x1=ue,this._y1=ce,this}function N(){var Q=[];return this.visit(function(re){if(!re.length)do Q.push(re.data);while(re=re.next)}),Q}function O(Q){return arguments.length?this.cover(+Q[0][0],+Q[0][1]).cover(+Q[1][0],+Q[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function x(Q,re,q,ae,ue){this.node=Q,this.x0=re,this.y0=q,this.x1=ae,this.y1=ue}function E(Q,re,q){var ae,ue=this._x0,ce=this._y0,De,Ie,Pe,we,xe=this._x1,ve=this._y1,Se=[],Te=this._root,We,Ge;for(Te&&Se.push(new x(Te,ue,ce,xe,ve)),q==null?q=1/0:(ue=Q-q,ce=re-q,xe=Q+q,ve=re+q,q*=q);We=Se.pop();)if(!(!(Te=We.node)||(De=We.x0)>xe||(Ie=We.y0)>ve||(Pe=We.x1)<ue||(we=We.y1)<ce))if(Te.length){var Je=(De+Pe)/2,mt=(Ie+we)/2;Se.push(new x(Te[3],Je,mt,Pe,we),new x(Te[2],De,mt,Je,we),new x(Te[1],Je,Ie,Pe,mt),new x(Te[0],De,Ie,Je,mt)),(Ge=(re>=mt)<<1|Q>=Je)&&(We=Se[Se.length-1],Se[Se.length-1]=Se[Se.length-1-Ge],Se[Se.length-1-Ge]=We)}else{var xt=Q-+this._x.call(null,Te.data),Ze=re-+this._y.call(null,Te.data),$e=xt*xt+Ze*Ze;if($e<q){var gt=Math.sqrt(q=$e);ue=Q-gt,ce=re-gt,xe=Q+gt,ve=re+gt,ae=Te.data}}return ae}function y(Q){if(isNaN(xe=+this._x.call(null,Q))||isNaN(ve=+this._y.call(null,Q)))return this;var re,q=this._root,ae,ue,ce,De=this._x0,Ie=this._y0,Pe=this._x1,we=this._y1,xe,ve,Se,Te,We,Ge,Je,mt;if(!q)return this;if(q.length)for(;;){if((We=xe>=(Se=(De+Pe)/2))?De=Se:Pe=Se,(Ge=ve>=(Te=(Ie+we)/2))?Ie=Te:we=Te,re=q,!(q=q[Je=Ge<<1|We]))return this;if(!q.length)break;(re[Je+1&3]||re[Je+2&3]||re[Je+3&3])&&(ae=re,mt=Je)}for(;q.data!==Q;)if(ue=q,!(q=q.next))return this;return(ce=q.next)&&delete q.next,ue?(ce?ue.next=ce:delete ue.next,this):re?(ce?re[Je]=ce:delete re[Je],(q=re[0]||re[1]||re[2]||re[3])&&q===(re[3]||re[2]||re[1]||re[0])&&!q.length&&(ae?ae[mt]=q:this._root=q),this):(this._root=ce,this)}function m(Q){for(var re=0,q=Q.length;re<q;++re)this.remove(Q[re]);return this}function g(){return this._root}function v(){var Q=0;return this.visit(function(re){if(!re.length)do++Q;while(re=re.next)}),Q}function u(Q){var re=[],q,ae=this._root,ue,ce,De,Ie,Pe;for(ae&&re.push(new x(ae,this._x0,this._y0,this._x1,this._y1));q=re.pop();)if(!Q(ae=q.node,ce=q.x0,De=q.y0,Ie=q.x1,Pe=q.y1)&&ae.length){var we=(ce+Ie)/2,xe=(De+Pe)/2;(ue=ae[3])&&re.push(new x(ue,we,xe,Ie,Pe)),(ue=ae[2])&&re.push(new x(ue,ce,xe,we,Pe)),(ue=ae[1])&&re.push(new x(ue,we,De,Ie,xe)),(ue=ae[0])&&re.push(new x(ue,ce,De,we,xe))}return this}function b(Q){var re=[],q=[],ae;for(this._root&&re.push(new x(this._root,this._x0,this._y0,this._x1,this._y1));ae=re.pop();){var ue=ae.node;if(ue.length){var ce,De=ae.x0,Ie=ae.y0,Pe=ae.x1,we=ae.y1,xe=(De+Pe)/2,ve=(Ie+we)/2;(ce=ue[0])&&re.push(new x(ce,De,Ie,xe,ve)),(ce=ue[1])&&re.push(new x(ce,xe,Ie,Pe,ve)),(ce=ue[2])&&re.push(new x(ce,De,ve,xe,we)),(ce=ue[3])&&re.push(new x(ce,xe,ve,Pe,we))}q.push(ae)}for(;ae=q.pop();)Q(ae.node,ae.x0,ae.y0,ae.x1,ae.y1);return this}function T(Q){return Q[0]}function D(Q){return arguments.length?(this._x=Q,this):this._x}function k(Q){return Q[1]}function V(Q){return arguments.length?(this._y=Q,this):this._y}function J(Q,re,q){var ae=new W(re==null?T:re,q==null?k:q,NaN,NaN,NaN,NaN);return Q==null?ae:ae.addAll(Q)}function W(Q,re,q,ae,ue,ce){this._x=Q,this._y=re,this._x0=q,this._y0=ae,this._x1=ue,this._y1=ce,this._root=void 0}function X(Q){for(var re={data:Q.data},q=re;Q=Q.next;)q=q.next={data:Q.data};return re}var K=J.prototype=W.prototype;K.copy=function(){var Q=new W(this._x,this._y,this._x0,this._y0,this._x1,this._y1),re=this._root,q,ae;if(!re)return Q;if(!re.length)return Q._root=X(re),Q;for(q=[{source:re,target:Q._root=new Array(4)}];re=q.pop();)for(var ue=0;ue<4;++ue)(ae=re.source[ue])&&(ae.length?q.push({source:ae,target:re.target[ue]=new Array(4)}):re.target[ue]=X(ae));return Q},K.add=F,K.addAll=P,K.cover=A,K.data=N,K.extent=O,K.find=E,K.remove=y,K.removeAll=m,K.root=g,K.size=v,K.visit=u,K.visitAfter=b,K.x=D,K.y=V},31969:function(pr,U,G){"use strict";G.r(U),G.d(U,{BRIDGE_GRAPH_NAME:function(){return N},GraphType:function(){return E},HierarchyNodeType:function(){return y},InclusionType:function(){return x},LAYOUT_CONFIG:function(){return F},NodeType:function(){return O},ROOT_NAME:function(){return A},buildGraph:function(){return hr},flatGraph:function(){return Br},getEdges:function(){return cr},mergeConfig:function(){return Y}});const F={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function Y(h={},w=F){var R,j,ne,oe;const he=JSON.parse(JSON.stringify(w)),me=((R=h==null?void 0:h.graph)===null||R===void 0?void 0:R.meta)||{},_e=((j=h==null?void 0:h.subScene)===null||j===void 0?void 0:j.meta)||{},Be=((ne=h==null?void 0:h.nodeSize)===null||ne===void 0?void 0:ne.meta)||{},Ke=((oe=h==null?void 0:h.nodeSize)===null||oe===void 0?void 0:oe.node)||{},Xe=he.nodeSize.bridge;return{graph:{meta:Object.assign(he.graph.meta,me)},subScene:{meta:Object.assign(he.subScene.meta,_e)},nodeSize:{meta:Object.assign(he.nodeSize.meta,Be),node:Object.assign(he.nodeSize.node,Ke),bridge:Xe}}}function P(h){return`\u25EC${h}\u25EC`}const A=P("ROOT"),N=P("BRIDGE_GRAPH");var O,x,E,y;(function(h){h[h.META=0]="META",h[h.NODE=1]="NODE",h[h.BRIDGE=2]="BRIDGE"})(O||(O={})),function(h){h[h.INCLUDE=0]="INCLUDE",h[h.EXCLUDE=1]="EXCLUDE",h[h.UNSPECIFIED=2]="UNSPECIFIED"}(x||(x={})),function(h){h[h.META=0]="META",h[h.CORE=1]="CORE",h[h.BRIDGE=2]="BRIDGE"}(E||(E={})),function(h){h[h.META=0]="META",h[h.OP=1]="OP",h[h.SERIES=2]="SERIES"}(y||(y={}));var m=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof G.g!="undefined"?G.g:typeof self!="undefined"?self:{};function g(h,w){return h(w={exports:{}},w.exports),w.exports}var v=function(){this.__data__=[],this.size=0},u=function(h,w){return h===w||h!=h&&w!=w},b=function(h,w){for(var R=h.length;R--;)if(u(h[R][0],w))return R;return-1},T=Array.prototype.splice,D=function(h){var w=this.__data__,R=b(w,h);return!(R<0)&&(R==w.length-1?w.pop():T.call(w,R,1),--this.size,!0)},k=function(h){var w=this.__data__,R=b(w,h);return R<0?void 0:w[R][1]},V=function(h){return b(this.__data__,h)>-1},J=function(h,w){var R=this.__data__,j=b(R,h);return j<0?(++this.size,R.push([h,w])):R[j][1]=w,this};function W(h){var w=-1,R=h==null?0:h.length;for(this.clear();++w<R;){var j=h[w];this.set(j[0],j[1])}}W.prototype.clear=v,W.prototype.delete=D,W.prototype.get=k,W.prototype.has=V,W.prototype.set=J;var X=W,K=function(){this.__data__=new X,this.size=0},Q=function(h){var w=this.__data__,R=w.delete(h);return this.size=w.size,R},re=function(h){return this.__data__.get(h)},q=function(h){return this.__data__.has(h)},ae=typeof m=="object"&&m&&m.Object===Object&&m,ue=typeof self=="object"&&self&&self.Object===Object&&self,ce=ae||ue||Function("return this")(),De=ce.Symbol,Ie=Object.prototype,Pe=Ie.hasOwnProperty,we=Ie.toString,xe=De?De.toStringTag:void 0,ve=function(h){var w=Pe.call(h,xe),R=h[xe];try{h[xe]=void 0;var j=!0}catch(oe){}var ne=we.call(h);return j&&(w?h[xe]=R:delete h[xe]),ne},Se=Object.prototype.toString,Te=function(h){return Se.call(h)},We=De?De.toStringTag:void 0,Ge=function(h){return h==null?h===void 0?"[object Undefined]":"[object Null]":We&&We in Object(h)?ve(h):Te(h)},Je=function(h){var w=typeof h;return h!=null&&(w=="object"||w=="function")},mt,xt=function(h){if(!Je(h))return!1;var w=Ge(h);return w=="[object Function]"||w=="[object GeneratorFunction]"||w=="[object AsyncFunction]"||w=="[object Proxy]"},Ze=ce["__core-js_shared__"],$e=(mt=/[^.]+$/.exec(Ze&&Ze.keys&&Ze.keys.IE_PROTO||""))?"Symbol(src)_1."+mt:"",gt=function(h){return!!$e&&$e in h},At=Function.prototype.toString,yt=function(h){if(h!=null){try{return At.call(h)}catch(w){}try{return h+""}catch(w){}}return""},ct=/^\[object .+?Constructor\]$/,Kt=Function.prototype,$t=Object.prototype,jt=Kt.toString,ir=$t.hasOwnProperty,mr=RegExp("^"+jt.call(ir).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tn=function(h){return!(!Je(h)||gt(h))&&(xt(h)?mr:ct).test(yt(h))},Dr=function(h,w){return h==null?void 0:h[w]},Dn=function(h,w){var R=Dr(h,w);return tn(R)?R:void 0},Ve=Dn(ce,"Map"),Nr=Dn(Object,"create"),Fn=function(){this.__data__=Nr?Nr(null):{},this.size=0},Vn=function(h){var w=this.has(h)&&delete this.__data__[h];return this.size-=w?1:0,w},va=Object.prototype.hasOwnProperty,aa=function(h){var w=this.__data__;if(Nr){var R=w[h];return R==="__lodash_hash_undefined__"?void 0:R}return va.call(w,h)?w[h]:void 0},Ya=Object.prototype.hasOwnProperty,la=function(h){var w=this.__data__;return Nr?w[h]!==void 0:Ya.call(w,h)},Qa=function(h,w){var R=this.__data__;return this.size+=this.has(h)?0:1,R[h]=Nr&&w===void 0?"__lodash_hash_undefined__":w,this};function Wa(h){var w=-1,R=h==null?0:h.length;for(this.clear();++w<R;){var j=h[w];this.set(j[0],j[1])}}Wa.prototype.clear=Fn,Wa.prototype.delete=Vn,Wa.prototype.get=aa,Wa.prototype.has=la,Wa.prototype.set=Qa;var Da=Wa,ar=function(){this.size=0,this.__data__={hash:new Da,map:new(Ve||X),string:new Da}},Or=function(h){var w=typeof h;return w=="string"||w=="number"||w=="symbol"||w=="boolean"?h!=="__proto__":h===null},Qr=function(h,w){var R=h.__data__;return Or(w)?R[typeof w=="string"?"string":"hash"]:R.map},wn=function(h){var w=Qr(this,h).delete(h);return this.size-=w?1:0,w},On=function(h){return Qr(this,h).get(h)},Gn=function(h){return Qr(this,h).has(h)},qn=function(h,w){var R=Qr(this,h),j=R.size;return R.set(h,w),this.size+=R.size==j?0:1,this};function oa(h){var w=-1,R=h==null?0:h.length;for(this.clear();++w<R;){var j=h[w];this.set(j[0],j[1])}}oa.prototype.clear=ar,oa.prototype.delete=wn,oa.prototype.get=On,oa.prototype.has=Gn,oa.prototype.set=qn;var ya=oa,Ka=function(h,w){var R=this.__data__;if(R instanceof X){var j=R.__data__;if(!Ve||j.length<199)return j.push([h,w]),this.size=++R.size,this;R=this.__data__=new ya(j)}return R.set(h,w),this.size=R.size,this};function mn(h){var w=this.__data__=new X(h);this.size=w.size}mn.prototype.clear=K,mn.prototype.delete=Q,mn.prototype.get=re,mn.prototype.has=q,mn.prototype.set=Ka;var jn=mn,Jn=function(h,w){for(var R=-1,j=h==null?0:h.length;++R<j&&w(h[R],R,h)!==!1;);return h},Ln=function(){try{var h=Dn(Object,"defineProperty");return h({},"",{}),h}catch(w){}}(),ma=function(h,w,R){w=="__proto__"&&Ln?Ln(h,w,{configurable:!0,enumerable:!0,value:R,writable:!0}):h[w]=R},Z=Object.prototype.hasOwnProperty,Gt=function(h,w,R){var j=h[w];Z.call(h,w)&&u(j,R)&&(R!==void 0||w in h)||ma(h,w,R)},lt=function(h,w,R,j){var ne=!R;R||(R={});for(var oe=-1,he=w.length;++oe<he;){var me=w[oe],_e=j?j(R[me],h[me],me,R,h):void 0;_e===void 0&&(_e=h[me]),ne?ma(R,me,_e):Gt(R,me,_e)}return R},Ht=function(h,w){for(var R=-1,j=Array(h);++R<h;)j[R]=w(R);return j},Ft=function(h){return h!=null&&typeof h=="object"},Ir=function(h){return Ft(h)&&Ge(h)=="[object Arguments]"},Sr=Object.prototype,nn=Sr.hasOwnProperty,an=Sr.propertyIsEnumerable,qr=Ir(function(){return arguments}())?Ir:function(h){return Ft(h)&&nn.call(h,"callee")&&!an.call(h,"callee")},le=Array.isArray,ge=function(){return!1},B=g(function(h,w){var R=w&&!w.nodeType&&w,j=R&&h&&!h.nodeType&&h,ne=j&&j.exports===R?ce.Buffer:void 0,oe=(ne?ne.isBuffer:void 0)||ge;h.exports=oe}),_=/^(?:0|[1-9]\d*)$/,M=function(h,w){var R=typeof h;return!!(w=w==null?9007199254740991:w)&&(R=="number"||R!="symbol"&&_.test(h))&&h>-1&&h%1==0&&h<w},$=function(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=9007199254740991},Ee={};Ee["[object Float32Array]"]=Ee["[object Float64Array]"]=Ee["[object Int8Array]"]=Ee["[object Int16Array]"]=Ee["[object Int32Array]"]=Ee["[object Uint8Array]"]=Ee["[object Uint8ClampedArray]"]=Ee["[object Uint16Array]"]=Ee["[object Uint32Array]"]=!0,Ee["[object Arguments]"]=Ee["[object Array]"]=Ee["[object ArrayBuffer]"]=Ee["[object Boolean]"]=Ee["[object DataView]"]=Ee["[object Date]"]=Ee["[object Error]"]=Ee["[object Function]"]=Ee["[object Map]"]=Ee["[object Number]"]=Ee["[object Object]"]=Ee["[object RegExp]"]=Ee["[object Set]"]=Ee["[object String]"]=Ee["[object WeakMap]"]=!1;var Ne=function(h){return Ft(h)&&$(h.length)&&!!Ee[Ge(h)]},Le=function(h){return function(w){return h(w)}},Ye=g(function(h,w){var R=w&&!w.nodeType&&w,j=R&&h&&!h.nodeType&&h,ne=j&&j.exports===R&&ae.process,oe=function(){try{var he=j&&j.require&&j.require("util").types;return he||ne&&ne.binding&&ne.binding("util")}catch(me){}}();h.exports=oe}),Ot=Ye&&Ye.isTypedArray,Et=Ot?Le(Ot):Ne,Zt=Object.prototype.hasOwnProperty,Lr=function(h,w){var R=le(h),j=!R&&qr(h),ne=!R&&!j&&B(h),oe=!R&&!j&&!ne&&Et(h),he=R||j||ne||oe,me=he?Ht(h.length,String):[],_e=me.length;for(var Be in h)!w&&!Zt.call(h,Be)||he&&(Be=="length"||ne&&(Be=="offset"||Be=="parent")||oe&&(Be=="buffer"||Be=="byteLength"||Be=="byteOffset")||M(Be,_e))||me.push(Be);return me},or=Object.prototype,$r=function(h){var w=h&&h.constructor;return h===(typeof w=="function"&&w.prototype||or)},Sn=function(h,w){return function(R){return h(w(R))}},kt=Sn(Object.keys,Object),nr=Object.prototype.hasOwnProperty,_r=function(h){if(!$r(h))return kt(h);var w=[];for(var R in Object(h))nr.call(h,R)&&R!="constructor"&&w.push(R);return w},Fr=function(h){return h!=null&&$(h.length)&&!xt(h)},He=function(h){return Fr(h)?Lr(h):_r(h)},Ae=function(h,w){return h&&lt(w,He(w),h)},Qe=function(h){var w=[];if(h!=null)for(var R in Object(h))w.push(R);return w},ft=Object.prototype.hasOwnProperty,ut=function(h){if(!Je(h))return Qe(h);var w=$r(h),R=[];for(var j in h)(j!="constructor"||!w&&ft.call(h,j))&&R.push(j);return R},St=function(h){return Fr(h)?Lr(h,!0):ut(h)},Qt=function(h,w){return h&&lt(w,St(w),h)},qt=g(function(h,w){var R=w&&!w.nodeType&&w,j=R&&h&&!h.nodeType&&h,ne=j&&j.exports===R?ce.Buffer:void 0,oe=ne?ne.allocUnsafe:void 0;h.exports=function(he,me){if(me)return he.slice();var _e=he.length,Be=oe?oe(_e):new he.constructor(_e);return he.copy(Be),Be}}),Xr=function(h,w){var R=-1,j=h.length;for(w||(w=Array(j));++R<j;)w[R]=h[R];return w},vn=function(h,w){for(var R=-1,j=h==null?0:h.length,ne=0,oe=[];++R<j;){var he=h[R];w(he,R,h)&&(oe[ne++]=he)}return oe},fn=function(){return[]},Hn=Object.prototype.propertyIsEnumerable,kn=Object.getOwnPropertySymbols,da=kn?function(h){return h==null?[]:(h=Object(h),vn(kn(h),function(w){return Hn.call(h,w)}))}:fn,ka=function(h,w){return lt(h,da(h),w)},Ra=function(h,w){for(var R=-1,j=w.length,ne=h.length;++R<j;)h[ne+R]=w[R];return h},Aa=Sn(Object.getPrototypeOf,Object),Eo=Object.getOwnPropertySymbols?function(h){for(var w=[];h;)Ra(w,da(h)),h=Aa(h);return w}:fn,_i=function(h,w){return lt(h,Eo(h),w)},qa=function(h,w,R){var j=w(h);return le(h)?j:Ra(j,R(h))},Qi=function(h){return qa(h,He,da)},fs=function(h){return qa(h,St,Eo)},oo=Dn(ce,"DataView"),so=Dn(ce,"Promise"),Tr=Dn(ce,"Set"),ro=Dn(ce,"WeakMap"),cs=yt(oo),ja=yt(Ve),bo=yt(so),Ho=yt(Tr),Fo=yt(ro),Ui=Ge;(oo&&Ui(new oo(new ArrayBuffer(1)))!="[object DataView]"||Ve&&Ui(new Ve)!="[object Map]"||so&&Ui(so.resolve())!="[object Promise]"||Tr&&Ui(new Tr)!="[object Set]"||ro&&Ui(new ro)!="[object WeakMap]")&&(Ui=function(h){var w=Ge(h),R=w=="[object Object]"?h.constructor:void 0,j=R?yt(R):"";if(j)switch(j){case cs:return"[object DataView]";case ja:return"[object Map]";case bo:return"[object Promise]";case Ho:return"[object Set]";case Fo:return"[object WeakMap]"}return w});var Ni=Ui,_s=Object.prototype.hasOwnProperty,ls=function(h){var w=h.length,R=new h.constructor(w);return w&&typeof h[0]=="string"&&_s.call(h,"index")&&(R.index=h.index,R.input=h.input),R},mi=ce.Uint8Array,qi=function(h){var w=new h.constructor(h.byteLength);return new mi(w).set(new mi(h)),w},Ms=function(h,w){var R=w?qi(h.buffer):h.buffer;return new h.constructor(R,h.byteOffset,h.byteLength)},Cs=/\w*$/,Lo=function(h){var w=new h.constructor(h.source,Cs.exec(h));return w.lastIndex=h.lastIndex,w},uo=De?De.prototype:void 0,Ts=uo?uo.valueOf:void 0,ds=function(h){return Ts?Object(Ts.call(h)):{}},Is=function(h,w){var R=w?qi(h.buffer):h.buffer;return new h.constructor(R,h.byteOffset,h.length)},Nn=function(h,w,R){var j=h.constructor;switch(w){case"[object ArrayBuffer]":return qi(h);case"[object Boolean]":case"[object Date]":return new j(+h);case"[object DataView]":return Ms(h,R);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Is(h,R);case"[object Map]":return new j;case"[object Number]":case"[object String]":return new j(h);case"[object RegExp]":return Lo(h);case"[object Set]":return new j;case"[object Symbol]":return ds(h)}},Ji=Object.create,fo=function(){function h(){}return function(w){if(!Je(w))return{};if(Ji)return Ji(w);h.prototype=w;var R=new h;return h.prototype=void 0,R}}(),Ii=function(h){return typeof h.constructor!="function"||$r(h)?{}:fo(Aa(h))},As=function(h){return Ft(h)&&Ni(h)=="[object Map]"},co=Ye&&Ye.isMap,Bi=co?Le(co):As,es=function(h){return Ft(h)&&Ni(h)=="[object Set]"},hs=Ye&&Ye.isSet,Go=hs?Le(hs):es,Oa={};Oa["[object Arguments]"]=Oa["[object Array]"]=Oa["[object ArrayBuffer]"]=Oa["[object DataView]"]=Oa["[object Boolean]"]=Oa["[object Date]"]=Oa["[object Float32Array]"]=Oa["[object Float64Array]"]=Oa["[object Int8Array]"]=Oa["[object Int16Array]"]=Oa["[object Int32Array]"]=Oa["[object Map]"]=Oa["[object Number]"]=Oa["[object Object]"]=Oa["[object RegExp]"]=Oa["[object Set]"]=Oa["[object String]"]=Oa["[object Symbol]"]=Oa["[object Uint8Array]"]=Oa["[object Uint8ClampedArray]"]=Oa["[object Uint16Array]"]=Oa["[object Uint32Array]"]=!0,Oa["[object Error]"]=Oa["[object Function]"]=Oa["[object WeakMap]"]=!1;var Zo=function h(w,R,j,ne,oe,he){var me,_e=1&R,Be=2&R,Ke=4&R;if(j&&(me=oe?j(w,ne,oe,he):j(w)),me!==void 0)return me;if(!Je(w))return w;var Xe=le(w);if(Xe){if(me=ls(w),!_e)return Xr(w,me)}else{var ht=Ni(w),Nt=ht=="[object Function]"||ht=="[object GeneratorFunction]";if(B(w))return qt(w,_e);if(ht=="[object Object]"||ht=="[object Arguments]"||Nt&&!oe){if(me=Be||Nt?{}:Ii(w),!_e)return Be?_i(w,Qt(me,w)):ka(w,Ae(me,w))}else{if(!Oa[ht])return oe?w:{};me=Nn(w,ht,_e)}}he||(he=new jn);var gr=he.get(w);if(gr)return gr;he.set(w,me),Go(w)?w.forEach(function(Vt){me.add(h(Vt,R,j,Vt,w,he))}):Bi(w)&&w.forEach(function(Vt,Xt){me.set(Xt,h(Vt,R,j,Xt,w,he))});var Ut=Xe?void 0:(Ke?Be?fs:Qi:Be?St:He)(w);return Jn(Ut||w,function(Vt,Xt){Ut&&(Vt=w[Xt=Vt]),Gt(me,Xt,h(Vt,R,j,Xt,w,he))}),me},no=function(h){return Zo(h,4)},Wi=function(h){return function(){return h}},ts=function(h){return function(w,R,j){for(var ne=-1,oe=Object(w),he=j(w),me=he.length;me--;){var _e=he[h?me:++ne];if(R(oe[_e],_e,oe)===!1)break}return w}}(),vs=function(h,w){return h&&ts(h,w,He)},Ja=function(h,w){return function(R,j){if(R==null)return R;if(!Fr(R))return h(R,j);for(var ne=R.length,oe=w?ne:-1,he=Object(R);(w?oe--:++oe<ne)&&j(he[oe],oe,he)!==!1;);return R}}(vs),eo=function(h){return h},fi=function(h){return typeof h=="function"?h:eo},Os=function(h,w){return(le(h)?Jn:Ja)(h,fi(w))},lo=Os,rs=function(h,w){var R=[];return Ja(h,function(j,ne,oe){w(j,ne,oe)&&R.push(j)}),R},Do=function(h){return this.__data__.set(h,"__lodash_hash_undefined__"),this},ji=function(h){return this.__data__.has(h)};function zo(h){var w=-1,R=h==null?0:h.length;for(this.__data__=new ya;++w<R;)this.add(h[w])}zo.prototype.add=zo.prototype.push=Do,zo.prototype.has=ji;var ho=zo,Uo=function(h,w){for(var R=-1,j=h==null?0:h.length;++R<j;)if(w(h[R],R,h))return!0;return!1},xo=function(h,w){return h.has(w)},Ma=function(h,w,R,j,ne,oe){var he=1&R,me=h.length,_e=w.length;if(me!=_e&&!(he&&_e>me))return!1;var Be=oe.get(h),Ke=oe.get(w);if(Be&&Ke)return Be==w&&Ke==h;var Xe=-1,ht=!0,Nt=2&R?new ho:void 0;for(oe.set(h,w),oe.set(w,h);++Xe<me;){var gr=h[Xe],Ut=w[Xe];if(j)var Vt=he?j(Ut,gr,Xe,w,h,oe):j(gr,Ut,Xe,h,w,oe);if(Vt!==void 0){if(Vt)continue;ht=!1;break}if(Nt){if(!Uo(w,function(Xt,Gr){if(!xo(Nt,Gr)&&(gr===Xt||ne(gr,Xt,R,j,oe)))return Nt.push(Gr)})){ht=!1;break}}else if(gr!==Ut&&!ne(gr,Ut,R,j,oe)){ht=!1;break}}return oe.delete(h),oe.delete(w),ht},Ai=function(h){var w=-1,R=Array(h.size);return h.forEach(function(j,ne){R[++w]=[ne,j]}),R},Hi=function(h){var w=-1,R=Array(h.size);return h.forEach(function(j){R[++w]=j}),R},En=De?De.prototype:void 0,cn=En?En.valueOf:void 0,Wo=function(h,w,R,j,ne,oe,he){switch(R){case"[object DataView]":if(h.byteLength!=w.byteLength||h.byteOffset!=w.byteOffset)return!1;h=h.buffer,w=w.buffer;case"[object ArrayBuffer]":return!(h.byteLength!=w.byteLength||!oe(new mi(h),new mi(w)));case"[object Boolean]":case"[object Date]":case"[object Number]":return u(+h,+w);case"[object Error]":return h.name==w.name&&h.message==w.message;case"[object RegExp]":case"[object String]":return h==w+"";case"[object Map]":var me=Ai;case"[object Set]":var _e=1&j;if(me||(me=Hi),h.size!=w.size&&!_e)return!1;var Be=he.get(h);if(Be)return Be==w;j|=2,he.set(h,w);var Ke=Ma(me(h),me(w),j,ne,oe,he);return he.delete(h),Ke;case"[object Symbol]":if(cn)return cn.call(h)==cn.call(w)}return!1},oi=Object.prototype.hasOwnProperty,No=function(h,w,R,j,ne,oe){var he=1&R,me=Qi(h),_e=me.length;if(_e!=Qi(w).length&&!he)return!1;for(var Be=_e;Be--;){var Ke=me[Be];if(!(he?Ke in w:oi.call(w,Ke)))return!1}var Xe=oe.get(h),ht=oe.get(w);if(Xe&&ht)return Xe==w&&ht==h;var Nt=!0;oe.set(h,w),oe.set(w,h);for(var gr=he;++Be<_e;){var Ut=h[Ke=me[Be]],Vt=w[Ke];if(j)var Xt=he?j(Vt,Ut,Ke,w,h,oe):j(Ut,Vt,Ke,h,w,oe);if(!(Xt===void 0?Ut===Vt||ne(Ut,Vt,R,j,oe):Xt)){Nt=!1;break}gr||(gr=Ke=="constructor")}if(Nt&&!gr){var Gr=h.constructor,Kr=w.constructor;Gr==Kr||!("constructor"in h)||!("constructor"in w)||typeof Gr=="function"&&Gr instanceof Gr&&typeof Kr=="function"&&Kr instanceof Kr||(Nt=!1)}return oe.delete(h),oe.delete(w),Nt},ao=Object.prototype.hasOwnProperty,Xa=function(h,w,R,j,ne,oe){var he=le(h),me=le(w),_e=he?"[object Array]":Ni(h),Be=me?"[object Array]":Ni(w),Ke=(_e=_e=="[object Arguments]"?"[object Object]":_e)=="[object Object]",Xe=(Be=Be=="[object Arguments]"?"[object Object]":Be)=="[object Object]",ht=_e==Be;if(ht&&B(h)){if(!B(w))return!1;he=!0,Ke=!1}if(ht&&!Ke)return oe||(oe=new jn),he||Et(h)?Ma(h,w,R,j,ne,oe):Wo(h,w,_e,R,j,ne,oe);if(!(1&R)){var Nt=Ke&&ao.call(h,"__wrapped__"),gr=Xe&&ao.call(w,"__wrapped__");if(Nt||gr){var Ut=Nt?h.value():h,Vt=gr?w.value():w;return oe||(oe=new jn),ne(Ut,Vt,R,j,oe)}}return!!ht&&(oe||(oe=new jn),No(h,w,R,j,ne,oe))},ci=function h(w,R,j,ne,oe){return w===R||(w==null||R==null||!Ft(w)&&!Ft(R)?w!=w&&R!=R:Xa(w,R,j,ne,h,oe))},ns=function(h,w,R,j){var ne=R.length,oe=ne,he=!j;if(h==null)return!oe;for(h=Object(h);ne--;){var me=R[ne];if(he&&me[2]?me[1]!==h[me[0]]:!(me[0]in h))return!1}for(;++ne<oe;){var _e=(me=R[ne])[0],Be=h[_e],Ke=me[1];if(he&&me[2]){if(Be===void 0&&!(_e in h))return!1}else{var Xe=new jn;if(j)var ht=j(Be,Ke,_e,h,w,Xe);if(!(ht===void 0?ci(Ke,Be,3,j,Xe):ht))return!1}}return!0},gs=function(h){return h==h&&!Je(h)},Bs=function(h){for(var w=He(h),R=w.length;R--;){var j=w[R],ne=h[j];w[R]=[j,ne,gs(ne)]}return w},Eu=function(h,w){return function(R){return R!=null&&R[h]===w&&(w!==void 0||h in Object(R))}},Fs=function(h){var w=Bs(h);return w.length==1&&w[0][2]?Eu(w[0][0],w[0][1]):function(R){return R===h||ns(R,h,w)}},li=function(h){return typeof h=="symbol"||Ft(h)&&Ge(h)=="[object Symbol]"},Xo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bu=/^\w*$/,ru=function(h,w){if(le(h))return!1;var R=typeof h;return!(R!="number"&&R!="symbol"&&R!="boolean"&&h!=null&&!li(h))||bu.test(h)||!Xo.test(h)||w!=null&&h in Object(w)};function as(h,w){if(typeof h!="function"||w!=null&&typeof w!="function")throw new TypeError("Expected a function");var R=function(){var j=arguments,ne=w?w.apply(this,j):j[0],oe=R.cache;if(oe.has(ne))return oe.get(ne);var he=h.apply(this,j);return R.cache=oe.set(ne,he)||oe,he};return R.cache=new(as.Cache||ya),R}as.Cache=ya;var Gs=as,Ls=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ds=/\\(\\)?/g,xu=function(h){var w=Gs(h,function(j){return R.size===500&&R.clear(),j}),R=w.cache;return w}(function(h){var w=[];return h.charCodeAt(0)===46&&w.push(""),h.replace(Ls,function(R,j,ne,oe){w.push(ne?oe.replace(Ds,"$1"):j||R)}),w}),io=function(h,w){for(var R=-1,j=h==null?0:h.length,ne=Array(j);++R<j;)ne[R]=w(h[R],R,h);return ne},is=De?De.prototype:void 0,zs=is?is.toString:void 0,wu=function h(w){if(typeof w=="string")return w;if(le(w))return io(w,h)+"";if(li(w))return zs?zs.call(w):"";var R=w+"";return R=="0"&&1/w==-1/0?"-0":R},nu=function(h){return h==null?"":wu(h)},Us=function(h,w){return le(h)?h:ru(h,w)?[h]:xu(nu(h))},ps=function(h){if(typeof h=="string"||li(h))return h;var w=h+"";return w=="0"&&1/h==-1/0?"-0":w},Ws=function(h,w){for(var R=0,j=(w=Us(w,h)).length;h!=null&&R<j;)h=h[ps(w[R++])];return R&&R==j?h:void 0},Xs=function(h,w,R){var j=h==null?void 0:Ws(h,w);return j===void 0?R:j},Vs=function(h,w){return h!=null&&w in Object(h)},Su=function(h,w,R){for(var j=-1,ne=(w=Us(w,h)).length,oe=!1;++j<ne;){var he=ps(w[j]);if(!(oe=h!=null&&R(h,he)))break;h=h[he]}return oe||++j!=ne?oe:!!(ne=h==null?0:h.length)&&$(ne)&&M(he,ne)&&(le(h)||qr(h))},_u=function(h,w){return h!=null&&Su(h,w,Vs)},Po=function(h,w){return ru(h)&&gs(w)?Eu(ps(h),w):function(R){var j=Xs(R,h);return j===void 0&&j===w?_u(R,h):ci(w,j,3)}},Ko=function(h){return function(w){return w==null?void 0:w[h]}},Mu=function(h){return function(w){return Ws(w,h)}},ys=function(h){return ru(h)?Ko(ps(h)):Mu(h)},vo=function(h){return typeof h=="function"?h:h==null?eo:typeof h=="object"?le(h)?Po(h[0],h[1]):Fs(h):ys(h)},Wu=function(h,w){return(le(h)?vn:rs)(h,vo(w))},Cu=Object.prototype.hasOwnProperty,Xu=function(h,w){return h!=null&&Cu.call(h,w)},au=function(h,w){return h!=null&&Su(h,w,Xu)},uf=Object.prototype.hasOwnProperty,c=function(h){if(h==null)return!0;if(Fr(h)&&(le(h)||typeof h=="string"||typeof h.splice=="function"||B(h)||Et(h)||qr(h)))return!h.length;var w=Ni(h);if(w=="[object Map]"||w=="[object Set]")return!h.size;if($r(h))return!_r(h).length;for(var R in h)if(uf.call(h,R))return!1;return!0},I=function(h){return h===void 0},fe=function(h,w){var R=-1,j=Fr(h)?Array(h.length):[];return Ja(h,function(ne,oe,he){j[++R]=w(ne,oe,he)}),j},be=function(h,w){return(le(h)?io:fe)(h,vo(w))},Oe=function(h,w,R,j){var ne=-1,oe=h==null?0:h.length;for(j&&oe&&(R=h[++ne]);++ne<oe;)R=w(R,h[ne],ne,h);return R},ze=function(h,w,R,j,ne){return ne(h,function(oe,he,me){R=j?(j=!1,oe):w(R,oe,he,me)}),R},Ue=function(h,w,R){var j=le(h)?Oe:ze,ne=arguments.length<3;return j(h,vo(w),R,ne,Ja)},nt=function(h){return typeof h=="string"||!le(h)&&Ft(h)&&Ge(h)=="[object String]"},st=Ko("length"),bt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),It=function(h){return bt.test(h)},fr="[\\ud800-\\udfff]",vr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",lr="\\ud83c[\\udffb-\\udfff]",Ur="[^\\ud800-\\udfff]",Zr="(?:\\ud83c[\\udde6-\\uddff]){2}",Er="[\\ud800-\\udbff][\\udc00-\\udfff]",sn="(?:"+vr+"|"+lr+")?",Kn="[\\ufe0e\\ufe0f]?"+sn+("(?:\\u200d(?:"+[Ur,Zr,Er].join("|")+")[\\ufe0e\\ufe0f]?"+sn+")*"),ua="(?:"+[Ur+vr+"?",vr,Zr,Er,fr].join("|")+")",$n=RegExp(lr+"(?="+lr+")|"+ua+Kn,"g"),Rn=function(h){for(var w=$n.lastIndex=0;$n.test(h);)++w;return w},Xn=function(h){return It(h)?Rn(h):st(h)},Mi=function(h){if(h==null)return 0;if(Fr(h))return nt(h)?Xn(h):h.length;var w=Ni(h);return w=="[object Map]"||w=="[object Set]"?h.size:_r(h).length},Ei=function(h,w,R){var j=le(h),ne=j||B(h)||Et(h);if(w=vo(w),R==null){var oe=h&&h.constructor;R=ne?j?new oe:[]:Je(h)&&xt(oe)?fo(Aa(h)):{}}return(ne?Jn:vs)(h,function(he,me,_e){return w(R,he,me,_e)}),R},ai=De?De.isConcatSpreadable:void 0,di=function(h){return le(h)||qr(h)||!!(ai&&h&&h[ai])},hi=function h(w,R,j,ne,oe){var he=-1,me=w.length;for(j||(j=di),oe||(oe=[]);++he<me;){var _e=w[he];R>0&&j(_e)?R>1?h(_e,R-1,j,ne,oe):Ra(oe,_e):ne||(oe[oe.length]=_e)}return oe},vi=function(h,w,R){switch(R.length){case 0:return h.call(w);case 1:return h.call(w,R[0]);case 2:return h.call(w,R[0],R[1]);case 3:return h.call(w,R[0],R[1],R[2])}return h.apply(w,R)},Pi=Math.max,Ea=function(h,w,R){return w=Pi(w===void 0?h.length-1:w,0),function(){for(var j=arguments,ne=-1,oe=Pi(j.length-w,0),he=Array(oe);++ne<oe;)he[ne]=j[w+ne];ne=-1;for(var me=Array(w+1);++ne<w;)me[ne]=j[ne];return me[w]=R(he),vi(h,this,me)}},Ha=Ln?function(h,w){return Ln(h,"toString",{configurable:!0,enumerable:!1,value:Wi(w),writable:!0})}:eo,$o=Date.now,Vo=function(h){var w=0,R=0;return function(){var j=$o(),ne=16-(j-R);if(R=j,ne>0){if(++w>=800)return arguments[0]}else w=0;return h.apply(void 0,arguments)}}(Ha),wo=function(h,w){return Vo(Ea(h,w,eo),h+"")},os=function(h,w,R,j){for(var ne=h.length,oe=R+(j?1:-1);j?oe--:++oe<ne;)if(w(h[oe],oe,h))return oe;return-1},Of=function(h){return h!=h},Lf=function(h,w,R){for(var j=R-1,ne=h.length;++j<ne;)if(h[j]===w)return j;return-1},ms=function(h,w,R){return w==w?Lf(h,w,R):os(h,Of,R)},ic=function(h,w){return!!(h!=null&&h.length)&&ms(h,w,0)>-1},oc=function(h,w,R){for(var j=-1,ne=h==null?0:h.length;++j<ne;)if(R(w,h[j]))return!0;return!1},ff=function(){},Df=Tr&&1/Hi(new Tr([,-0]))[1]==1/0?function(h){return new Tr(h)}:ff,sc=function(h,w,R){var j=-1,ne=ic,oe=h.length,he=!0,me=[],_e=me;if(R)he=!1,ne=oc;else if(oe>=200){var Be=w?null:Df(h);if(Be)return Hi(Be);he=!1,ne=xo,_e=new ho}else _e=w?[]:me;e:for(;++j<oe;){var Ke=h[j],Xe=w?w(Ke):Ke;if(Ke=R||Ke!==0?Ke:0,he&&Xe==Xe){for(var ht=_e.length;ht--;)if(_e[ht]===Xe)continue e;w&&_e.push(Xe),me.push(Ke)}else ne(_e,Xe,R)||(_e!==me&&_e.push(Xe),me.push(Ke))}return me},iu=function(h){return Ft(h)&&Fr(h)},uc=wo(function(h){return sc(hi(h,1,iu,!0))}),Wc=function(h,w){return io(w,function(R){return h[R]})},Ys,Nf=function(h){return h==null?[]:Wc(h,He(h))};try{Ys={clone:no,constant:Wi,each:lo,filter:Wu,has:au,isArray:le,isEmpty:c,isFunction:xt,isUndefined:I,keys:He,map:be,reduce:Ue,size:Mi,transform:Ei,union:uc,values:Nf}}catch(h){}Ys||(Ys=window._);var ln=Ys,ou=Ca;function Ca(h){this._isDirected=!ln.has(h,"directed")||h.directed,this._isMultigraph=!!ln.has(h,"multigraph")&&h.multigraph,this._isCompound=!!ln.has(h,"compound")&&h.compound,this._label=void 0,this._defaultNodeLabelFn=ln.constant(void 0),this._defaultEdgeLabelFn=ln.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function Vu(h,w){h[w]?h[w]++:h[w]=1}function js(h,w){--h[w]||delete h[w]}function Ns(h,w,R,j){var ne=""+w,oe=""+R;if(!h&&ne>oe){var he=ne;ne=oe,oe=he}return ne+""+oe+""+(ln.isUndefined(j)?"\0":j)}function cf(h,w,R,j){var ne=""+w,oe=""+R;if(!h&&ne>oe){var he=ne;ne=oe,oe=he}var me={v:ne,w:oe};return j&&(me.name=j),me}function Tu(h,w){return Ns(h,w.v,w.w,w.name)}Ca.prototype._nodeCount=0,Ca.prototype._edgeCount=0,Ca.prototype.isDirected=function(){return this._isDirected},Ca.prototype.isMultigraph=function(){return this._isMultigraph},Ca.prototype.isCompound=function(){return this._isCompound},Ca.prototype.setGraph=function(h){return this._label=h,this},Ca.prototype.graph=function(){return this._label},Ca.prototype.setDefaultNodeLabel=function(h){return ln.isFunction(h)||(h=ln.constant(h)),this._defaultNodeLabelFn=h,this},Ca.prototype.nodeCount=function(){return this._nodeCount},Ca.prototype.nodes=function(){return ln.keys(this._nodes)},Ca.prototype.sources=function(){var h=this;return ln.filter(this.nodes(),function(w){return ln.isEmpty(h._in[w])})},Ca.prototype.sinks=function(){var h=this;return ln.filter(this.nodes(),function(w){return ln.isEmpty(h._out[w])})},Ca.prototype.setNodes=function(h,w){var R=arguments,j=this;return ln.each(h,function(ne){R.length>1?j.setNode(ne,w):j.setNode(ne)}),this},Ca.prototype.setNode=function(h,w){return ln.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=w),this):(this._nodes[h]=arguments.length>1?w:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]="\0",this._children[h]={},this._children["\0"][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},Ca.prototype.node=function(h){return this._nodes[h]},Ca.prototype.hasNode=function(h){return ln.has(this._nodes,h)},Ca.prototype.removeNode=function(h){var w=this;if(ln.has(this._nodes,h)){var R=function(j){w.removeEdge(w._edgeObjs[j])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],ln.each(this.children(h),function(j){w.setParent(j)}),delete this._children[h]),ln.each(ln.keys(this._in[h]),R),delete this._in[h],delete this._preds[h],ln.each(ln.keys(this._out[h]),R),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},Ca.prototype.setParent=function(h,w){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(ln.isUndefined(w))w="\0";else{for(var R=w+="";!ln.isUndefined(R);R=this.parent(R))if(R===h)throw new Error("Setting "+w+" as parent of "+h+" would create a cycle");this.setNode(w)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=w,this._children[w][h]=!0,this},Ca.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},Ca.prototype.parent=function(h){if(this._isCompound){var w=this._parent[h];if(w!=="\0")return w}},Ca.prototype.children=function(h){if(ln.isUndefined(h)&&(h="\0"),this._isCompound){var w=this._children[h];if(w)return ln.keys(w)}else{if(h==="\0")return this.nodes();if(this.hasNode(h))return[]}},Ca.prototype.predecessors=function(h){var w=this._preds[h];if(w)return ln.keys(w)},Ca.prototype.successors=function(h){var w=this._sucs[h];if(w)return ln.keys(w)},Ca.prototype.neighbors=function(h){var w=this.predecessors(h);if(w)return ln.union(w,this.successors(h))},Ca.prototype.isLeaf=function(h){return(this.isDirected()?this.successors(h):this.neighbors(h)).length===0},Ca.prototype.filterNodes=function(h){var w=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});w.setGraph(this.graph());var R=this;ln.each(this._nodes,function(oe,he){h(he)&&w.setNode(he,oe)}),ln.each(this._edgeObjs,function(oe){w.hasNode(oe.v)&&w.hasNode(oe.w)&&w.setEdge(oe,R.edge(oe))});var j={};function ne(oe){var he=R.parent(oe);return he===void 0||w.hasNode(he)?(j[oe]=he,he):he in j?j[he]:ne(he)}return this._isCompound&&ln.each(w.nodes(),function(oe){w.setParent(oe,ne(oe))}),w},Ca.prototype.setDefaultEdgeLabel=function(h){return ln.isFunction(h)||(h=ln.constant(h)),this._defaultEdgeLabelFn=h,this},Ca.prototype.edgeCount=function(){return this._edgeCount},Ca.prototype.edges=function(){return ln.values(this._edgeObjs)},Ca.prototype.setPath=function(h,w){var R=this,j=arguments;return ln.reduce(h,function(ne,oe){return j.length>1?R.setEdge(ne,oe,w):R.setEdge(ne,oe),oe}),this},Ca.prototype.setEdge=function(){var h,w,R,j,ne=!1,oe=arguments[0];typeof oe=="object"&&oe!==null&&"v"in oe?(h=oe.v,w=oe.w,R=oe.name,arguments.length===2&&(j=arguments[1],ne=!0)):(h=oe,w=arguments[1],R=arguments[3],arguments.length>2&&(j=arguments[2],ne=!0)),h=""+h,w=""+w,ln.isUndefined(R)||(R=""+R);var he=Ns(this._isDirected,h,w,R);if(ln.has(this._edgeLabels,he))return ne&&(this._edgeLabels[he]=j),this;if(!ln.isUndefined(R)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(w),this._edgeLabels[he]=ne?j:this._defaultEdgeLabelFn(h,w,R);var me=cf(this._isDirected,h,w,R);return h=me.v,w=me.w,Object.freeze(me),this._edgeObjs[he]=me,Vu(this._preds[w],h),Vu(this._sucs[h],w),this._in[w][he]=me,this._out[h][he]=me,this._edgeCount++,this},Ca.prototype.edge=function(h,w,R){var j=arguments.length===1?Tu(this._isDirected,arguments[0]):Ns(this._isDirected,h,w,R);return this._edgeLabels[j]},Ca.prototype.hasEdge=function(h,w,R){var j=arguments.length===1?Tu(this._isDirected,arguments[0]):Ns(this._isDirected,h,w,R);return ln.has(this._edgeLabels,j)},Ca.prototype.removeEdge=function(h,w,R){var j=arguments.length===1?Tu(this._isDirected,arguments[0]):Ns(this._isDirected,h,w,R),ne=this._edgeObjs[j];return ne&&(h=ne.v,w=ne.w,delete this._edgeLabels[j],delete this._edgeObjs[j],js(this._preds[w],h),js(this._sucs[h],w),delete this._in[w][j],delete this._out[h][j],this._edgeCount--),this},Ca.prototype.inEdges=function(h,w){var R=this._in[h];if(R){var j=ln.values(R);return w?ln.filter(j,function(ne){return ne.v===w}):j}},Ca.prototype.outEdges=function(h,w){var R=this._out[h];if(R){var j=ln.values(R);return w?ln.filter(j,function(ne){return ne.w===w}):j}},Ca.prototype.nodeEdges=function(h,w){var R=this.inEdges(h,w);if(R)return R.concat(this.outEdges(h,w))};var Yu={Graph:ou,version:"2.1.8"},lf={write:function(h){var w={options:{directed:h.isDirected(),multigraph:h.isMultigraph(),compound:h.isCompound()},nodes:Pf(h),edges:go(h)};return ln.isUndefined(h.graph())||(w.value=ln.clone(h.graph())),w},read:function(h){var w=new ou(h.options).setGraph(h.value);return ln.each(h.nodes,function(R){w.setNode(R.v,R.value),R.parent&&w.setParent(R.v,R.parent)}),ln.each(h.edges,function(R){w.setEdge({v:R.v,w:R.w,name:R.name},R.value)}),w}};function Pf(h){return ln.map(h.nodes(),function(w){var R=h.node(w),j=h.parent(w),ne={v:w};return ln.isUndefined(R)||(ne.value=R),ln.isUndefined(j)||(ne.parent=j),ne})}function go(h){return ln.map(h.edges(),function(w){var R=h.edge(w),j={v:w.v,w:w.w};return ln.isUndefined(w.name)||(j.name=w.name),ln.isUndefined(R)||(j.value=R),j})}var ju=function(h){var w,R={},j=[];function ne(oe){ln.has(R,oe)||(R[oe]=!0,w.push(oe),ln.each(h.successors(oe),ne),ln.each(h.predecessors(oe),ne))}return ln.each(h.nodes(),function(oe){w=[],ne(oe),w.length&&j.push(w)}),j},te=de;function de(){this._arr=[],this._keyIndices={}}de.prototype.size=function(){return this._arr.length},de.prototype.keys=function(){return this._arr.map(function(h){return h.key})},de.prototype.has=function(h){return ln.has(this._keyIndices,h)},de.prototype.priority=function(h){var w=this._keyIndices[h];if(w!==void 0)return this._arr[w].priority},de.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},de.prototype.add=function(h,w){var R=this._keyIndices;if(h=String(h),!ln.has(R,h)){var j=this._arr,ne=j.length;return R[h]=ne,j.push({key:h,priority:w}),this._decrease(ne),!0}return!1},de.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var h=this._arr.pop();return delete this._keyIndices[h.key],this._heapify(0),h.key},de.prototype.decrease=function(h,w){var R=this._keyIndices[h];if(w>this._arr[R].priority)throw new Error("New priority is greater than current priority. Key: "+h+" Old: "+this._arr[R].priority+" New: "+w);this._arr[R].priority=w,this._decrease(R)},de.prototype._heapify=function(h){var w=this._arr,R=2*h,j=R+1,ne=h;R<w.length&&(ne=w[R].priority<w[ne].priority?R:ne,j<w.length&&(ne=w[j].priority<w[ne].priority?j:ne),ne!==h&&(this._swap(h,ne),this._heapify(ne)))},de.prototype._decrease=function(h){for(var w,R=this._arr,j=R[h].priority;h!==0&&!(R[w=h>>1].priority<j);)this._swap(h,w),h=w},de.prototype._swap=function(h,w){var R=this._arr,j=this._keyIndices,ne=R[h],oe=R[w];R[h]=oe,R[w]=ne,j[oe.key]=h,j[ne.key]=w};var Me=function(h,w,R,j){return function(ne,oe,he,me){var _e,Be,Ke={},Xe=new te,ht=function(Nt){var gr=Nt.v!==_e?Nt.v:Nt.w,Ut=Ke[gr],Vt=he(Nt),Xt=Be.distance+Vt;if(Vt<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+Nt+" Weight: "+Vt);Xt<Ut.distance&&(Ut.distance=Xt,Ut.predecessor=_e,Xe.decrease(gr,Xt))};for(ne.nodes().forEach(function(Nt){var gr=Nt===oe?0:Number.POSITIVE_INFINITY;Ke[Nt]={distance:gr},Xe.add(Nt,gr)});Xe.size()>0&&(_e=Xe.removeMin(),(Be=Ke[_e]).distance!==Number.POSITIVE_INFINITY);)me(_e).forEach(ht);return Ke}(h,String(w),R||Fe,j||function(ne){return h.outEdges(ne)})},Fe=ln.constant(1),tt=function(h,w,R){return ln.transform(h.nodes(),function(j,ne){j[ne]=Me(h,ne,w,R)},{})},Dt=function(h){var w=0,R=[],j={},ne=[];function oe(he){var me=j[he]={onStack:!0,lowlink:w,index:w++};if(R.push(he),h.successors(he).forEach(function(Ke){ln.has(j,Ke)?j[Ke].onStack&&(me.lowlink=Math.min(me.lowlink,j[Ke].index)):(oe(Ke),me.lowlink=Math.min(me.lowlink,j[Ke].lowlink))}),me.lowlink===me.index){var _e,Be=[];do _e=R.pop(),j[_e].onStack=!1,Be.push(_e);while(he!==_e);ne.push(Be)}}return h.nodes().forEach(function(he){ln.has(j,he)||oe(he)}),ne},Rt=function(h){return ln.filter(Dt(h),function(w){return w.length>1||w.length===1&&h.hasEdge(w[0],w[0])})},ur=function(h,w,R){return function(j,ne,oe){var he={},me=j.nodes();return me.forEach(function(_e){he[_e]={},he[_e][_e]={distance:0},me.forEach(function(Be){_e!==Be&&(he[_e][Be]={distance:Number.POSITIVE_INFINITY})}),oe(_e).forEach(function(Be){var Ke=Be.v===_e?Be.w:Be.v,Xe=ne(Be);he[_e][Ke]={distance:Xe,predecessor:_e}})}),me.forEach(function(_e){var Be=he[_e];me.forEach(function(Ke){var Xe=he[Ke];me.forEach(function(ht){var Nt=Xe[_e],gr=Be[ht],Ut=Xe[ht],Vt=Nt.distance+gr.distance;Vt<Ut.distance&&(Ut.distance=Vt,Ut.predecessor=gr.predecessor)})})}),he}(h,w||Pr,R||function(j){return h.outEdges(j)})},Pr=ln.constant(1),Rr=hn;function hn(h){var w={},R={},j=[];if(ln.each(h.sinks(),function ne(oe){if(ln.has(R,oe))throw new pn;ln.has(w,oe)||(R[oe]=!0,w[oe]=!0,ln.each(h.predecessors(oe),ne),delete R[oe],j.push(oe))}),ln.size(w)!==h.nodeCount())throw new pn;return j}function pn(){}hn.CycleException=pn,pn.prototype=new Error;var on=function(h,w,R){ln.isArray(w)||(w=[w]);var j=(h.isDirected()?h.successors:h.neighbors).bind(h),ne=[],oe={};return ln.each(w,function(he){if(!h.hasNode(he))throw new Error("Graph does not have node: "+he);Yn(h,he,R==="post",oe,j,ne)}),ne};function Yn(h,w,R,j,ne,oe){ln.has(j,w)||(j[w]=!0,R||oe.push(w),ln.each(ne(w),function(he){Yn(h,he,R,j,ne,oe)}),R&&oe.push(w))}var sa,ta={Graph:Yu.Graph,json:lf,alg:{components:ju,dijkstra:Me,dijkstraAll:tt,findCycles:Rt,floydWarshall:ur,isAcyclic:function(h){try{Rr(h)}catch(w){if(w instanceof Rr.CycleException)return!1;throw w}return!0},postorder:function(h,w){return on(h,w,"post")},preorder:function(h,w){return on(h,w,"pre")},prim:function(h,w){var R,j=new ou,ne={},oe=new te;function he(_e){var Be=_e.v===R?_e.w:_e.v,Ke=oe.priority(Be);if(Ke!==void 0){var Xe=w(_e);Xe<Ke&&(ne[Be]=R,oe.decrease(Be,Xe))}}if(h.nodeCount()===0)return j;ln.each(h.nodes(),function(_e){oe.add(_e,Number.POSITIVE_INFINITY),j.setNode(_e)}),oe.decrease(h.nodes()[0],0);for(var me=!1;oe.size()>0;){if(R=oe.removeMin(),ln.has(ne,R))j.setEdge(R,ne[R]);else{if(me)throw new Error("Input graph is not connected: "+h);me=!0}h.nodeEdges(R).forEach(he)}return j},tarjan:Dt,topsort:Rr},version:Yu.version};try{sa=ta}catch(h){}sa||(sa=window.graphlib);var In=sa,ba=function(h){return Zo(h,5)},Mn=function(h,w,R){if(!Je(R))return!1;var j=typeof w;return!!(j=="number"?Fr(R)&&M(w,R.length):j=="string"&&w in R)&&u(R[w],h)},ha=Object.prototype,Zn=ha.hasOwnProperty,Cn=wo(function(h,w){h=Object(h);var R=-1,j=w.length,ne=j>2?w[2]:void 0;for(ne&&Mn(w[0],w[1],ne)&&(j=1);++R<j;)for(var oe=w[R],he=St(oe),me=-1,_e=he.length;++me<_e;){var Be=he[me],Ke=h[Be];(Ke===void 0||u(Ke,ha[Be])&&!Zn.call(h,Be))&&(h[Be]=oe[Be])}return h}),fa=function(h){return function(w,R,j){var ne=Object(w);if(!Fr(w)){var oe=vo(R);w=He(w),R=function(me){return oe(ne[me],me,ne)}}var he=h(w,R,j);return he>-1?ne[oe?w[he]:he]:void 0}},Fa=/^\s+|\s+$/g,ii=/^[-+]0x[0-9a-f]+$/i,Ga=/^0b[01]+$/i,Na=/^0o[0-7]+$/i,si=parseInt,Oi=function(h){if(typeof h=="number")return h;if(li(h))return NaN;if(Je(h)){var w=typeof h.valueOf=="function"?h.valueOf():h;h=Je(w)?w+"":w}if(typeof h!="string")return h===0?h:+h;h=h.replace(Fa,"");var R=Ga.test(h);return R||Na.test(h)?si(h.slice(2),R?2:8):ii.test(h)?NaN:+h},gi=function(h){return h?(h=Oi(h))===1/0||h===-1/0?17976931348623157e292*(h<0?-1:1):h==h?h:0:h===0?h:0},Iu=function(h){var w=gi(h),R=w%1;return w==w?R?w-R:w:0},kf=Math.max,Ps=fa(function(h,w,R){var j=h==null?0:h.length;if(!j)return-1;var ne=R==null?0:Iu(R);return ne<0&&(ne=kf(j+ne,0)),os(h,vo(w),ne)}),su=function(h){return h!=null&&h.length?hi(h,1):[]},Yo=function(h,w){return h==null?h:ts(h,fi(w),St)},Hu=function(h){var w=h==null?0:h.length;return w?h[w-1]:void 0},Au=function(h,w){var R={};return w=vo(w),vs(h,function(j,ne,oe){ma(R,ne,w(j,ne,oe))}),R},uu=function(h,w,R){for(var j=-1,ne=h.length;++j<ne;){var oe=h[j],he=w(oe);if(he!=null&&(me===void 0?he==he&&!li(he):R(he,me)))var me=he,_e=oe}return _e},Ou=function(h,w){return h>w},df=function(h){return h&&h.length?uu(h,eo,Ou):void 0},fu=function(h,w,R){(R!==void 0&&!u(h[w],R)||R===void 0&&!(w in h))&&ma(h,w,R)},Zu=Function.prototype,Hs=Object.prototype,hf=Zu.toString,vf=Hs.hasOwnProperty,gf=hf.call(Object),jo=function(h){if(!Ft(h)||Ge(h)!="[object Object]")return!1;var w=Aa(h);if(w===null)return!0;var R=vf.call(w,"constructor")&&w.constructor;return typeof R=="function"&&R instanceof R&&hf.call(R)==gf},pf=function(h,w){if((w!=="constructor"||typeof h[w]!="function")&&w!="__proto__")return h[w]},Rf=function(h){return lt(h,St(h))},ll=function(h,w,R,j,ne,oe,he){var me=pf(h,R),_e=pf(w,R),Be=he.get(_e);if(Be)fu(h,R,Be);else{var Ke=oe?oe(me,_e,R+"",h,w,he):void 0,Xe=Ke===void 0;if(Xe){var ht=le(_e),Nt=!ht&&B(_e),gr=!ht&&!Nt&&Et(_e);Ke=_e,ht||Nt||gr?le(me)?Ke=me:iu(me)?Ke=Xr(me):Nt?(Xe=!1,Ke=qt(_e,!0)):gr?(Xe=!1,Ke=Is(_e,!0)):Ke=[]:jo(_e)||qr(_e)?(Ke=me,qr(me)?Ke=Rf(me):Je(me)&&!xt(me)||(Ke=Ii(_e))):Xe=!1}Xe&&(he.set(_e,Ke),ne(Ke,_e,j,oe,he),he.delete(_e)),fu(h,R,Ke)}},Lu=function h(w,R,j,ne,oe){w!==R&&ts(R,function(he,me){if(oe||(oe=new jn),Je(he))ll(w,R,me,j,h,ne,oe);else{var _e=ne?ne(pf(w,me),he,me+"",w,R,oe):void 0;_e===void 0&&(_e=he),fu(w,me,_e)}},St)},Ku=function(h){return wo(function(w,R){var j=-1,ne=R.length,oe=ne>1?R[ne-1]:void 0,he=ne>2?R[2]:void 0;for(oe=h.length>3&&typeof oe=="function"?(ne--,oe):void 0,he&&Mn(R[0],R[1],he)&&(oe=ne<3?void 0:oe,ne=1),w=Object(w);++j<ne;){var me=R[j];me&&h(w,me,j,oe)}return w})}(function(h,w,R){Lu(h,w,R)}),Xc=function(h,w){return h<w},$u=function(h){return h&&h.length?uu(h,eo,Xc):void 0},Vc=function(h,w){return h&&h.length?uu(h,vo(w),Xc):void 0},Qu=function(){return ce.Date.now()},Bf=function(h,w,R,j){if(!Je(h))return h;for(var ne=-1,oe=(w=Us(w,h)).length,he=oe-1,me=h;me!=null&&++ne<oe;){var _e=ps(w[ne]),Be=R;if(_e==="__proto__"||_e==="constructor"||_e==="prototype")return h;if(ne!=he){var Ke=me[_e];(Be=j?j(Ke,_e,me):void 0)===void 0&&(Be=Je(Ke)?Ke:M(w[ne+1])?[]:{})}Gt(me,_e,Be),me=me[_e]}return h},fc=function(h,w,R){for(var j=-1,ne=w.length,oe={};++j<ne;){var he=w[j],me=Ws(h,he);R(me,he)&&Bf(oe,Us(he,h),me)}return oe},Ff=function(h,w){return fc(h,w,function(R,j){return _u(h,j)})},Du=function(h){return Vo(Ea(h,void 0,su),h+"")}(function(h,w){return h==null?{}:Ff(h,w)}),cc=Math.ceil,Gf=Math.max,lc=function(h,w,R,j){for(var ne=-1,oe=Gf(cc((w-h)/(R||1)),0),he=Array(oe);oe--;)he[j?oe:++ne]=h,h+=R;return he},zf=function(h){return function(w,R,j){return j&&typeof j!="number"&&Mn(w,R,j)&&(R=j=void 0),w=gi(w),R===void 0?(R=w,w=0):R=gi(R),j=j===void 0?w<R?1:-1:gi(j),lc(w,R,j,h)}}(),Nu=function(h,w){var R=h.length;for(h.sort(w);R--;)h[R]=h[R].value;return h},dc=function(h,w){if(h!==w){var R=h!==void 0,j=h===null,ne=h==h,oe=li(h),he=w!==void 0,me=w===null,_e=w==w,Be=li(w);if(!me&&!Be&&!oe&&h>w||oe&&he&&_e&&!me&&!Be||j&&he&&_e||!R&&_e||!ne)return 1;if(!j&&!oe&&!Be&&h<w||Be&&R&&ne&&!j&&!oe||me&&R&&ne||!he&&ne||!_e)return-1}return 0},Uf=function(h,w,R){for(var j=-1,ne=h.criteria,oe=w.criteria,he=ne.length,me=R.length;++j<he;){var _e=dc(ne[j],oe[j]);if(_e)return j>=me?_e:_e*(R[j]=="desc"?-1:1)}return h.index-w.index},qu=function(h,w,R){w=w.length?io(w,function(oe){return le(oe)?function(he){return Ws(he,oe.length===1?oe[0]:oe)}:oe}):[eo];var j=-1;w=io(w,Le(vo));var ne=fe(h,function(oe,he,me){return{criteria:io(w,function(_e){return _e(oe)}),index:++j,value:oe}});return Nu(ne,function(oe,he){return Uf(oe,he,R)})},Wf=wo(function(h,w){if(h==null)return[];var R=w.length;return R>1&&Mn(h,w[0],w[1])?w=[]:R>2&&Mn(w[0],w[1],w[2])&&(w=[w[0]]),qu(h,hi(w,1),[])}),Yc=0,yf=function(h){var w=++Yc;return nu(h)+w},Xf=function(h,w,R){for(var j=-1,ne=h.length,oe=w.length,he={};++j<ne;){var me=j<oe?w[j]:void 0;R(he,h[j],me)}return he},Pu,hc=function(h,w){return Xf(h||[],w||[],Gt)};try{Pu={cloneDeep:ba,constant:Wi,defaults:Cn,each:lo,filter:Wu,find:Ps,flatten:su,forEach:Os,forIn:Yo,has:au,isUndefined:I,last:Hu,map:be,mapValues:Au,max:df,merge:Ku,min:$u,minBy:Vc,now:Qu,pick:Du,range:zf,reduce:Ue,sortBy:Wf,uniqueId:yf,values:Nf,zipObject:hc}}catch(h){}Pu||(Pu=window._);var _t=Pu,mf=Ju;function Ju(){var h={};h._next=h._prev=h,this._sentinel=h}function Vf(h){h._prev._next=h._next,h._next._prev=h._prev,delete h._next,delete h._prev}function jc(h,w){if(h!=="_next"&&h!=="_prev")return w}Ju.prototype.dequeue=function(){var h=this._sentinel,w=h._prev;if(w!==h)return Vf(w),w},Ju.prototype.enqueue=function(h){var w=this._sentinel;h._prev&&h._next&&Vf(h),h._next=w._next,w._next._prev=h,w._next=h,h._prev=w},Ju.prototype.toString=function(){for(var h=[],w=this._sentinel,R=w._prev;R!==w;)h.push(JSON.stringify(R,jc)),R=R._prev;return"["+h.join(", ")+"]"};var vc=In.Graph,Hc=function(h,w){if(h.nodeCount()<=1)return[];var R=function(ne,oe){var he=new vc,me=0,_e=0;_t.forEach(ne.nodes(),function(Xe){he.setNode(Xe,{v:Xe,in:0,out:0})}),_t.forEach(ne.edges(),function(Xe){var ht=he.edge(Xe.v,Xe.w)||0,Nt=oe(Xe),gr=ht+Nt;he.setEdge(Xe.v,Xe.w,gr),_e=Math.max(_e,he.node(Xe.v).out+=Nt),me=Math.max(me,he.node(Xe.w).in+=Nt)});var Be=_t.range(_e+me+3).map(function(){return new mf}),Ke=me+1;return _t.forEach(he.nodes(),function(Xe){Es(Be,Ke,he.node(Xe))}),{graph:he,buckets:Be,zeroIdx:Ke}}(h,w||gc),j=function(ne,oe,he){for(var me,_e=[],Be=oe[oe.length-1],Ke=oe[0];ne.nodeCount();){for(;me=Ke.dequeue();)ef(ne,oe,he,me);for(;me=Be.dequeue();)ef(ne,oe,he,me);if(ne.nodeCount()){for(var Xe=oe.length-2;Xe>0;--Xe)if(me=oe[Xe].dequeue()){_e=_e.concat(ef(ne,oe,he,me,!0));break}}}return _e}(R.graph,R.buckets,R.zeroIdx);return _t.flatten(_t.map(j,function(ne){return h.outEdges(ne.v,ne.w)}),!0)},gc=_t.constant(1);function ef(h,w,R,j,ne){var oe=ne?[]:void 0;return _t.forEach(h.inEdges(j.v),function(he){var me=h.edge(he),_e=h.node(he.v);ne&&oe.push({v:he.v,w:he.w}),_e.out-=me,Es(w,R,_e)}),_t.forEach(h.outEdges(j.v),function(he){var me=h.edge(he),_e=he.w,Be=h.node(_e);Be.in-=me,Es(w,R,Be)}),h.removeNode(j.v),oe}function Es(h,w,R){R.out?R.in?h[R.out-R.in+w].enqueue(R):h[h.length-1].enqueue(R):h[0].enqueue(R)}var pc={run:function(h){var w=h.graph().acyclicer==="greedy"?Hc(h,function(R){return function(j){return R.edge(j).weight}}(h)):function(R){var j=[],ne={},oe={};function he(me){_t.has(oe,me)||(oe[me]=!0,ne[me]=!0,_t.forEach(R.outEdges(me),function(_e){_t.has(ne,_e.w)?j.push(_e):he(_e.w)}),delete ne[me])}return _t.forEach(R.nodes(),he),j}(h);_t.forEach(w,function(R){var j=h.edge(R);h.removeEdge(R),j.forwardName=R.name,j.reversed=!0,h.setEdge(R.w,R.v,j,_t.uniqueId("rev"))})},undo:function(h){_t.forEach(h.edges(),function(w){var R=h.edge(w);if(R.reversed){h.removeEdge(w);var j=R.forwardName;delete R.reversed,delete R.forwardName,h.setEdge(w.w,w.v,R,j)}})}},Ef=In.Graph,Zi={addDummyNode:tf,simplify:function(h){var w=new Ef().setGraph(h.graph());return _t.forEach(h.nodes(),function(R){w.setNode(R,h.node(R))}),_t.forEach(h.edges(),function(R){var j=w.edge(R.v,R.w)||{weight:0,minlen:1},ne=h.edge(R);w.setEdge(R.v,R.w,{weight:j.weight+ne.weight,minlen:Math.max(j.minlen,ne.minlen)})}),w},asNonCompoundGraph:function(h){var w=new Ef({multigraph:h.isMultigraph()}).setGraph(h.graph());return _t.forEach(h.nodes(),function(R){h.children(R).length||w.setNode(R,h.node(R))}),_t.forEach(h.edges(),function(R){w.setEdge(R,h.edge(R))}),w},successorWeights:function(h){var w=_t.map(h.nodes(),function(R){var j={};return _t.forEach(h.outEdges(R),function(ne){j[ne.w]=(j[ne.w]||0)+h.edge(ne).weight}),j});return _t.zipObject(h.nodes(),w)},predecessorWeights:function(h){var w=_t.map(h.nodes(),function(R){var j={};return _t.forEach(h.inEdges(R),function(ne){j[ne.v]=(j[ne.v]||0)+h.edge(ne).weight}),j});return _t.zipObject(h.nodes(),w)},intersectRect:function(h,w){var R,j,ne=h.x,oe=h.y,he=w.x-ne,me=w.y-oe,_e=h.width/2,Be=h.height/2;if(!he&&!me)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(me)*_e>Math.abs(he)*Be?(me<0&&(Be=-Be),R=Be*he/me,j=Be):(he<0&&(_e=-_e),R=_e,j=_e*me/he),{x:ne+R,y:oe+j}},buildLayerMatrix:function(h){var w=_t.map(_t.range(to(h)+1),function(){return[]});return _t.forEach(h.nodes(),function(R){var j=h.node(R),ne=j.rank;_t.isUndefined(ne)||(w[ne][j.order]=R)}),w},normalizeRanks:function(h){var w=_t.min(_t.map(h.nodes(),function(R){return h.node(R).rank}));_t.forEach(h.nodes(),function(R){var j=h.node(R);_t.has(j,"rank")&&(j.rank-=w)})},removeEmptyRanks:function(h){var w=_t.min(_t.map(h.nodes(),function(oe){return h.node(oe).rank})),R=[];_t.forEach(h.nodes(),function(oe){var he=h.node(oe).rank-w;R[he]||(R[he]=[]),R[he].push(oe)});var j=0,ne=h.graph().nodeRankFactor;_t.forEach(R,function(oe,he){_t.isUndefined(oe)&&he%ne!=0?--j:j&&_t.forEach(oe,function(me){h.node(me).rank+=j})})},addBorderNode:function(h,w,R,j){var ne={width:0,height:0};return arguments.length>=4&&(ne.rank=R,ne.order=j),tf(h,"border",ne,w)},maxRank:to,partition:function(h,w){var R={lhs:[],rhs:[]};return _t.forEach(h,function(j){w(j)?R.lhs.push(j):R.rhs.push(j)}),R},time:function(h,w){var R=_t.now();try{return w()}finally{console.log(h+" time: "+(_t.now()-R)+"ms")}},notime:function(h,w){return w()}};function tf(h,w,R,j){var ne;do ne=_t.uniqueId(j);while(h.hasNode(ne));return R.dummy=w,h.setNode(ne,R),ne}function to(h){return _t.max(_t.map(h.nodes(),function(w){var R=h.node(w).rank;if(!_t.isUndefined(R))return R}))}var bf={run:function(h){h.graph().dummyChains=[],_t.forEach(h.edges(),function(w){(function(R,j){var ne,oe,he,me=j.v,_e=R.node(me).rank,Be=j.w,Ke=R.node(Be).rank,Xe=j.name,ht=R.edge(j),Nt=ht.labelRank;if(Ke!==_e+1){for(R.removeEdge(j),he=0,++_e;_e<Ke;++he,++_e)ht.points=[],oe={width:0,height:0,edgeLabel:ht,edgeObj:j,rank:_e},ne=Zi.addDummyNode(R,"edge",oe,"_d"),_e===Nt&&(oe.width=ht.width,oe.height=ht.height,oe.dummy="edge-label",oe.labelpos=ht.labelpos),R.setEdge(me,ne,{weight:ht.weight},Xe),he===0&&R.graph().dummyChains.push(ne),me=ne;R.setEdge(me,Be,{weight:ht.weight},Xe)}})(h,w)})},undo:function(h){_t.forEach(h.graph().dummyChains,function(w){var R,j=h.node(w),ne=j.edgeLabel;for(h.setEdge(j.edgeObj,ne);j.dummy;)R=h.successors(w)[0],h.removeNode(w),ne.points.push({x:j.x,y:j.y}),j.dummy==="edge-label"&&(ne.x=j.x,ne.y=j.y,ne.width=j.width,ne.height=j.height),w=R,j=h.node(w)})}},bs=function(h){var w={};_t.forEach(h.sources(),function R(j){var ne=h.node(j);if(_t.has(w,j))return ne.rank;w[j]=!0;var oe=_t.min(_t.map(h.outEdges(j),function(he){return R(he.w)-h.edge(he).minlen}));return oe!==Number.POSITIVE_INFINITY&&oe!=null||(oe=0),ne.rank=oe})},rf=function(h,w){return h.node(w.w).rank-h.node(w.v).rank-h.edge(w).minlen},cu=In.Graph,So=rf,ku=function(h){var w,R,j=new cu({directed:!1}),ne=h.nodes()[0],oe=h.nodeCount();for(j.setNode(ne,{});Ru(j,h)<oe;)w=lu(j,h),R=j.hasNode(w.v)?So(h,w):-So(h,w),rn(j,h,R);return j};function Ru(h,w){return _t.forEach(h.nodes(),function R(j){_t.forEach(w.nodeEdges(j),function(ne){var oe=ne.v,he=j===oe?ne.w:oe;h.hasNode(he)||So(w,ne)||(h.setNode(he,{}),h.setEdge(j,he,{}),R(he))})}),h.nodeCount()}function lu(h,w){return _t.minBy(w.edges(),function(R){if(h.hasNode(R.v)!==h.hasNode(R.w))return So(w,R)})}function rn(h,w,R){_t.forEach(h.nodes(),function(j){w.node(j).rank+=R})}var yc=rf,Yf=bs,Qo=In.alg.preorder,Bu=In.alg.postorder,mc=Zi.simplify,ks=ko;function ko(h){h=mc(h),Yf(h);var w,R=ku(h);for(jf(R),nf(R,h);w=xc(R);)du(R,h,w,wc(R,h,w))}function nf(h,w){var R=Bu(h,h.nodes());R=R.slice(0,R.length-1),_t.forEach(R,function(j){(function(ne,oe,he){var me=ne.node(he).parent;ne.edge(he,me).cutvalue=Ec(ne,oe,he)})(h,w,j)})}function Ec(h,w,R){var j=h.node(R).parent,ne=!0,oe=w.edge(R,j),he=0;return oe||(ne=!1,oe=w.edge(j,R)),he=oe.weight,_t.forEach(w.nodeEdges(R),function(me){var _e,Be,Ke=me.v===R,Xe=Ke?me.w:me.v;if(Xe!==j){var ht=Ke===ne,Nt=w.edge(me).weight;if(he+=ht?Nt:-Nt,_e=R,Be=Xe,h.hasEdge(_e,Be)){var gr=h.edge(R,Xe).cutvalue;he+=ht?-gr:gr}}}),he}function jf(h,w){arguments.length<2&&(w=h.nodes()[0]),bc(h,{},1,w)}function bc(h,w,R,j,ne){var oe=R,he=h.node(j);return w[j]=!0,_t.forEach(h.neighbors(j),function(me){_t.has(w,me)||(R=bc(h,w,R,me,j))}),he.low=oe,he.lim=R++,ne?he.parent=ne:delete he.parent,R}function xc(h){return _t.find(h.edges(),function(w){return h.edge(w).cutvalue<0})}function wc(h,w,R){var j=R.v,ne=R.w;w.hasEdge(j,ne)||(j=R.w,ne=R.v);var oe=h.node(j),he=h.node(ne),me=oe,_e=!1;oe.lim>he.lim&&(me=he,_e=!0);var Be=_t.filter(w.edges(),function(Ke){return _e===Zc(h,h.node(Ke.v),me)&&_e!==Zc(h,h.node(Ke.w),me)});return _t.minBy(Be,function(Ke){return yc(w,Ke)})}function du(h,w,R,j){var ne=R.v,oe=R.w;h.removeEdge(ne,oe),h.setEdge(j.v,j.w,{}),jf(h),nf(h,w),function(he,me){var _e=_t.find(he.nodes(),function(Ke){return!me.node(Ke).parent}),Be=Qo(he,_e);Be=Be.slice(1),_t.forEach(Be,function(Ke){var Xe=he.node(Ke).parent,ht=me.edge(Ke,Xe),Nt=!1;ht||(ht=me.edge(Xe,Ke),Nt=!0),me.node(Ke).rank=me.node(Xe).rank+(Nt?ht.minlen:-ht.minlen)})}(h,w)}function Zc(h,w,R){return R.low<=w.lim&&w.lim<=R.lim}ko.initLowLimValues=jf,ko.initCutValues=nf,ko.calcCutValue=Ec,ko.leaveEdge=xc,ko.enterEdge=wc,ko.exchangeEdges=du;var Sc=bs,Kc=function(h){switch(h.graph().ranker){case"network-simplex":xf(h);break;case"tight-tree":(function(w){Sc(w),ku(w)})(h);break;case"longest-path":_c(h);break;default:xf(h)}},_c=Sc;function xf(h){ks(h)}var Mc=function(h){var w=function(R){var j={},ne=0;function oe(he){var me=ne;_t.forEach(R.children(he),oe),j[he]={low:me,lim:ne++}}return _t.forEach(R.children(),oe),j}(h);_t.forEach(h.graph().dummyChains,function(R){for(var j=h.node(R),ne=j.edgeObj,oe=function(Xe,ht,Nt,gr){var Ut,Vt,Xt=[],Gr=[],Kr=Math.min(ht[Nt].low,ht[gr].low),Yr=Math.max(ht[Nt].lim,ht[gr].lim);Ut=Nt;do Ut=Xe.parent(Ut),Xt.push(Ut);while(Ut&&(ht[Ut].low>Kr||Yr>ht[Ut].lim));for(Vt=Ut,Ut=gr;(Ut=Xe.parent(Ut))!==Vt;)Gr.push(Ut);return{path:Xt.concat(Gr.reverse()),lca:Vt}}(h,w,ne.v,ne.w),he=oe.path,me=oe.lca,_e=0,Be=he[_e],Ke=!0;R!==ne.w;){if(j=h.node(R),Ke){for(;(Be=he[_e])!==me&&h.node(Be).maxRank<j.rank;)_e++;Be===me&&(Ke=!1)}if(!Ke){for(;_e<he.length-1&&h.node(Be=he[_e+1]).minRank<=j.rank;)_e++;Be=he[_e]}h.setParent(R,Be),R=h.successors(R)[0]}})},po={run:function(h){var w=Zi.addDummyNode(h,"root",{},"_root"),R=function(he){var me={};function _e(Be,Ke){var Xe=he.children(Be);Xe&&Xe.length&&_t.forEach(Xe,function(ht){_e(ht,Ke+1)}),me[Be]=Ke}return _t.forEach(he.children(),function(Be){_e(Be,1)}),me}(h),j=_t.max(_t.values(R))-1,ne=2*j+1;h.graph().nestingRoot=w,_t.forEach(h.edges(),function(he){h.edge(he).minlen*=ne});var oe=function(he){return _t.reduce(he.edges(),function(me,_e){return me+he.edge(_e).weight},0)}(h)+1;_t.forEach(h.children(),function(he){Hf(h,w,ne,oe,j,R,he)}),h.graph().nodeRankFactor=ne},cleanup:function(h){var w=h.graph();h.removeNode(w.nestingRoot),delete w.nestingRoot,_t.forEach(h.edges(),function(R){h.edge(R).nestingEdge&&h.removeEdge(R)})}};function Hf(h,w,R,j,ne,oe,he){var me=h.children(he);if(me.length){var _e=Zi.addBorderNode(h,"_bt"),Be=Zi.addBorderNode(h,"_bb"),Ke=h.node(he);h.setParent(_e,he),Ke.borderTop=_e,h.setParent(Be,he),Ke.borderBottom=Be,_t.forEach(me,function(Xe){Hf(h,w,R,j,ne,oe,Xe);var ht=h.node(Xe),Nt=ht.borderTop?ht.borderTop:Xe,gr=ht.borderBottom?ht.borderBottom:Xe,Ut=ht.borderTop?j:2*j,Vt=Nt!==gr?1:ne-oe[he]+1;h.setEdge(_e,Nt,{weight:Ut,minlen:Vt,nestingEdge:!0}),h.setEdge(gr,Be,{weight:Ut,minlen:Vt,nestingEdge:!0})}),h.parent(he)||h.setEdge(w,_e,{weight:0,minlen:ne+oe[he]})}else he!==w&&h.setEdge(w,he,{weight:0,minlen:R})}var Al=function(h){_t.forEach(h.children(),function w(R){var j=h.children(R),ne=h.node(R);if(j.length&&_t.forEach(j,w),_t.has(ne,"minRank")){ne.borderLeft=[],ne.borderRight=[];for(var oe=ne.minRank,he=ne.maxRank+1;oe<he;++oe)dl(h,"borderLeft","_bl",R,ne,oe),dl(h,"borderRight","_br",R,ne,oe)}})};function dl(h,w,R,j,ne,oe){var he={width:0,height:0,rank:oe,borderType:w},me=ne[w][oe-1],_e=Zi.addDummyNode(h,"border",he,R);ne[w][oe]=_e,h.setParent(_e,j),me&&h.setEdge(me,_e,{weight:1})}var hl={adjust:function(h){var w=h.graph().rankdir.toLowerCase();w!=="lr"&&w!=="rl"||vl(h)},undo:function(h){var w=h.graph().rankdir.toLowerCase();w!=="bt"&&w!=="rl"||function(R){_t.forEach(R.nodes(),function(j){$c(R.node(j))}),_t.forEach(R.edges(),function(j){var ne=R.edge(j);_t.forEach(ne.points,$c),_t.has(ne,"y")&&$c(ne)})}(h),w!=="lr"&&w!=="rl"||(function(R){_t.forEach(R.nodes(),function(j){Zf(R.node(j))}),_t.forEach(R.edges(),function(j){var ne=R.edge(j);_t.forEach(ne.points,Zf),_t.has(ne,"x")&&Zf(ne)})}(h),vl(h))}};function vl(h){_t.forEach(h.nodes(),function(w){gl(h.node(w))}),_t.forEach(h.edges(),function(w){gl(h.edge(w))})}function gl(h){var w=h.width;h.width=h.height,h.height=w}function $c(h){h.y=-h.y}function Zf(h){var w=h.x;h.x=h.y,h.y=w}var Cc=function(h){var w={},R=_t.filter(h.nodes(),function(me){return!h.children(me).length}),j=_t.max(_t.map(R,function(me){return h.node(me).rank})),ne=_t.map(_t.range(j+1),function(){return[]});function oe(me){if(!_t.has(w,me)){w[me]=!0;var _e=h.node(me);ne[_e.rank].push(me),_t.forEach(h.successors(me),oe)}}var he=_t.sortBy(R,function(me){return h.node(me).rank});return _t.forEach(he,oe),ne},Tc=function(h,w){for(var R=0,j=1;j<w.length;++j)R+=Ic(h,w[j-1],w[j]);return R};function Ic(h,w,R){for(var j=_t.zipObject(R,_t.map(R,function(Be,Ke){return Ke})),ne=_t.flatten(_t.map(w,function(Be){return _t.sortBy(_t.map(h.outEdges(Be),function(Ke){return{pos:j[Ke.w],weight:h.edge(Ke).weight}}),"pos")}),!0),oe=1;oe<R.length;)oe<<=1;var he=2*oe-1;oe-=1;var me=_t.map(new Array(he),function(){return 0}),_e=0;return _t.forEach(ne.forEach(function(Be){var Ke=Be.pos+oe;me[Ke]+=Be.weight;for(var Xe=0;Ke>0;)Ke%2&&(Xe+=me[Ke+1]),me[Ke=Ke-1>>1]+=Be.weight;_e+=Be.weight*Xe})),_e}var Qc=function(h,w){return _t.map(w,function(R){var j=h.inEdges(R);if(j.length){var ne=_t.reduce(j,function(oe,he){var me=h.edge(he),_e=h.node(he.v);return{sum:oe.sum+me.weight*_e.order,weight:oe.weight+me.weight}},{sum:0,weight:0});return{v:R,barycenter:ne.sum/ne.weight,weight:ne.weight}}return{v:R}})},Ac=function(h,w){var R={};return _t.forEach(h,function(j,ne){var oe=R[j.v]={indegree:0,in:[],out:[],vs:[j.v],i:ne};_t.isUndefined(j.barycenter)||(oe.barycenter=j.barycenter,oe.weight=j.weight)}),_t.forEach(w.edges(),function(j){var ne=R[j.v],oe=R[j.w];_t.isUndefined(ne)||_t.isUndefined(oe)||(oe.indegree++,ne.out.push(R[j.w]))}),function(j){var ne=[];function oe(_e){return function(Be){Be.merged||(_t.isUndefined(Be.barycenter)||_t.isUndefined(_e.barycenter)||Be.barycenter>=_e.barycenter)&&function(Ke,Xe){var ht=0,Nt=0;Ke.weight&&(ht+=Ke.barycenter*Ke.weight,Nt+=Ke.weight),Xe.weight&&(ht+=Xe.barycenter*Xe.weight,Nt+=Xe.weight),Ke.vs=Xe.vs.concat(Ke.vs),Ke.barycenter=ht/Nt,Ke.weight=Nt,Ke.i=Math.min(Xe.i,Ke.i),Xe.merged=!0}(_e,Be)}}function he(_e){return function(Be){Be.in.push(_e),--Be.indegree==0&&j.push(Be)}}for(;j.length;){var me=j.pop();ne.push(me),_t.forEach(me.in.reverse(),oe(me)),_t.forEach(me.out,he(me))}return _t.map(_t.filter(ne,function(_e){return!_e.merged}),function(_e){return _t.pick(_e,["vs","i","barycenter","weight"])})}(_t.filter(R,function(j){return!j.indegree}))},Oc=function(h,w){var R=Zi.partition(h,function(Xe){return _t.has(Xe,"barycenter")}),j=R.lhs,ne=_t.sortBy(R.rhs,function(Xe){return-Xe.i}),oe=[],he=0,me=0,_e=0;j.sort((Be=!!w,function(Xe,ht){return Xe.barycenter<ht.barycenter?-1:Xe.barycenter>ht.barycenter?1:Be?ht.i-Xe.i:Xe.i-ht.i})),_e=ki(oe,ne,_e),_t.forEach(j,function(Xe){_e+=Xe.vs.length,oe.push(Xe.vs),he+=Xe.barycenter*Xe.weight,me+=Xe.weight,_e=ki(oe,ne,_e)});var Be,Ke={vs:_t.flatten(oe,!0)};return me&&(Ke.barycenter=he/me,Ke.weight=me),Ke};function ki(h,w,R){for(var j;w.length&&(j=_t.last(w)).i<=R;)w.pop(),h.push(j.vs),R++;return R}var Lc=function h(w,R,j,ne){var oe=w.children(R),he=w.node(R),me=he?he.borderLeft:void 0,_e=he?he.borderRight:void 0,Be={};me&&(oe=_t.filter(oe,function(Ut){return Ut!==me&&Ut!==_e}));var Ke=Qc(w,oe);_t.forEach(Ke,function(Ut){if(w.children(Ut.v).length){var Vt=h(w,Ut.v,j,ne);Be[Ut.v]=Vt,_t.has(Vt,"barycenter")&&(Xt=Ut,Gr=Vt,_t.isUndefined(Xt.barycenter)?(Xt.barycenter=Gr.barycenter,Xt.weight=Gr.weight):(Xt.barycenter=(Xt.barycenter*Xt.weight+Gr.barycenter*Gr.weight)/(Xt.weight+Gr.weight),Xt.weight+=Gr.weight))}var Xt,Gr});var Xe=Ac(Ke,j);(function(Ut,Vt){_t.forEach(Ut,function(Xt){Xt.vs=_t.flatten(Xt.vs.map(function(Gr){return Vt[Gr]?Vt[Gr].vs:Gr}),!0)})})(Xe,Be);var ht=Oc(Xe,ne);if(me&&(ht.vs=_t.flatten([me,ht.vs,_e],!0),w.predecessors(me).length)){var Nt=w.node(w.predecessors(me)[0]),gr=w.node(w.predecessors(_e)[0]);_t.has(ht,"barycenter")||(ht.barycenter=0,ht.weight=0),ht.barycenter=(ht.barycenter*ht.weight+Nt.order+gr.order)/(ht.weight+2),ht.weight+=2}return ht},Kf=In.Graph,af=function(h,w,R){var j=function(oe){for(var he;oe.hasNode(he=_t.uniqueId("_root")););return he}(h),ne=new Kf({compound:!0}).setGraph({root:j}).setDefaultNodeLabel(function(oe){return h.node(oe)});return _t.forEach(h.nodes(),function(oe){var he=h.node(oe),me=h.parent(oe);(he.rank===w||he.minRank<=w&&w<=he.maxRank)&&(ne.setNode(oe),ne.setParent(oe,me||j),_t.forEach(h[R](oe),function(_e){var Be=_e.v===oe?_e.w:_e.v,Ke=ne.edge(Be,oe),Xe=_t.isUndefined(Ke)?0:Ke.weight;ne.setEdge(Be,oe,{weight:h.edge(_e).weight+Xe})}),_t.has(he,"minRank")&&ne.setNode(oe,{borderLeft:he.borderLeft[w],borderRight:he.borderRight[w]}))}),ne},$f=function(h,w,R){var j,ne={};_t.forEach(R,function(oe){for(var he,me,_e=h.parent(oe);_e;){if((he=h.parent(_e))?(me=ne[he],ne[he]=_e):(me=j,j=_e),me&&me!==_e)return void w.setEdge(me,_e);_e=he}})},wf=In.Graph,Sf=function(h){var w=Zi.maxRank(h),R=Fu(h,_t.range(1,w+1),"inEdges"),j=Fu(h,_t.range(w-1,-1,-1),"outEdges"),ne=Cc(h);ss(h,ne);for(var oe,he=Number.POSITIVE_INFINITY,me=0,_e=0;_e<4;++me,++_e){xa(me%2?R:j,me%4>=2),ne=Zi.buildLayerMatrix(h);var Be=Tc(h,ne);Be<he&&(_e=0,oe=_t.cloneDeep(ne),he=Be)}ss(h,oe)};function Fu(h,w,R){return _t.map(w,function(j){return af(h,j,R)})}function xa(h,w){var R=new wf;_t.forEach(h,function(j){var ne=j.graph().root,oe=Lc(j,ne,R,w);_t.forEach(oe.vs,function(he,me){j.node(he).order=me}),$f(j,R,oe.vs)})}function ss(h,w){_t.forEach(w,function(R){_t.forEach(R,function(j,ne){h.node(j).order=ne})})}var _f=In.Graph,Mf=function(h){var w,R=Zi.buildLayerMatrix(h),j=_t.merge(Gu(h,R),qc(h,R)),ne={};_t.forEach(["u","d"],function(he){w=he==="u"?R:_t.values(R).reverse(),_t.forEach(["l","r"],function(me){me==="r"&&(w=_t.map(w,function(Xe){return _t.values(Xe).reverse()}));var _e=(he==="u"?h.predecessors:h.successors).bind(h),Be=pl(h,w,j,_e),Ke=qf(h,w,Be.root,Be.align,me==="r");me==="r"&&(Ke=_t.mapValues(Ke,function(Xe){return-Xe})),ne[he+me]=Ke})});var oe=Zs(h,ne);return Jc(ne,oe),el(ne,h.graph().align)};function Gu(h,w){var R={};return _t.reduce(w,function(j,ne){var oe=0,he=0,me=j.length,_e=_t.last(ne);return _t.forEach(ne,function(Be,Ke){var Xe=function(Nt,gr){if(Nt.node(gr).dummy)return _t.find(Nt.predecessors(gr),function(Ut){return Nt.node(Ut).dummy})}(h,Be),ht=Xe?h.node(Xe).order:me;(Xe||Be===_e)&&(_t.forEach(ne.slice(he,Ke+1),function(Nt){_t.forEach(h.predecessors(Nt),function(gr){var Ut=h.node(gr),Vt=Ut.order;!(Vt<oe||ht<Vt)||Ut.dummy&&h.node(Nt).dummy||Qf(R,gr,Nt)})}),he=Ke+1,oe=ht)}),ne}),R}function qc(h,w){var R={};function j(ne,oe,he,me,_e){var Be;_t.forEach(_t.range(oe,he),function(Ke){Be=ne[Ke],h.node(Be).dummy&&_t.forEach(h.predecessors(Be),function(Xe){var ht=h.node(Xe);ht.dummy&&(ht.order<me||ht.order>_e)&&Qf(R,Xe,Be)})})}return _t.reduce(w,function(ne,oe){var he,me=-1,_e=0;return _t.forEach(oe,function(Be,Ke){if(h.node(Be).dummy==="border"){var Xe=h.predecessors(Be);Xe.length&&(he=h.node(Xe[0]).order,j(oe,_e,Ke,me,he),_e=Ke,me=he)}j(oe,_e,oe.length,he,ne.length)}),oe}),R}function Qf(h,w,R){if(w>R){var j=w;w=R,R=j}var ne=h[w];ne||(h[w]=ne={}),ne[R]=!0}function Ta(h,w,R){if(w>R){var j=w;w=R,R=j}return _t.has(h[w],R)}function pl(h,w,R,j){var ne={},oe={},he={};return _t.forEach(w,function(me){_t.forEach(me,function(_e,Be){ne[_e]=_e,oe[_e]=_e,he[_e]=Be})}),_t.forEach(w,function(me){var _e=-1;_t.forEach(me,function(Be){var Ke=j(Be);if(Ke.length)for(var Xe=((Ke=_t.sortBy(Ke,function(Ut){return he[Ut]})).length-1)/2,ht=Math.floor(Xe),Nt=Math.ceil(Xe);ht<=Nt;++ht){var gr=Ke[ht];oe[Be]===Be&&_e<he[gr]&&!Ta(R,Be,gr)&&(oe[gr]=Be,oe[Be]=ne[Be]=ne[gr],_e=he[gr])}})}),{root:ne,align:oe}}function qf(h,w,R,j,ne){var oe={},he=function(Be,Ke,Xe,ht){var Nt=new _f,gr=Be.graph(),Ut=function(Vt,Xt,Gr){return function(Kr,Yr,_n){var bn,Pn=Kr.node(Yr),Qn=Kr.node(_n),zn=0;if(zn+=Pn.width/2,_t.has(Pn,"labelpos"))switch(Pn.labelpos.toLowerCase()){case"l":bn=-Pn.width/2;break;case"r":bn=Pn.width/2}if(bn&&(zn+=Gr?bn:-bn),bn=0,zn+=(Pn.dummy?Xt:Vt)/2,zn+=(Qn.dummy?Xt:Vt)/2,zn+=Qn.width/2,_t.has(Qn,"labelpos"))switch(Qn.labelpos.toLowerCase()){case"l":bn=Qn.width/2;break;case"r":bn=-Qn.width/2}return bn&&(zn+=Gr?bn:-bn),bn=0,zn}}(gr.nodesep,gr.edgesep,ht);return _t.forEach(Ke,function(Vt){var Xt;_t.forEach(Vt,function(Gr){var Kr=Xe[Gr];if(Nt.setNode(Kr),Xt){var Yr=Xe[Xt],_n=Nt.edge(Yr,Kr);Nt.setEdge(Yr,Kr,Math.max(Ut(Be,Gr,Xt),_n||0))}Xt=Gr})}),Nt}(h,w,R,ne),me=ne?"borderLeft":"borderRight";function _e(Be,Ke){for(var Xe=he.nodes(),ht=Xe.pop(),Nt={};ht;)Nt[ht]?Be(ht):(Nt[ht]=!0,Xe.push(ht),Xe=Xe.concat(Ke(ht))),ht=Xe.pop()}return _e(function(Be){oe[Be]=he.inEdges(Be).reduce(function(Ke,Xe){return Math.max(Ke,oe[Xe.v]+he.edge(Xe))},0)},he.predecessors.bind(he)),_e(function(Be){var Ke=he.outEdges(Be).reduce(function(ht,Nt){return Math.min(ht,oe[Nt.w]-he.edge(Nt))},Number.POSITIVE_INFINITY),Xe=h.node(Be);Ke!==Number.POSITIVE_INFINITY&&Xe.borderType!==me&&(oe[Be]=Math.max(oe[Be],Ke))},he.successors.bind(he)),_t.forEach(j,function(Be){oe[Be]=oe[R[Be]]}),oe}function Zs(h,w){return _t.minBy(_t.values(w),function(R){var j=Number.NEGATIVE_INFINITY,ne=Number.POSITIVE_INFINITY;return _t.forIn(R,function(oe,he){var me=function(_e,Be){return _e.node(Be).width}(h,he)/2;j=Math.max(oe+me,j),ne=Math.min(oe-me,ne)}),j-ne})}function Jc(h,w){var R=_t.values(w),j=_t.min(R),ne=_t.max(R);_t.forEach(["u","d"],function(oe){_t.forEach(["l","r"],function(he){var me,_e=oe+he,Be=h[_e];if(Be!==w){var Ke=_t.values(Be);(me=he==="l"?j-_t.min(Ke):ne-_t.max(Ke))&&(h[_e]=_t.mapValues(Be,function(Xe){return Xe+me}))}})})}function el(h,w){return _t.mapValues(h.ul,function(R,j){if(w)return h[w.toLowerCase()][j];var ne=_t.sortBy(_t.map(h,j));return(ne[1]+ne[2])/2})}var tl=Mf,yl=function(h){(function(w){var R=Zi.buildLayerMatrix(w),j=w.graph().ranksep,ne=0;_t.forEach(R,function(oe){var he=_t.max(_t.map(oe,function(me){return w.node(me).height}));_t.forEach(oe,function(me){w.node(me).y=ne+he/2}),ne+=he+j})})(h=Zi.asNonCompoundGraph(h)),_t.forEach(tl(h),function(w,R){h.node(R).x=w})},rl=Zi.normalizeRanks,ml=Zi.removeEmptyRanks,yo=Zi,Dc=In.Graph,zu=function(h,w){var R=w&&w.debugTiming?yo.time:yo.notime;R("layout",function(){var j=R("  buildLayoutGraph",function(){return function(ne){var oe=new Dc({multigraph:!0,compound:!0}),he=Ks(ne.graph());return oe.setGraph(_t.merge({},Rs,_o(he,hu),_t.pick(he,Nc))),_t.forEach(ne.nodes(),function(me){var _e=Ks(ne.node(me));oe.setNode(me,_t.defaults(_o(_e,Jf),nl)),oe.setParent(me,ne.parent(me))}),_t.forEach(ne.edges(),function(me){var _e=Ks(ne.edge(me));oe.setEdge(me,_t.merge({},vu,_o(_e,Ro),_t.pick(_e,Fi)))}),oe}(h)});R("  runLayout",function(){(function(ne,oe){oe("    makeSpaceForEdgeLabels",function(){(function(he){var me=he.graph();me.ranksep/=2,_t.forEach(he.edges(),function(_e){var Be=he.edge(_e);Be.minlen*=2,Be.labelpos.toLowerCase()!=="c"&&(me.rankdir==="TB"||me.rankdir==="BT"?Be.width+=Be.labeloffset:Be.height+=Be.labeloffset)})})(ne)}),oe("    removeSelfEdges",function(){(function(he){_t.forEach(he.edges(),function(me){if(me.v===me.w){var _e=he.node(me.v);_e.selfEdges||(_e.selfEdges=[]),_e.selfEdges.push({e:me,label:he.edge(me)}),he.removeEdge(me)}})})(ne)}),oe("    acyclic",function(){pc.run(ne)}),oe("    nestingGraph.run",function(){po.run(ne)}),oe("    rank",function(){Kc(yo.asNonCompoundGraph(ne))}),oe("    injectEdgeLabelProxies",function(){(function(he){_t.forEach(he.edges(),function(me){var _e=he.edge(me);if(_e.width&&_e.height){var Be=he.node(me.v),Ke={rank:(he.node(me.w).rank-Be.rank)/2+Be.rank,e:me};yo.addDummyNode(he,"edge-proxy",Ke,"_ep")}})})(ne)}),oe("    removeEmptyRanks",function(){ml(ne)}),oe("    nestingGraph.cleanup",function(){po.cleanup(ne)}),oe("    normalizeRanks",function(){rl(ne)}),oe("    assignRankMinMax",function(){(function(he){var me=0;_t.forEach(he.nodes(),function(_e){var Be=he.node(_e);Be.borderTop&&(Be.minRank=he.node(Be.borderTop).rank,Be.maxRank=he.node(Be.borderBottom).rank,me=_t.max(me,Be.maxRank))}),he.graph().maxRank=me})(ne)}),oe("    removeEdgeLabelProxies",function(){(function(he){_t.forEach(he.nodes(),function(me){var _e=he.node(me);_e.dummy==="edge-proxy"&&(he.edge(_e.e).labelRank=_e.rank,he.removeNode(me))})})(ne)}),oe("    normalize.run",function(){bf.run(ne)}),oe("    parentDummyChains",function(){Mc(ne)}),oe("    addBorderSegments",function(){Al(ne)}),oe("    order",function(){Sf(ne)}),oe("    insertSelfEdges",function(){(function(he){var me=yo.buildLayerMatrix(he);_t.forEach(me,function(_e){var Be=0;_t.forEach(_e,function(Ke,Xe){var ht=he.node(Ke);ht.order=Xe+Be,_t.forEach(ht.selfEdges,function(Nt){yo.addDummyNode(he,"selfedge",{width:Nt.label.width,height:Nt.label.height,rank:ht.rank,order:Xe+ ++Be,e:Nt.e,label:Nt.label},"_se")}),delete ht.selfEdges})})})(ne)}),oe("    adjustCoordinateSystem",function(){hl.adjust(ne)}),oe("    position",function(){yl(ne)}),oe("    positionSelfEdges",function(){(function(he){_t.forEach(he.nodes(),function(me){var _e=he.node(me);if(_e.dummy==="selfedge"){var Be=he.node(_e.e.v),Ke=Be.x+Be.width/2,Xe=Be.y,ht=_e.x-Ke,Nt=Be.height/2;he.setEdge(_e.e,_e.label),he.removeNode(me),_e.label.points=[{x:Ke+2*ht/3,y:Xe-Nt},{x:Ke+5*ht/6,y:Xe-Nt},{x:Ke+ht,y:Xe},{x:Ke+5*ht/6,y:Xe+Nt},{x:Ke+2*ht/3,y:Xe+Nt}],_e.label.x=_e.x,_e.label.y=_e.y}})})(ne)}),oe("    removeBorderNodes",function(){(function(he){_t.forEach(he.nodes(),function(me){if(he.children(me).length){var _e=he.node(me),Be=he.node(_e.borderTop),Ke=he.node(_e.borderBottom),Xe=he.node(_t.last(_e.borderLeft)),ht=he.node(_t.last(_e.borderRight));_e.width=Math.abs(ht.x-Xe.x),_e.height=Math.abs(Ke.y-Be.y),_e.x=Xe.x+_e.width/2,_e.y=Be.y+_e.height/2}}),_t.forEach(he.nodes(),function(me){he.node(me).dummy==="border"&&he.removeNode(me)})})(ne)}),oe("    normalize.undo",function(){bf.undo(ne)}),oe("    fixupEdgeLabelCoords",function(){(function(he){_t.forEach(he.edges(),function(me){var _e=he.edge(me);if(_t.has(_e,"x"))switch(_e.labelpos!=="l"&&_e.labelpos!=="r"||(_e.width-=_e.labeloffset),_e.labelpos){case"l":_e.x-=_e.width/2+_e.labeloffset;break;case"r":_e.x+=_e.width/2+_e.labeloffset}})})(ne)}),oe("    undoCoordinateSystem",function(){hl.undo(ne)}),oe("    translateGraph",function(){(function(he){var me=Number.POSITIVE_INFINITY,_e=0,Be=Number.POSITIVE_INFINITY,Ke=0,Xe=he.graph(),ht=Xe.marginx||0,Nt=Xe.marginy||0;function gr(Ut){var Vt=Ut.x,Xt=Ut.y,Gr=Ut.width,Kr=Ut.height;me=Math.min(me,Vt-Gr/2),_e=Math.max(_e,Vt+Gr/2),Be=Math.min(Be,Xt-Kr/2),Ke=Math.max(Ke,Xt+Kr/2)}_t.forEach(he.nodes(),function(Ut){gr(he.node(Ut))}),_t.forEach(he.edges(),function(Ut){var Vt=he.edge(Ut);_t.has(Vt,"x")&&gr(Vt)}),me-=ht,Be-=Nt,_t.forEach(he.nodes(),function(Ut){var Vt=he.node(Ut);Vt.x-=me,Vt.y-=Be}),_t.forEach(he.edges(),function(Ut){var Vt=he.edge(Ut);_t.forEach(Vt.points,function(Xt){Xt.x-=me,Xt.y-=Be}),_t.has(Vt,"x")&&(Vt.x-=me),_t.has(Vt,"y")&&(Vt.y-=Be)}),Xe.width=_e-me+ht,Xe.height=Ke-Be+Nt})(ne)}),oe("    assignNodeIntersects",function(){(function(he){_t.forEach(he.edges(),function(me){var _e,Be,Ke=he.edge(me),Xe=he.node(me.v),ht=he.node(me.w);Ke.points?(_e=Ke.points[0],Be=Ke.points[Ke.points.length-1]):(Ke.points=[],_e=ht,Be=Xe),Ke.points.unshift(yo.intersectRect(Xe,_e)),Ke.points.push(yo.intersectRect(ht,Be))})})(ne)}),oe("    reversePoints",function(){(function(he){_t.forEach(he.edges(),function(me){var _e=he.edge(me);_e.reversed&&_e.points.reverse()})})(ne)}),oe("    acyclic.undo",function(){pc.undo(ne)})})(j,R)}),R("  updateInputGraph",function(){(function(ne,oe){_t.forEach(ne.nodes(),function(he){var me=ne.node(he),_e=oe.node(he);me&&(me.x=_e.x,me.y=_e.y,oe.children(he).length&&(me.width=_e.width,me.height=_e.height))}),_t.forEach(ne.edges(),function(he){var me=ne.edge(he),_e=oe.edge(he);me.points=_e.points,_t.has(_e,"x")&&(me.x=_e.x,me.y=_e.y)}),ne.graph().width=oe.graph().width,ne.graph().height=oe.graph().height})(h,j)})})},hu=["nodesep","edgesep","ranksep","marginx","marginy"],Rs={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Nc=["acyclicer","ranker","rankdir","align"],Jf=["width","height"],nl={width:0,height:0},Ro=["minlen","weight","width","height","labeloffset"],vu={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Fi=["labelpos"];function _o(h,w){return _t.mapValues(_t.pick(h,w),Number)}function Ks(h){var w={};return _t.forEach(h,function(R,j){w[j.toLowerCase()]=R}),w}var Pc=In.Graph,kc={graphlib:In,layout:zu,debug:{debugOrdering:function(h){var w=Zi.buildLayerMatrix(h),R=new Pc({compound:!0,multigraph:!0}).setGraph({});return _t.forEach(h.nodes(),function(j){R.setNode(j,{label:j}),R.setParent(j,"layer"+h.node(j).rank)}),_t.forEach(h.edges(),function(j){R.setEdge(j.v,j.w,{},j.name)}),_t.forEach(w,function(j,ne){var oe="layer"+ne;R.setNode(oe,{rank:"same"}),_t.reduce(j,function(he,me){return R.setEdge(he,me,{style:"invis"}),me})}),R}},util:{time:Zi.time,notime:Zi.notime},version:"0.8.5"},al=kc.graphlib,ec=kc.layout;class il{constructor(w){this.cardinality=1,this.include=x.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=O.NODE,this.name=w.name,this.attr=w.attr||{},this.inputs=w.inputs,this.path=w.path||[],this.width=w.width,this.height=w.height}}class El{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function bl(h){const w=new El;return h.nodes.map(R=>new il(R)).forEach(R=>{w.nodes[R.name]=R,R.inputs.forEach(j=>{(function(ne,oe,he){he.name!==oe.name&&ne.edges.push(Object.assign(Object.assign({},he.attr),{v:he.name,w:oe.name}))})(w,R,j)})}),w}class xl{constructor(w,R={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=x.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=O.META,this.path=[],this.name=w,this.metaGraph=tc(w,E.META,R)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(w=>this.metaGraph.node(w))}leaves(){let w,R=[],j=[this];for(;j.length;){let ne=j.shift();ne.isGroupNode?(w=ne.metaGraph,w.nodes().forEach(oe=>j.push(w.node(oe)))):R.push(ne.name)}return R}}class Rc{constructor(w,R){this.v=w,this.w=R,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(w,R){this.baseEdgeList.push(w)}}function ol(h,w={}){return new xl(h,w)}function Bc(h,w){return new Rc(h,w)}function tc(h,w,R){const j=R||{},ne=new al.Graph(j);return ne.setGraph({name:h,rankdir:j.rankdir,type:w,align:j.align}),ne}class Fc{constructor(w={}){this.graphOptions=w,this.index={},this.graphOptions.compound=!0,this.root=ol(A,this.graphOptions),this.index[A]=this.root}getNodeMap(){return this.index}node(w){return this.index[w]}setNode(w,R){this.index[w]=R}getBridgeGraph(w){const R=this.index[w];if(!R)throw Error("Could not find node in hierarchy: "+w);if(!("metaGraph"in R))return null;const j=R;if(j.bridgeGraph)return j.bridgeGraph;const ne=tc(N,E.BRIDGE,this.graphOptions);if(j.bridgeGraph=ne,!R.parentNode||!("metaGraph"in R.parentNode))return ne;const oe=R.parentNode;return[oe.metaGraph,this.getBridgeGraph(oe.name)].forEach(he=>{he.edges().filter(me=>me.v===w||me.w===w).forEach(me=>{const _e=me.w===w;he.edge(me).baseEdgeList.forEach(Be=>{const[Ke,Xe]=_e?[Be.w,me.v]:[Be.v,me.w],ht=this.getChildName(w,Ke),Nt={v:_e?Xe:ht,w:_e?ht:Xe};let gr=ne.edge(Nt);gr||(gr=Bc(Nt.v,Nt.w),gr.inbound=_e,ne.setEdge(Nt.v,Nt.w,gr)),gr.addBaseEdge(Be,this)})})}),ne}getChildName(w,R){let j=this.index[R];for(;j;){if(j.parentNode&&j.parentNode.name===w)return j.name;j=j.parentNode}throw Error("Could not find immediate child for descendant: "+R)}getPredecessors(w){const R=this.index[w];if(!R)throw Error("Could not find node with name: "+w);return this.getOneWayEdges(R,!0)}getSuccessors(w){const R=this.index[w];if(!R)throw Error("Could not find node with name: "+w);return this.getOneWayEdges(R,!1)}getOneWayEdges(w,R){const j=[];if(!w.parentNode||!w.parentNode.isGroupNode)return j;const ne=w.parentNode,oe=ne.metaGraph,he=this.getBridgeGraph(ne.name);return pi(oe,w,R,j),pi(he,w,R,j),j}}function sl(h,w){const{rankDirection:R,align:j}=w,ne=new Fc({rankdir:R,align:j});return function(oe,he){Object.keys(he.nodes).forEach(me=>{const _e=he.nodes[me],Be=_e.path;let Ke=oe.root;Ke.depth=Math.max(Be.length,Ke.depth);for(let Xe=0;Xe<Be.length&&(Ke.depth=Math.max(Ke.depth,Be.length-Xe),Ke.cardinality+=_e.cardinality,Xe!==Be.length-1);Xe++){const ht=Be[Xe];let Nt=oe.node(ht);Nt||(Nt=ol(ht,oe.graphOptions),Nt.path=_e.path.slice(0,Xe+1),Nt.parentNode=Ke,oe.setNode(ht,Nt),Ke.metaGraph.setNode(ht,Nt)),Ke=Nt}oe.setNode(_e.name,_e),_e.parentNode=Ke,Ke.metaGraph.setNode(_e.name,_e)})}(ne,h),function(oe,he){const me=oe.getNodeMap();let _e=[],Be=[];const Ke=(Xe,ht)=>{let Nt=0;for(;Xe;)ht[Nt++]=Xe.name,Xe=Xe.parentNode;return Nt-1};he.edges.forEach(Xe=>{_e=[],Be=[];let ht=Ke(he.nodes[Xe.v],_e),Nt=Ke(he.nodes[Xe.w],Be);for(;_e[ht]===Be[Nt];)if(ht--,Nt--,ht<0||Nt<0)throw Error("No difference found between ancestor paths.");const gr=me[_e[ht+1]],Ut=_e[ht],Vt=Be[Nt];let Xt=gr.metaGraph.edge(Ut,Vt);Xt||(Xt=Bc(Ut,Vt),gr.metaGraph.setEdge(Ut,Vt,Xt)),Xt.addBaseEdge(Xe,oe)})}(ne,h),ne}function pi(h,w,R,j){(R?h.inEdges(w.name):h.outEdges(w.name)).forEach(ne=>{const oe=h.edge(ne);j.push(oe)})}class ul{constructor(w){this.hierarchy=w,this.index={},this.hasSubHierarchy={},this.root=new qe(this.hierarchy.root,this.hierarchy.graphOptions),this.index[w.root.name]=this.root,this.buildSubHierarchy(w.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(w){if(w in this.hasSubHierarchy)return;this.hasSubHierarchy[w]=!0;const R=this.index[w];if(R.node.type!==O.META)return;const j=R,ne=j.node.metaGraph,oe=j.coreGraph;ne.nodes().forEach(Ke=>{const Xe=this.getOrCreateRenderNodeByName(Ke);oe.setNode(Ke,Xe)}),ne.edges().forEach(Ke=>{const Xe=ne.edge(Ke),ht=new pe(Xe);oe.setEdge(Ke.v,Ke.w,ht)});const he=j.node.parentNode;if(!he)return;const me=this.getRenderNodeByName(he.name),_e=(Ke,...Xe)=>Xe.concat([Ke?"IN":"OUT"]).join("~~"),Be=this.hierarchy.getBridgeGraph(w);Be.edges().forEach(Ke=>{const Xe=Be.edge(Ke),ht=!!ne.node(Ke.w),[Nt,gr]=ht?[Ke.w,Ke.v]:[Ke.v,Ke.w],Ut=_n=>{const bn=ht?{v:_n,w}:{v:w,w:_n};return me.coreGraph.edge(bn)};let Vt=Ut(gr);Vt||(Vt=Ut(_e(ht,gr,he.name)));const Xt=_e(ht,w),Gr=_e(ht,gr,w);let Kr=oe.node(Gr);if(!Kr){let _n=oe.node(Xt);if(!_n){const Pn={name:Xt,type:O.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:x.UNSPECIFIED,inbound:ht,attr:{}};_n=new rc(Pn),this.index[Xt]=_n,oe.setNode(Xt,_n)}const bn={name:Gr,type:O.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:x.UNSPECIFIED,inbound:ht,attr:{}};Kr=new rc(bn),this.index[Gr]=Kr,oe.setNode(Gr,Kr),oe.setParent(Gr,Xt),_n.node.cardinality++}const Yr=new pe(Xe);Yr.adjoiningMetaEdge=Vt,ht?oe.setEdge(Gr,Nt,Yr):oe.setEdge(Nt,Gr,Yr)})}getOrCreateRenderNodeByName(w){if(!w)return null;if(w in this.index)return this.index[w];const R=this.getNodeByName(w);return R?(this.index[w]=R.isGroupNode?new qe(R,this.hierarchy.graphOptions):new rc(R),this.index[w]):null}getRenderNodeByName(w){return this.index[w]}getNodeByName(w){return this.hierarchy.node(w)}}class rc{constructor(w){this.node=w,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=w.width||0,this.height=w.height||0,this.displayName=w.name,this.attr=w.attr}}class pe{constructor(w){this.metaEdge=w,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class qe extends rc{constructor(w,R){super(w);const j=w.metaGraph.graph();R.compound=!0,this.coreGraph=tc(j.name,E.CORE,R)}}function pt(h,w){h.node.isGroupNode&&function(R,j){const ne=Y(j);R.coreGraph.nodes().map(oe=>R.coreGraph.node(oe)).forEach(oe=>{var he,me,_e,Be,Ke,Xe;const{height:ht,width:Nt}=oe;switch(oe.node.type){case O.NODE:Object.assign(oe,ne.nodeSize.node),oe.height=ht||ne.nodeSize.node.height,oe.width=Nt||ne.nodeSize.node.width;break;case O.BRIDGE:Object.assign(oe,ne.nodeSize.bridge);break;case O.META:oe.expanded?pt(oe,j):(Object.assign(oe,ne.nodeSize.meta),oe.height=ne.nodeSize.meta.height,oe.width=ne.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+oe.node.type)}if(!oe.expanded){const gr=oe.attr;(function(Ut,Vt=!1){if(Ut.coreBox.width=Ut.width,Ut.coreBox.height=Ut.height,!Vt){const Xt=`${Ut.displayName}`.length,Gr=3;Ut.width=Math.max(Ut.coreBox.width,Xt*Gr)}})(oe,j&&(oe.node.type===0&&!!(!((me=(he=j==null?void 0:j.nodeSize)===null||he===void 0?void 0:he.meta)===null||me===void 0)&&me.width)||oe.node.type===1&&(!!(!((Be=(_e=j==null?void 0:j.nodeSize)===null||_e===void 0?void 0:_e.node)===null||Be===void 0)&&Be.width)||!!gr.width)||oe.node.type===2&&!!(!((Xe=(Ke=j==null?void 0:j.nodeSize)===null||Ke===void 0?void 0:Ke.bridge)===null||Xe===void 0)&&Xe.width)))}})}(h,w),h.node.type===O.META&&function(R,j){const ne=Y(j),oe=ne.subScene.meta;Object.assign(R,oe);const{nodeSep:he,rankSep:me,edgeSep:_e,align:Be}=ne.graph.meta,Ke={nodesep:he,ranksep:me,edgesep:_e,align:Be};Object.assign(R.coreBox,function(Nt,gr){const{ranksep:Ut,nodesep:Vt,edgesep:Xt,align:Gr}=gr;Object.assign(Nt.graph(),{ranksep:Ut,nodesep:Vt,edgesep:Xt,align:Gr});const Kr=[];if(Nt.nodes().forEach(Qn=>{Nt.node(Qn).node.type!==O.BRIDGE&&Kr.push(Qn)}),!Kr.length)return{width:0,height:0};ec(Nt);let Yr=1/0,_n=1/0,bn=-1/0,Pn=-1/0;return Kr.forEach(Qn=>{const zn=Nt.node(Qn),ei=.5*zn.width,ea=zn.x-ei,Li=zn.x+ei;Yr=ea<Yr?ea:Yr,bn=Li>bn?Li:bn;const ti=.5*zn.height,_a=zn.y-ti,bi=zn.y+ti;_n=_a<_n?_a:_n,Pn=bi>Pn?bi:Pn}),Nt.edges().forEach(Qn=>{const zn=Nt.edge(Qn),ei=Nt.node(zn.metaEdge.v),ea=Nt.node(zn.metaEdge.w);if(zn.points.length===3&&function(_a){let bi=rr(_a[0],_a[1]);for(let Di=1;Di<_a.length-1;Di++){const Ki=rr(_a[Di],_a[Di+1]);if(Math.abs(Ki-bi)>1)return!1;bi=Ki}return!0}(zn.points)){if(ei!=null){const _a=ei.expanded?ei.x:Mr(ei);zn.points[0].x=_a}if(ea!=null){const _a=ea.expanded?ea.x:Mr(ea);zn.points[2].x=_a}zn.points=[zn.points[0],zn.points[1]]}const Li=zn.points[zn.points.length-2];ea!=null&&(zn.points[zn.points.length-1]=er(Li,ea));const ti=zn.points[1];ei!=null&&(zn.points[0]=er(ti,ei)),zn.points.forEach(_a=>{Yr=_a.x<Yr?_a.x:Yr,bn=_a.x>bn?_a.x:bn,_n=_a.y<_n?_a.y:_n,Pn=_a.y>Pn?_a.y:Pn})}),Nt.nodes().forEach(Qn=>{const zn=Nt.node(Qn);zn.x-=Yr,zn.y-=_n}),Nt.edges().forEach(Qn=>{Nt.edge(Qn).points.forEach(zn=>{zn.x-=Yr,zn.y-=_n})}),{width:bn-Yr,height:Pn-_n}}(R.coreGraph,Ke));let Xe=0;R.coreGraph.nodeCount()>0&&Xe++;const ht=Xe<=1?0:Xe;R.coreBox.width+=ht+ht,R.coreBox.height=oe.labelHeight+R.coreBox.height,R.width=R.coreBox.width+oe.paddingLeft+oe.paddingRight,R.height=R.paddingTop+R.coreBox.height+R.paddingBottom}(h,w)}function rr(h,w){const R=w.x-h.x,j=w.y-h.y;return 180*Math.atan(j/R)/Math.PI}function Mr(h){return h.expanded?h.x:h.x-h.width/2+0+h.coreBox.width/2}function er(h,w){const R=w.expanded?w.x:Mr(w),j=w.y,ne=h.x-R,oe=h.y-j;let he,me,_e=w.expanded?w.width:w.coreBox.width,Be=w.expanded?w.height:w.coreBox.height;return Math.abs(oe)*_e/2>Math.abs(ne)*Be/2?(oe<0&&(Be=-Be),he=oe===0?0:Be/2*ne/oe,me=Be/2):(ne<0&&(_e=-_e),he=_e/2,me=ne===0?0:_e/2*oe/ne),{x:R+he,y:j+me}}function hr(h,w,R){var j,ne,oe,he;const me=h.nodes.filter((Xe,ht,Nt)=>Nt.findIndex(gr=>gr.id===Xe.id)!==ht).map(Xe=>Xe.id);if(me.length)throw new Error(`Duplicated ids found: ${me.join(", ")}`);const _e=function(Xe){const ht={nodes:[]},Nt=Xe.compound,gr=Object.keys(Nt||{}),Ut=new Map,Vt=(Gr,Kr=[])=>{if(Ut.has(Gr))return Ut.get(Gr);for(let Yr=0;Yr<gr.length;Yr++){let _n=gr[Yr];if(Nt&&Nt[_n].indexOf(Gr)!==-1)return Kr.unshift(_n),Vt(_n,Kr)}return Kr.length===0&&Ut.set(Gr,Kr),Kr},Xt=Gr=>Xe.edges.filter(Kr=>Kr.w===Gr).map(Kr=>({name:Kr.v}));return Xe.nodes.forEach(Gr=>{const Kr=Gr.id,Yr=[...Vt(Kr),Kr];let _n=Xt(Kr);ht.nodes.push({name:Kr,path:Yr,inputs:_n,width:Gr.width,height:Gr.height,attr:Object.assign({},Gr)})}),ht}(h),Be=function(Xe,ht){const Nt=(Ut,Vt)=>{for(let Xt of Vt.values())if(Xt.includes(Ut))return!0;return!1},gr=(Ut,Vt=[])=>{if(Object.keys(Ut).length===0)return[...new Set(Vt)];const Xt=new Map(Object.keys(Ut).map(Kr=>[Kr,Ut[Kr]])),Gr={};for(let[Kr,Yr]of Xt)Nt(Kr,Xt)?Gr[Kr]=Yr:Vt=Vt.concat(Kr,Yr);return gr(Gr,Vt)};return gr(Xe).filter(Ut=>ht.includes(Ut))}(h.compound||{},(w==null?void 0:w.expanded)||[]),Ke=function(Xe,ht){return function(Nt){return new ul(Nt)}(sl(bl(Xe),ht))}(_e,{rankDirection:((ne=(j=R==null?void 0:R.graph)===null||j===void 0?void 0:j.meta)===null||ne===void 0?void 0:ne.rankDir)||(w==null?void 0:w.rankDirection)||F.graph.meta.rankDir,align:((he=(oe=R==null?void 0:R.graph)===null||oe===void 0?void 0:oe.meta)===null||he===void 0?void 0:he.align)||F.graph.meta.align});return function(Xe,ht){ht.forEach(Nt=>{const gr=Xe.getRenderInfoNodes().find(Xt=>Xt.displayName===Nt);let Ut=gr&&gr.node&&gr.node.name||"";const Vt=Xe.getRenderNodeByName(Ut);if(!Vt)throw new Error(`No nodes found: ${Ut}`);Vt.expanded=!0,Xe.buildSubHierarchy(Ut)})}(Ke,Be),pt(Ke.root,R),Wr(Ke.root)}function Br(h,w=!1){const R=JSON.parse(JSON.stringify(h)),j={nodes:[R],edges:[...R.edges]};return R.nodes.forEach(function ne(oe){(oe.type===0||oe.type===1)&&j.nodes.push(oe),oe.type===0&&(j.edges=j.edges.concat(oe.edges)),Array.isArray(oe.nodes)&&oe.nodes.forEach(ne)}),w&&j.nodes.forEach(ne=>{const oe=j.nodes.find(he=>he.id===ne.parentNodeName);if(oe){const he=oe.x-oe.width/2+oe.paddingLeft,me=oe.y-oe.height/2+oe.labelHeight+oe.paddingTop;oe.id!==A&&(ne.x+=he,ne.y+=me),ne.type===0&&ne.edges.forEach(_e=>{_e.points.forEach(Be=>{Be.x+=ne.x-ne.width/2+ne.paddingLeft,Be.y+=ne.y-ne.height/2+ne.labelHeight+ne.paddingTop})})}}),j}function cr(h,w,R,j){var ne,oe;let he=[];const me=((ne=R.find(Xe=>Xe.id===h))===null||ne===void 0?void 0:ne.path)||[],_e=((oe=R.find(Xe=>Xe.id===w))===null||oe===void 0?void 0:oe.path)||[],Be=[A,...me].slice(0,me.length).reverse(),Ke=[A,..._e].slice(0,_e.length);return Be.forEach(Xe=>{const ht=R.find(Nt=>Nt.id===Xe);he=he.concat(ht.edges.filter(Nt=>Nt.baseEdgeList.some(gr=>gr.v===((j==null?void 0:j.v)||h)&&gr.w===((j==null?void 0:j.w)||w))))}),Ke.filter(Xe=>!Be.includes(Xe)).forEach(Xe=>{const ht=R.find(Nt=>Nt.id===Xe);he=he.concat(ht.edges.filter(Nt=>Nt.baseEdgeList.some(gr=>gr.v===((j==null?void 0:j.v)||h)&&gr.w===((j==null?void 0:j.w)||w))))}),he}function Wr(h){const w=h.coreGraph.nodes().map(j=>h.coreGraph.node(j));return Object.assign(Object.assign({},Ar(h)),{expanded:h.expanded,nodes:h.expanded?(R=w,R.map(j=>j.node.type===O.META?Wr(j):Ar(j))):[],edges:h.expanded?Hr(h):[]});var R}function Ar(h){return{id:h.node.name,name:h.node.name,type:h.node.type,cardinality:h.node.cardinality,attr:h.attr,parentNodeName:h.node.parentNode?h.node.parentNode.name:null,coreBox:Object.assign({},h.coreBox),x:h.x,y:h.y,width:h.width,height:h.height,radius:h.radius,labelHeight:h.labelHeight,labelOffset:h.labelOffset,outboxWidth:h.outboxWidth,paddingLeft:h.paddingLeft,paddingTop:h.paddingTop,paddingRight:h.paddingRight,paddingBottom:h.paddingBottom,path:h.node.path}}function Hr(h){return h.coreGraph.edges().map(w=>({renderInfoEdge:h.coreGraph.edge(w),edge:w})).filter(({renderInfoEdge:w})=>w.metaEdge).map(({edge:w,renderInfoEdge:R})=>{const j=function(ne,oe){const he=oe.points.map(me=>Object.assign({},me));if(oe.adjoiningMetaEdge){const me=oe.adjoiningMetaEdge.points,_e=oe.metaEdge.inbound,Be=_e?me[me.length-1]:me[0],Ke=he[_e?0:he.length-1],Xe=ne.x-ne.width/2,ht=ne.y-ne.height/2,Nt=Be.x-Xe,gr=Be.y-ht,Ut=-ne.paddingLeft,Vt=-(ne.paddingTop+ne.labelHeight);Ke.x=Nt+Ut,Ke.y=gr+Vt}return he}(h,R);return{adjoiningEdge:R.adjoiningMetaEdge?{w:R.adjoiningMetaEdge.metaEdge.w,v:R.adjoiningMetaEdge.metaEdge.v}:null,inbound:R.metaEdge.inbound,w:w.w,v:w.v,points:j,weight:R.weight,baseEdgeList:R.metaEdge.baseEdgeList,parentNodeName:h.node.name}})}},58204:function(pr,U,G){"use strict";G.r(U),G.d(U,{glMatrix:function(){return x},mat2:function(){return F},mat2d:function(){return Y},mat3:function(){return Vn},mat4:function(){return P},quat:function(){return N},quat2:function(){return O},vec2:function(){return uf},vec3:function(){return _r},vec4:function(){return A}});var F={};G.r(F),G.d(F,{LDU:function(){return q},add:function(){return ae},adjoint:function(){return D},clone:function(){return y},copy:function(){return m},create:function(){return E},determinant:function(){return k},equals:function(){return De},exactEquals:function(){return ce},frob:function(){return re},fromRotation:function(){return X},fromScaling:function(){return K},fromValues:function(){return v},identity:function(){return g},invert:function(){return T},mul:function(){return we},multiply:function(){return V},multiplyScalar:function(){return Ie},multiplyScalarAndAdd:function(){return Pe},rotate:function(){return J},scale:function(){return W},set:function(){return u},str:function(){return Q},sub:function(){return xe},subtract:function(){return ue},transpose:function(){return b}});var Y={};G.r(Y),G.d(Y,{add:function(){return ir},clone:function(){return Se},copy:function(){return Te},create:function(){return ve},determinant:function(){return xt},equals:function(){return Ve},exactEquals:function(){return Dn},frob:function(){return jt},fromRotation:function(){return yt},fromScaling:function(){return ct},fromTranslation:function(){return Kt},fromValues:function(){return Ge},identity:function(){return We},invert:function(){return mt},mul:function(){return Nr},multiply:function(){return Ze},multiplyScalar:function(){return tn},multiplyScalarAndAdd:function(){return Dr},rotate:function(){return $e},scale:function(){return gt},set:function(){return Je},str:function(){return $t},sub:function(){return Fn},subtract:function(){return mr},translate:function(){return At}});var P={};G.r(P),G.d(P,{add:function(){return Et},adjoint:function(){return Or},clone:function(){return aa},copy:function(){return Ya},create:function(){return va},determinant:function(){return Qr},equals:function(){return Sn},exactEquals:function(){return $r},frob:function(){return Ot},fromQuat:function(){return an},fromQuat2:function(){return lt},fromRotation:function(){return Jn},fromRotationTranslation:function(){return Gt},fromRotationTranslationScale:function(){return Sr},fromRotationTranslationScaleOrigin:function(){return nn},fromScaling:function(){return jn},fromTranslation:function(){return mn},fromValues:function(){return la},fromXRotation:function(){return Ln},fromYRotation:function(){return ma},fromZRotation:function(){return Z},frustum:function(){return qr},getRotation:function(){return Ir},getScaling:function(){return Ft},getTranslation:function(){return Ht},identity:function(){return Wa},invert:function(){return ar},lookAt:function(){return Ne},mul:function(){return kt},multiply:function(){return wn},multiplyScalar:function(){return Lr},multiplyScalarAndAdd:function(){return or},ortho:function(){return $},orthoNO:function(){return M},orthoZO:function(){return Ee},perspective:function(){return ge},perspectiveFromFieldOfView:function(){return _},perspectiveNO:function(){return le},perspectiveZO:function(){return B},rotate:function(){return qn},rotateX:function(){return oa},rotateY:function(){return ya},rotateZ:function(){return Ka},scale:function(){return Gn},set:function(){return Qa},str:function(){return Ye},sub:function(){return nr},subtract:function(){return Zt},targetTo:function(){return Le},translate:function(){return On},transpose:function(){return Da}});var A={};G.r(A),G.d(A,{add:function(){return ut},ceil:function(){return Xr},clone:function(){return He},copy:function(){return Qe},create:function(){return Fr},cross:function(){return so},dist:function(){return mi},distance:function(){return Ra},div:function(){return ls},divide:function(){return qt},dot:function(){return oo},equals:function(){return Ui},exactEquals:function(){return Fo},floor:function(){return vn},forEach:function(){return Lo},fromValues:function(){return Ae},inverse:function(){return Qi},len:function(){return Ms},length:function(){return Eo},lerp:function(){return Tr},max:function(){return Hn},min:function(){return fn},mul:function(){return _s},multiply:function(){return Qt},negate:function(){return qa},normalize:function(){return fs},random:function(){return ro},round:function(){return kn},scale:function(){return da},scaleAndAdd:function(){return ka},set:function(){return ft},sqrDist:function(){return qi},sqrLen:function(){return Cs},squaredDistance:function(){return Aa},squaredLength:function(){return _i},str:function(){return Ho},sub:function(){return Ni},subtract:function(){return St},transformMat4:function(){return cs},transformQuat:function(){return ja},zero:function(){return bo}});var N={};G.r(N),G.d(N,{add:function(){return lo},calculateW:function(){return co},clone:function(){return Ja},conjugate:function(){return no},copy:function(){return fi},create:function(){return uo},dot:function(){return ji},equals:function(){return En},exactEquals:function(){return Hi},exp:function(){return Bi},fromEuler:function(){return ts},fromMat3:function(){return Wi},fromValues:function(){return eo},getAngle:function(){return Nn},getAxisAngle:function(){return Is},identity:function(){return Ts},invert:function(){return Zo},len:function(){return Uo},length:function(){return ho},lerp:function(){return zo},ln:function(){return es},mul:function(){return rs},multiply:function(){return Ji},normalize:function(){return Ai},pow:function(){return hs},random:function(){return Oa},rotateX:function(){return fo},rotateY:function(){return Ii},rotateZ:function(){return As},rotationTo:function(){return cn},scale:function(){return Do},set:function(){return Os},setAxes:function(){return oi},setAxisAngle:function(){return ds},slerp:function(){return Go},sqlerp:function(){return Wo},sqrLen:function(){return Ma},squaredLength:function(){return xo},str:function(){return vs}});var O={};G.r(O),G.d(O,{add:function(){return Us},clone:function(){return ao},conjugate:function(){return Po},copy:function(){return Fs},create:function(){return No},dot:function(){return Vs},equals:function(){return au},exactEquals:function(){return Xu},fromMat4:function(){return Eu},fromRotation:function(){return Bs},fromRotationTranslation:function(){return ns},fromRotationTranslationValues:function(){return ci},fromTranslation:function(){return gs},fromValues:function(){return Xa},getDual:function(){return ru},getReal:function(){return bu},getTranslation:function(){return Ls},identity:function(){return li},invert:function(){return _u},len:function(){return Mu},length:function(){return Ko},lerp:function(){return Su},mul:function(){return Ws},multiply:function(){return ps},normalize:function(){return Wu},rotateAroundAxis:function(){return nu},rotateByQuatAppend:function(){return zs},rotateByQuatPrepend:function(){return wu},rotateX:function(){return xu},rotateY:function(){return io},rotateZ:function(){return is},scale:function(){return Xs},set:function(){return Xo},setDual:function(){return Gs},setReal:function(){return as},sqrLen:function(){return vo},squaredLength:function(){return ys},str:function(){return Cu},translate:function(){return Ds}});var x=G(49685);function E(){var c=new x.ARRAY_TYPE(4);return x.ARRAY_TYPE!=Float32Array&&(c[1]=0,c[2]=0),c[0]=1,c[3]=1,c}function y(c){var I=new x.ARRAY_TYPE(4);return I[0]=c[0],I[1]=c[1],I[2]=c[2],I[3]=c[3],I}function m(c,I){return c[0]=I[0],c[1]=I[1],c[2]=I[2],c[3]=I[3],c}function g(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=1,c}function v(c,I,fe,be){var Oe=new x.ARRAY_TYPE(4);return Oe[0]=c,Oe[1]=I,Oe[2]=fe,Oe[3]=be,Oe}function u(c,I,fe,be,Oe){return c[0]=I,c[1]=fe,c[2]=be,c[3]=Oe,c}function b(c,I){if(c===I){var fe=I[1];c[1]=I[2],c[2]=fe}else c[0]=I[0],c[1]=I[2],c[2]=I[1],c[3]=I[3];return c}function T(c,I){var fe=I[0],be=I[1],Oe=I[2],ze=I[3],Ue=fe*ze-Oe*be;return Ue?(Ue=1/Ue,c[0]=ze*Ue,c[1]=-be*Ue,c[2]=-Oe*Ue,c[3]=fe*Ue,c):null}function D(c,I){var fe=I[0];return c[0]=I[3],c[1]=-I[1],c[2]=-I[2],c[3]=fe,c}function k(c){return c[0]*c[3]-c[2]*c[1]}function V(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=fe[0],st=fe[1],bt=fe[2],It=fe[3];return c[0]=be*nt+ze*st,c[1]=Oe*nt+Ue*st,c[2]=be*bt+ze*It,c[3]=Oe*bt+Ue*It,c}function J(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=Math.sin(fe),st=Math.cos(fe);return c[0]=be*st+ze*nt,c[1]=Oe*st+Ue*nt,c[2]=be*-nt+ze*st,c[3]=Oe*-nt+Ue*st,c}function W(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=fe[0],st=fe[1];return c[0]=be*nt,c[1]=Oe*nt,c[2]=ze*st,c[3]=Ue*st,c}function X(c,I){var fe=Math.sin(I),be=Math.cos(I);return c[0]=be,c[1]=fe,c[2]=-fe,c[3]=be,c}function K(c,I){return c[0]=I[0],c[1]=0,c[2]=0,c[3]=I[1],c}function Q(c){return"mat2("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+")"}function re(c){return Math.hypot(c[0],c[1],c[2],c[3])}function q(c,I,fe,be){return c[2]=be[2]/be[0],fe[0]=be[0],fe[1]=be[1],fe[3]=be[3]-c[2]*fe[1],[c,I,fe]}function ae(c,I,fe){return c[0]=I[0]+fe[0],c[1]=I[1]+fe[1],c[2]=I[2]+fe[2],c[3]=I[3]+fe[3],c}function ue(c,I,fe){return c[0]=I[0]-fe[0],c[1]=I[1]-fe[1],c[2]=I[2]-fe[2],c[3]=I[3]-fe[3],c}function ce(c,I){return c[0]===I[0]&&c[1]===I[1]&&c[2]===I[2]&&c[3]===I[3]}function De(c,I){var fe=c[0],be=c[1],Oe=c[2],ze=c[3],Ue=I[0],nt=I[1],st=I[2],bt=I[3];return Math.abs(fe-Ue)<=x.EPSILON*Math.max(1,Math.abs(fe),Math.abs(Ue))&&Math.abs(be-nt)<=x.EPSILON*Math.max(1,Math.abs(be),Math.abs(nt))&&Math.abs(Oe-st)<=x.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(st))&&Math.abs(ze-bt)<=x.EPSILON*Math.max(1,Math.abs(ze),Math.abs(bt))}function Ie(c,I,fe){return c[0]=I[0]*fe,c[1]=I[1]*fe,c[2]=I[2]*fe,c[3]=I[3]*fe,c}function Pe(c,I,fe,be){return c[0]=I[0]+fe[0]*be,c[1]=I[1]+fe[1]*be,c[2]=I[2]+fe[2]*be,c[3]=I[3]+fe[3]*be,c}var we=V,xe=ue;function ve(){var c=new x.ARRAY_TYPE(6);return x.ARRAY_TYPE!=Float32Array&&(c[1]=0,c[2]=0,c[4]=0,c[5]=0),c[0]=1,c[3]=1,c}function Se(c){var I=new x.ARRAY_TYPE(6);return I[0]=c[0],I[1]=c[1],I[2]=c[2],I[3]=c[3],I[4]=c[4],I[5]=c[5],I}function Te(c,I){return c[0]=I[0],c[1]=I[1],c[2]=I[2],c[3]=I[3],c[4]=I[4],c[5]=I[5],c}function We(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=1,c[4]=0,c[5]=0,c}function Ge(c,I,fe,be,Oe,ze){var Ue=new x.ARRAY_TYPE(6);return Ue[0]=c,Ue[1]=I,Ue[2]=fe,Ue[3]=be,Ue[4]=Oe,Ue[5]=ze,Ue}function Je(c,I,fe,be,Oe,ze,Ue){return c[0]=I,c[1]=fe,c[2]=be,c[3]=Oe,c[4]=ze,c[5]=Ue,c}function mt(c,I){var fe=I[0],be=I[1],Oe=I[2],ze=I[3],Ue=I[4],nt=I[5],st=fe*ze-be*Oe;return st?(st=1/st,c[0]=ze*st,c[1]=-be*st,c[2]=-Oe*st,c[3]=fe*st,c[4]=(Oe*nt-ze*Ue)*st,c[5]=(be*Ue-fe*nt)*st,c):null}function xt(c){return c[0]*c[3]-c[1]*c[2]}function Ze(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=I[4],st=I[5],bt=fe[0],It=fe[1],fr=fe[2],vr=fe[3],lr=fe[4],Ur=fe[5];return c[0]=be*bt+ze*It,c[1]=Oe*bt+Ue*It,c[2]=be*fr+ze*vr,c[3]=Oe*fr+Ue*vr,c[4]=be*lr+ze*Ur+nt,c[5]=Oe*lr+Ue*Ur+st,c}function $e(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=I[4],st=I[5],bt=Math.sin(fe),It=Math.cos(fe);return c[0]=be*It+ze*bt,c[1]=Oe*It+Ue*bt,c[2]=be*-bt+ze*It,c[3]=Oe*-bt+Ue*It,c[4]=nt,c[5]=st,c}function gt(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=I[4],st=I[5],bt=fe[0],It=fe[1];return c[0]=be*bt,c[1]=Oe*bt,c[2]=ze*It,c[3]=Ue*It,c[4]=nt,c[5]=st,c}function At(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=I[4],st=I[5],bt=fe[0],It=fe[1];return c[0]=be,c[1]=Oe,c[2]=ze,c[3]=Ue,c[4]=be*bt+ze*It+nt,c[5]=Oe*bt+Ue*It+st,c}function yt(c,I){var fe=Math.sin(I),be=Math.cos(I);return c[0]=be,c[1]=fe,c[2]=-fe,c[3]=be,c[4]=0,c[5]=0,c}function ct(c,I){return c[0]=I[0],c[1]=0,c[2]=0,c[3]=I[1],c[4]=0,c[5]=0,c}function Kt(c,I){return c[0]=1,c[1]=0,c[2]=0,c[3]=1,c[4]=I[0],c[5]=I[1],c}function $t(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"}function jt(c){return Math.hypot(c[0],c[1],c[2],c[3],c[4],c[5],1)}function ir(c,I,fe){return c[0]=I[0]+fe[0],c[1]=I[1]+fe[1],c[2]=I[2]+fe[2],c[3]=I[3]+fe[3],c[4]=I[4]+fe[4],c[5]=I[5]+fe[5],c}function mr(c,I,fe){return c[0]=I[0]-fe[0],c[1]=I[1]-fe[1],c[2]=I[2]-fe[2],c[3]=I[3]-fe[3],c[4]=I[4]-fe[4],c[5]=I[5]-fe[5],c}function tn(c,I,fe){return c[0]=I[0]*fe,c[1]=I[1]*fe,c[2]=I[2]*fe,c[3]=I[3]*fe,c[4]=I[4]*fe,c[5]=I[5]*fe,c}function Dr(c,I,fe,be){return c[0]=I[0]+fe[0]*be,c[1]=I[1]+fe[1]*be,c[2]=I[2]+fe[2]*be,c[3]=I[3]+fe[3]*be,c[4]=I[4]+fe[4]*be,c[5]=I[5]+fe[5]*be,c}function Dn(c,I){return c[0]===I[0]&&c[1]===I[1]&&c[2]===I[2]&&c[3]===I[3]&&c[4]===I[4]&&c[5]===I[5]}function Ve(c,I){var fe=c[0],be=c[1],Oe=c[2],ze=c[3],Ue=c[4],nt=c[5],st=I[0],bt=I[1],It=I[2],fr=I[3],vr=I[4],lr=I[5];return Math.abs(fe-st)<=x.EPSILON*Math.max(1,Math.abs(fe),Math.abs(st))&&Math.abs(be-bt)<=x.EPSILON*Math.max(1,Math.abs(be),Math.abs(bt))&&Math.abs(Oe-It)<=x.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(It))&&Math.abs(ze-fr)<=x.EPSILON*Math.max(1,Math.abs(ze),Math.abs(fr))&&Math.abs(Ue-vr)<=x.EPSILON*Math.max(1,Math.abs(Ue),Math.abs(vr))&&Math.abs(nt-lr)<=x.EPSILON*Math.max(1,Math.abs(nt),Math.abs(lr))}var Nr=Ze,Fn=mr,Vn=G(35600);function va(){var c=new x.ARRAY_TYPE(16);return x.ARRAY_TYPE!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c}function aa(c){var I=new x.ARRAY_TYPE(16);return I[0]=c[0],I[1]=c[1],I[2]=c[2],I[3]=c[3],I[4]=c[4],I[5]=c[5],I[6]=c[6],I[7]=c[7],I[8]=c[8],I[9]=c[9],I[10]=c[10],I[11]=c[11],I[12]=c[12],I[13]=c[13],I[14]=c[14],I[15]=c[15],I}function Ya(c,I){return c[0]=I[0],c[1]=I[1],c[2]=I[2],c[3]=I[3],c[4]=I[4],c[5]=I[5],c[6]=I[6],c[7]=I[7],c[8]=I[8],c[9]=I[9],c[10]=I[10],c[11]=I[11],c[12]=I[12],c[13]=I[13],c[14]=I[14],c[15]=I[15],c}function la(c,I,fe,be,Oe,ze,Ue,nt,st,bt,It,fr,vr,lr,Ur,Zr){var Er=new x.ARRAY_TYPE(16);return Er[0]=c,Er[1]=I,Er[2]=fe,Er[3]=be,Er[4]=Oe,Er[5]=ze,Er[6]=Ue,Er[7]=nt,Er[8]=st,Er[9]=bt,Er[10]=It,Er[11]=fr,Er[12]=vr,Er[13]=lr,Er[14]=Ur,Er[15]=Zr,Er}function Qa(c,I,fe,be,Oe,ze,Ue,nt,st,bt,It,fr,vr,lr,Ur,Zr,Er){return c[0]=I,c[1]=fe,c[2]=be,c[3]=Oe,c[4]=ze,c[5]=Ue,c[6]=nt,c[7]=st,c[8]=bt,c[9]=It,c[10]=fr,c[11]=vr,c[12]=lr,c[13]=Ur,c[14]=Zr,c[15]=Er,c}function Wa(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function Da(c,I){if(c===I){var fe=I[1],be=I[2],Oe=I[3],ze=I[6],Ue=I[7],nt=I[11];c[1]=I[4],c[2]=I[8],c[3]=I[12],c[4]=fe,c[6]=I[9],c[7]=I[13],c[8]=be,c[9]=ze,c[11]=I[14],c[12]=Oe,c[13]=Ue,c[14]=nt}else c[0]=I[0],c[1]=I[4],c[2]=I[8],c[3]=I[12],c[4]=I[1],c[5]=I[5],c[6]=I[9],c[7]=I[13],c[8]=I[2],c[9]=I[6],c[10]=I[10],c[11]=I[14],c[12]=I[3],c[13]=I[7],c[14]=I[11],c[15]=I[15];return c}function ar(c,I){var fe=I[0],be=I[1],Oe=I[2],ze=I[3],Ue=I[4],nt=I[5],st=I[6],bt=I[7],It=I[8],fr=I[9],vr=I[10],lr=I[11],Ur=I[12],Zr=I[13],Er=I[14],sn=I[15],Kn=fe*nt-be*Ue,ua=fe*st-Oe*Ue,$n=fe*bt-ze*Ue,Rn=be*st-Oe*nt,Xn=be*bt-ze*nt,Mi=Oe*bt-ze*st,Ei=It*Zr-fr*Ur,ai=It*Er-vr*Ur,di=It*sn-lr*Ur,hi=fr*Er-vr*Zr,vi=fr*sn-lr*Zr,Pi=vr*sn-lr*Er,Ea=Kn*Pi-ua*vi+$n*hi+Rn*di-Xn*ai+Mi*Ei;return Ea?(Ea=1/Ea,c[0]=(nt*Pi-st*vi+bt*hi)*Ea,c[1]=(Oe*vi-be*Pi-ze*hi)*Ea,c[2]=(Zr*Mi-Er*Xn+sn*Rn)*Ea,c[3]=(vr*Xn-fr*Mi-lr*Rn)*Ea,c[4]=(st*di-Ue*Pi-bt*ai)*Ea,c[5]=(fe*Pi-Oe*di+ze*ai)*Ea,c[6]=(Er*$n-Ur*Mi-sn*ua)*Ea,c[7]=(It*Mi-vr*$n+lr*ua)*Ea,c[8]=(Ue*vi-nt*di+bt*Ei)*Ea,c[9]=(be*di-fe*vi-ze*Ei)*Ea,c[10]=(Ur*Xn-Zr*$n+sn*Kn)*Ea,c[11]=(fr*$n-It*Xn-lr*Kn)*Ea,c[12]=(nt*ai-Ue*hi-st*Ei)*Ea,c[13]=(fe*hi-be*ai+Oe*Ei)*Ea,c[14]=(Zr*ua-Ur*Rn-Er*Kn)*Ea,c[15]=(It*Rn-fr*ua+vr*Kn)*Ea,c):null}function Or(c,I){var fe=I[0],be=I[1],Oe=I[2],ze=I[3],Ue=I[4],nt=I[5],st=I[6],bt=I[7],It=I[8],fr=I[9],vr=I[10],lr=I[11],Ur=I[12],Zr=I[13],Er=I[14],sn=I[15];return c[0]=nt*(vr*sn-lr*Er)-fr*(st*sn-bt*Er)+Zr*(st*lr-bt*vr),c[1]=-(be*(vr*sn-lr*Er)-fr*(Oe*sn-ze*Er)+Zr*(Oe*lr-ze*vr)),c[2]=be*(st*sn-bt*Er)-nt*(Oe*sn-ze*Er)+Zr*(Oe*bt-ze*st),c[3]=-(be*(st*lr-bt*vr)-nt*(Oe*lr-ze*vr)+fr*(Oe*bt-ze*st)),c[4]=-(Ue*(vr*sn-lr*Er)-It*(st*sn-bt*Er)+Ur*(st*lr-bt*vr)),c[5]=fe*(vr*sn-lr*Er)-It*(Oe*sn-ze*Er)+Ur*(Oe*lr-ze*vr),c[6]=-(fe*(st*sn-bt*Er)-Ue*(Oe*sn-ze*Er)+Ur*(Oe*bt-ze*st)),c[7]=fe*(st*lr-bt*vr)-Ue*(Oe*lr-ze*vr)+It*(Oe*bt-ze*st),c[8]=Ue*(fr*sn-lr*Zr)-It*(nt*sn-bt*Zr)+Ur*(nt*lr-bt*fr),c[9]=-(fe*(fr*sn-lr*Zr)-It*(be*sn-ze*Zr)+Ur*(be*lr-ze*fr)),c[10]=fe*(nt*sn-bt*Zr)-Ue*(be*sn-ze*Zr)+Ur*(be*bt-ze*nt),c[11]=-(fe*(nt*lr-bt*fr)-Ue*(be*lr-ze*fr)+It*(be*bt-ze*nt)),c[12]=-(Ue*(fr*Er-vr*Zr)-It*(nt*Er-st*Zr)+Ur*(nt*vr-st*fr)),c[13]=fe*(fr*Er-vr*Zr)-It*(be*Er-Oe*Zr)+Ur*(be*vr-Oe*fr),c[14]=-(fe*(nt*Er-st*Zr)-Ue*(be*Er-Oe*Zr)+Ur*(be*st-Oe*nt)),c[15]=fe*(nt*vr-st*fr)-Ue*(be*vr-Oe*fr)+It*(be*st-Oe*nt),c}function Qr(c){var I=c[0],fe=c[1],be=c[2],Oe=c[3],ze=c[4],Ue=c[5],nt=c[6],st=c[7],bt=c[8],It=c[9],fr=c[10],vr=c[11],lr=c[12],Ur=c[13],Zr=c[14],Er=c[15],sn=I*Ue-fe*ze,Kn=I*nt-be*ze,ua=I*st-Oe*ze,$n=fe*nt-be*Ue,Rn=fe*st-Oe*Ue,Xn=be*st-Oe*nt,Mi=bt*Ur-It*lr,Ei=bt*Zr-fr*lr,ai=bt*Er-vr*lr,di=It*Zr-fr*Ur,hi=It*Er-vr*Ur,vi=fr*Er-vr*Zr;return sn*vi-Kn*hi+ua*di+$n*ai-Rn*Ei+Xn*Mi}function wn(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=I[4],st=I[5],bt=I[6],It=I[7],fr=I[8],vr=I[9],lr=I[10],Ur=I[11],Zr=I[12],Er=I[13],sn=I[14],Kn=I[15],ua=fe[0],$n=fe[1],Rn=fe[2],Xn=fe[3];return c[0]=ua*be+$n*nt+Rn*fr+Xn*Zr,c[1]=ua*Oe+$n*st+Rn*vr+Xn*Er,c[2]=ua*ze+$n*bt+Rn*lr+Xn*sn,c[3]=ua*Ue+$n*It+Rn*Ur+Xn*Kn,ua=fe[4],$n=fe[5],Rn=fe[6],Xn=fe[7],c[4]=ua*be+$n*nt+Rn*fr+Xn*Zr,c[5]=ua*Oe+$n*st+Rn*vr+Xn*Er,c[6]=ua*ze+$n*bt+Rn*lr+Xn*sn,c[7]=ua*Ue+$n*It+Rn*Ur+Xn*Kn,ua=fe[8],$n=fe[9],Rn=fe[10],Xn=fe[11],c[8]=ua*be+$n*nt+Rn*fr+Xn*Zr,c[9]=ua*Oe+$n*st+Rn*vr+Xn*Er,c[10]=ua*ze+$n*bt+Rn*lr+Xn*sn,c[11]=ua*Ue+$n*It+Rn*Ur+Xn*Kn,ua=fe[12],$n=fe[13],Rn=fe[14],Xn=fe[15],c[12]=ua*be+$n*nt+Rn*fr+Xn*Zr,c[13]=ua*Oe+$n*st+Rn*vr+Xn*Er,c[14]=ua*ze+$n*bt+Rn*lr+Xn*sn,c[15]=ua*Ue+$n*It+Rn*Ur+Xn*Kn,c}function On(c,I,fe){var be=fe[0],Oe=fe[1],ze=fe[2],Ue,nt,st,bt,It,fr,vr,lr,Ur,Zr,Er,sn;return I===c?(c[12]=I[0]*be+I[4]*Oe+I[8]*ze+I[12],c[13]=I[1]*be+I[5]*Oe+I[9]*ze+I[13],c[14]=I[2]*be+I[6]*Oe+I[10]*ze+I[14],c[15]=I[3]*be+I[7]*Oe+I[11]*ze+I[15]):(Ue=I[0],nt=I[1],st=I[2],bt=I[3],It=I[4],fr=I[5],vr=I[6],lr=I[7],Ur=I[8],Zr=I[9],Er=I[10],sn=I[11],c[0]=Ue,c[1]=nt,c[2]=st,c[3]=bt,c[4]=It,c[5]=fr,c[6]=vr,c[7]=lr,c[8]=Ur,c[9]=Zr,c[10]=Er,c[11]=sn,c[12]=Ue*be+It*Oe+Ur*ze+I[12],c[13]=nt*be+fr*Oe+Zr*ze+I[13],c[14]=st*be+vr*Oe+Er*ze+I[14],c[15]=bt*be+lr*Oe+sn*ze+I[15]),c}function Gn(c,I,fe){var be=fe[0],Oe=fe[1],ze=fe[2];return c[0]=I[0]*be,c[1]=I[1]*be,c[2]=I[2]*be,c[3]=I[3]*be,c[4]=I[4]*Oe,c[5]=I[5]*Oe,c[6]=I[6]*Oe,c[7]=I[7]*Oe,c[8]=I[8]*ze,c[9]=I[9]*ze,c[10]=I[10]*ze,c[11]=I[11]*ze,c[12]=I[12],c[13]=I[13],c[14]=I[14],c[15]=I[15],c}function qn(c,I,fe,be){var Oe=be[0],ze=be[1],Ue=be[2],nt=Math.hypot(Oe,ze,Ue),st,bt,It,fr,vr,lr,Ur,Zr,Er,sn,Kn,ua,$n,Rn,Xn,Mi,Ei,ai,di,hi,vi,Pi,Ea,Ha;return nt<x.EPSILON?null:(nt=1/nt,Oe*=nt,ze*=nt,Ue*=nt,st=Math.sin(fe),bt=Math.cos(fe),It=1-bt,fr=I[0],vr=I[1],lr=I[2],Ur=I[3],Zr=I[4],Er=I[5],sn=I[6],Kn=I[7],ua=I[8],$n=I[9],Rn=I[10],Xn=I[11],Mi=Oe*Oe*It+bt,Ei=ze*Oe*It+Ue*st,ai=Ue*Oe*It-ze*st,di=Oe*ze*It-Ue*st,hi=ze*ze*It+bt,vi=Ue*ze*It+Oe*st,Pi=Oe*Ue*It+ze*st,Ea=ze*Ue*It-Oe*st,Ha=Ue*Ue*It+bt,c[0]=fr*Mi+Zr*Ei+ua*ai,c[1]=vr*Mi+Er*Ei+$n*ai,c[2]=lr*Mi+sn*Ei+Rn*ai,c[3]=Ur*Mi+Kn*Ei+Xn*ai,c[4]=fr*di+Zr*hi+ua*vi,c[5]=vr*di+Er*hi+$n*vi,c[6]=lr*di+sn*hi+Rn*vi,c[7]=Ur*di+Kn*hi+Xn*vi,c[8]=fr*Pi+Zr*Ea+ua*Ha,c[9]=vr*Pi+Er*Ea+$n*Ha,c[10]=lr*Pi+sn*Ea+Rn*Ha,c[11]=Ur*Pi+Kn*Ea+Xn*Ha,I!==c&&(c[12]=I[12],c[13]=I[13],c[14]=I[14],c[15]=I[15]),c)}function oa(c,I,fe){var be=Math.sin(fe),Oe=Math.cos(fe),ze=I[4],Ue=I[5],nt=I[6],st=I[7],bt=I[8],It=I[9],fr=I[10],vr=I[11];return I!==c&&(c[0]=I[0],c[1]=I[1],c[2]=I[2],c[3]=I[3],c[12]=I[12],c[13]=I[13],c[14]=I[14],c[15]=I[15]),c[4]=ze*Oe+bt*be,c[5]=Ue*Oe+It*be,c[6]=nt*Oe+fr*be,c[7]=st*Oe+vr*be,c[8]=bt*Oe-ze*be,c[9]=It*Oe-Ue*be,c[10]=fr*Oe-nt*be,c[11]=vr*Oe-st*be,c}function ya(c,I,fe){var be=Math.sin(fe),Oe=Math.cos(fe),ze=I[0],Ue=I[1],nt=I[2],st=I[3],bt=I[8],It=I[9],fr=I[10],vr=I[11];return I!==c&&(c[4]=I[4],c[5]=I[5],c[6]=I[6],c[7]=I[7],c[12]=I[12],c[13]=I[13],c[14]=I[14],c[15]=I[15]),c[0]=ze*Oe-bt*be,c[1]=Ue*Oe-It*be,c[2]=nt*Oe-fr*be,c[3]=st*Oe-vr*be,c[8]=ze*be+bt*Oe,c[9]=Ue*be+It*Oe,c[10]=nt*be+fr*Oe,c[11]=st*be+vr*Oe,c}function Ka(c,I,fe){var be=Math.sin(fe),Oe=Math.cos(fe),ze=I[0],Ue=I[1],nt=I[2],st=I[3],bt=I[4],It=I[5],fr=I[6],vr=I[7];return I!==c&&(c[8]=I[8],c[9]=I[9],c[10]=I[10],c[11]=I[11],c[12]=I[12],c[13]=I[13],c[14]=I[14],c[15]=I[15]),c[0]=ze*Oe+bt*be,c[1]=Ue*Oe+It*be,c[2]=nt*Oe+fr*be,c[3]=st*Oe+vr*be,c[4]=bt*Oe-ze*be,c[5]=It*Oe-Ue*be,c[6]=fr*Oe-nt*be,c[7]=vr*Oe-st*be,c}function mn(c,I){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=I[0],c[13]=I[1],c[14]=I[2],c[15]=1,c}function jn(c,I){return c[0]=I[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=I[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=I[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function Jn(c,I,fe){var be=fe[0],Oe=fe[1],ze=fe[2],Ue=Math.hypot(be,Oe,ze),nt,st,bt;return Ue<x.EPSILON?null:(Ue=1/Ue,be*=Ue,Oe*=Ue,ze*=Ue,nt=Math.sin(I),st=Math.cos(I),bt=1-st,c[0]=be*be*bt+st,c[1]=Oe*be*bt+ze*nt,c[2]=ze*be*bt-Oe*nt,c[3]=0,c[4]=be*Oe*bt-ze*nt,c[5]=Oe*Oe*bt+st,c[6]=ze*Oe*bt+be*nt,c[7]=0,c[8]=be*ze*bt+Oe*nt,c[9]=Oe*ze*bt-be*nt,c[10]=ze*ze*bt+st,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}function Ln(c,I){var fe=Math.sin(I),be=Math.cos(I);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=be,c[6]=fe,c[7]=0,c[8]=0,c[9]=-fe,c[10]=be,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function ma(c,I){var fe=Math.sin(I),be=Math.cos(I);return c[0]=be,c[1]=0,c[2]=-fe,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=fe,c[9]=0,c[10]=be,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function Z(c,I){var fe=Math.sin(I),be=Math.cos(I);return c[0]=be,c[1]=fe,c[2]=0,c[3]=0,c[4]=-fe,c[5]=be,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function Gt(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=be+be,st=Oe+Oe,bt=ze+ze,It=be*nt,fr=be*st,vr=be*bt,lr=Oe*st,Ur=Oe*bt,Zr=ze*bt,Er=Ue*nt,sn=Ue*st,Kn=Ue*bt;return c[0]=1-(lr+Zr),c[1]=fr+Kn,c[2]=vr-sn,c[3]=0,c[4]=fr-Kn,c[5]=1-(It+Zr),c[6]=Ur+Er,c[7]=0,c[8]=vr+sn,c[9]=Ur-Er,c[10]=1-(It+lr),c[11]=0,c[12]=fe[0],c[13]=fe[1],c[14]=fe[2],c[15]=1,c}function lt(c,I){var fe=new x.ARRAY_TYPE(3),be=-I[0],Oe=-I[1],ze=-I[2],Ue=I[3],nt=I[4],st=I[5],bt=I[6],It=I[7],fr=be*be+Oe*Oe+ze*ze+Ue*Ue;return fr>0?(fe[0]=(nt*Ue+It*be+st*ze-bt*Oe)*2/fr,fe[1]=(st*Ue+It*Oe+bt*be-nt*ze)*2/fr,fe[2]=(bt*Ue+It*ze+nt*Oe-st*be)*2/fr):(fe[0]=(nt*Ue+It*be+st*ze-bt*Oe)*2,fe[1]=(st*Ue+It*Oe+bt*be-nt*ze)*2,fe[2]=(bt*Ue+It*ze+nt*Oe-st*be)*2),Gt(c,I,fe),c}function Ht(c,I){return c[0]=I[12],c[1]=I[13],c[2]=I[14],c}function Ft(c,I){var fe=I[0],be=I[1],Oe=I[2],ze=I[4],Ue=I[5],nt=I[6],st=I[8],bt=I[9],It=I[10];return c[0]=Math.hypot(fe,be,Oe),c[1]=Math.hypot(ze,Ue,nt),c[2]=Math.hypot(st,bt,It),c}function Ir(c,I){var fe=new x.ARRAY_TYPE(3);Ft(fe,I);var be=1/fe[0],Oe=1/fe[1],ze=1/fe[2],Ue=I[0]*be,nt=I[1]*Oe,st=I[2]*ze,bt=I[4]*be,It=I[5]*Oe,fr=I[6]*ze,vr=I[8]*be,lr=I[9]*Oe,Ur=I[10]*ze,Zr=Ue+It+Ur,Er=0;return Zr>0?(Er=Math.sqrt(Zr+1)*2,c[3]=.25*Er,c[0]=(fr-lr)/Er,c[1]=(vr-st)/Er,c[2]=(nt-bt)/Er):Ue>It&&Ue>Ur?(Er=Math.sqrt(1+Ue-It-Ur)*2,c[3]=(fr-lr)/Er,c[0]=.25*Er,c[1]=(nt+bt)/Er,c[2]=(vr+st)/Er):It>Ur?(Er=Math.sqrt(1+It-Ue-Ur)*2,c[3]=(vr-st)/Er,c[0]=(nt+bt)/Er,c[1]=.25*Er,c[2]=(fr+lr)/Er):(Er=Math.sqrt(1+Ur-Ue-It)*2,c[3]=(nt-bt)/Er,c[0]=(vr+st)/Er,c[1]=(fr+lr)/Er,c[2]=.25*Er),c}function Sr(c,I,fe,be){var Oe=I[0],ze=I[1],Ue=I[2],nt=I[3],st=Oe+Oe,bt=ze+ze,It=Ue+Ue,fr=Oe*st,vr=Oe*bt,lr=Oe*It,Ur=ze*bt,Zr=ze*It,Er=Ue*It,sn=nt*st,Kn=nt*bt,ua=nt*It,$n=be[0],Rn=be[1],Xn=be[2];return c[0]=(1-(Ur+Er))*$n,c[1]=(vr+ua)*$n,c[2]=(lr-Kn)*$n,c[3]=0,c[4]=(vr-ua)*Rn,c[5]=(1-(fr+Er))*Rn,c[6]=(Zr+sn)*Rn,c[7]=0,c[8]=(lr+Kn)*Xn,c[9]=(Zr-sn)*Xn,c[10]=(1-(fr+Ur))*Xn,c[11]=0,c[12]=fe[0],c[13]=fe[1],c[14]=fe[2],c[15]=1,c}function nn(c,I,fe,be,Oe){var ze=I[0],Ue=I[1],nt=I[2],st=I[3],bt=ze+ze,It=Ue+Ue,fr=nt+nt,vr=ze*bt,lr=ze*It,Ur=ze*fr,Zr=Ue*It,Er=Ue*fr,sn=nt*fr,Kn=st*bt,ua=st*It,$n=st*fr,Rn=be[0],Xn=be[1],Mi=be[2],Ei=Oe[0],ai=Oe[1],di=Oe[2],hi=(1-(Zr+sn))*Rn,vi=(lr+$n)*Rn,Pi=(Ur-ua)*Rn,Ea=(lr-$n)*Xn,Ha=(1-(vr+sn))*Xn,$o=(Er+Kn)*Xn,Vo=(Ur+ua)*Mi,wo=(Er-Kn)*Mi,os=(1-(vr+Zr))*Mi;return c[0]=hi,c[1]=vi,c[2]=Pi,c[3]=0,c[4]=Ea,c[5]=Ha,c[6]=$o,c[7]=0,c[8]=Vo,c[9]=wo,c[10]=os,c[11]=0,c[12]=fe[0]+Ei-(hi*Ei+Ea*ai+Vo*di),c[13]=fe[1]+ai-(vi*Ei+Ha*ai+wo*di),c[14]=fe[2]+di-(Pi*Ei+$o*ai+os*di),c[15]=1,c}function an(c,I){var fe=I[0],be=I[1],Oe=I[2],ze=I[3],Ue=fe+fe,nt=be+be,st=Oe+Oe,bt=fe*Ue,It=be*Ue,fr=be*nt,vr=Oe*Ue,lr=Oe*nt,Ur=Oe*st,Zr=ze*Ue,Er=ze*nt,sn=ze*st;return c[0]=1-fr-Ur,c[1]=It+sn,c[2]=vr-Er,c[3]=0,c[4]=It-sn,c[5]=1-bt-Ur,c[6]=lr+Zr,c[7]=0,c[8]=vr+Er,c[9]=lr-Zr,c[10]=1-bt-fr,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function qr(c,I,fe,be,Oe,ze,Ue){var nt=1/(fe-I),st=1/(Oe-be),bt=1/(ze-Ue);return c[0]=ze*2*nt,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=ze*2*st,c[6]=0,c[7]=0,c[8]=(fe+I)*nt,c[9]=(Oe+be)*st,c[10]=(Ue+ze)*bt,c[11]=-1,c[12]=0,c[13]=0,c[14]=Ue*ze*2*bt,c[15]=0,c}function le(c,I,fe,be,Oe){var ze=1/Math.tan(I/2),Ue;return c[0]=ze/fe,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=ze,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,Oe!=null&&Oe!==1/0?(Ue=1/(be-Oe),c[10]=(Oe+be)*Ue,c[14]=2*Oe*be*Ue):(c[10]=-1,c[14]=-2*be),c}var ge=le;function B(c,I,fe,be,Oe){var ze=1/Math.tan(I/2),Ue;return c[0]=ze/fe,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=ze,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,Oe!=null&&Oe!==1/0?(Ue=1/(be-Oe),c[10]=Oe*Ue,c[14]=Oe*be*Ue):(c[10]=-1,c[14]=-be),c}function _(c,I,fe,be){var Oe=Math.tan(I.upDegrees*Math.PI/180),ze=Math.tan(I.downDegrees*Math.PI/180),Ue=Math.tan(I.leftDegrees*Math.PI/180),nt=Math.tan(I.rightDegrees*Math.PI/180),st=2/(Ue+nt),bt=2/(Oe+ze);return c[0]=st,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=bt,c[6]=0,c[7]=0,c[8]=-((Ue-nt)*st*.5),c[9]=(Oe-ze)*bt*.5,c[10]=be/(fe-be),c[11]=-1,c[12]=0,c[13]=0,c[14]=be*fe/(fe-be),c[15]=0,c}function M(c,I,fe,be,Oe,ze,Ue){var nt=1/(I-fe),st=1/(be-Oe),bt=1/(ze-Ue);return c[0]=-2*nt,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*st,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*bt,c[11]=0,c[12]=(I+fe)*nt,c[13]=(Oe+be)*st,c[14]=(Ue+ze)*bt,c[15]=1,c}var $=M;function Ee(c,I,fe,be,Oe,ze,Ue){var nt=1/(I-fe),st=1/(be-Oe),bt=1/(ze-Ue);return c[0]=-2*nt,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*st,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=bt,c[11]=0,c[12]=(I+fe)*nt,c[13]=(Oe+be)*st,c[14]=ze*bt,c[15]=1,c}function Ne(c,I,fe,be){var Oe,ze,Ue,nt,st,bt,It,fr,vr,lr,Ur=I[0],Zr=I[1],Er=I[2],sn=be[0],Kn=be[1],ua=be[2],$n=fe[0],Rn=fe[1],Xn=fe[2];return Math.abs(Ur-$n)<x.EPSILON&&Math.abs(Zr-Rn)<x.EPSILON&&Math.abs(Er-Xn)<x.EPSILON?Wa(c):(It=Ur-$n,fr=Zr-Rn,vr=Er-Xn,lr=1/Math.hypot(It,fr,vr),It*=lr,fr*=lr,vr*=lr,Oe=Kn*vr-ua*fr,ze=ua*It-sn*vr,Ue=sn*fr-Kn*It,lr=Math.hypot(Oe,ze,Ue),lr?(lr=1/lr,Oe*=lr,ze*=lr,Ue*=lr):(Oe=0,ze=0,Ue=0),nt=fr*Ue-vr*ze,st=vr*Oe-It*Ue,bt=It*ze-fr*Oe,lr=Math.hypot(nt,st,bt),lr?(lr=1/lr,nt*=lr,st*=lr,bt*=lr):(nt=0,st=0,bt=0),c[0]=Oe,c[1]=nt,c[2]=It,c[3]=0,c[4]=ze,c[5]=st,c[6]=fr,c[7]=0,c[8]=Ue,c[9]=bt,c[10]=vr,c[11]=0,c[12]=-(Oe*Ur+ze*Zr+Ue*Er),c[13]=-(nt*Ur+st*Zr+bt*Er),c[14]=-(It*Ur+fr*Zr+vr*Er),c[15]=1,c)}function Le(c,I,fe,be){var Oe=I[0],ze=I[1],Ue=I[2],nt=be[0],st=be[1],bt=be[2],It=Oe-fe[0],fr=ze-fe[1],vr=Ue-fe[2],lr=It*It+fr*fr+vr*vr;lr>0&&(lr=1/Math.sqrt(lr),It*=lr,fr*=lr,vr*=lr);var Ur=st*vr-bt*fr,Zr=bt*It-nt*vr,Er=nt*fr-st*It;return lr=Ur*Ur+Zr*Zr+Er*Er,lr>0&&(lr=1/Math.sqrt(lr),Ur*=lr,Zr*=lr,Er*=lr),c[0]=Ur,c[1]=Zr,c[2]=Er,c[3]=0,c[4]=fr*Er-vr*Zr,c[5]=vr*Ur-It*Er,c[6]=It*Zr-fr*Ur,c[7]=0,c[8]=It,c[9]=fr,c[10]=vr,c[11]=0,c[12]=Oe,c[13]=ze,c[14]=Ue,c[15]=1,c}function Ye(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function Ot(c){return Math.hypot(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15])}function Et(c,I,fe){return c[0]=I[0]+fe[0],c[1]=I[1]+fe[1],c[2]=I[2]+fe[2],c[3]=I[3]+fe[3],c[4]=I[4]+fe[4],c[5]=I[5]+fe[5],c[6]=I[6]+fe[6],c[7]=I[7]+fe[7],c[8]=I[8]+fe[8],c[9]=I[9]+fe[9],c[10]=I[10]+fe[10],c[11]=I[11]+fe[11],c[12]=I[12]+fe[12],c[13]=I[13]+fe[13],c[14]=I[14]+fe[14],c[15]=I[15]+fe[15],c}function Zt(c,I,fe){return c[0]=I[0]-fe[0],c[1]=I[1]-fe[1],c[2]=I[2]-fe[2],c[3]=I[3]-fe[3],c[4]=I[4]-fe[4],c[5]=I[5]-fe[5],c[6]=I[6]-fe[6],c[7]=I[7]-fe[7],c[8]=I[8]-fe[8],c[9]=I[9]-fe[9],c[10]=I[10]-fe[10],c[11]=I[11]-fe[11],c[12]=I[12]-fe[12],c[13]=I[13]-fe[13],c[14]=I[14]-fe[14],c[15]=I[15]-fe[15],c}function Lr(c,I,fe){return c[0]=I[0]*fe,c[1]=I[1]*fe,c[2]=I[2]*fe,c[3]=I[3]*fe,c[4]=I[4]*fe,c[5]=I[5]*fe,c[6]=I[6]*fe,c[7]=I[7]*fe,c[8]=I[8]*fe,c[9]=I[9]*fe,c[10]=I[10]*fe,c[11]=I[11]*fe,c[12]=I[12]*fe,c[13]=I[13]*fe,c[14]=I[14]*fe,c[15]=I[15]*fe,c}function or(c,I,fe,be){return c[0]=I[0]+fe[0]*be,c[1]=I[1]+fe[1]*be,c[2]=I[2]+fe[2]*be,c[3]=I[3]+fe[3]*be,c[4]=I[4]+fe[4]*be,c[5]=I[5]+fe[5]*be,c[6]=I[6]+fe[6]*be,c[7]=I[7]+fe[7]*be,c[8]=I[8]+fe[8]*be,c[9]=I[9]+fe[9]*be,c[10]=I[10]+fe[10]*be,c[11]=I[11]+fe[11]*be,c[12]=I[12]+fe[12]*be,c[13]=I[13]+fe[13]*be,c[14]=I[14]+fe[14]*be,c[15]=I[15]+fe[15]*be,c}function $r(c,I){return c[0]===I[0]&&c[1]===I[1]&&c[2]===I[2]&&c[3]===I[3]&&c[4]===I[4]&&c[5]===I[5]&&c[6]===I[6]&&c[7]===I[7]&&c[8]===I[8]&&c[9]===I[9]&&c[10]===I[10]&&c[11]===I[11]&&c[12]===I[12]&&c[13]===I[13]&&c[14]===I[14]&&c[15]===I[15]}function Sn(c,I){var fe=c[0],be=c[1],Oe=c[2],ze=c[3],Ue=c[4],nt=c[5],st=c[6],bt=c[7],It=c[8],fr=c[9],vr=c[10],lr=c[11],Ur=c[12],Zr=c[13],Er=c[14],sn=c[15],Kn=I[0],ua=I[1],$n=I[2],Rn=I[3],Xn=I[4],Mi=I[5],Ei=I[6],ai=I[7],di=I[8],hi=I[9],vi=I[10],Pi=I[11],Ea=I[12],Ha=I[13],$o=I[14],Vo=I[15];return Math.abs(fe-Kn)<=x.EPSILON*Math.max(1,Math.abs(fe),Math.abs(Kn))&&Math.abs(be-ua)<=x.EPSILON*Math.max(1,Math.abs(be),Math.abs(ua))&&Math.abs(Oe-$n)<=x.EPSILON*Math.max(1,Math.abs(Oe),Math.abs($n))&&Math.abs(ze-Rn)<=x.EPSILON*Math.max(1,Math.abs(ze),Math.abs(Rn))&&Math.abs(Ue-Xn)<=x.EPSILON*Math.max(1,Math.abs(Ue),Math.abs(Xn))&&Math.abs(nt-Mi)<=x.EPSILON*Math.max(1,Math.abs(nt),Math.abs(Mi))&&Math.abs(st-Ei)<=x.EPSILON*Math.max(1,Math.abs(st),Math.abs(Ei))&&Math.abs(bt-ai)<=x.EPSILON*Math.max(1,Math.abs(bt),Math.abs(ai))&&Math.abs(It-di)<=x.EPSILON*Math.max(1,Math.abs(It),Math.abs(di))&&Math.abs(fr-hi)<=x.EPSILON*Math.max(1,Math.abs(fr),Math.abs(hi))&&Math.abs(vr-vi)<=x.EPSILON*Math.max(1,Math.abs(vr),Math.abs(vi))&&Math.abs(lr-Pi)<=x.EPSILON*Math.max(1,Math.abs(lr),Math.abs(Pi))&&Math.abs(Ur-Ea)<=x.EPSILON*Math.max(1,Math.abs(Ur),Math.abs(Ea))&&Math.abs(Zr-Ha)<=x.EPSILON*Math.max(1,Math.abs(Zr),Math.abs(Ha))&&Math.abs(Er-$o)<=x.EPSILON*Math.max(1,Math.abs(Er),Math.abs($o))&&Math.abs(sn-Vo)<=x.EPSILON*Math.max(1,Math.abs(sn),Math.abs(Vo))}var kt=wn,nr=Zt,_r=G(77160);function Fr(){var c=new x.ARRAY_TYPE(4);return x.ARRAY_TYPE!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0,c[3]=0),c}function He(c){var I=new x.ARRAY_TYPE(4);return I[0]=c[0],I[1]=c[1],I[2]=c[2],I[3]=c[3],I}function Ae(c,I,fe,be){var Oe=new x.ARRAY_TYPE(4);return Oe[0]=c,Oe[1]=I,Oe[2]=fe,Oe[3]=be,Oe}function Qe(c,I){return c[0]=I[0],c[1]=I[1],c[2]=I[2],c[3]=I[3],c}function ft(c,I,fe,be,Oe){return c[0]=I,c[1]=fe,c[2]=be,c[3]=Oe,c}function ut(c,I,fe){return c[0]=I[0]+fe[0],c[1]=I[1]+fe[1],c[2]=I[2]+fe[2],c[3]=I[3]+fe[3],c}function St(c,I,fe){return c[0]=I[0]-fe[0],c[1]=I[1]-fe[1],c[2]=I[2]-fe[2],c[3]=I[3]-fe[3],c}function Qt(c,I,fe){return c[0]=I[0]*fe[0],c[1]=I[1]*fe[1],c[2]=I[2]*fe[2],c[3]=I[3]*fe[3],c}function qt(c,I,fe){return c[0]=I[0]/fe[0],c[1]=I[1]/fe[1],c[2]=I[2]/fe[2],c[3]=I[3]/fe[3],c}function Xr(c,I){return c[0]=Math.ceil(I[0]),c[1]=Math.ceil(I[1]),c[2]=Math.ceil(I[2]),c[3]=Math.ceil(I[3]),c}function vn(c,I){return c[0]=Math.floor(I[0]),c[1]=Math.floor(I[1]),c[2]=Math.floor(I[2]),c[3]=Math.floor(I[3]),c}function fn(c,I,fe){return c[0]=Math.min(I[0],fe[0]),c[1]=Math.min(I[1],fe[1]),c[2]=Math.min(I[2],fe[2]),c[3]=Math.min(I[3],fe[3]),c}function Hn(c,I,fe){return c[0]=Math.max(I[0],fe[0]),c[1]=Math.max(I[1],fe[1]),c[2]=Math.max(I[2],fe[2]),c[3]=Math.max(I[3],fe[3]),c}function kn(c,I){return c[0]=Math.round(I[0]),c[1]=Math.round(I[1]),c[2]=Math.round(I[2]),c[3]=Math.round(I[3]),c}function da(c,I,fe){return c[0]=I[0]*fe,c[1]=I[1]*fe,c[2]=I[2]*fe,c[3]=I[3]*fe,c}function ka(c,I,fe,be){return c[0]=I[0]+fe[0]*be,c[1]=I[1]+fe[1]*be,c[2]=I[2]+fe[2]*be,c[3]=I[3]+fe[3]*be,c}function Ra(c,I){var fe=I[0]-c[0],be=I[1]-c[1],Oe=I[2]-c[2],ze=I[3]-c[3];return Math.hypot(fe,be,Oe,ze)}function Aa(c,I){var fe=I[0]-c[0],be=I[1]-c[1],Oe=I[2]-c[2],ze=I[3]-c[3];return fe*fe+be*be+Oe*Oe+ze*ze}function Eo(c){var I=c[0],fe=c[1],be=c[2],Oe=c[3];return Math.hypot(I,fe,be,Oe)}function _i(c){var I=c[0],fe=c[1],be=c[2],Oe=c[3];return I*I+fe*fe+be*be+Oe*Oe}function qa(c,I){return c[0]=-I[0],c[1]=-I[1],c[2]=-I[2],c[3]=-I[3],c}function Qi(c,I){return c[0]=1/I[0],c[1]=1/I[1],c[2]=1/I[2],c[3]=1/I[3],c}function fs(c,I){var fe=I[0],be=I[1],Oe=I[2],ze=I[3],Ue=fe*fe+be*be+Oe*Oe+ze*ze;return Ue>0&&(Ue=1/Math.sqrt(Ue)),c[0]=fe*Ue,c[1]=be*Ue,c[2]=Oe*Ue,c[3]=ze*Ue,c}function oo(c,I){return c[0]*I[0]+c[1]*I[1]+c[2]*I[2]+c[3]*I[3]}function so(c,I,fe,be){var Oe=fe[0]*be[1]-fe[1]*be[0],ze=fe[0]*be[2]-fe[2]*be[0],Ue=fe[0]*be[3]-fe[3]*be[0],nt=fe[1]*be[2]-fe[2]*be[1],st=fe[1]*be[3]-fe[3]*be[1],bt=fe[2]*be[3]-fe[3]*be[2],It=I[0],fr=I[1],vr=I[2],lr=I[3];return c[0]=fr*bt-vr*st+lr*nt,c[1]=-(It*bt)+vr*Ue-lr*ze,c[2]=It*st-fr*Ue+lr*Oe,c[3]=-(It*nt)+fr*ze-vr*Oe,c}function Tr(c,I,fe,be){var Oe=I[0],ze=I[1],Ue=I[2],nt=I[3];return c[0]=Oe+be*(fe[0]-Oe),c[1]=ze+be*(fe[1]-ze),c[2]=Ue+be*(fe[2]-Ue),c[3]=nt+be*(fe[3]-nt),c}function ro(c,I){I=I||1;var fe,be,Oe,ze,Ue,nt;do fe=x.RANDOM()*2-1,be=x.RANDOM()*2-1,Ue=fe*fe+be*be;while(Ue>=1);do Oe=x.RANDOM()*2-1,ze=x.RANDOM()*2-1,nt=Oe*Oe+ze*ze;while(nt>=1);var st=Math.sqrt((1-Ue)/nt);return c[0]=I*fe,c[1]=I*be,c[2]=I*Oe*st,c[3]=I*ze*st,c}function cs(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=I[3];return c[0]=fe[0]*be+fe[4]*Oe+fe[8]*ze+fe[12]*Ue,c[1]=fe[1]*be+fe[5]*Oe+fe[9]*ze+fe[13]*Ue,c[2]=fe[2]*be+fe[6]*Oe+fe[10]*ze+fe[14]*Ue,c[3]=fe[3]*be+fe[7]*Oe+fe[11]*ze+fe[15]*Ue,c}function ja(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=fe[0],nt=fe[1],st=fe[2],bt=fe[3],It=bt*be+nt*ze-st*Oe,fr=bt*Oe+st*be-Ue*ze,vr=bt*ze+Ue*Oe-nt*be,lr=-Ue*be-nt*Oe-st*ze;return c[0]=It*bt+lr*-Ue+fr*-st-vr*-nt,c[1]=fr*bt+lr*-nt+vr*-Ue-It*-st,c[2]=vr*bt+lr*-st+It*-nt-fr*-Ue,c[3]=I[3],c}function bo(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=0,c}function Ho(c){return"vec4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+")"}function Fo(c,I){return c[0]===I[0]&&c[1]===I[1]&&c[2]===I[2]&&c[3]===I[3]}function Ui(c,I){var fe=c[0],be=c[1],Oe=c[2],ze=c[3],Ue=I[0],nt=I[1],st=I[2],bt=I[3];return Math.abs(fe-Ue)<=x.EPSILON*Math.max(1,Math.abs(fe),Math.abs(Ue))&&Math.abs(be-nt)<=x.EPSILON*Math.max(1,Math.abs(be),Math.abs(nt))&&Math.abs(Oe-st)<=x.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(st))&&Math.abs(ze-bt)<=x.EPSILON*Math.max(1,Math.abs(ze),Math.abs(bt))}var Ni=St,_s=Qt,ls=qt,mi=Ra,qi=Aa,Ms=Eo,Cs=_i,Lo=function(){var c=Fr();return function(I,fe,be,Oe,ze,Ue){var nt,st;for(fe||(fe=4),be||(be=0),Oe?st=Math.min(Oe*fe+be,I.length):st=I.length,nt=be;nt<st;nt+=fe)c[0]=I[nt],c[1]=I[nt+1],c[2]=I[nt+2],c[3]=I[nt+3],ze(c,c,Ue),I[nt]=c[0],I[nt+1]=c[1],I[nt+2]=c[2],I[nt+3]=c[3];return I}}();function uo(){var c=new x.ARRAY_TYPE(4);return x.ARRAY_TYPE!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function Ts(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c}function ds(c,I,fe){fe=fe*.5;var be=Math.sin(fe);return c[0]=be*I[0],c[1]=be*I[1],c[2]=be*I[2],c[3]=Math.cos(fe),c}function Is(c,I){var fe=Math.acos(I[3])*2,be=Math.sin(fe/2);return be>x.EPSILON?(c[0]=I[0]/be,c[1]=I[1]/be,c[2]=I[2]/be):(c[0]=1,c[1]=0,c[2]=0),fe}function Nn(c,I){var fe=ji(c,I);return Math.acos(2*fe*fe-1)}function Ji(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=fe[0],st=fe[1],bt=fe[2],It=fe[3];return c[0]=be*It+Ue*nt+Oe*bt-ze*st,c[1]=Oe*It+Ue*st+ze*nt-be*bt,c[2]=ze*It+Ue*bt+be*st-Oe*nt,c[3]=Ue*It-be*nt-Oe*st-ze*bt,c}function fo(c,I,fe){fe*=.5;var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=Math.sin(fe),st=Math.cos(fe);return c[0]=be*st+Ue*nt,c[1]=Oe*st+ze*nt,c[2]=ze*st-Oe*nt,c[3]=Ue*st-be*nt,c}function Ii(c,I,fe){fe*=.5;var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=Math.sin(fe),st=Math.cos(fe);return c[0]=be*st-ze*nt,c[1]=Oe*st+Ue*nt,c[2]=ze*st+be*nt,c[3]=Ue*st-Oe*nt,c}function As(c,I,fe){fe*=.5;var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=Math.sin(fe),st=Math.cos(fe);return c[0]=be*st+Oe*nt,c[1]=Oe*st-be*nt,c[2]=ze*st+Ue*nt,c[3]=Ue*st-ze*nt,c}function co(c,I){var fe=I[0],be=I[1],Oe=I[2];return c[0]=fe,c[1]=be,c[2]=Oe,c[3]=Math.sqrt(Math.abs(1-fe*fe-be*be-Oe*Oe)),c}function Bi(c,I){var fe=I[0],be=I[1],Oe=I[2],ze=I[3],Ue=Math.sqrt(fe*fe+be*be+Oe*Oe),nt=Math.exp(ze),st=Ue>0?nt*Math.sin(Ue)/Ue:0;return c[0]=fe*st,c[1]=be*st,c[2]=Oe*st,c[3]=nt*Math.cos(Ue),c}function es(c,I){var fe=I[0],be=I[1],Oe=I[2],ze=I[3],Ue=Math.sqrt(fe*fe+be*be+Oe*Oe),nt=Ue>0?Math.atan2(Ue,ze)/Ue:0;return c[0]=fe*nt,c[1]=be*nt,c[2]=Oe*nt,c[3]=.5*Math.log(fe*fe+be*be+Oe*Oe+ze*ze),c}function hs(c,I,fe){return es(c,I),Do(c,c,fe),Bi(c,c),c}function Go(c,I,fe,be){var Oe=I[0],ze=I[1],Ue=I[2],nt=I[3],st=fe[0],bt=fe[1],It=fe[2],fr=fe[3],vr,lr,Ur,Zr,Er;return lr=Oe*st+ze*bt+Ue*It+nt*fr,lr<0&&(lr=-lr,st=-st,bt=-bt,It=-It,fr=-fr),1-lr>x.EPSILON?(vr=Math.acos(lr),Ur=Math.sin(vr),Zr=Math.sin((1-be)*vr)/Ur,Er=Math.sin(be*vr)/Ur):(Zr=1-be,Er=be),c[0]=Zr*Oe+Er*st,c[1]=Zr*ze+Er*bt,c[2]=Zr*Ue+Er*It,c[3]=Zr*nt+Er*fr,c}function Oa(c){var I=x.RANDOM(),fe=x.RANDOM(),be=x.RANDOM(),Oe=Math.sqrt(1-I),ze=Math.sqrt(I);return c[0]=Oe*Math.sin(2*Math.PI*fe),c[1]=Oe*Math.cos(2*Math.PI*fe),c[2]=ze*Math.sin(2*Math.PI*be),c[3]=ze*Math.cos(2*Math.PI*be),c}function Zo(c,I){var fe=I[0],be=I[1],Oe=I[2],ze=I[3],Ue=fe*fe+be*be+Oe*Oe+ze*ze,nt=Ue?1/Ue:0;return c[0]=-fe*nt,c[1]=-be*nt,c[2]=-Oe*nt,c[3]=ze*nt,c}function no(c,I){return c[0]=-I[0],c[1]=-I[1],c[2]=-I[2],c[3]=I[3],c}function Wi(c,I){var fe=I[0]+I[4]+I[8],be;if(fe>0)be=Math.sqrt(fe+1),c[3]=.5*be,be=.5/be,c[0]=(I[5]-I[7])*be,c[1]=(I[6]-I[2])*be,c[2]=(I[1]-I[3])*be;else{var Oe=0;I[4]>I[0]&&(Oe=1),I[8]>I[Oe*3+Oe]&&(Oe=2);var ze=(Oe+1)%3,Ue=(Oe+2)%3;be=Math.sqrt(I[Oe*3+Oe]-I[ze*3+ze]-I[Ue*3+Ue]+1),c[Oe]=.5*be,be=.5/be,c[3]=(I[ze*3+Ue]-I[Ue*3+ze])*be,c[ze]=(I[ze*3+Oe]+I[Oe*3+ze])*be,c[Ue]=(I[Ue*3+Oe]+I[Oe*3+Ue])*be}return c}function ts(c,I,fe,be){var Oe=.5*Math.PI/180;I*=Oe,fe*=Oe,be*=Oe;var ze=Math.sin(I),Ue=Math.cos(I),nt=Math.sin(fe),st=Math.cos(fe),bt=Math.sin(be),It=Math.cos(be);return c[0]=ze*st*It-Ue*nt*bt,c[1]=Ue*nt*It+ze*st*bt,c[2]=Ue*st*bt-ze*nt*It,c[3]=Ue*st*It+ze*nt*bt,c}function vs(c){return"quat("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+")"}var Ja=He,eo=Ae,fi=Qe,Os=ft,lo=ut,rs=Ji,Do=da,ji=oo,zo=Tr,ho=Eo,Uo=ho,xo=_i,Ma=xo,Ai=fs,Hi=Fo,En=Ui,cn=function(){var c=_r.create(),I=_r.fromValues(1,0,0),fe=_r.fromValues(0,1,0);return function(be,Oe,ze){var Ue=_r.dot(Oe,ze);return Ue<-.999999?(_r.cross(c,I,Oe),_r.len(c)<1e-6&&_r.cross(c,fe,Oe),_r.normalize(c,c),ds(be,c,Math.PI),be):Ue>.999999?(be[0]=0,be[1]=0,be[2]=0,be[3]=1,be):(_r.cross(c,Oe,ze),be[0]=c[0],be[1]=c[1],be[2]=c[2],be[3]=1+Ue,Ai(be,be))}}(),Wo=function(){var c=uo(),I=uo();return function(fe,be,Oe,ze,Ue,nt){return Go(c,be,Ue,nt),Go(I,Oe,ze,nt),Go(fe,c,I,2*nt*(1-nt)),fe}}(),oi=function(){var c=Vn.create();return function(I,fe,be,Oe){return c[0]=be[0],c[3]=be[1],c[6]=be[2],c[1]=Oe[0],c[4]=Oe[1],c[7]=Oe[2],c[2]=-fe[0],c[5]=-fe[1],c[8]=-fe[2],Ai(I,Wi(I,c))}}();function No(){var c=new x.ARRAY_TYPE(8);return x.ARRAY_TYPE!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0,c[4]=0,c[5]=0,c[6]=0,c[7]=0),c[3]=1,c}function ao(c){var I=new x.ARRAY_TYPE(8);return I[0]=c[0],I[1]=c[1],I[2]=c[2],I[3]=c[3],I[4]=c[4],I[5]=c[5],I[6]=c[6],I[7]=c[7],I}function Xa(c,I,fe,be,Oe,ze,Ue,nt){var st=new x.ARRAY_TYPE(8);return st[0]=c,st[1]=I,st[2]=fe,st[3]=be,st[4]=Oe,st[5]=ze,st[6]=Ue,st[7]=nt,st}function ci(c,I,fe,be,Oe,ze,Ue){var nt=new x.ARRAY_TYPE(8);nt[0]=c,nt[1]=I,nt[2]=fe,nt[3]=be;var st=Oe*.5,bt=ze*.5,It=Ue*.5;return nt[4]=st*be+bt*fe-It*I,nt[5]=bt*be+It*c-st*fe,nt[6]=It*be+st*I-bt*c,nt[7]=-st*c-bt*I-It*fe,nt}function ns(c,I,fe){var be=fe[0]*.5,Oe=fe[1]*.5,ze=fe[2]*.5,Ue=I[0],nt=I[1],st=I[2],bt=I[3];return c[0]=Ue,c[1]=nt,c[2]=st,c[3]=bt,c[4]=be*bt+Oe*st-ze*nt,c[5]=Oe*bt+ze*Ue-be*st,c[6]=ze*bt+be*nt-Oe*Ue,c[7]=-be*Ue-Oe*nt-ze*st,c}function gs(c,I){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c[4]=I[0]*.5,c[5]=I[1]*.5,c[6]=I[2]*.5,c[7]=0,c}function Bs(c,I){return c[0]=I[0],c[1]=I[1],c[2]=I[2],c[3]=I[3],c[4]=0,c[5]=0,c[6]=0,c[7]=0,c}function Eu(c,I){var fe=uo();Ir(fe,I);var be=new x.ARRAY_TYPE(3);return Ht(be,I),ns(c,fe,be),c}function Fs(c,I){return c[0]=I[0],c[1]=I[1],c[2]=I[2],c[3]=I[3],c[4]=I[4],c[5]=I[5],c[6]=I[6],c[7]=I[7],c}function li(c){return c[0]=0,c[1]=0,c[2]=0,c[3]=1,c[4]=0,c[5]=0,c[6]=0,c[7]=0,c}function Xo(c,I,fe,be,Oe,ze,Ue,nt,st){return c[0]=I,c[1]=fe,c[2]=be,c[3]=Oe,c[4]=ze,c[5]=Ue,c[6]=nt,c[7]=st,c}var bu=fi;function ru(c,I){return c[0]=I[4],c[1]=I[5],c[2]=I[6],c[3]=I[7],c}var as=fi;function Gs(c,I){return c[4]=I[0],c[5]=I[1],c[6]=I[2],c[7]=I[3],c}function Ls(c,I){var fe=I[4],be=I[5],Oe=I[6],ze=I[7],Ue=-I[0],nt=-I[1],st=-I[2],bt=I[3];return c[0]=(fe*bt+ze*Ue+be*st-Oe*nt)*2,c[1]=(be*bt+ze*nt+Oe*Ue-fe*st)*2,c[2]=(Oe*bt+ze*st+fe*nt-be*Ue)*2,c}function Ds(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=fe[0]*.5,st=fe[1]*.5,bt=fe[2]*.5,It=I[4],fr=I[5],vr=I[6],lr=I[7];return c[0]=be,c[1]=Oe,c[2]=ze,c[3]=Ue,c[4]=Ue*nt+Oe*bt-ze*st+It,c[5]=Ue*st+ze*nt-be*bt+fr,c[6]=Ue*bt+be*st-Oe*nt+vr,c[7]=-be*nt-Oe*st-ze*bt+lr,c}function xu(c,I,fe){var be=-I[0],Oe=-I[1],ze=-I[2],Ue=I[3],nt=I[4],st=I[5],bt=I[6],It=I[7],fr=nt*Ue+It*be+st*ze-bt*Oe,vr=st*Ue+It*Oe+bt*be-nt*ze,lr=bt*Ue+It*ze+nt*Oe-st*be,Ur=It*Ue-nt*be-st*Oe-bt*ze;return fo(c,I,fe),be=c[0],Oe=c[1],ze=c[2],Ue=c[3],c[4]=fr*Ue+Ur*be+vr*ze-lr*Oe,c[5]=vr*Ue+Ur*Oe+lr*be-fr*ze,c[6]=lr*Ue+Ur*ze+fr*Oe-vr*be,c[7]=Ur*Ue-fr*be-vr*Oe-lr*ze,c}function io(c,I,fe){var be=-I[0],Oe=-I[1],ze=-I[2],Ue=I[3],nt=I[4],st=I[5],bt=I[6],It=I[7],fr=nt*Ue+It*be+st*ze-bt*Oe,vr=st*Ue+It*Oe+bt*be-nt*ze,lr=bt*Ue+It*ze+nt*Oe-st*be,Ur=It*Ue-nt*be-st*Oe-bt*ze;return Ii(c,I,fe),be=c[0],Oe=c[1],ze=c[2],Ue=c[3],c[4]=fr*Ue+Ur*be+vr*ze-lr*Oe,c[5]=vr*Ue+Ur*Oe+lr*be-fr*ze,c[6]=lr*Ue+Ur*ze+fr*Oe-vr*be,c[7]=Ur*Ue-fr*be-vr*Oe-lr*ze,c}function is(c,I,fe){var be=-I[0],Oe=-I[1],ze=-I[2],Ue=I[3],nt=I[4],st=I[5],bt=I[6],It=I[7],fr=nt*Ue+It*be+st*ze-bt*Oe,vr=st*Ue+It*Oe+bt*be-nt*ze,lr=bt*Ue+It*ze+nt*Oe-st*be,Ur=It*Ue-nt*be-st*Oe-bt*ze;return As(c,I,fe),be=c[0],Oe=c[1],ze=c[2],Ue=c[3],c[4]=fr*Ue+Ur*be+vr*ze-lr*Oe,c[5]=vr*Ue+Ur*Oe+lr*be-fr*ze,c[6]=lr*Ue+Ur*ze+fr*Oe-vr*be,c[7]=Ur*Ue-fr*be-vr*Oe-lr*ze,c}function zs(c,I,fe){var be=fe[0],Oe=fe[1],ze=fe[2],Ue=fe[3],nt=I[0],st=I[1],bt=I[2],It=I[3];return c[0]=nt*Ue+It*be+st*ze-bt*Oe,c[1]=st*Ue+It*Oe+bt*be-nt*ze,c[2]=bt*Ue+It*ze+nt*Oe-st*be,c[3]=It*Ue-nt*be-st*Oe-bt*ze,nt=I[4],st=I[5],bt=I[6],It=I[7],c[4]=nt*Ue+It*be+st*ze-bt*Oe,c[5]=st*Ue+It*Oe+bt*be-nt*ze,c[6]=bt*Ue+It*ze+nt*Oe-st*be,c[7]=It*Ue-nt*be-st*Oe-bt*ze,c}function wu(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=fe[0],st=fe[1],bt=fe[2],It=fe[3];return c[0]=be*It+Ue*nt+Oe*bt-ze*st,c[1]=Oe*It+Ue*st+ze*nt-be*bt,c[2]=ze*It+Ue*bt+be*st-Oe*nt,c[3]=Ue*It-be*nt-Oe*st-ze*bt,nt=fe[4],st=fe[5],bt=fe[6],It=fe[7],c[4]=be*It+Ue*nt+Oe*bt-ze*st,c[5]=Oe*It+Ue*st+ze*nt-be*bt,c[6]=ze*It+Ue*bt+be*st-Oe*nt,c[7]=Ue*It-be*nt-Oe*st-ze*bt,c}function nu(c,I,fe,be){if(Math.abs(be)<x.EPSILON)return Fs(c,I);var Oe=Math.hypot(fe[0],fe[1],fe[2]);be=be*.5;var ze=Math.sin(be),Ue=ze*fe[0]/Oe,nt=ze*fe[1]/Oe,st=ze*fe[2]/Oe,bt=Math.cos(be),It=I[0],fr=I[1],vr=I[2],lr=I[3];c[0]=It*bt+lr*Ue+fr*st-vr*nt,c[1]=fr*bt+lr*nt+vr*Ue-It*st,c[2]=vr*bt+lr*st+It*nt-fr*Ue,c[3]=lr*bt-It*Ue-fr*nt-vr*st;var Ur=I[4],Zr=I[5],Er=I[6],sn=I[7];return c[4]=Ur*bt+sn*Ue+Zr*st-Er*nt,c[5]=Zr*bt+sn*nt+Er*Ue-Ur*st,c[6]=Er*bt+sn*st+Ur*nt-Zr*Ue,c[7]=sn*bt-Ur*Ue-Zr*nt-Er*st,c}function Us(c,I,fe){return c[0]=I[0]+fe[0],c[1]=I[1]+fe[1],c[2]=I[2]+fe[2],c[3]=I[3]+fe[3],c[4]=I[4]+fe[4],c[5]=I[5]+fe[5],c[6]=I[6]+fe[6],c[7]=I[7]+fe[7],c}function ps(c,I,fe){var be=I[0],Oe=I[1],ze=I[2],Ue=I[3],nt=fe[4],st=fe[5],bt=fe[6],It=fe[7],fr=I[4],vr=I[5],lr=I[6],Ur=I[7],Zr=fe[0],Er=fe[1],sn=fe[2],Kn=fe[3];return c[0]=be*Kn+Ue*Zr+Oe*sn-ze*Er,c[1]=Oe*Kn+Ue*Er+ze*Zr-be*sn,c[2]=ze*Kn+Ue*sn+be*Er-Oe*Zr,c[3]=Ue*Kn-be*Zr-Oe*Er-ze*sn,c[4]=be*It+Ue*nt+Oe*bt-ze*st+fr*Kn+Ur*Zr+vr*sn-lr*Er,c[5]=Oe*It+Ue*st+ze*nt-be*bt+vr*Kn+Ur*Er+lr*Zr-fr*sn,c[6]=ze*It+Ue*bt+be*st-Oe*nt+lr*Kn+Ur*sn+fr*Er-vr*Zr,c[7]=Ue*It-be*nt-Oe*st-ze*bt+Ur*Kn-fr*Zr-vr*Er-lr*sn,c}var Ws=ps;function Xs(c,I,fe){return c[0]=I[0]*fe,c[1]=I[1]*fe,c[2]=I[2]*fe,c[3]=I[3]*fe,c[4]=I[4]*fe,c[5]=I[5]*fe,c[6]=I[6]*fe,c[7]=I[7]*fe,c}var Vs=ji;function Su(c,I,fe,be){var Oe=1-be;return Vs(I,fe)<0&&(be=-be),c[0]=I[0]*Oe+fe[0]*be,c[1]=I[1]*Oe+fe[1]*be,c[2]=I[2]*Oe+fe[2]*be,c[3]=I[3]*Oe+fe[3]*be,c[4]=I[4]*Oe+fe[4]*be,c[5]=I[5]*Oe+fe[5]*be,c[6]=I[6]*Oe+fe[6]*be,c[7]=I[7]*Oe+fe[7]*be,c}function _u(c,I){var fe=ys(I);return c[0]=-I[0]/fe,c[1]=-I[1]/fe,c[2]=-I[2]/fe,c[3]=I[3]/fe,c[4]=-I[4]/fe,c[5]=-I[5]/fe,c[6]=-I[6]/fe,c[7]=I[7]/fe,c}function Po(c,I){return c[0]=-I[0],c[1]=-I[1],c[2]=-I[2],c[3]=I[3],c[4]=-I[4],c[5]=-I[5],c[6]=-I[6],c[7]=I[7],c}var Ko=ho,Mu=Ko,ys=xo,vo=ys;function Wu(c,I){var fe=ys(I);if(fe>0){fe=Math.sqrt(fe);var be=I[0]/fe,Oe=I[1]/fe,ze=I[2]/fe,Ue=I[3]/fe,nt=I[4],st=I[5],bt=I[6],It=I[7],fr=be*nt+Oe*st+ze*bt+Ue*It;c[0]=be,c[1]=Oe,c[2]=ze,c[3]=Ue,c[4]=(nt-be*fr)/fe,c[5]=(st-Oe*fr)/fe,c[6]=(bt-ze*fr)/fe,c[7]=(It-Ue*fr)/fe}return c}function Cu(c){return"quat2("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+")"}function Xu(c,I){return c[0]===I[0]&&c[1]===I[1]&&c[2]===I[2]&&c[3]===I[3]&&c[4]===I[4]&&c[5]===I[5]&&c[6]===I[6]&&c[7]===I[7]}function au(c,I){var fe=c[0],be=c[1],Oe=c[2],ze=c[3],Ue=c[4],nt=c[5],st=c[6],bt=c[7],It=I[0],fr=I[1],vr=I[2],lr=I[3],Ur=I[4],Zr=I[5],Er=I[6],sn=I[7];return Math.abs(fe-It)<=x.EPSILON*Math.max(1,Math.abs(fe),Math.abs(It))&&Math.abs(be-fr)<=x.EPSILON*Math.max(1,Math.abs(be),Math.abs(fr))&&Math.abs(Oe-vr)<=x.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(vr))&&Math.abs(ze-lr)<=x.EPSILON*Math.max(1,Math.abs(ze),Math.abs(lr))&&Math.abs(Ue-Ur)<=x.EPSILON*Math.max(1,Math.abs(Ue),Math.abs(Ur))&&Math.abs(nt-Zr)<=x.EPSILON*Math.max(1,Math.abs(nt),Math.abs(Zr))&&Math.abs(st-Er)<=x.EPSILON*Math.max(1,Math.abs(st),Math.abs(Er))&&Math.abs(bt-sn)<=x.EPSILON*Math.max(1,Math.abs(bt),Math.abs(sn))}var uf=G(31437)},38186:function(pr){var U=[],G=[],F="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function Y(A,N){if(N=N||{},A===void 0)throw new Error(F);var O=N.prepend===!0?"prepend":"append",x=N.container!==void 0?N.container:document.querySelector("head"),E=U.indexOf(x);E===-1&&(E=U.push(x)-1,G[E]={});var y;return G[E]!==void 0&&G[E][O]!==void 0?y=G[E][O]:(y=G[E][O]=P(),O==="prepend"?x.insertBefore(y,x.childNodes[0]):x.appendChild(y)),A.charCodeAt(0)===65279&&(A=A.substr(1,A.length)),y.styleSheet?y.styleSheet.cssText+=A:y.textContent+=A,y}function P(){var A=document.createElement("style");return A.setAttribute("type","text/css"),A}pr.exports=Y,pr.exports.insertCss=Y},35171:function(pr){pr.exports=function(G){return!G||typeof G=="string"?!1:G instanceof Array||Array.isArray(G)||G.length>=0&&(G.splice instanceof Function||Object.getOwnPropertyDescriptor(G,G.length-1)&&G.constructor.name!=="String")}},81763:function(pr,U,G){var F=G(44239),Y=G(37005),P="[object Number]";function A(N){return typeof N=="number"||Y(N)&&F(N)==P}pr.exports=A},81550:function(pr){(function(U,G){pr.exports=G()})(this,function(){"use strict";var U=function(pe){return pe instanceof Uint8Array||pe instanceof Uint16Array||pe instanceof Uint32Array||pe instanceof Int8Array||pe instanceof Int16Array||pe instanceof Int32Array||pe instanceof Float32Array||pe instanceof Float64Array||pe instanceof Uint8ClampedArray},G=function(pe,qe){for(var pt=Object.keys(qe),rr=0;rr<pt.length;++rr)pe[pt[rr]]=qe[pt[rr]];return pe},F=`
`;function Y(pe){return typeof atob!="undefined"?atob(pe):"base64:"+pe}function P(pe){var qe=new Error("(regl) "+pe);throw console.error(qe),qe}function A(pe,qe){pe||P(qe)}function N(pe){return pe?": "+pe:""}function O(pe,qe,pt){pe in qe||P("unknown parameter ("+pe+")"+N(pt)+". possible values: "+Object.keys(qe).join())}function x(pe,qe){U(pe)||P("invalid parameter type"+N(qe)+". must be a typed array")}function E(pe,qe){switch(qe){case"number":return typeof pe=="number";case"object":return typeof pe=="object";case"string":return typeof pe=="string";case"boolean":return typeof pe=="boolean";case"function":return typeof pe=="function";case"undefined":return typeof pe=="undefined";case"symbol":return typeof pe=="symbol"}}function y(pe,qe,pt){E(pe,qe)||P("invalid parameter type"+N(pt)+". expected "+qe+", got "+typeof pe)}function m(pe,qe){pe>=0&&(pe|0)===pe||P("invalid parameter type, ("+pe+")"+N(qe)+". must be a nonnegative integer")}function g(pe,qe,pt){qe.indexOf(pe)<0&&P("invalid value"+N(pt)+". must be one of: "+qe)}var v=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function u(pe){Object.keys(pe).forEach(function(qe){v.indexOf(qe)<0&&P('invalid regl constructor argument "'+qe+'". must be one of '+v)})}function b(pe,qe){for(pe=pe+"";pe.length<qe;)pe=" "+pe;return pe}function T(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function D(pe,qe){this.number=pe,this.line=qe,this.errors=[]}function k(pe,qe,pt){this.file=pe,this.line=qe,this.message=pt}function V(){var pe=new Error,qe=(pe.stack||pe).toString(),pt=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(qe);if(pt)return pt[1];var rr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(qe);return rr?rr[1]:"unknown"}function J(){var pe=new Error,qe=(pe.stack||pe).toString(),pt=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(qe);if(pt)return pt[1];var rr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(qe);return rr?rr[1]:"unknown"}function W(pe,qe){var pt=pe.split(`
`),rr=1,Mr=0,er={unknown:new T,0:new T};er.unknown.name=er[0].name=qe||V(),er.unknown.lines.push(new D(0,""));for(var hr=0;hr<pt.length;++hr){var Br=pt[hr],cr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Br);if(cr)switch(cr[1]){case"line":var Wr=/(\d+)(\s+\d+)?/.exec(cr[2]);Wr&&(rr=Wr[1]|0,Wr[2]&&(Mr=Wr[2]|0,Mr in er||(er[Mr]=new T)));break;case"define":var Ar=/SHADER_NAME(_B64)?\s+(.*)$/.exec(cr[2]);Ar&&(er[Mr].name=Ar[1]?Y(Ar[2]):Ar[2]);break}er[Mr].lines.push(new D(rr++,Br))}return Object.keys(er).forEach(function(Hr){var h=er[Hr];h.lines.forEach(function(w){h.index[w.number]=w})}),er}function X(pe){var qe=[];return pe.split(`
`).forEach(function(pt){if(!(pt.length<5)){var rr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(pt);rr?qe.push(new k(rr[1]|0,rr[2]|0,rr[3].trim())):pt.length>0&&qe.push(new k("unknown",0,pt))}}),qe}function K(pe,qe){qe.forEach(function(pt){var rr=pe[pt.file];if(rr){var Mr=rr.index[pt.line];if(Mr){Mr.errors.push(pt),rr.hasErrors=!0;return}}pe.unknown.hasErrors=!0,pe.unknown.lines[0].errors.push(pt)})}function Q(pe,qe,pt,rr,Mr){if(!pe.getShaderParameter(qe,pe.COMPILE_STATUS)){var er=pe.getShaderInfoLog(qe),hr=rr===pe.FRAGMENT_SHADER?"fragment":"vertex";Ie(pt,"string",hr+" shader source must be a string",Mr);var Br=W(pt,Mr),cr=X(er);K(Br,cr),Object.keys(Br).forEach(function(Wr){var Ar=Br[Wr];if(!Ar.hasErrors)return;var Hr=[""],h=[""];function w(R,j){Hr.push(R),h.push(j||"")}w("file number "+Wr+": "+Ar.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Ar.lines.forEach(function(R){if(R.errors.length>0){w(b(R.number,4)+"|  ","background-color:yellow; font-weight:bold"),w(R.line+F,"color:red; background-color:yellow; font-weight:bold");var j=0;R.errors.forEach(function(ne){var oe=ne.message,he=/^\s*'(.*)'\s*:\s*(.*)$/.exec(oe);if(he){var me=he[1];switch(oe=he[2],me){case"assign":me="=";break}j=Math.max(R.line.indexOf(me,j),0)}else j=0;w(b("| ",6)),w(b("^^^",j+3)+F,"font-weight:bold"),w(b("| ",6)),w(oe+F,"font-weight:bold")}),w(b("| ",6)+F)}else w(b(R.number,4)+"|  "),w(R.line+F,"color:red")}),typeof document!="undefined"&&!window.chrome?(h[0]=Hr.join("%c"),console.log.apply(console,h)):console.log(Hr.join(""))}),A.raise("Error compiling "+hr+" shader, "+Br[0].name)}}function re(pe,qe,pt,rr,Mr){if(!pe.getProgramParameter(qe,pe.LINK_STATUS)){var er=pe.getProgramInfoLog(qe),hr=W(pt,Mr),Br=W(rr,Mr),cr='Error linking program with vertex shader, "'+Br[0].name+'", and fragment shader "'+hr[0].name+'"';typeof document!="undefined"?console.log("%c"+cr+F+"%c"+er,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(cr+F+er),A.raise(cr)}}function q(pe){pe._commandRef=V()}function ae(pe,qe,pt,rr){q(pe);function Mr(cr){return cr?rr.id(cr):0}pe._fragId=Mr(pe.static.frag),pe._vertId=Mr(pe.static.vert);function er(cr,Wr){Object.keys(Wr).forEach(function(Ar){cr[rr.id(Ar)]=!0})}var hr=pe._uniformSet={};er(hr,qe.static),er(hr,qe.dynamic);var Br=pe._attributeSet={};er(Br,pt.static),er(Br,pt.dynamic),pe._hasCount="count"in pe.static||"count"in pe.dynamic||"elements"in pe.static||"elements"in pe.dynamic}function ue(pe,qe){var pt=J();P(pe+" in command "+(qe||V())+(pt==="unknown"?"":" called from "+pt))}function ce(pe,qe,pt){pe||ue(qe,pt||V())}function De(pe,qe,pt,rr){pe in qe||ue("unknown parameter ("+pe+")"+N(pt)+". possible values: "+Object.keys(qe).join(),rr||V())}function Ie(pe,qe,pt,rr){E(pe,qe)||ue("invalid parameter type"+N(pt)+". expected "+qe+", got "+typeof pe,rr||V())}function Pe(pe){pe()}function we(pe,qe,pt){pe.texture?g(pe.texture._texture.internalformat,qe,"unsupported texture format for attachment"):g(pe.renderbuffer._renderbuffer.format,pt,"unsupported renderbuffer format for attachment")}var xe=33071,ve=9728,Se=9984,Te=9985,We=9986,Ge=9987,Je=5120,mt=5121,xt=5122,Ze=5123,$e=5124,gt=5125,At=5126,yt=32819,ct=32820,Kt=33635,$t=34042,jt=36193,ir={};ir[Je]=ir[mt]=1,ir[xt]=ir[Ze]=ir[jt]=ir[Kt]=ir[yt]=ir[ct]=2,ir[$e]=ir[gt]=ir[At]=ir[$t]=4;function mr(pe,qe){return pe===ct||pe===yt||pe===Kt?2:pe===$t?4:ir[pe]*qe}function tn(pe){return!(pe&pe-1)&&!!pe}function Dr(pe,qe,pt){var rr,Mr=qe.width,er=qe.height,hr=qe.channels;A(Mr>0&&Mr<=pt.maxTextureSize&&er>0&&er<=pt.maxTextureSize,"invalid texture shape"),(pe.wrapS!==xe||pe.wrapT!==xe)&&A(tn(Mr)&&tn(er),"incompatible wrap mode for texture, both width and height must be power of 2"),qe.mipmask===1?Mr!==1&&er!==1&&A(pe.minFilter!==Se&&pe.minFilter!==We&&pe.minFilter!==Te&&pe.minFilter!==Ge,"min filter requires mipmap"):(A(tn(Mr)&&tn(er),"texture must be a square power of 2 to support mipmapping"),A(qe.mipmask===(Mr<<1)-1,"missing or incomplete mipmap data")),qe.type===At&&(pt.extensions.indexOf("oes_texture_float_linear")<0&&A(pe.minFilter===ve&&pe.magFilter===ve,"filter not supported, must enable oes_texture_float_linear"),A(!pe.genMipmaps,"mipmap generation not supported with float textures"));var Br=qe.images;for(rr=0;rr<16;++rr)if(Br[rr]){var cr=Mr>>rr,Wr=er>>rr;A(qe.mipmask&1<<rr,"missing mipmap data");var Ar=Br[rr];if(A(Ar.width===cr&&Ar.height===Wr,"invalid shape for mip images"),A(Ar.format===qe.format&&Ar.internalformat===qe.internalformat&&Ar.type===qe.type,"incompatible type for mip image"),!Ar.compressed)if(Ar.data){var Hr=Math.ceil(mr(Ar.type,hr)*cr/Ar.unpackAlignment)*Ar.unpackAlignment;A(Ar.data.byteLength===Hr*Wr,"invalid data for image, buffer size is inconsistent with image format")}else Ar.element||Ar.copy}else pe.genMipmaps||A((qe.mipmask&1<<rr)===0,"extra mipmap data");qe.compressed&&A(!pe.genMipmaps,"mipmap generation for compressed images not supported")}function Dn(pe,qe,pt,rr){var Mr=pe.width,er=pe.height,hr=pe.channels;A(Mr>0&&Mr<=rr.maxTextureSize&&er>0&&er<=rr.maxTextureSize,"invalid texture shape"),A(Mr===er,"cube map must be square"),A(qe.wrapS===xe&&qe.wrapT===xe,"wrap mode not supported by cube map");for(var Br=0;Br<pt.length;++Br){var cr=pt[Br];A(cr.width===Mr&&cr.height===er,"inconsistent cube map face shape"),qe.genMipmaps&&(A(!cr.compressed,"can not generate mipmap for compressed textures"),A(cr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Wr=cr.images,Ar=0;Ar<16;++Ar){var Hr=Wr[Ar];if(Hr){var h=Mr>>Ar,w=er>>Ar;A(cr.mipmask&1<<Ar,"missing mipmap data"),A(Hr.width===h&&Hr.height===w,"invalid shape for mip images"),A(Hr.format===pe.format&&Hr.internalformat===pe.internalformat&&Hr.type===pe.type,"incompatible type for mip image"),Hr.compressed||(Hr.data?A(Hr.data.byteLength===h*w*Math.max(mr(Hr.type,hr),Hr.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Hr.element||Hr.copy)}}}}var Ve=G(A,{optional:Pe,raise:P,commandRaise:ue,command:ce,parameter:O,commandParameter:De,constructor:u,type:y,commandType:Ie,isTypedArray:x,nni:m,oneOf:g,shaderError:Q,linkError:re,callSite:J,saveCommandRef:q,saveDrawInfo:ae,framebufferFormat:we,guessCommand:V,texture2D:Dr,textureCube:Dn}),Nr=0,Fn=0,Vn=5,va=6;function aa(pe,qe){this.id=Nr++,this.type=pe,this.data=qe}function Ya(pe){return pe.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function la(pe){if(pe.length===0)return[];var qe=pe.charAt(0),pt=pe.charAt(pe.length-1);if(pe.length>1&&qe===pt&&(qe==='"'||qe==="'"))return['"'+Ya(pe.substr(1,pe.length-2))+'"'];var rr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(pe);if(rr)return la(pe.substr(0,rr.index)).concat(la(rr[1])).concat(la(pe.substr(rr.index+rr[0].length)));var Mr=pe.split(".");if(Mr.length===1)return['"'+Ya(pe)+'"'];for(var er=[],hr=0;hr<Mr.length;++hr)er=er.concat(la(Mr[hr]));return er}function Qa(pe){return"["+la(pe).join("][")+"]"}function Wa(pe,qe){return new aa(pe,Qa(qe+""))}function Da(pe){return typeof pe=="function"&&!pe._reglType||pe instanceof aa}function ar(pe,qe){if(typeof pe=="function")return new aa(Fn,pe);if(typeof pe=="number"||typeof pe=="boolean")return new aa(Vn,pe);if(Array.isArray(pe))return new aa(va,pe.map((pt,rr)=>ar(pt,qe+"["+rr+"]")));if(pe instanceof aa)return pe;Ve(!1,"invalid option type in uniform "+qe)}var Or={DynamicVariable:aa,define:Wa,isDynamic:Da,unbox:ar,accessor:Qa},Qr={next:typeof requestAnimationFrame=="function"?function(pe){return requestAnimationFrame(pe)}:function(pe){return setTimeout(pe,16)},cancel:typeof cancelAnimationFrame=="function"?function(pe){return cancelAnimationFrame(pe)}:clearTimeout},wn=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function On(){var pe={"":0},qe=[""];return{id:function(pt){var rr=pe[pt];return rr||(rr=pe[pt]=qe.length,qe.push(pt),rr)},str:function(pt){return qe[pt]}}}function Gn(pe,qe,pt){var rr=document.createElement("canvas");G(rr.style,{border:0,margin:0,padding:0,top:0,left:0}),pe.appendChild(rr),pe===document.body&&(rr.style.position="absolute",G(pe.style,{margin:0,padding:0}));function Mr(){var Br=window.innerWidth,cr=window.innerHeight;if(pe!==document.body){var Wr=pe.getBoundingClientRect();Br=Wr.right-Wr.left,cr=Wr.bottom-Wr.top}rr.width=pt*Br,rr.height=pt*cr,G(rr.style,{width:Br+"px",height:cr+"px"})}var er;pe!==document.body&&typeof ResizeObserver=="function"?(er=new ResizeObserver(function(){setTimeout(Mr)}),er.observe(pe)):window.addEventListener("resize",Mr,!1);function hr(){er?er.disconnect():window.removeEventListener("resize",Mr),pe.removeChild(rr)}return Mr(),{canvas:rr,onDestroy:hr}}function qn(pe,qe){function pt(rr){try{return pe.getContext(rr,qe)}catch(Mr){return null}}return pt("webgl")||pt("experimental-webgl")||pt("webgl-experimental")}function oa(pe){return typeof pe.nodeName=="string"&&typeof pe.appendChild=="function"&&typeof pe.getBoundingClientRect=="function"}function ya(pe){return typeof pe.drawArrays=="function"||typeof pe.drawElements=="function"}function Ka(pe){return typeof pe=="string"?pe.split():(Ve(Array.isArray(pe),"invalid extension array"),pe)}function mn(pe){return typeof pe=="string"?(Ve(typeof document!="undefined","not supported outside of DOM"),document.querySelector(pe)):pe}function jn(pe){var qe=pe||{},pt,rr,Mr,er,hr={},Br=[],cr=[],Wr=typeof window=="undefined"?1:window.devicePixelRatio,Ar=!1,Hr=function(R){R&&Ve.raise(R)},h=function(){};if(typeof qe=="string"?(Ve(typeof document!="undefined","selector queries only supported in DOM enviroments"),pt=document.querySelector(qe),Ve(pt,"invalid query string for element")):typeof qe=="object"?oa(qe)?pt=qe:ya(qe)?(er=qe,Mr=er.canvas):(Ve.constructor(qe),"gl"in qe?er=qe.gl:"canvas"in qe?Mr=mn(qe.canvas):"container"in qe&&(rr=mn(qe.container)),"attributes"in qe&&(hr=qe.attributes,Ve.type(hr,"object","invalid context attributes")),"extensions"in qe&&(Br=Ka(qe.extensions)),"optionalExtensions"in qe&&(cr=Ka(qe.optionalExtensions)),"onDone"in qe&&(Ve.type(qe.onDone,"function","invalid or missing onDone callback"),Hr=qe.onDone),"profile"in qe&&(Ar=!!qe.profile),"pixelRatio"in qe&&(Wr=+qe.pixelRatio,Ve(Wr>0,"invalid pixel ratio"))):Ve.raise("invalid arguments to regl"),pt&&(pt.nodeName.toLowerCase()==="canvas"?Mr=pt:rr=pt),!er){if(!Mr){Ve(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var w=Gn(rr||document.body,Hr,Wr);if(!w)return null;Mr=w.canvas,h=w.onDestroy}hr.premultipliedAlpha===void 0&&(hr.premultipliedAlpha=!0),er=qn(Mr,hr)}return er?{gl:er,canvas:Mr,container:rr,extensions:Br,optionalExtensions:cr,pixelRatio:Wr,profile:Ar,onDone:Hr,onDestroy:h}:(h(),Hr("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Jn(pe,qe){var pt={};function rr(hr){Ve.type(hr,"string","extension name must be string");var Br=hr.toLowerCase(),cr;try{cr=pt[Br]=pe.getExtension(Br)}catch(Wr){}return!!cr}for(var Mr=0;Mr<qe.extensions.length;++Mr){var er=qe.extensions[Mr];if(!rr(er))return qe.onDestroy(),qe.onDone('"'+er+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return qe.optionalExtensions.forEach(rr),{extensions:pt,restore:function(){Object.keys(pt).forEach(function(hr){if(pt[hr]&&!rr(hr))throw new Error("(regl): error restoring extension "+hr)})}}}function Ln(pe,qe){for(var pt=Array(pe),rr=0;rr<pe;++rr)pt[rr]=qe(rr);return pt}var ma=5120,Z=5121,Gt=5122,lt=5123,Ht=5124,Ft=5125,Ir=5126;function Sr(pe){for(var qe=16;qe<=1<<28;qe*=16)if(pe<=qe)return qe;return 0}function nn(pe){var qe,pt;return qe=(pe>65535)<<4,pe>>>=qe,pt=(pe>255)<<3,pe>>>=pt,qe|=pt,pt=(pe>15)<<2,pe>>>=pt,qe|=pt,pt=(pe>3)<<1,pe>>>=pt,qe|=pt,qe|pe>>1}function an(){var pe=Ln(8,function(){return[]});function qe(er){var hr=Sr(er),Br=pe[nn(hr)>>2];return Br.length>0?Br.pop():new ArrayBuffer(hr)}function pt(er){pe[nn(er.byteLength)>>2].push(er)}function rr(er,hr){var Br=null;switch(er){case ma:Br=new Int8Array(qe(hr),0,hr);break;case Z:Br=new Uint8Array(qe(hr),0,hr);break;case Gt:Br=new Int16Array(qe(2*hr),0,hr);break;case lt:Br=new Uint16Array(qe(2*hr),0,hr);break;case Ht:Br=new Int32Array(qe(4*hr),0,hr);break;case Ft:Br=new Uint32Array(qe(4*hr),0,hr);break;case Ir:Br=new Float32Array(qe(4*hr),0,hr);break;default:return null}return Br.length!==hr?Br.subarray(0,hr):Br}function Mr(er){pt(er.buffer)}return{alloc:qe,free:pt,allocType:rr,freeType:Mr}}var qr=an();qr.zero=an();var le=3408,ge=3410,B=3411,_=3412,M=3413,$=3414,Ee=3415,Ne=33901,Le=33902,Ye=3379,Ot=3386,Et=34921,Zt=36347,Lr=36348,or=35661,$r=35660,Sn=34930,kt=36349,nr=34076,_r=34024,Fr=7936,He=7937,Ae=7938,Qe=35724,ft=34047,ut=36063,St=34852,Qt=3553,qt=34067,Xr=34069,vn=33984,fn=6408,Hn=5126,kn=5121,da=36160,ka=36053,Ra=36064,Aa=16384,Eo=function(pe,qe){var pt=1;qe.ext_texture_filter_anisotropic&&(pt=pe.getParameter(ft));var rr=1,Mr=1;qe.webgl_draw_buffers&&(rr=pe.getParameter(St),Mr=pe.getParameter(ut));var er=!!qe.oes_texture_float;if(er){var hr=pe.createTexture();pe.bindTexture(Qt,hr),pe.texImage2D(Qt,0,fn,1,1,0,fn,Hn,null);var Br=pe.createFramebuffer();if(pe.bindFramebuffer(da,Br),pe.framebufferTexture2D(da,Ra,Qt,hr,0),pe.bindTexture(Qt,null),pe.checkFramebufferStatus(da)!==ka)er=!1;else{pe.viewport(0,0,1,1),pe.clearColor(1,0,0,1),pe.clear(Aa);var cr=qr.allocType(Hn,4);pe.readPixels(0,0,1,1,fn,Hn,cr),pe.getError()?er=!1:(pe.deleteFramebuffer(Br),pe.deleteTexture(hr),er=cr[0]===1),qr.freeType(cr)}}var Wr=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Ar=!0;if(!Wr){var Hr=pe.createTexture(),h=qr.allocType(kn,36);pe.activeTexture(vn),pe.bindTexture(qt,Hr),pe.texImage2D(Xr,0,fn,3,3,0,fn,kn,h),qr.freeType(h),pe.bindTexture(qt,null),pe.deleteTexture(Hr),Ar=!pe.getError()}return{colorBits:[pe.getParameter(ge),pe.getParameter(B),pe.getParameter(_),pe.getParameter(M)],depthBits:pe.getParameter($),stencilBits:pe.getParameter(Ee),subpixelBits:pe.getParameter(le),extensions:Object.keys(qe).filter(function(w){return!!qe[w]}),maxAnisotropic:pt,maxDrawbuffers:rr,maxColorAttachments:Mr,pointSizeDims:pe.getParameter(Ne),lineWidthDims:pe.getParameter(Le),maxViewportDims:pe.getParameter(Ot),maxCombinedTextureUnits:pe.getParameter(or),maxCubeMapSize:pe.getParameter(nr),maxRenderbufferSize:pe.getParameter(_r),maxTextureUnits:pe.getParameter(Sn),maxTextureSize:pe.getParameter(Ye),maxAttributes:pe.getParameter(Et),maxVertexUniforms:pe.getParameter(Zt),maxVertexTextureUnits:pe.getParameter($r),maxVaryingVectors:pe.getParameter(Lr),maxFragmentUniforms:pe.getParameter(kt),glsl:pe.getParameter(Qe),renderer:pe.getParameter(He),vendor:pe.getParameter(Fr),version:pe.getParameter(Ae),readFloat:er,npotTextureCube:Ar}};function _i(pe){return!!pe&&typeof pe=="object"&&Array.isArray(pe.shape)&&Array.isArray(pe.stride)&&typeof pe.offset=="number"&&pe.shape.length===pe.stride.length&&(Array.isArray(pe.data)||U(pe.data))}var qa=function(pe){return Object.keys(pe).map(function(qe){return pe[qe]})},Qi={shape:cs,flatten:ro};function fs(pe,qe,pt){for(var rr=0;rr<qe;++rr)pt[rr]=pe[rr]}function oo(pe,qe,pt,rr){for(var Mr=0,er=0;er<qe;++er)for(var hr=pe[er],Br=0;Br<pt;++Br)rr[Mr++]=hr[Br]}function so(pe,qe,pt,rr,Mr,er){for(var hr=er,Br=0;Br<qe;++Br)for(var cr=pe[Br],Wr=0;Wr<pt;++Wr)for(var Ar=cr[Wr],Hr=0;Hr<rr;++Hr)Mr[hr++]=Ar[Hr]}function Tr(pe,qe,pt,rr,Mr){for(var er=1,hr=pt+1;hr<qe.length;++hr)er*=qe[hr];var Br=qe[pt];if(qe.length-pt===4){var cr=qe[pt+1],Wr=qe[pt+2],Ar=qe[pt+3];for(hr=0;hr<Br;++hr)so(pe[hr],cr,Wr,Ar,rr,Mr),Mr+=er}else for(hr=0;hr<Br;++hr)Tr(pe[hr],qe,pt+1,rr,Mr),Mr+=er}function ro(pe,qe,pt,rr){var Mr=1;if(qe.length)for(var er=0;er<qe.length;++er)Mr*=qe[er];else Mr=0;var hr=rr||qr.allocType(pt,Mr);switch(qe.length){case 0:break;case 1:fs(pe,qe[0],hr);break;case 2:oo(pe,qe[0],qe[1],hr);break;case 3:so(pe,qe[0],qe[1],qe[2],hr,0);break;default:Tr(pe,qe,0,hr,0)}return hr}function cs(pe){for(var qe=[],pt=pe;pt.length;pt=pt[0])qe.push(pt.length);return qe}var ja={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},bo=5120,Ho=5122,Fo=5124,Ui=5121,Ni=5123,_s=5125,ls=5126,mi=5126,qi={int8:bo,int16:Ho,int32:Fo,uint8:Ui,uint16:Ni,uint32:_s,float:ls,float32:mi},Ms=35048,Cs=35040,Lo={dynamic:Ms,stream:Cs,static:35044},uo=Qi.flatten,Ts=Qi.shape,ds=35044,Is=35040,Nn=5121,Ji=5126,fo=[];fo[5120]=1,fo[5122]=2,fo[5124]=4,fo[5121]=1,fo[5123]=2,fo[5125]=4,fo[5126]=4;function Ii(pe){return ja[Object.prototype.toString.call(pe)]|0}function As(pe,qe){for(var pt=0;pt<qe.length;++pt)pe[pt]=qe[pt]}function co(pe,qe,pt,rr,Mr,er,hr){for(var Br=0,cr=0;cr<pt;++cr)for(var Wr=0;Wr<rr;++Wr)pe[Br++]=qe[Mr*cr+er*Wr+hr]}function Bi(pe,qe,pt,rr){var Mr=0,er={};function hr(j){this.id=Mr++,this.buffer=pe.createBuffer(),this.type=j,this.usage=ds,this.byteLength=0,this.dimension=1,this.dtype=Nn,this.persistentData=null,pt.profile&&(this.stats={size:0})}hr.prototype.bind=function(){pe.bindBuffer(this.type,this.buffer)},hr.prototype.destroy=function(){h(this)};var Br=[];function cr(j,ne){var oe=Br.pop();return oe||(oe=new hr(j)),oe.bind(),Hr(oe,ne,Is,0,1,!1),oe}function Wr(j){Br.push(j)}function Ar(j,ne,oe){j.byteLength=ne.byteLength,pe.bufferData(j.type,ne,oe)}function Hr(j,ne,oe,he,me,_e){var Be;if(j.usage=oe,Array.isArray(ne)){if(j.dtype=he||Ji,ne.length>0){var Ke;if(Array.isArray(ne[0])){Be=Ts(ne);for(var Xe=1,ht=1;ht<Be.length;++ht)Xe*=Be[ht];j.dimension=Xe,Ke=uo(ne,Be,j.dtype),Ar(j,Ke,oe),_e?j.persistentData=Ke:qr.freeType(Ke)}else if(typeof ne[0]=="number"){j.dimension=me;var Nt=qr.allocType(j.dtype,ne.length);As(Nt,ne),Ar(j,Nt,oe),_e?j.persistentData=Nt:qr.freeType(Nt)}else U(ne[0])?(j.dimension=ne[0].length,j.dtype=he||Ii(ne[0])||Ji,Ke=uo(ne,[ne.length,ne[0].length],j.dtype),Ar(j,Ke,oe),_e?j.persistentData=Ke:qr.freeType(Ke)):Ve.raise("invalid buffer data")}}else if(U(ne))j.dtype=he||Ii(ne),j.dimension=me,Ar(j,ne,oe),_e&&(j.persistentData=new Uint8Array(new Uint8Array(ne.buffer)));else if(_i(ne)){Be=ne.shape;var gr=ne.stride,Ut=ne.offset,Vt=0,Xt=0,Gr=0,Kr=0;Be.length===1?(Vt=Be[0],Xt=1,Gr=gr[0],Kr=0):Be.length===2?(Vt=Be[0],Xt=Be[1],Gr=gr[0],Kr=gr[1]):Ve.raise("invalid shape"),j.dtype=he||Ii(ne.data)||Ji,j.dimension=Xt;var Yr=qr.allocType(j.dtype,Vt*Xt);co(Yr,ne.data,Vt,Xt,Gr,Kr,Ut),Ar(j,Yr,oe),_e?j.persistentData=Yr:qr.freeType(Yr)}else ne instanceof ArrayBuffer?(j.dtype=Nn,j.dimension=me,Ar(j,ne,oe),_e&&(j.persistentData=new Uint8Array(new Uint8Array(ne)))):Ve.raise("invalid buffer data")}function h(j){qe.bufferCount--,rr(j);var ne=j.buffer;Ve(ne,"buffer must not be deleted already"),pe.deleteBuffer(ne),j.buffer=null,delete er[j.id]}function w(j,ne,oe,he){qe.bufferCount++;var me=new hr(ne);er[me.id]=me;function _e(Xe){var ht=ds,Nt=null,gr=0,Ut=0,Vt=1;return Array.isArray(Xe)||U(Xe)||_i(Xe)||Xe instanceof ArrayBuffer?Nt=Xe:typeof Xe=="number"?gr=Xe|0:Xe&&(Ve.type(Xe,"object","buffer arguments must be an object, a number or an array"),"data"in Xe&&(Ve(Nt===null||Array.isArray(Nt)||U(Nt)||_i(Nt),"invalid data for buffer"),Nt=Xe.data),"usage"in Xe&&(Ve.parameter(Xe.usage,Lo,"invalid buffer usage"),ht=Lo[Xe.usage]),"type"in Xe&&(Ve.parameter(Xe.type,qi,"invalid buffer type"),Ut=qi[Xe.type]),"dimension"in Xe&&(Ve.type(Xe.dimension,"number","invalid dimension"),Vt=Xe.dimension|0),"length"in Xe&&(Ve.nni(gr,"buffer length must be a nonnegative integer"),gr=Xe.length|0)),me.bind(),Nt?Hr(me,Nt,ht,Ut,Vt,he):(gr&&pe.bufferData(me.type,gr,ht),me.dtype=Ut||Nn,me.usage=ht,me.dimension=Vt,me.byteLength=gr),pt.profile&&(me.stats.size=me.byteLength*fo[me.dtype]),_e}function Be(Xe,ht){Ve(ht+Xe.byteLength<=me.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Xe.byteLength+" starting from offset "+ht+" to a buffer of size "+me.byteLength),pe.bufferSubData(me.type,ht,Xe)}function Ke(Xe,ht){var Nt=(ht||0)|0,gr;if(me.bind(),U(Xe)||Xe instanceof ArrayBuffer)Be(Xe,Nt);else if(Array.isArray(Xe)){if(Xe.length>0)if(typeof Xe[0]=="number"){var Ut=qr.allocType(me.dtype,Xe.length);As(Ut,Xe),Be(Ut,Nt),qr.freeType(Ut)}else if(Array.isArray(Xe[0])||U(Xe[0])){gr=Ts(Xe);var Vt=uo(Xe,gr,me.dtype);Be(Vt,Nt),qr.freeType(Vt)}else Ve.raise("invalid buffer data")}else if(_i(Xe)){gr=Xe.shape;var Xt=Xe.stride,Gr=0,Kr=0,Yr=0,_n=0;gr.length===1?(Gr=gr[0],Kr=1,Yr=Xt[0],_n=0):gr.length===2?(Gr=gr[0],Kr=gr[1],Yr=Xt[0],_n=Xt[1]):Ve.raise("invalid shape");var bn=Array.isArray(Xe.data)?me.dtype:Ii(Xe.data),Pn=qr.allocType(bn,Gr*Kr);co(Pn,Xe.data,Gr,Kr,Yr,_n,Xe.offset),Be(Pn,Nt),qr.freeType(Pn)}else Ve.raise("invalid data for buffer subdata");return _e}return oe||_e(j),_e._reglType="buffer",_e._buffer=me,_e.subdata=Ke,pt.profile&&(_e.stats=me.stats),_e.destroy=function(){h(me)},_e}function R(){qa(er).forEach(function(j){j.buffer=pe.createBuffer(),pe.bindBuffer(j.type,j.buffer),pe.bufferData(j.type,j.persistentData||j.byteLength,j.usage)})}return pt.profile&&(qe.getTotalBufferSize=function(){var j=0;return Object.keys(er).forEach(function(ne){j+=er[ne].stats.size}),j}),{create:w,createStream:cr,destroyStream:Wr,clear:function(){qa(er).forEach(h),Br.forEach(h)},getBuffer:function(j){return j&&j._buffer instanceof hr?j._buffer:null},restore:R,_initBuffer:Hr}}var es=0,hs=0,Go=1,Oa=1,Zo=4,no=4,Wi={points:es,point:hs,lines:Go,line:Oa,triangles:Zo,triangle:no,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ts=0,vs=1,Ja=4,eo=5120,fi=5121,Os=5122,lo=5123,rs=5124,Do=5125,ji=34963,zo=35040,ho=35044;function Uo(pe,qe,pt,rr){var Mr={},er=0,hr={uint8:fi,uint16:lo};qe.oes_element_index_uint&&(hr.uint32=Do);function Br(R){this.id=er++,Mr[this.id]=this,this.buffer=R,this.primType=Ja,this.vertCount=0,this.type=0}Br.prototype.bind=function(){this.buffer.bind()};var cr=[];function Wr(R){var j=cr.pop();return j||(j=new Br(pt.create(null,ji,!0,!1)._buffer)),Hr(j,R,zo,-1,-1,0,0),j}function Ar(R){cr.push(R)}function Hr(R,j,ne,oe,he,me,_e){R.buffer.bind();var Be;if(j){var Ke=_e;!_e&&(!U(j)||_i(j)&&!U(j.data))&&(Ke=qe.oes_element_index_uint?Do:lo),pt._initBuffer(R.buffer,j,ne,Ke,3)}else pe.bufferData(ji,me,ne),R.buffer.dtype=Be||fi,R.buffer.usage=ne,R.buffer.dimension=3,R.buffer.byteLength=me;if(Be=_e,!_e){switch(R.buffer.dtype){case fi:case eo:Be=fi;break;case lo:case Os:Be=lo;break;case Do:case rs:Be=Do;break;default:Ve.raise("unsupported type for element array")}R.buffer.dtype=Be}R.type=Be,Ve(Be!==Do||!!qe.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Xe=he;Xe<0&&(Xe=R.buffer.byteLength,Be===lo?Xe>>=1:Be===Do&&(Xe>>=2)),R.vertCount=Xe;var ht=oe;if(oe<0){ht=Ja;var Nt=R.buffer.dimension;Nt===1&&(ht=ts),Nt===2&&(ht=vs),Nt===3&&(ht=Ja)}R.primType=ht}function h(R){rr.elementsCount--,Ve(R.buffer!==null,"must not double destroy elements"),delete Mr[R.id],R.buffer.destroy(),R.buffer=null}function w(R,j){var ne=pt.create(null,ji,!0),oe=new Br(ne._buffer);rr.elementsCount++;function he(me){if(!me)ne(),oe.primType=Ja,oe.vertCount=0,oe.type=fi;else if(typeof me=="number")ne(me),oe.primType=Ja,oe.vertCount=me|0,oe.type=fi;else{var _e=null,Be=ho,Ke=-1,Xe=-1,ht=0,Nt=0;Array.isArray(me)||U(me)||_i(me)?_e=me:(Ve.type(me,"object","invalid arguments for elements"),"data"in me&&(_e=me.data,Ve(Array.isArray(_e)||U(_e)||_i(_e),"invalid data for element buffer")),"usage"in me&&(Ve.parameter(me.usage,Lo,"invalid element buffer usage"),Be=Lo[me.usage]),"primitive"in me&&(Ve.parameter(me.primitive,Wi,"invalid element buffer primitive"),Ke=Wi[me.primitive]),"count"in me&&(Ve(typeof me.count=="number"&&me.count>=0,"invalid vertex count for elements"),Xe=me.count|0),"type"in me&&(Ve.parameter(me.type,hr,"invalid buffer type"),Nt=hr[me.type]),"length"in me?ht=me.length|0:(ht=Xe,Nt===lo||Nt===Os?ht*=2:(Nt===Do||Nt===rs)&&(ht*=4))),Hr(oe,_e,Be,Ke,Xe,ht,Nt)}return he}return he(R),he._reglType="elements",he._elements=oe,he.subdata=function(me,_e){return ne.subdata(me,_e),he},he.destroy=function(){h(oe)},he}return{create:w,createStream:Wr,destroyStream:Ar,getElements:function(R){return typeof R=="function"&&R._elements instanceof Br?R._elements:null},clear:function(){qa(Mr).forEach(h)}}}var xo=new Float32Array(1),Ma=new Uint32Array(xo.buffer),Ai=5123;function Hi(pe){for(var qe=qr.allocType(Ai,pe.length),pt=0;pt<pe.length;++pt)if(isNaN(pe[pt]))qe[pt]=65535;else if(pe[pt]===1/0)qe[pt]=31744;else if(pe[pt]===-1/0)qe[pt]=64512;else{xo[0]=pe[pt];var rr=Ma[0],Mr=rr>>>31<<15,er=(rr<<1>>>24)-127,hr=rr>>13&1024-1;if(er<-24)qe[pt]=Mr;else if(er<-14){var Br=-14-er;qe[pt]=Mr+(hr+1024>>Br)}else er>15?qe[pt]=Mr+31744:qe[pt]=Mr+(er+15<<10)+hr}return qe}function En(pe){return Array.isArray(pe)||U(pe)}var cn=function(pe){return!(pe&pe-1)&&!!pe},Wo=34467,oi=3553,No=34067,ao=34069,Xa=6408,ci=6406,ns=6407,gs=6409,Bs=6410,Eu=32854,Fs=32855,li=36194,Xo=32819,bu=32820,ru=33635,as=34042,Gs=6402,Ls=34041,Ds=35904,xu=35906,io=36193,is=33776,zs=33777,wu=33778,nu=33779,Us=35986,ps=35987,Ws=34798,Xs=35840,Vs=35841,Su=35842,_u=35843,Po=36196,Ko=5121,Mu=5123,ys=5125,vo=5126,Wu=10242,Cu=10243,Xu=10497,au=33071,uf=33648,c=10240,I=10241,fe=9728,be=9729,Oe=9984,ze=9985,Ue=9986,nt=9987,st=33170,bt=4352,It=4353,fr=4354,vr=34046,lr=3317,Ur=37440,Zr=37441,Er=37443,sn=37444,Kn=33984,ua=[Oe,Ue,ze,nt],$n=[0,gs,Bs,ns,Xa],Rn={};Rn[gs]=Rn[ci]=Rn[Gs]=1,Rn[Ls]=Rn[Bs]=2,Rn[ns]=Rn[Ds]=3,Rn[Xa]=Rn[xu]=4;function Xn(pe){return"[object "+pe+"]"}var Mi=Xn("HTMLCanvasElement"),Ei=Xn("OffscreenCanvas"),ai=Xn("CanvasRenderingContext2D"),di=Xn("ImageBitmap"),hi=Xn("HTMLImageElement"),vi=Xn("HTMLVideoElement"),Pi=Object.keys(ja).concat([Mi,Ei,ai,di,hi,vi]),Ea=[];Ea[Ko]=1,Ea[vo]=4,Ea[io]=2,Ea[Mu]=2,Ea[ys]=4;var Ha=[];Ha[Eu]=2,Ha[Fs]=2,Ha[li]=2,Ha[Ls]=4,Ha[is]=.5,Ha[zs]=.5,Ha[wu]=1,Ha[nu]=1,Ha[Us]=.5,Ha[ps]=1,Ha[Ws]=1,Ha[Xs]=.5,Ha[Vs]=.25,Ha[Su]=.5,Ha[_u]=.25,Ha[Po]=.5;function $o(pe){return Array.isArray(pe)&&(pe.length===0||typeof pe[0]=="number")}function Vo(pe){if(!Array.isArray(pe))return!1;var qe=pe.length;return!(qe===0||!En(pe[0]))}function wo(pe){return Object.prototype.toString.call(pe)}function os(pe){return wo(pe)===Mi}function Of(pe){return wo(pe)===Ei}function Lf(pe){return wo(pe)===ai}function ms(pe){return wo(pe)===di}function ic(pe){return wo(pe)===hi}function oc(pe){return wo(pe)===vi}function ff(pe){if(!pe)return!1;var qe=wo(pe);return Pi.indexOf(qe)>=0?!0:$o(pe)||Vo(pe)||_i(pe)}function Df(pe){return ja[Object.prototype.toString.call(pe)]|0}function sc(pe,qe){var pt=qe.length;switch(pe.type){case Ko:case Mu:case ys:case vo:var rr=qr.allocType(pe.type,pt);rr.set(qe),pe.data=rr;break;case io:pe.data=Hi(qe);break;default:Ve.raise("unsupported texture type, must specify a typed array")}}function iu(pe,qe){return qr.allocType(pe.type===io?vo:pe.type,qe)}function uc(pe,qe){pe.type===io?(pe.data=Hi(qe),qr.freeType(qe)):pe.data=qe}function Wc(pe,qe,pt,rr,Mr,er){for(var hr=pe.width,Br=pe.height,cr=pe.channels,Wr=hr*Br*cr,Ar=iu(pe,Wr),Hr=0,h=0;h<Br;++h)for(var w=0;w<hr;++w)for(var R=0;R<cr;++R)Ar[Hr++]=qe[pt*w+rr*h+Mr*R+er];uc(pe,Ar)}function Ys(pe,qe,pt,rr,Mr,er){var hr;if(typeof Ha[pe]!="undefined"?hr=Ha[pe]:hr=Rn[pe]*Ea[qe],er&&(hr*=6),Mr){for(var Br=0,cr=pt;cr>=1;)Br+=hr*cr*cr,cr/=2;return Br}else return hr*pt*rr}function Nf(pe,qe,pt,rr,Mr,er,hr){var Br={"don't care":bt,"dont care":bt,nice:fr,fast:It},cr={repeat:Xu,clamp:au,mirror:uf},Wr={nearest:fe,linear:be},Ar=G({mipmap:nt,"nearest mipmap nearest":Oe,"linear mipmap nearest":ze,"nearest mipmap linear":Ue,"linear mipmap linear":nt},Wr),Hr={none:0,browser:sn},h={uint8:Ko,rgba4:Xo,rgb565:ru,"rgb5 a1":bu},w={alpha:ci,luminance:gs,"luminance alpha":Bs,rgb:ns,rgba:Xa,rgba4:Eu,"rgb5 a1":Fs,rgb565:li},R={};qe.ext_srgb&&(w.srgb=Ds,w.srgba=xu),qe.oes_texture_float&&(h.float32=h.float=vo),qe.oes_texture_half_float&&(h.float16=h["half float"]=io),qe.webgl_depth_texture&&(G(w,{depth:Gs,"depth stencil":Ls}),G(h,{uint16:Mu,uint32:ys,"depth stencil":as})),qe.webgl_compressed_texture_s3tc&&G(R,{"rgb s3tc dxt1":is,"rgba s3tc dxt1":zs,"rgba s3tc dxt3":wu,"rgba s3tc dxt5":nu}),qe.webgl_compressed_texture_atc&&G(R,{"rgb atc":Us,"rgba atc explicit alpha":ps,"rgba atc interpolated alpha":Ws}),qe.webgl_compressed_texture_pvrtc&&G(R,{"rgb pvrtc 4bppv1":Xs,"rgb pvrtc 2bppv1":Vs,"rgba pvrtc 4bppv1":Su,"rgba pvrtc 2bppv1":_u}),qe.webgl_compressed_texture_etc1&&(R["rgb etc1"]=Po);var j=Array.prototype.slice.call(pe.getParameter(Wo));Object.keys(R).forEach(function(dt){var sr=R[dt];j.indexOf(sr)>=0&&(w[dt]=sr)});var ne=Object.keys(w);pt.textureFormats=ne;var oe=[];Object.keys(w).forEach(function(dt){var sr=w[dt];oe[sr]=dt});var he=[];Object.keys(h).forEach(function(dt){var sr=h[dt];he[sr]=dt});var me=[];Object.keys(Wr).forEach(function(dt){var sr=Wr[dt];me[sr]=dt});var _e=[];Object.keys(Ar).forEach(function(dt){var sr=Ar[dt];_e[sr]=dt});var Be=[];Object.keys(cr).forEach(function(dt){var sr=cr[dt];Be[sr]=dt});var Ke=ne.reduce(function(dt,sr){var tr=w[sr];return tr===gs||tr===ci||tr===gs||tr===Bs||tr===Gs||tr===Ls||qe.ext_srgb&&(tr===Ds||tr===xu)?dt[tr]=tr:tr===Fs||sr.indexOf("rgba")>=0?dt[tr]=Xa:dt[tr]=ns,dt},{});function Xe(){this.internalformat=Xa,this.format=Xa,this.type=Ko,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=sn,this.width=0,this.height=0,this.channels=0}function ht(dt,sr){dt.internalformat=sr.internalformat,dt.format=sr.format,dt.type=sr.type,dt.compressed=sr.compressed,dt.premultiplyAlpha=sr.premultiplyAlpha,dt.flipY=sr.flipY,dt.unpackAlignment=sr.unpackAlignment,dt.colorSpace=sr.colorSpace,dt.width=sr.width,dt.height=sr.height,dt.channels=sr.channels}function Nt(dt,sr){if(!(typeof sr!="object"||!sr)){if("premultiplyAlpha"in sr&&(Ve.type(sr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),dt.premultiplyAlpha=sr.premultiplyAlpha),"flipY"in sr&&(Ve.type(sr.flipY,"boolean","invalid texture flip"),dt.flipY=sr.flipY),"alignment"in sr&&(Ve.oneOf(sr.alignment,[1,2,4,8],"invalid texture unpack alignment"),dt.unpackAlignment=sr.alignment),"colorSpace"in sr&&(Ve.parameter(sr.colorSpace,Hr,"invalid colorSpace"),dt.colorSpace=Hr[sr.colorSpace]),"type"in sr){var tr=sr.type;Ve(qe.oes_texture_float||!(tr==="float"||tr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Ve(qe.oes_texture_half_float||!(tr==="half float"||tr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Ve(qe.webgl_depth_texture||!(tr==="uint16"||tr==="uint32"||tr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ve.parameter(tr,h,"invalid texture type"),dt.type=h[tr]}var gn=dt.width,pa=dt.height,it=dt.channels,je=!1;"shape"in sr?(Ve(Array.isArray(sr.shape)&&sr.shape.length>=2,"shape must be an array"),gn=sr.shape[0],pa=sr.shape[1],sr.shape.length===3&&(it=sr.shape[2],Ve(it>0&&it<=4,"invalid number of channels"),je=!0),Ve(gn>=0&&gn<=pt.maxTextureSize,"invalid width"),Ve(pa>=0&&pa<=pt.maxTextureSize,"invalid height")):("radius"in sr&&(gn=pa=sr.radius,Ve(gn>=0&&gn<=pt.maxTextureSize,"invalid radius")),"width"in sr&&(gn=sr.width,Ve(gn>=0&&gn<=pt.maxTextureSize,"invalid width")),"height"in sr&&(pa=sr.height,Ve(pa>=0&&pa<=pt.maxTextureSize,"invalid height")),"channels"in sr&&(it=sr.channels,Ve(it>0&&it<=4,"invalid number of channels"),je=!0)),dt.width=gn|0,dt.height=pa|0,dt.channels=it|0;var Ct=!1;if("format"in sr){var Pt=sr.format;Ve(qe.webgl_depth_texture||!(Pt==="depth"||Pt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Ve.parameter(Pt,w,"invalid texture format");var Yt=dt.internalformat=w[Pt];dt.format=Ke[Yt],Pt in h&&("type"in sr||(dt.type=h[Pt])),Pt in R&&(dt.compressed=!0),Ct=!0}!je&&Ct?dt.channels=Rn[dt.format]:je&&!Ct?dt.channels!==$n[dt.format]&&(dt.format=dt.internalformat=$n[dt.channels]):Ct&&je&&Ve(dt.channels===Rn[dt.format],"number of channels inconsistent with specified format")}}function gr(dt){pe.pixelStorei(Ur,dt.flipY),pe.pixelStorei(Zr,dt.premultiplyAlpha),pe.pixelStorei(Er,dt.colorSpace),pe.pixelStorei(lr,dt.unpackAlignment)}function Ut(){Xe.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Vt(dt,sr){var tr=null;if(ff(sr)?tr=sr:sr&&(Ve.type(sr,"object","invalid pixel data type"),Nt(dt,sr),"x"in sr&&(dt.xOffset=sr.x|0),"y"in sr&&(dt.yOffset=sr.y|0),ff(sr.data)&&(tr=sr.data)),Ve(!dt.compressed||tr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),sr.copy){Ve(!tr,"can not specify copy and data field for the same texture");var gn=Mr.viewportWidth,pa=Mr.viewportHeight;dt.width=dt.width||gn-dt.xOffset,dt.height=dt.height||pa-dt.yOffset,dt.needsCopy=!0,Ve(dt.xOffset>=0&&dt.xOffset<gn&&dt.yOffset>=0&&dt.yOffset<pa&&dt.width>0&&dt.width<=gn&&dt.height>0&&dt.height<=pa,"copy texture read out of bounds")}else if(!tr)dt.width=dt.width||1,dt.height=dt.height||1,dt.channels=dt.channels||4;else if(U(tr))dt.channels=dt.channels||4,dt.data=tr,!("type"in sr)&&dt.type===Ko&&(dt.type=Df(tr));else if($o(tr))dt.channels=dt.channels||4,sc(dt,tr),dt.alignment=1,dt.needsFree=!0;else if(_i(tr)){var it=tr.data;!Array.isArray(it)&&dt.type===Ko&&(dt.type=Df(it));var je=tr.shape,Ct=tr.stride,Pt,Yt,Lt,Tt,Bt,ot;je.length===3?(Lt=je[2],ot=Ct[2]):(Ve(je.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Lt=1,ot=1),Pt=je[0],Yt=je[1],Tt=Ct[0],Bt=Ct[1],dt.alignment=1,dt.width=Pt,dt.height=Yt,dt.channels=Lt,dt.format=dt.internalformat=$n[Lt],dt.needsFree=!0,Wc(dt,it,Tt,Bt,ot,tr.offset)}else if(os(tr)||Of(tr)||Lf(tr))os(tr)||Of(tr)?dt.element=tr:dt.element=tr.canvas,dt.width=dt.element.width,dt.height=dt.element.height,dt.channels=4;else if(ms(tr))dt.element=tr,dt.width=tr.width,dt.height=tr.height,dt.channels=4;else if(ic(tr))dt.element=tr,dt.width=tr.naturalWidth,dt.height=tr.naturalHeight,dt.channels=4;else if(oc(tr))dt.element=tr,dt.width=tr.videoWidth,dt.height=tr.videoHeight,dt.channels=4;else if(Vo(tr)){var wt=dt.width||tr[0].length,rt=dt.height||tr.length,Wt=dt.channels;En(tr[0][0])?Wt=Wt||tr[0][0].length:Wt=Wt||1;for(var Jt=Qi.shape(tr),wr=1,xr=0;xr<Jt.length;++xr)wr*=Jt[xr];var dr=iu(dt,wr);Qi.flatten(tr,Jt,"",dr),uc(dt,dr),dt.alignment=1,dt.width=wt,dt.height=rt,dt.channels=Wt,dt.format=dt.internalformat=$n[Wt],dt.needsFree=!0}dt.type===vo?Ve(pt.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):dt.type===io&&Ve(pt.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Xt(dt,sr,tr){var gn=dt.element,pa=dt.data,it=dt.internalformat,je=dt.format,Ct=dt.type,Pt=dt.width,Yt=dt.height;gr(dt),gn?pe.texImage2D(sr,tr,je,je,Ct,gn):dt.compressed?pe.compressedTexImage2D(sr,tr,it,Pt,Yt,0,pa):dt.needsCopy?(rr(),pe.copyTexImage2D(sr,tr,je,dt.xOffset,dt.yOffset,Pt,Yt,0)):pe.texImage2D(sr,tr,je,Pt,Yt,0,je,Ct,pa||null)}function Gr(dt,sr,tr,gn,pa){var it=dt.element,je=dt.data,Ct=dt.internalformat,Pt=dt.format,Yt=dt.type,Lt=dt.width,Tt=dt.height;gr(dt),it?pe.texSubImage2D(sr,pa,tr,gn,Pt,Yt,it):dt.compressed?pe.compressedTexSubImage2D(sr,pa,tr,gn,Ct,Lt,Tt,je):dt.needsCopy?(rr(),pe.copyTexSubImage2D(sr,pa,tr,gn,dt.xOffset,dt.yOffset,Lt,Tt)):pe.texSubImage2D(sr,pa,tr,gn,Lt,Tt,Pt,Yt,je)}var Kr=[];function Yr(){return Kr.pop()||new Ut}function _n(dt){dt.needsFree&&qr.freeType(dt.data),Ut.call(dt),Kr.push(dt)}function bn(){Xe.call(this),this.genMipmaps=!1,this.mipmapHint=bt,this.mipmask=0,this.images=Array(16)}function Pn(dt,sr,tr){var gn=dt.images[0]=Yr();dt.mipmask=1,gn.width=dt.width=sr,gn.height=dt.height=tr,gn.channels=dt.channels=4}function Qn(dt,sr){var tr=null;if(ff(sr))tr=dt.images[0]=Yr(),ht(tr,dt),Vt(tr,sr),dt.mipmask=1;else if(Nt(dt,sr),Array.isArray(sr.mipmap))for(var gn=sr.mipmap,pa=0;pa<gn.length;++pa)tr=dt.images[pa]=Yr(),ht(tr,dt),tr.width>>=pa,tr.height>>=pa,Vt(tr,gn[pa]),dt.mipmask|=1<<pa;else tr=dt.images[0]=Yr(),ht(tr,dt),Vt(tr,sr),dt.mipmask=1;ht(dt,dt.images[0]),dt.compressed&&(dt.internalformat===is||dt.internalformat===zs||dt.internalformat===wu||dt.internalformat===nu)&&Ve(dt.width%4===0&&dt.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function zn(dt,sr){for(var tr=dt.images,gn=0;gn<tr.length;++gn){if(!tr[gn])return;Xt(tr[gn],sr,gn)}}var ei=[];function ea(){var dt=ei.pop()||new bn;Xe.call(dt),dt.mipmask=0;for(var sr=0;sr<16;++sr)dt.images[sr]=null;return dt}function Li(dt){for(var sr=dt.images,tr=0;tr<sr.length;++tr)sr[tr]&&_n(sr[tr]),sr[tr]=null;ei.push(dt)}function ti(){this.minFilter=fe,this.magFilter=fe,this.wrapS=au,this.wrapT=au,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=bt}function _a(dt,sr){if("min"in sr){var tr=sr.min;Ve.parameter(tr,Ar),dt.minFilter=Ar[tr],ua.indexOf(dt.minFilter)>=0&&!("faces"in sr)&&(dt.genMipmaps=!0)}if("mag"in sr){var gn=sr.mag;Ve.parameter(gn,Wr),dt.magFilter=Wr[gn]}var pa=dt.wrapS,it=dt.wrapT;if("wrap"in sr){var je=sr.wrap;typeof je=="string"?(Ve.parameter(je,cr),pa=it=cr[je]):Array.isArray(je)&&(Ve.parameter(je[0],cr),Ve.parameter(je[1],cr),pa=cr[je[0]],it=cr[je[1]])}else{if("wrapS"in sr){var Ct=sr.wrapS;Ve.parameter(Ct,cr),pa=cr[Ct]}if("wrapT"in sr){var Pt=sr.wrapT;Ve.parameter(Pt,cr),it=cr[Pt]}}if(dt.wrapS=pa,dt.wrapT=it,"anisotropic"in sr){var Yt=sr.anisotropic;Ve(typeof Yt=="number"&&Yt>=1&&Yt<=pt.maxAnisotropic,"aniso samples must be between 1 and "),dt.anisotropic=sr.anisotropic}if("mipmap"in sr){var Lt=!1;switch(typeof sr.mipmap){case"string":Ve.parameter(sr.mipmap,Br,"invalid mipmap hint"),dt.mipmapHint=Br[sr.mipmap],dt.genMipmaps=!0,Lt=!0;break;case"boolean":Lt=dt.genMipmaps=sr.mipmap;break;case"object":Ve(Array.isArray(sr.mipmap),"invalid mipmap type"),dt.genMipmaps=!1,Lt=!0;break;default:Ve.raise("invalid mipmap type")}Lt&&!("min"in sr)&&(dt.minFilter=Oe)}}function bi(dt,sr){pe.texParameteri(sr,I,dt.minFilter),pe.texParameteri(sr,c,dt.magFilter),pe.texParameteri(sr,Wu,dt.wrapS),pe.texParameteri(sr,Cu,dt.wrapT),qe.ext_texture_filter_anisotropic&&pe.texParameteri(sr,vr,dt.anisotropic),dt.genMipmaps&&(pe.hint(st,dt.mipmapHint),pe.generateMipmap(sr))}var Di=0,Ki={},Mo=pt.maxTextureUnits,Xi=Array(Mo).map(function(){return null});function ca(dt){Xe.call(this),this.mipmask=0,this.internalformat=Xa,this.id=Di++,this.refCount=1,this.target=dt,this.texture=pe.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new ti,hr.profile&&(this.stats={size:0})}function Co(dt){pe.activeTexture(Kn),pe.bindTexture(dt.target,dt.texture)}function Va(){var dt=Xi[0];dt?pe.bindTexture(dt.target,dt.texture):pe.bindTexture(oi,null)}function Bn(dt){var sr=dt.texture;Ve(sr,"must not double destroy texture");var tr=dt.unit,gn=dt.target;tr>=0&&(pe.activeTexture(Kn+tr),pe.bindTexture(gn,null),Xi[tr]=null),pe.deleteTexture(sr),dt.texture=null,dt.params=null,dt.pixels=null,dt.refCount=0,delete Ki[dt.id],er.textureCount--}G(ca.prototype,{bind:function(){var dt=this;dt.bindCount+=1;var sr=dt.unit;if(sr<0){for(var tr=0;tr<Mo;++tr){var gn=Xi[tr];if(gn){if(gn.bindCount>0)continue;gn.unit=-1}Xi[tr]=dt,sr=tr;break}sr>=Mo&&Ve.raise("insufficient number of texture units"),hr.profile&&er.maxTextureUnits<sr+1&&(er.maxTextureUnits=sr+1),dt.unit=sr,pe.activeTexture(Kn+sr),pe.bindTexture(dt.target,dt.texture)}return sr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Bn(this)}});function ra(dt,sr){var tr=new ca(oi);Ki[tr.id]=tr,er.textureCount++;function gn(je,Ct){var Pt=tr.texInfo;ti.call(Pt);var Yt=ea();return typeof je=="number"?typeof Ct=="number"?Pn(Yt,je|0,Ct|0):Pn(Yt,je|0,je|0):je?(Ve.type(je,"object","invalid arguments to regl.texture"),_a(Pt,je),Qn(Yt,je)):Pn(Yt,1,1),Pt.genMipmaps&&(Yt.mipmask=(Yt.width<<1)-1),tr.mipmask=Yt.mipmask,ht(tr,Yt),Ve.texture2D(Pt,Yt,pt),tr.internalformat=Yt.internalformat,gn.width=Yt.width,gn.height=Yt.height,Co(tr),zn(Yt,oi),bi(Pt,oi),Va(),Li(Yt),hr.profile&&(tr.stats.size=Ys(tr.internalformat,tr.type,Yt.width,Yt.height,Pt.genMipmaps,!1)),gn.format=oe[tr.internalformat],gn.type=he[tr.type],gn.mag=me[Pt.magFilter],gn.min=_e[Pt.minFilter],gn.wrapS=Be[Pt.wrapS],gn.wrapT=Be[Pt.wrapT],gn}function pa(je,Ct,Pt,Yt){Ve(!!je,"must specify image data");var Lt=Ct|0,Tt=Pt|0,Bt=Yt|0,ot=Yr();return ht(ot,tr),ot.width=0,ot.height=0,Vt(ot,je),ot.width=ot.width||(tr.width>>Bt)-Lt,ot.height=ot.height||(tr.height>>Bt)-Tt,Ve(tr.type===ot.type&&tr.format===ot.format&&tr.internalformat===ot.internalformat,"incompatible format for texture.subimage"),Ve(Lt>=0&&Tt>=0&&Lt+ot.width<=tr.width&&Tt+ot.height<=tr.height,"texture.subimage write out of bounds"),Ve(tr.mipmask&1<<Bt,"missing mipmap data"),Ve(ot.data||ot.element||ot.needsCopy,"missing image data"),Co(tr),Gr(ot,oi,Lt,Tt,Bt),Va(),_n(ot),gn}function it(je,Ct){var Pt=je|0,Yt=Ct|0||Pt;if(Pt===tr.width&&Yt===tr.height)return gn;gn.width=tr.width=Pt,gn.height=tr.height=Yt,Co(tr);for(var Lt=0;tr.mipmask>>Lt;++Lt){var Tt=Pt>>Lt,Bt=Yt>>Lt;if(!Tt||!Bt)break;pe.texImage2D(oi,Lt,tr.format,Tt,Bt,0,tr.format,tr.type,null)}return Va(),hr.profile&&(tr.stats.size=Ys(tr.internalformat,tr.type,Pt,Yt,!1,!1)),gn}return gn(dt,sr),gn.subimage=pa,gn.resize=it,gn._reglType="texture2d",gn._texture=tr,hr.profile&&(gn.stats=tr.stats),gn.destroy=function(){tr.decRef()},gn}function ga(dt,sr,tr,gn,pa,it){var je=new ca(No);Ki[je.id]=je,er.cubeCount++;var Ct=new Array(6);function Pt(Tt,Bt,ot,wt,rt,Wt){var Jt,wr=je.texInfo;for(ti.call(wr),Jt=0;Jt<6;++Jt)Ct[Jt]=ea();if(typeof Tt=="number"||!Tt){var xr=Tt|0||1;for(Jt=0;Jt<6;++Jt)Pn(Ct[Jt],xr,xr)}else if(typeof Tt=="object")if(Bt)Qn(Ct[0],Tt),Qn(Ct[1],Bt),Qn(Ct[2],ot),Qn(Ct[3],wt),Qn(Ct[4],rt),Qn(Ct[5],Wt);else if(_a(wr,Tt),Nt(je,Tt),"faces"in Tt){var dr=Tt.faces;for(Ve(Array.isArray(dr)&&dr.length===6,"cube faces must be a length 6 array"),Jt=0;Jt<6;++Jt)Ve(typeof dr[Jt]=="object"&&!!dr[Jt],"invalid input for cube map face"),ht(Ct[Jt],je),Qn(Ct[Jt],dr[Jt])}else for(Jt=0;Jt<6;++Jt)Qn(Ct[Jt],Tt);else Ve.raise("invalid arguments to cube map");for(ht(je,Ct[0]),pt.npotTextureCube||Ve(cn(je.width)&&cn(je.height),"your browser does not support non power or two texture dimensions"),wr.genMipmaps?je.mipmask=(Ct[0].width<<1)-1:je.mipmask=Ct[0].mipmask,Ve.textureCube(je,wr,Ct,pt),je.internalformat=Ct[0].internalformat,Pt.width=Ct[0].width,Pt.height=Ct[0].height,Co(je),Jt=0;Jt<6;++Jt)zn(Ct[Jt],ao+Jt);for(bi(wr,No),Va(),hr.profile&&(je.stats.size=Ys(je.internalformat,je.type,Pt.width,Pt.height,wr.genMipmaps,!0)),Pt.format=oe[je.internalformat],Pt.type=he[je.type],Pt.mag=me[wr.magFilter],Pt.min=_e[wr.minFilter],Pt.wrapS=Be[wr.wrapS],Pt.wrapT=Be[wr.wrapT],Jt=0;Jt<6;++Jt)Li(Ct[Jt]);return Pt}function Yt(Tt,Bt,ot,wt,rt){Ve(!!Bt,"must specify image data"),Ve(typeof Tt=="number"&&Tt===(Tt|0)&&Tt>=0&&Tt<6,"invalid face");var Wt=ot|0,Jt=wt|0,wr=rt|0,xr=Yr();return ht(xr,je),xr.width=0,xr.height=0,Vt(xr,Bt),xr.width=xr.width||(je.width>>wr)-Wt,xr.height=xr.height||(je.height>>wr)-Jt,Ve(je.type===xr.type&&je.format===xr.format&&je.internalformat===xr.internalformat,"incompatible format for texture.subimage"),Ve(Wt>=0&&Jt>=0&&Wt+xr.width<=je.width&&Jt+xr.height<=je.height,"texture.subimage write out of bounds"),Ve(je.mipmask&1<<wr,"missing mipmap data"),Ve(xr.data||xr.element||xr.needsCopy,"missing image data"),Co(je),Gr(xr,ao+Tt,Wt,Jt,wr),Va(),_n(xr),Pt}function Lt(Tt){var Bt=Tt|0;if(Bt!==je.width){Pt.width=je.width=Bt,Pt.height=je.height=Bt,Co(je);for(var ot=0;ot<6;++ot)for(var wt=0;je.mipmask>>wt;++wt)pe.texImage2D(ao+ot,wt,je.format,Bt>>wt,Bt>>wt,0,je.format,je.type,null);return Va(),hr.profile&&(je.stats.size=Ys(je.internalformat,je.type,Pt.width,Pt.height,!1,!0)),Pt}}return Pt(dt,sr,tr,gn,pa,it),Pt.subimage=Yt,Pt.resize=Lt,Pt._reglType="textureCube",Pt._texture=je,hr.profile&&(Pt.stats=je.stats),Pt.destroy=function(){je.decRef()},Pt}function ui(){for(var dt=0;dt<Mo;++dt)pe.activeTexture(Kn+dt),pe.bindTexture(oi,null),Xi[dt]=null;qa(Ki).forEach(Bn),er.cubeCount=0,er.textureCount=0}hr.profile&&(er.getTotalTextureSize=function(){var dt=0;return Object.keys(Ki).forEach(function(sr){dt+=Ki[sr].stats.size}),dt});function us(){for(var dt=0;dt<Mo;++dt){var sr=Xi[dt];sr&&(sr.bindCount=0,sr.unit=-1,Xi[dt]=null)}qa(Ki).forEach(function(tr){tr.texture=pe.createTexture(),pe.bindTexture(tr.target,tr.texture);for(var gn=0;gn<32;++gn)if(tr.mipmask&1<<gn)if(tr.target===oi)pe.texImage2D(oi,gn,tr.internalformat,tr.width>>gn,tr.height>>gn,0,tr.internalformat,tr.type,null);else for(var pa=0;pa<6;++pa)pe.texImage2D(ao+pa,gn,tr.internalformat,tr.width>>gn,tr.height>>gn,0,tr.internalformat,tr.type,null);bi(tr.texInfo,tr.target)})}function $s(){for(var dt=0;dt<Mo;++dt){var sr=Xi[dt];sr&&(sr.bindCount=0,sr.unit=-1,Xi[dt]=null),pe.activeTexture(Kn+dt),pe.bindTexture(oi,null),pe.bindTexture(No,null)}}return{create2D:ra,createCube:ga,clear:ui,getTexture:function(dt){return null},restore:us,refresh:$s}}var ln=36161,ou=32854,Ca=32855,Vu=36194,js=33189,Ns=36168,cf=34041,Tu=35907,Yu=34836,lf=34842,Pf=34843,go=[];go[ou]=2,go[Ca]=2,go[Vu]=2,go[js]=2,go[Ns]=1,go[cf]=4,go[Tu]=4,go[Yu]=16,go[lf]=8,go[Pf]=6;function ju(pe,qe,pt){return go[pe]*qe*pt}var te=function(pe,qe,pt,rr,Mr){var er={rgba4:ou,rgb565:Vu,"rgb5 a1":Ca,depth:js,stencil:Ns,"depth stencil":cf};qe.ext_srgb&&(er.srgba=Tu),qe.ext_color_buffer_half_float&&(er.rgba16f=lf,er.rgb16f=Pf),qe.webgl_color_buffer_float&&(er.rgba32f=Yu);var hr=[];Object.keys(er).forEach(function(w){var R=er[w];hr[R]=w});var Br=0,cr={};function Wr(w){this.id=Br++,this.refCount=1,this.renderbuffer=w,this.format=ou,this.width=0,this.height=0,Mr.profile&&(this.stats={size:0})}Wr.prototype.decRef=function(){--this.refCount<=0&&Ar(this)};function Ar(w){var R=w.renderbuffer;Ve(R,"must not double destroy renderbuffer"),pe.bindRenderbuffer(ln,null),pe.deleteRenderbuffer(R),w.renderbuffer=null,w.refCount=0,delete cr[w.id],rr.renderbufferCount--}function Hr(w,R){var j=new Wr(pe.createRenderbuffer());cr[j.id]=j,rr.renderbufferCount++;function ne(he,me){var _e=0,Be=0,Ke=ou;if(typeof he=="object"&&he){var Xe=he;if("shape"in Xe){var ht=Xe.shape;Ve(Array.isArray(ht)&&ht.length>=2,"invalid renderbuffer shape"),_e=ht[0]|0,Be=ht[1]|0}else"radius"in Xe&&(_e=Be=Xe.radius|0),"width"in Xe&&(_e=Xe.width|0),"height"in Xe&&(Be=Xe.height|0);"format"in Xe&&(Ve.parameter(Xe.format,er,"invalid renderbuffer format"),Ke=er[Xe.format])}else typeof he=="number"?(_e=he|0,typeof me=="number"?Be=me|0:Be=_e):he?Ve.raise("invalid arguments to renderbuffer constructor"):_e=Be=1;if(Ve(_e>0&&Be>0&&_e<=pt.maxRenderbufferSize&&Be<=pt.maxRenderbufferSize,"invalid renderbuffer size"),!(_e===j.width&&Be===j.height&&Ke===j.format))return ne.width=j.width=_e,ne.height=j.height=Be,j.format=Ke,pe.bindRenderbuffer(ln,j.renderbuffer),pe.renderbufferStorage(ln,Ke,_e,Be),Ve(pe.getError()===0,"invalid render buffer format"),Mr.profile&&(j.stats.size=ju(j.format,j.width,j.height)),ne.format=hr[j.format],ne}function oe(he,me){var _e=he|0,Be=me|0||_e;return _e===j.width&&Be===j.height||(Ve(_e>0&&Be>0&&_e<=pt.maxRenderbufferSize&&Be<=pt.maxRenderbufferSize,"invalid renderbuffer size"),ne.width=j.width=_e,ne.height=j.height=Be,pe.bindRenderbuffer(ln,j.renderbuffer),pe.renderbufferStorage(ln,j.format,_e,Be),Ve(pe.getError()===0,"invalid render buffer format"),Mr.profile&&(j.stats.size=ju(j.format,j.width,j.height))),ne}return ne(w,R),ne.resize=oe,ne._reglType="renderbuffer",ne._renderbuffer=j,Mr.profile&&(ne.stats=j.stats),ne.destroy=function(){j.decRef()},ne}Mr.profile&&(rr.getTotalRenderbufferSize=function(){var w=0;return Object.keys(cr).forEach(function(R){w+=cr[R].stats.size}),w});function h(){qa(cr).forEach(function(w){w.renderbuffer=pe.createRenderbuffer(),pe.bindRenderbuffer(ln,w.renderbuffer),pe.renderbufferStorage(ln,w.format,w.width,w.height)}),pe.bindRenderbuffer(ln,null)}return{create:Hr,clear:function(){qa(cr).forEach(Ar)},restore:h}},de=36160,Me=36161,Fe=3553,tt=34069,Dt=36064,Rt=36096,ur=36128,Pr=33306,Rr=36053,hn=36054,pn=36055,on=36057,Yn=36061,sa=36193,ta=5121,In=5126,ba=6407,Mn=6408,ha=6402,Zn=[ba,Mn],Cn=[];Cn[Mn]=4,Cn[ba]=3;var fa=[];fa[ta]=1,fa[In]=4,fa[sa]=2;var Fa=32854,ii=32855,Ga=36194,Na=33189,si=36168,Oi=34041,gi=35907,Iu=34836,kf=34842,Ps=34843,su=[Fa,ii,Ga,gi,kf,Ps,Iu],Yo={};Yo[Rr]="complete",Yo[hn]="incomplete attachment",Yo[on]="incomplete dimensions",Yo[pn]="incomplete, missing attachment",Yo[Yn]="unsupported";function Hu(pe,qe,pt,rr,Mr,er){var hr={cur:null,next:null,dirty:!1,setFBO:null},Br=["rgba"],cr=["rgba4","rgb565","rgb5 a1"];qe.ext_srgb&&cr.push("srgba"),qe.ext_color_buffer_half_float&&cr.push("rgba16f","rgb16f"),qe.webgl_color_buffer_float&&cr.push("rgba32f");var Wr=["uint8"];qe.oes_texture_half_float&&Wr.push("half float","float16"),qe.oes_texture_float&&Wr.push("float","float32");function Ar(Ut,Vt,Xt){this.target=Ut,this.texture=Vt,this.renderbuffer=Xt;var Gr=0,Kr=0;Vt?(Gr=Vt.width,Kr=Vt.height):Xt&&(Gr=Xt.width,Kr=Xt.height),this.width=Gr,this.height=Kr}function Hr(Ut){Ut&&(Ut.texture&&Ut.texture._texture.decRef(),Ut.renderbuffer&&Ut.renderbuffer._renderbuffer.decRef())}function h(Ut,Vt,Xt){if(Ut)if(Ut.texture){var Gr=Ut.texture._texture,Kr=Math.max(1,Gr.width),Yr=Math.max(1,Gr.height);Ve(Kr===Vt&&Yr===Xt,"inconsistent width/height for supplied texture"),Gr.refCount+=1}else{var _n=Ut.renderbuffer._renderbuffer;Ve(_n.width===Vt&&_n.height===Xt,"inconsistent width/height for renderbuffer"),_n.refCount+=1}}function w(Ut,Vt){Vt&&(Vt.texture?pe.framebufferTexture2D(de,Ut,Vt.target,Vt.texture._texture.texture,0):pe.framebufferRenderbuffer(de,Ut,Me,Vt.renderbuffer._renderbuffer.renderbuffer))}function R(Ut){var Vt=Fe,Xt=null,Gr=null,Kr=Ut;typeof Ut=="object"&&(Kr=Ut.data,"target"in Ut&&(Vt=Ut.target|0)),Ve.type(Kr,"function","invalid attachment data");var Yr=Kr._reglType;return Yr==="texture2d"?(Xt=Kr,Ve(Vt===Fe)):Yr==="textureCube"?(Xt=Kr,Ve(Vt>=tt&&Vt<tt+6,"invalid cube map target")):Yr==="renderbuffer"?(Gr=Kr,Vt=Me):Ve.raise("invalid regl object for attachment"),new Ar(Vt,Xt,Gr)}function j(Ut,Vt,Xt,Gr,Kr){if(Xt){var Yr=rr.create2D({width:Ut,height:Vt,format:Gr,type:Kr});return Yr._texture.refCount=0,new Ar(Fe,Yr,null)}else{var _n=Mr.create({width:Ut,height:Vt,format:Gr});return _n._renderbuffer.refCount=0,new Ar(Me,null,_n)}}function ne(Ut){return Ut&&(Ut.texture||Ut.renderbuffer)}function oe(Ut,Vt,Xt){Ut&&(Ut.texture?Ut.texture.resize(Vt,Xt):Ut.renderbuffer&&Ut.renderbuffer.resize(Vt,Xt),Ut.width=Vt,Ut.height=Xt)}var he=0,me={};function _e(){this.id=he++,me[this.id]=this,this.framebuffer=pe.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Be(Ut){Ut.colorAttachments.forEach(Hr),Hr(Ut.depthAttachment),Hr(Ut.stencilAttachment),Hr(Ut.depthStencilAttachment)}function Ke(Ut){var Vt=Ut.framebuffer;Ve(Vt,"must not double destroy framebuffer"),pe.deleteFramebuffer(Vt),Ut.framebuffer=null,er.framebufferCount--,delete me[Ut.id]}function Xe(Ut){var Vt;pe.bindFramebuffer(de,Ut.framebuffer);var Xt=Ut.colorAttachments;for(Vt=0;Vt<Xt.length;++Vt)w(Dt+Vt,Xt[Vt]);for(Vt=Xt.length;Vt<pt.maxColorAttachments;++Vt)pe.framebufferTexture2D(de,Dt+Vt,Fe,null,0);pe.framebufferTexture2D(de,Pr,Fe,null,0),pe.framebufferTexture2D(de,Rt,Fe,null,0),pe.framebufferTexture2D(de,ur,Fe,null,0),w(Rt,Ut.depthAttachment),w(ur,Ut.stencilAttachment),w(Pr,Ut.depthStencilAttachment);var Gr=pe.checkFramebufferStatus(de);!pe.isContextLost()&&Gr!==Rr&&Ve.raise("framebuffer configuration not supported, status = "+Yo[Gr]),pe.bindFramebuffer(de,hr.next?hr.next.framebuffer:null),hr.cur=hr.next,pe.getError()}function ht(Ut,Vt){var Xt=new _e;er.framebufferCount++;function Gr(Yr,_n){var bn;Ve(hr.next!==Xt,"can not update framebuffer which is currently in use");var Pn=0,Qn=0,zn=!0,ei=!0,ea=null,Li=!0,ti="rgba",_a="uint8",bi=1,Di=null,Ki=null,Mo=null,Xi=!1;if(typeof Yr=="number")Pn=Yr|0,Qn=_n|0||Pn;else if(!Yr)Pn=Qn=1;else{Ve.type(Yr,"object","invalid arguments for framebuffer");var ca=Yr;if("shape"in ca){var Co=ca.shape;Ve(Array.isArray(Co)&&Co.length>=2,"invalid shape for framebuffer"),Pn=Co[0],Qn=Co[1]}else"radius"in ca&&(Pn=Qn=ca.radius),"width"in ca&&(Pn=ca.width),"height"in ca&&(Qn=ca.height);("color"in ca||"colors"in ca)&&(ea=ca.color||ca.colors,Array.isArray(ea)&&Ve(ea.length===1||qe.webgl_draw_buffers,"multiple render targets not supported")),ea||("colorCount"in ca&&(bi=ca.colorCount|0,Ve(bi>0,"invalid color buffer count")),"colorTexture"in ca&&(Li=!!ca.colorTexture,ti="rgba4"),"colorType"in ca&&(_a=ca.colorType,Li?(Ve(qe.oes_texture_float||!(_a==="float"||_a==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Ve(qe.oes_texture_half_float||!(_a==="half float"||_a==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):_a==="half float"||_a==="float16"?(Ve(qe.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),ti="rgba16f"):(_a==="float"||_a==="float32")&&(Ve(qe.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),ti="rgba32f"),Ve.oneOf(_a,Wr,"invalid color type")),"colorFormat"in ca&&(ti=ca.colorFormat,Br.indexOf(ti)>=0?Li=!0:cr.indexOf(ti)>=0?Li=!1:Li?Ve.oneOf(ca.colorFormat,Br,"invalid color format for texture"):Ve.oneOf(ca.colorFormat,cr,"invalid color format for renderbuffer"))),("depthTexture"in ca||"depthStencilTexture"in ca)&&(Xi=!!(ca.depthTexture||ca.depthStencilTexture),Ve(!Xi||qe.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in ca&&(typeof ca.depth=="boolean"?zn=ca.depth:(Di=ca.depth,ei=!1)),"stencil"in ca&&(typeof ca.stencil=="boolean"?ei=ca.stencil:(Ki=ca.stencil,zn=!1)),"depthStencil"in ca&&(typeof ca.depthStencil=="boolean"?zn=ei=ca.depthStencil:(Mo=ca.depthStencil,zn=!1,ei=!1))}var Va=null,Bn=null,ra=null,ga=null;if(Array.isArray(ea))Va=ea.map(R);else if(ea)Va=[R(ea)];else for(Va=new Array(bi),bn=0;bn<bi;++bn)Va[bn]=j(Pn,Qn,Li,ti,_a);Ve(qe.webgl_draw_buffers||Va.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Ve(Va.length<=pt.maxColorAttachments,"too many color attachments, not supported"),Pn=Pn||Va[0].width,Qn=Qn||Va[0].height,Di?Bn=R(Di):zn&&!ei&&(Bn=j(Pn,Qn,Xi,"depth","uint32")),Ki?ra=R(Ki):ei&&!zn&&(ra=j(Pn,Qn,!1,"stencil","uint8")),Mo?ga=R(Mo):!Di&&!Ki&&ei&&zn&&(ga=j(Pn,Qn,Xi,"depth stencil","depth stencil")),Ve(!!Di+!!Ki+!!Mo<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var ui=null;for(bn=0;bn<Va.length;++bn)if(h(Va[bn],Pn,Qn),Ve(!Va[bn]||Va[bn].texture&&Zn.indexOf(Va[bn].texture._texture.format)>=0||Va[bn].renderbuffer&&su.indexOf(Va[bn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+bn+" is invalid"),Va[bn]&&Va[bn].texture){var us=Cn[Va[bn].texture._texture.format]*fa[Va[bn].texture._texture.type];ui===null?ui=us:Ve(ui===us,"all color attachments much have the same number of bits per pixel.")}return h(Bn,Pn,Qn),Ve(!Bn||Bn.texture&&Bn.texture._texture.format===ha||Bn.renderbuffer&&Bn.renderbuffer._renderbuffer.format===Na,"invalid depth attachment for framebuffer object"),h(ra,Pn,Qn),Ve(!ra||ra.renderbuffer&&ra.renderbuffer._renderbuffer.format===si,"invalid stencil attachment for framebuffer object"),h(ga,Pn,Qn),Ve(!ga||ga.texture&&ga.texture._texture.format===Oi||ga.renderbuffer&&ga.renderbuffer._renderbuffer.format===Oi,"invalid depth-stencil attachment for framebuffer object"),Be(Xt),Xt.width=Pn,Xt.height=Qn,Xt.colorAttachments=Va,Xt.depthAttachment=Bn,Xt.stencilAttachment=ra,Xt.depthStencilAttachment=ga,Gr.color=Va.map(ne),Gr.depth=ne(Bn),Gr.stencil=ne(ra),Gr.depthStencil=ne(ga),Gr.width=Xt.width,Gr.height=Xt.height,Xe(Xt),Gr}function Kr(Yr,_n){Ve(hr.next!==Xt,"can not resize a framebuffer which is currently in use");var bn=Math.max(Yr|0,1),Pn=Math.max(_n|0||bn,1);if(bn===Xt.width&&Pn===Xt.height)return Gr;for(var Qn=Xt.colorAttachments,zn=0;zn<Qn.length;++zn)oe(Qn[zn],bn,Pn);return oe(Xt.depthAttachment,bn,Pn),oe(Xt.stencilAttachment,bn,Pn),oe(Xt.depthStencilAttachment,bn,Pn),Xt.width=Gr.width=bn,Xt.height=Gr.height=Pn,Xe(Xt),Gr}return Gr(Ut,Vt),G(Gr,{resize:Kr,_reglType:"framebuffer",_framebuffer:Xt,destroy:function(){Ke(Xt),Be(Xt)},use:function(Yr){hr.setFBO({framebuffer:Gr},Yr)}})}function Nt(Ut){var Vt=Array(6);function Xt(Kr){var Yr;Ve(Vt.indexOf(hr.next)<0,"can not update framebuffer which is currently in use");var _n={color:null},bn=0,Pn=null,Qn="rgba",zn="uint8",ei=1;if(typeof Kr=="number")bn=Kr|0;else if(!Kr)bn=1;else{Ve.type(Kr,"object","invalid arguments for framebuffer");var ea=Kr;if("shape"in ea){var Li=ea.shape;Ve(Array.isArray(Li)&&Li.length>=2,"invalid shape for framebuffer"),Ve(Li[0]===Li[1],"cube framebuffer must be square"),bn=Li[0]}else"radius"in ea&&(bn=ea.radius|0),"width"in ea?(bn=ea.width|0,"height"in ea&&Ve(ea.height===bn,"must be square")):"height"in ea&&(bn=ea.height|0);("color"in ea||"colors"in ea)&&(Pn=ea.color||ea.colors,Array.isArray(Pn)&&Ve(Pn.length===1||qe.webgl_draw_buffers,"multiple render targets not supported")),Pn||("colorCount"in ea&&(ei=ea.colorCount|0,Ve(ei>0,"invalid color buffer count")),"colorType"in ea&&(Ve.oneOf(ea.colorType,Wr,"invalid color type"),zn=ea.colorType),"colorFormat"in ea&&(Qn=ea.colorFormat,Ve.oneOf(ea.colorFormat,Br,"invalid color format for texture"))),"depth"in ea&&(_n.depth=ea.depth),"stencil"in ea&&(_n.stencil=ea.stencil),"depthStencil"in ea&&(_n.depthStencil=ea.depthStencil)}var ti;if(Pn)if(Array.isArray(Pn))for(ti=[],Yr=0;Yr<Pn.length;++Yr)ti[Yr]=Pn[Yr];else ti=[Pn];else{ti=Array(ei);var _a={radius:bn,format:Qn,type:zn};for(Yr=0;Yr<ei;++Yr)ti[Yr]=rr.createCube(_a)}for(_n.color=Array(ti.length),Yr=0;Yr<ti.length;++Yr){var bi=ti[Yr];Ve(typeof bi=="function"&&bi._reglType==="textureCube","invalid cube map"),bn=bn||bi.width,Ve(bi.width===bn&&bi.height===bn,"invalid cube map shape"),_n.color[Yr]={target:tt,data:ti[Yr]}}for(Yr=0;Yr<6;++Yr){for(var Di=0;Di<ti.length;++Di)_n.color[Di].target=tt+Yr;Yr>0&&(_n.depth=Vt[0].depth,_n.stencil=Vt[0].stencil,_n.depthStencil=Vt[0].depthStencil),Vt[Yr]?Vt[Yr](_n):Vt[Yr]=ht(_n)}return G(Xt,{width:bn,height:bn,color:ti})}function Gr(Kr){var Yr,_n=Kr|0;if(Ve(_n>0&&_n<=pt.maxCubeMapSize,"invalid radius for cube fbo"),_n===Xt.width)return Xt;var bn=Xt.color;for(Yr=0;Yr<bn.length;++Yr)bn[Yr].resize(_n);for(Yr=0;Yr<6;++Yr)Vt[Yr].resize(_n);return Xt.width=Xt.height=_n,Xt}return Xt(Ut),G(Xt,{faces:Vt,resize:Gr,_reglType:"framebufferCube",destroy:function(){Vt.forEach(function(Kr){Kr.destroy()})}})}function gr(){hr.cur=null,hr.next=null,hr.dirty=!0,qa(me).forEach(function(Ut){Ut.framebuffer=pe.createFramebuffer(),Xe(Ut)})}return G(hr,{getFramebuffer:function(Ut){if(typeof Ut=="function"&&Ut._reglType==="framebuffer"){var Vt=Ut._framebuffer;if(Vt instanceof _e)return Vt}return null},create:ht,createCube:Nt,clear:function(){qa(me).forEach(Ke)},restore:gr})}var Au=5126,uu=34962;function Ou(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Au,this.offset=0,this.stride=0,this.divisor=0}function df(pe,qe,pt,rr,Mr){for(var er=pt.maxAttributes,hr=new Array(er),Br=0;Br<er;++Br)hr[Br]=new Ou;var cr=0,Wr={},Ar={Record:Ou,scope:{},state:hr,currentVAO:null,targetVAO:null,restore:h()?me:function(){},createVAO:_e,getVAO:R,destroyBuffer:Hr,setVAO:h()?j:ne,clear:h()?oe:function(){}};function Hr(Be){for(var Ke=0;Ke<hr.length;++Ke){var Xe=hr[Ke];Xe.buffer===Be&&(pe.disableVertexAttribArray(Ke),Xe.buffer=null)}}function h(){return qe.oes_vertex_array_object}function w(){return qe.angle_instanced_arrays}function R(Be){return typeof Be=="function"&&Be._vao?Be._vao:null}function j(Be){if(Be!==Ar.currentVAO){var Ke=h();Be?Ke.bindVertexArrayOES(Be.vao):Ke.bindVertexArrayOES(null),Ar.currentVAO=Be}}function ne(Be){if(Be!==Ar.currentVAO){if(Be)Be.bindAttrs();else for(var Ke=w(),Xe=0;Xe<hr.length;++Xe){var ht=hr[Xe];ht.buffer?(pe.enableVertexAttribArray(Xe),pe.vertexAttribPointer(Xe,ht.size,ht.type,ht.normalized,ht.stride,ht.offfset),Ke&&ht.divisor&&Ke.vertexAttribDivisorANGLE(Xe,ht.divisor)):(pe.disableVertexAttribArray(Xe),pe.vertexAttrib4f(Xe,ht.x,ht.y,ht.z,ht.w))}Ar.currentVAO=Be}}function oe(){qa(Wr).forEach(function(Be){Be.destroy()})}function he(){this.id=++cr,this.attributes=[];var Be=h();Be?this.vao=Be.createVertexArrayOES():this.vao=null,Wr[this.id]=this,this.buffers=[]}he.prototype.bindAttrs=function(){for(var Be=w(),Ke=this.attributes,Xe=0;Xe<Ke.length;++Xe){var ht=Ke[Xe];ht.buffer?(pe.enableVertexAttribArray(Xe),pe.bindBuffer(uu,ht.buffer.buffer),pe.vertexAttribPointer(Xe,ht.size,ht.type,ht.normalized,ht.stride,ht.offset),Be&&ht.divisor&&Be.vertexAttribDivisorANGLE(Xe,ht.divisor)):(pe.disableVertexAttribArray(Xe),pe.vertexAttrib4f(Xe,ht.x,ht.y,ht.z,ht.w))}for(var Nt=Ke.length;Nt<er;++Nt)pe.disableVertexAttribArray(Nt)},he.prototype.refresh=function(){var Be=h();Be&&(Be.bindVertexArrayOES(this.vao),this.bindAttrs(),Ar.currentVAO=this)},he.prototype.destroy=function(){if(this.vao){var Be=h();this===Ar.currentVAO&&(Ar.currentVAO=null,Be.bindVertexArrayOES(null)),Be.deleteVertexArrayOES(this.vao),this.vao=null}Wr[this.id]&&(delete Wr[this.id],rr.vaoCount-=1)};function me(){var Be=h();Be&&qa(Wr).forEach(function(Ke){Ke.refresh()})}function _e(Be){var Ke=new he;rr.vaoCount+=1;function Xe(ht){Ve(Array.isArray(ht),"arguments to vertex array constructor must be an array"),Ve(ht.length<er,"too many attributes"),Ve(ht.length>0,"must specify at least one attribute");var Nt={},gr=Ke.attributes;gr.length=ht.length;for(var Ut=0;Ut<ht.length;++Ut){var Vt=ht[Ut],Xt=gr[Ut]=new Ou,Gr=Vt.data||Vt;if(Array.isArray(Gr)||U(Gr)||_i(Gr)){var Kr;Ke.buffers[Ut]&&(Kr=Ke.buffers[Ut],U(Gr)&&Kr._buffer.byteLength>=Gr.byteLength?Kr.subdata(Gr):(Kr.destroy(),Ke.buffers[Ut]=null)),Ke.buffers[Ut]||(Kr=Ke.buffers[Ut]=Mr.create(Vt,uu,!1,!0)),Xt.buffer=Mr.getBuffer(Kr),Xt.size=Xt.buffer.dimension|0,Xt.normalized=!1,Xt.type=Xt.buffer.dtype,Xt.offset=0,Xt.stride=0,Xt.divisor=0,Xt.state=1,Nt[Ut]=1}else Mr.getBuffer(Vt)?(Xt.buffer=Mr.getBuffer(Vt),Xt.size=Xt.buffer.dimension|0,Xt.normalized=!1,Xt.type=Xt.buffer.dtype,Xt.offset=0,Xt.stride=0,Xt.divisor=0,Xt.state=1):Mr.getBuffer(Vt.buffer)?(Xt.buffer=Mr.getBuffer(Vt.buffer),Xt.size=(+Vt.size||Xt.buffer.dimension)|0,Xt.normalized=!!Vt.normalized||!1,"type"in Vt?(Ve.parameter(Vt.type,qi,"invalid buffer type"),Xt.type=qi[Vt.type]):Xt.type=Xt.buffer.dtype,Xt.offset=(Vt.offset||0)|0,Xt.stride=(Vt.stride||0)|0,Xt.divisor=(Vt.divisor||0)|0,Xt.state=1,Ve(Xt.size>=1&&Xt.size<=4,"size must be between 1 and 4"),Ve(Xt.offset>=0,"invalid offset"),Ve(Xt.stride>=0&&Xt.stride<=255,"stride must be between 0 and 255"),Ve(Xt.divisor>=0,"divisor must be positive"),Ve(!Xt.divisor||!!qe.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Vt?(Ve(Ut>0,"first attribute must not be a constant"),Xt.x=+Vt.x||0,Xt.y=+Vt.y||0,Xt.z=+Vt.z||0,Xt.w=+Vt.w||0,Xt.state=2):Ve(!1,"invalid attribute spec for location "+Ut)}for(var Yr=0;Yr<Ke.buffers.length;++Yr)!Nt[Yr]&&Ke.buffers[Yr]&&(Ke.buffers[Yr].destroy(),Ke.buffers[Yr]=null);return Ke.refresh(),Xe}return Xe.destroy=function(){for(var ht=0;ht<Ke.buffers.length;++ht)Ke.buffers[ht]&&Ke.buffers[ht].destroy();Ke.buffers.length=0,Ke.destroy()},Xe._vao=Ke,Xe._reglType="vao",Xe(Be)}return Ar}var fu=35632,Zu=35633,Hs=35718,hf=35721;function vf(pe,qe,pt,rr){var Mr={},er={};function hr(j,ne,oe,he){this.name=j,this.id=ne,this.location=oe,this.info=he}function Br(j,ne){for(var oe=0;oe<j.length;++oe)if(j[oe].id===ne.id){j[oe].location=ne.location;return}j.push(ne)}function cr(j,ne,oe){var he=j===fu?Mr:er,me=he[ne];if(!me){var _e=qe.str(ne);me=pe.createShader(j),pe.shaderSource(me,_e),pe.compileShader(me),Ve.shaderError(pe,me,_e,j,oe),he[ne]=me}return me}var Wr={},Ar=[],Hr=0;function h(j,ne){this.id=Hr++,this.fragId=j,this.vertId=ne,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,rr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function w(j,ne,oe){var he,me,_e=cr(fu,j.fragId),Be=cr(Zu,j.vertId),Ke=j.program=pe.createProgram();if(pe.attachShader(Ke,_e),pe.attachShader(Ke,Be),oe)for(he=0;he<oe.length;++he){var Xe=oe[he];pe.bindAttribLocation(Ke,Xe[0],Xe[1])}pe.linkProgram(Ke),Ve.linkError(pe,Ke,qe.str(j.fragId),qe.str(j.vertId),ne);var ht=pe.getProgramParameter(Ke,Hs);rr.profile&&(j.stats.uniformsCount=ht);var Nt=j.uniforms;for(he=0;he<ht;++he)if(me=pe.getActiveUniform(Ke,he),me)if(me.size>1)for(var gr=0;gr<me.size;++gr){var Ut=me.name.replace("[0]","["+gr+"]");Br(Nt,new hr(Ut,qe.id(Ut),pe.getUniformLocation(Ke,Ut),me))}else Br(Nt,new hr(me.name,qe.id(me.name),pe.getUniformLocation(Ke,me.name),me));var Vt=pe.getProgramParameter(Ke,hf);rr.profile&&(j.stats.attributesCount=Vt);var Xt=j.attributes;for(he=0;he<Vt;++he)me=pe.getActiveAttrib(Ke,he),me&&Br(Xt,new hr(me.name,qe.id(me.name),pe.getAttribLocation(Ke,me.name),me))}rr.profile&&(pt.getMaxUniformsCount=function(){var j=0;return Ar.forEach(function(ne){ne.stats.uniformsCount>j&&(j=ne.stats.uniformsCount)}),j},pt.getMaxAttributesCount=function(){var j=0;return Ar.forEach(function(ne){ne.stats.attributesCount>j&&(j=ne.stats.attributesCount)}),j});function R(){Mr={},er={};for(var j=0;j<Ar.length;++j)w(Ar[j],null,Ar[j].attributes.map(function(ne){return[ne.location,ne.name]}))}return{clear:function(){var j=pe.deleteShader.bind(pe);qa(Mr).forEach(j),Mr={},qa(er).forEach(j),er={},Ar.forEach(function(ne){pe.deleteProgram(ne.program)}),Ar.length=0,Wr={},pt.shaderCount=0},program:function(j,ne,oe,he){Ve.command(j>=0,"missing vertex shader",oe),Ve.command(ne>=0,"missing fragment shader",oe);var me=Wr[ne];me||(me=Wr[ne]={});var _e=me[j];if(_e&&(_e.refCount++,!he))return _e;var Be=new h(ne,j);return pt.shaderCount++,w(Be,oe,he),_e||(me[j]=Be),Ar.push(Be),G(Be,{destroy:function(){if(Be.refCount--,Be.refCount<=0){pe.deleteProgram(Be.program);var Ke=Ar.indexOf(Be);Ar.splice(Ke,1),pt.shaderCount--}me[Be.vertId].refCount<=0&&(pe.deleteShader(er[Be.vertId]),delete er[Be.vertId],delete Wr[Be.fragId][Be.vertId]),Object.keys(Wr[Be.fragId]).length||(pe.deleteShader(Mr[Be.fragId]),delete Mr[Be.fragId],delete Wr[Be.fragId])}})},restore:R,shader:cr,frag:-1,vert:-1}}var gf=6408,jo=5121,pf=3333,Rf=5126;function ll(pe,qe,pt,rr,Mr,er,hr){function Br(Ar){var Hr;qe.next===null?(Ve(Mr.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Hr=jo):(Ve(qe.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Hr=qe.next.colorAttachments[0].texture._texture.type,er.oes_texture_float?(Ve(Hr===jo||Hr===Rf,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Hr===Rf&&Ve(hr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Ve(Hr===jo,"Reading from a framebuffer is only allowed for the type 'uint8'"));var h=0,w=0,R=rr.framebufferWidth,j=rr.framebufferHeight,ne=null;U(Ar)?ne=Ar:Ar&&(Ve.type(Ar,"object","invalid arguments to regl.read()"),h=Ar.x|0,w=Ar.y|0,Ve(h>=0&&h<rr.framebufferWidth,"invalid x offset for regl.read"),Ve(w>=0&&w<rr.framebufferHeight,"invalid y offset for regl.read"),R=(Ar.width||rr.framebufferWidth-h)|0,j=(Ar.height||rr.framebufferHeight-w)|0,ne=Ar.data||null),ne&&(Hr===jo?Ve(ne instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Hr===Rf&&Ve(ne instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Ve(R>0&&R+h<=rr.framebufferWidth,"invalid width for read pixels"),Ve(j>0&&j+w<=rr.framebufferHeight,"invalid height for read pixels"),pt();var oe=R*j*4;return ne||(Hr===jo?ne=new Uint8Array(oe):Hr===Rf&&(ne=ne||new Float32Array(oe))),Ve.isTypedArray(ne,"data buffer for regl.read() must be a typedarray"),Ve(ne.byteLength>=oe,"data buffer for regl.read() too small"),pe.pixelStorei(pf,4),pe.readPixels(h,w,R,j,gf,Hr,ne),ne}function cr(Ar){var Hr;return qe.setFBO({framebuffer:Ar.framebuffer},function(){Hr=Br(Ar)}),Hr}function Wr(Ar){return!Ar||!("framebuffer"in Ar)?Br(Ar):cr(Ar)}return Wr}function Lu(pe){return Array.prototype.slice.call(pe)}function Ku(pe){return Lu(pe).join("")}function Xc(){var pe=0,qe=[],pt=[];function rr(Hr){for(var h=0;h<pt.length;++h)if(pt[h]===Hr)return qe[h];var w="g"+pe++;return qe.push(w),pt.push(Hr),w}function Mr(){var Hr=[];function h(){Hr.push.apply(Hr,Lu(arguments))}var w=[];function R(){var j="v"+pe++;return w.push(j),arguments.length>0&&(Hr.push(j,"="),Hr.push.apply(Hr,Lu(arguments)),Hr.push(";")),j}return G(h,{def:R,toString:function(){return Ku([w.length>0?"var "+w.join(",")+";":"",Ku(Hr)])}})}function er(){var Hr=Mr(),h=Mr(),w=Hr.toString,R=h.toString;function j(ne,oe){h(ne,oe,"=",Hr.def(ne,oe),";")}return G(function(){Hr.apply(Hr,Lu(arguments))},{def:Hr.def,entry:Hr,exit:h,save:j,set:function(ne,oe,he){j(ne,oe),Hr(ne,oe,"=",he,";")},toString:function(){return w()+R()}})}function hr(){var Hr=Ku(arguments),h=er(),w=er(),R=h.toString,j=w.toString;return G(h,{then:function(){return h.apply(h,Lu(arguments)),this},else:function(){return w.apply(w,Lu(arguments)),this},toString:function(){var ne=j();return ne&&(ne="else{"+ne+"}"),Ku(["if(",Hr,"){",R(),"}",ne])}})}var Br=Mr(),cr={};function Wr(Hr,h){var w=[];function R(){var me="a"+w.length;return w.push(me),me}h=h||0;for(var j=0;j<h;++j)R();var ne=er(),oe=ne.toString,he=cr[Hr]=G(ne,{arg:R,toString:function(){return Ku(["function(",w.join(),"){",oe(),"}"])}});return he}function Ar(){var Hr=['"use strict";',Br,"return {"];Object.keys(cr).forEach(function(R){Hr.push('"',R,'":',cr[R].toString(),",")}),Hr.push("}");var h=Ku(Hr).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),w=Function.apply(null,qe.concat(h));return w.apply(null,pt)}return{global:Br,link:rr,block:Mr,proc:Wr,scope:er,cond:hr,compile:Ar}}var $u="xyzw".split(""),Vc=5121,Qu=1,Bf=2,fc=0,Ff=1,Du=2,cc=3,Gf=4,lc=5,zf=6,Nu="dither",dc="blend.enable",Uf="blend.color",qu="blend.equation",Wf="blend.func",Yc="depth.enable",yf="depth.func",Xf="depth.range",Pu="depth.mask",hc="colorMask",_t="cull.enable",mf="cull.face",Ju="frontFace",Vf="lineWidth",jc="polygonOffset.enable",vc="polygonOffset.offset",Hc="sample.alpha",gc="sample.enable",ef="sample.coverage",Es="stencil.enable",pc="stencil.mask",Ef="stencil.func",Zi="stencil.opFront",tf="stencil.opBack",to="scissor.enable",bf="scissor.box",bs="viewport",rf="profile",cu="framebuffer",So="vert",ku="frag",Ru="elements",lu="primitive",rn="count",yc="offset",Yf="instances",Qo="vao",Bu="Width",mc="Height",ks=cu+Bu,ko=cu+mc,nf=bs+Bu,Ec=bs+mc,jf="drawingBuffer",bc=jf+Bu,xc=jf+mc,wc=[Wf,qu,Ef,Zi,tf,ef,bs,bf,vc],du=34962,Zc=34963,Sc=35632,Kc=35633,_c=3553,xf=34067,Mc=2884,po=3042,Hf=3024,Al=2960,dl=2929,hl=3089,vl=32823,gl=32926,$c=32928,Zf=5126,Cc=35664,Tc=35665,Ic=35666,Qc=5124,Ac=35667,Oc=35668,ki=35669,Lc=35670,Kf=35671,af=35672,$f=35673,wf=35674,Sf=35675,Fu=35676,xa=35678,ss=35680,_f=4,Mf=1028,Gu=1029,qc=2304,Qf=2305,Ta=32775,pl=32776,qf=519,Zs=7680,Jc=0,el=1,tl=32774,yl=513,rl=36160,ml=36064,yo={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Dc=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],zu={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},hu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Rs={frag:Sc,vert:Kc},Nc={cw:qc,ccw:Qf};function Jf(pe){return Array.isArray(pe)||U(pe)||_i(pe)}function nl(pe){return pe.sort(function(qe,pt){return qe===bs?-1:pt===bs?1:qe<pt?-1:1})}function Ro(pe,qe,pt,rr){this.thisDep=pe,this.contextDep=qe,this.propDep=pt,this.append=rr}function vu(pe){return pe&&!(pe.thisDep||pe.contextDep||pe.propDep)}function Fi(pe){return new Ro(!1,!1,!1,pe)}function _o(pe,qe){var pt=pe.type;if(pt===fc){var rr=pe.data.length;return new Ro(!0,rr>=1,rr>=2,qe)}else if(pt===Gf){var Mr=pe.data;return new Ro(Mr.thisDep,Mr.contextDep,Mr.propDep,qe)}else{if(pt===lc)return new Ro(!1,!1,!1,qe);if(pt===zf){for(var er=!1,hr=!1,Br=!1,cr=0;cr<pe.data.length;++cr){var Wr=pe.data[cr];if(Wr.type===Ff)Br=!0;else if(Wr.type===Du)hr=!0;else if(Wr.type===cc)er=!0;else if(Wr.type===fc){er=!0;var Ar=Wr.data;Ar>=1&&(hr=!0),Ar>=2&&(Br=!0)}else Wr.type===Gf&&(er=er||Wr.data.thisDep,hr=hr||Wr.data.contextDep,Br=Br||Wr.data.propDep)}return new Ro(er,hr,Br,qe)}else return new Ro(pt===cc,pt===Du,pt===Ff,qe)}}var Ks=new Ro(!1,!1,!1,function(){});function Pc(pe,qe,pt,rr,Mr,er,hr,Br,cr,Wr,Ar,Hr,h,w,R){var j=Wr.Record,ne={add:32774,subtract:32778,"reverse subtract":32779};pt.ext_blend_minmax&&(ne.min=Ta,ne.max=pl);var oe=pt.angle_instanced_arrays,he=pt.webgl_draw_buffers,me={dirty:!0,profile:R.profile},_e={},Be=[],Ke={},Xe={};function ht(it){return it.replace(".","_")}function Nt(it,je,Ct){var Pt=ht(it);Be.push(it),_e[Pt]=me[Pt]=!!Ct,Ke[Pt]=je}function gr(it,je,Ct){var Pt=ht(it);Be.push(it),Array.isArray(Ct)?(me[Pt]=Ct.slice(),_e[Pt]=Ct.slice()):me[Pt]=_e[Pt]=Ct,Xe[Pt]=je}Nt(Nu,Hf),Nt(dc,po),gr(Uf,"blendColor",[0,0,0,0]),gr(qu,"blendEquationSeparate",[tl,tl]),gr(Wf,"blendFuncSeparate",[el,Jc,el,Jc]),Nt(Yc,dl,!0),gr(yf,"depthFunc",yl),gr(Xf,"depthRange",[0,1]),gr(Pu,"depthMask",!0),gr(hc,hc,[!0,!0,!0,!0]),Nt(_t,Mc),gr(mf,"cullFace",Gu),gr(Ju,Ju,Qf),gr(Vf,Vf,1),Nt(jc,vl),gr(vc,"polygonOffset",[0,0]),Nt(Hc,gl),Nt(gc,$c),gr(ef,"sampleCoverage",[1,!1]),Nt(Es,Al),gr(pc,"stencilMask",-1),gr(Ef,"stencilFunc",[qf,0,-1]),gr(Zi,"stencilOpSeparate",[Mf,Zs,Zs,Zs]),gr(tf,"stencilOpSeparate",[Gu,Zs,Zs,Zs]),Nt(to,hl),gr(bf,"scissor",[0,0,pe.drawingBufferWidth,pe.drawingBufferHeight]),gr(bs,bs,[0,0,pe.drawingBufferWidth,pe.drawingBufferHeight]);var Ut={gl:pe,context:h,strings:qe,next:_e,current:me,draw:Hr,elements:er,buffer:Mr,shader:Ar,attributes:Wr.state,vao:Wr,uniforms:cr,framebuffer:Br,extensions:pt,timer:w,isBufferArgs:Jf},Vt={primTypes:Wi,compareFuncs:zu,blendFuncs:yo,blendEquations:ne,stencilOps:hu,glTypes:qi,orientationType:Nc};Ve.optional(function(){Ut.isArrayLike=En}),he&&(Vt.backBuffer=[Gu],Vt.drawBuffer=Ln(rr.maxDrawbuffers,function(it){return it===0?[0]:Ln(it,function(je){return ml+je})}));var Xt=0;function Gr(){var it=Xc(),je=it.link,Ct=it.global;it.id=Xt++,it.batchId="0";var Pt=je(Ut),Yt=it.shared={props:"a0"};Object.keys(Ut).forEach(function(wt){Yt[wt]=Ct.def(Pt,".",wt)}),Ve.optional(function(){it.CHECK=je(Ve),it.commandStr=Ve.guessCommand(),it.command=je(it.commandStr),it.assert=function(wt,rt,Wt){wt("if(!(",rt,"))",this.CHECK,".commandRaise(",je(Wt),",",this.command,");")},Vt.invalidBlendCombinations=Dc});var Lt=it.next={},Tt=it.current={};Object.keys(Xe).forEach(function(wt){Array.isArray(me[wt])&&(Lt[wt]=Ct.def(Yt.next,".",wt),Tt[wt]=Ct.def(Yt.current,".",wt))});var Bt=it.constants={};Object.keys(Vt).forEach(function(wt){Bt[wt]=Ct.def(JSON.stringify(Vt[wt]))}),it.invoke=function(wt,rt){switch(rt.type){case fc:var Wt=["this",Yt.context,Yt.props,it.batchId];return wt.def(je(rt.data),".call(",Wt.slice(0,Math.max(rt.data.length+1,4)),")");case Ff:return wt.def(Yt.props,rt.data);case Du:return wt.def(Yt.context,rt.data);case cc:return wt.def("this",rt.data);case Gf:return rt.data.append(it,wt),rt.data.ref;case lc:return rt.data.toString();case zf:return rt.data.map(function(Jt){return it.invoke(wt,Jt)})}},it.attribCache={};var ot={};return it.scopeAttrib=function(wt){var rt=qe.id(wt);if(rt in ot)return ot[rt];var Wt=Wr.scope[rt];Wt||(Wt=Wr.scope[rt]=new j);var Jt=ot[rt]=je(Wt);return Jt},it}function Kr(it){var je=it.static,Ct=it.dynamic,Pt;if(rf in je){var Yt=!!je[rf];Pt=Fi(function(Tt,Bt){return Yt}),Pt.enable=Yt}else if(rf in Ct){var Lt=Ct[rf];Pt=_o(Lt,function(Tt,Bt){return Tt.invoke(Bt,Lt)})}return Pt}function Yr(it,je){var Ct=it.static,Pt=it.dynamic;if(cu in Ct){var Yt=Ct[cu];return Yt?(Yt=Br.getFramebuffer(Yt),Ve.command(Yt,"invalid framebuffer object"),Fi(function(Tt,Bt){var ot=Tt.link(Yt),wt=Tt.shared;Bt.set(wt.framebuffer,".next",ot);var rt=wt.context;return Bt.set(rt,"."+ks,ot+".width"),Bt.set(rt,"."+ko,ot+".height"),ot})):Fi(function(Tt,Bt){var ot=Tt.shared;Bt.set(ot.framebuffer,".next","null");var wt=ot.context;return Bt.set(wt,"."+ks,wt+"."+bc),Bt.set(wt,"."+ko,wt+"."+xc),"null"})}else if(cu in Pt){var Lt=Pt[cu];return _o(Lt,function(Tt,Bt){var ot=Tt.invoke(Bt,Lt),wt=Tt.shared,rt=wt.framebuffer,Wt=Bt.def(rt,".getFramebuffer(",ot,")");Ve.optional(function(){Tt.assert(Bt,"!"+ot+"||"+Wt,"invalid framebuffer object")}),Bt.set(rt,".next",Wt);var Jt=wt.context;return Bt.set(Jt,"."+ks,Wt+"?"+Wt+".width:"+Jt+"."+bc),Bt.set(Jt,"."+ko,Wt+"?"+Wt+".height:"+Jt+"."+xc),Wt})}else return null}function _n(it,je,Ct){var Pt=it.static,Yt=it.dynamic;function Lt(ot){if(ot in Pt){var wt=Pt[ot];Ve.commandType(wt,"object","invalid "+ot,Ct.commandStr);var rt=!0,Wt=wt.x|0,Jt=wt.y|0,wr,xr;return"width"in wt?(wr=wt.width|0,Ve.command(wr>=0,"invalid "+ot,Ct.commandStr)):rt=!1,"height"in wt?(xr=wt.height|0,Ve.command(xr>=0,"invalid "+ot,Ct.commandStr)):rt=!1,new Ro(!rt&&je&&je.thisDep,!rt&&je&&je.contextDep,!rt&&je&&je.propDep,function(Tn,na){var xn=Tn.shared.context,Un=wr;"width"in wt||(Un=na.def(xn,".",ks,"-",Wt));var ia=xr;return"height"in wt||(ia=na.def(xn,".",ko,"-",Jt)),[Wt,Jt,Un,ia]})}else if(ot in Yt){var dr=Yt[ot],Vr=_o(dr,function(Tn,na){var xn=Tn.invoke(na,dr);Ve.optional(function(){Tn.assert(na,xn+"&&typeof "+xn+'==="object"',"invalid "+ot)});var Un=Tn.shared.context,ia=na.def(xn,".x|0"),za=na.def(xn,".y|0"),Gi=na.def('"width" in ',xn,"?",xn,".width|0:","(",Un,".",ks,"-",ia,")"),qo=na.def('"height" in ',xn,"?",xn,".height|0:","(",Un,".",ko,"-",za,")");return Ve.optional(function(){Tn.assert(na,Gi+">=0&&"+qo+">=0","invalid "+ot)}),[ia,za,Gi,qo]});return je&&(Vr.thisDep=Vr.thisDep||je.thisDep,Vr.contextDep=Vr.contextDep||je.contextDep,Vr.propDep=Vr.propDep||je.propDep),Vr}else return je?new Ro(je.thisDep,je.contextDep,je.propDep,function(Tn,na){var xn=Tn.shared.context;return[0,0,na.def(xn,".",ks),na.def(xn,".",ko)]}):null}var Tt=Lt(bs);if(Tt){var Bt=Tt;Tt=new Ro(Tt.thisDep,Tt.contextDep,Tt.propDep,function(ot,wt){var rt=Bt.append(ot,wt),Wt=ot.shared.context;return wt.set(Wt,"."+nf,rt[2]),wt.set(Wt,"."+Ec,rt[3]),rt})}return{viewport:Tt,scissor_box:Lt(bf)}}function bn(it,je){var Ct=it.static,Pt=typeof Ct[ku]=="string"&&typeof Ct[So]=="string";if(Pt){if(Object.keys(je.dynamic).length>0)return null;var Yt=je.static,Lt=Object.keys(Yt);if(Lt.length>0&&typeof Yt[Lt[0]]=="number"){for(var Tt=[],Bt=0;Bt<Lt.length;++Bt)Ve(typeof Yt[Lt[Bt]]=="number","must specify all vertex attribute locations when using vaos"),Tt.push([Yt[Lt[Bt]]|0,Lt[Bt]]);return Tt}}return null}function Pn(it,je,Ct){var Pt=it.static,Yt=it.dynamic;function Lt(rt){if(rt in Pt){var Wt=qe.id(Pt[rt]);Ve.optional(function(){Ar.shader(Rs[rt],Wt,Ve.guessCommand())});var Jt=Fi(function(){return Wt});return Jt.id=Wt,Jt}else if(rt in Yt){var wr=Yt[rt];return _o(wr,function(xr,dr){var Vr=xr.invoke(dr,wr),Tn=dr.def(xr.shared.strings,".id(",Vr,")");return Ve.optional(function(){dr(xr.shared.shader,".shader(",Rs[rt],",",Tn,",",xr.command,");")}),Tn})}return null}var Tt=Lt(ku),Bt=Lt(So),ot=null,wt;return vu(Tt)&&vu(Bt)?(ot=Ar.program(Bt.id,Tt.id,null,Ct),wt=Fi(function(rt,Wt){return rt.link(ot)})):wt=new Ro(Tt&&Tt.thisDep||Bt&&Bt.thisDep,Tt&&Tt.contextDep||Bt&&Bt.contextDep,Tt&&Tt.propDep||Bt&&Bt.propDep,function(rt,Wt){var Jt=rt.shared.shader,wr;Tt?wr=Tt.append(rt,Wt):wr=Wt.def(Jt,".",ku);var xr;Bt?xr=Bt.append(rt,Wt):xr=Wt.def(Jt,".",So);var dr=Jt+".program("+xr+","+wr;return Ve.optional(function(){dr+=","+rt.command}),Wt.def(dr+")")}),{frag:Tt,vert:Bt,progVar:wt,program:ot}}function Qn(it,je){var Ct=it.static,Pt=it.dynamic;function Yt(){if(Ru in Ct){var rt=Ct[Ru];Jf(rt)?rt=er.getElements(er.create(rt,!0)):rt&&(rt=er.getElements(rt),Ve.command(rt,"invalid elements",je.commandStr));var Wt=Fi(function(wr,xr){if(rt){var dr=wr.link(rt);return wr.ELEMENTS=dr,dr}return wr.ELEMENTS=null,null});return Wt.value=rt,Wt}else if(Ru in Pt){var Jt=Pt[Ru];return _o(Jt,function(wr,xr){var dr=wr.shared,Vr=dr.isBufferArgs,Tn=dr.elements,na=wr.invoke(xr,Jt),xn=xr.def("null"),Un=xr.def(Vr,"(",na,")"),ia=wr.cond(Un).then(xn,"=",Tn,".createStream(",na,");").else(xn,"=",Tn,".getElements(",na,");");return Ve.optional(function(){wr.assert(ia.else,"!"+na+"||"+xn,"invalid elements")}),xr.entry(ia),xr.exit(wr.cond(Un).then(Tn,".destroyStream(",xn,");")),wr.ELEMENTS=xn,xn})}return null}var Lt=Yt();function Tt(){if(lu in Ct){var rt=Ct[lu];return Ve.commandParameter(rt,Wi,"invalid primitve",je.commandStr),Fi(function(Jt,wr){return Wi[rt]})}else if(lu in Pt){var Wt=Pt[lu];return _o(Wt,function(Jt,wr){var xr=Jt.constants.primTypes,dr=Jt.invoke(wr,Wt);return Ve.optional(function(){Jt.assert(wr,dr+" in "+xr,"invalid primitive, must be one of "+Object.keys(Wi))}),wr.def(xr,"[",dr,"]")})}else if(Lt)return vu(Lt)?Lt.value?Fi(function(Jt,wr){return wr.def(Jt.ELEMENTS,".primType")}):Fi(function(){return _f}):new Ro(Lt.thisDep,Lt.contextDep,Lt.propDep,function(Jt,wr){var xr=Jt.ELEMENTS;return wr.def(xr,"?",xr,".primType:",_f)});return null}function Bt(rt,Wt){if(rt in Ct){var Jt=Ct[rt]|0;return Ve.command(!Wt||Jt>=0,"invalid "+rt,je.commandStr),Fi(function(xr,dr){return Wt&&(xr.OFFSET=Jt),Jt})}else if(rt in Pt){var wr=Pt[rt];return _o(wr,function(xr,dr){var Vr=xr.invoke(dr,wr);return Wt&&(xr.OFFSET=Vr,Ve.optional(function(){xr.assert(dr,Vr+">=0","invalid "+rt)})),Vr})}else if(Wt&&Lt)return Fi(function(xr,dr){return xr.OFFSET="0",0});return null}var ot=Bt(yc,!0);function wt(){if(rn in Ct){var rt=Ct[rn]|0;return Ve.command(typeof rt=="number"&&rt>=0,"invalid vertex count",je.commandStr),Fi(function(){return rt})}else if(rn in Pt){var Wt=Pt[rn];return _o(Wt,function(xr,dr){var Vr=xr.invoke(dr,Wt);return Ve.optional(function(){xr.assert(dr,"typeof "+Vr+'==="number"&&'+Vr+">=0&&"+Vr+"===("+Vr+"|0)","invalid vertex count")}),Vr})}else if(Lt)if(vu(Lt)){if(Lt)return ot?new Ro(ot.thisDep,ot.contextDep,ot.propDep,function(xr,dr){var Vr=dr.def(xr.ELEMENTS,".vertCount-",xr.OFFSET);return Ve.optional(function(){xr.assert(dr,Vr+">=0","invalid vertex offset/element buffer too small")}),Vr}):Fi(function(xr,dr){return dr.def(xr.ELEMENTS,".vertCount")});var Jt=Fi(function(){return-1});return Ve.optional(function(){Jt.MISSING=!0}),Jt}else{var wr=new Ro(Lt.thisDep||ot.thisDep,Lt.contextDep||ot.contextDep,Lt.propDep||ot.propDep,function(xr,dr){var Vr=xr.ELEMENTS;return xr.OFFSET?dr.def(Vr,"?",Vr,".vertCount-",xr.OFFSET,":-1"):dr.def(Vr,"?",Vr,".vertCount:-1")});return Ve.optional(function(){wr.DYNAMIC=!0}),wr}return null}return{elements:Lt,primitive:Tt(),count:wt(),instances:Bt(Yf,!1),offset:ot}}function zn(it,je){var Ct=it.static,Pt=it.dynamic,Yt={};return Be.forEach(function(Lt){var Tt=ht(Lt);function Bt(ot,wt){if(Lt in Ct){var rt=ot(Ct[Lt]);Yt[Tt]=Fi(function(){return rt})}else if(Lt in Pt){var Wt=Pt[Lt];Yt[Tt]=_o(Wt,function(Jt,wr){return wt(Jt,wr,Jt.invoke(wr,Wt))})}}switch(Lt){case _t:case dc:case Nu:case Es:case Yc:case to:case jc:case Hc:case gc:case Pu:return Bt(function(ot){return Ve.commandType(ot,"boolean",Lt,je.commandStr),ot},function(ot,wt,rt){return Ve.optional(function(){ot.assert(wt,"typeof "+rt+'==="boolean"',"invalid flag "+Lt,ot.commandStr)}),rt});case yf:return Bt(function(ot){return Ve.commandParameter(ot,zu,"invalid "+Lt,je.commandStr),zu[ot]},function(ot,wt,rt){var Wt=ot.constants.compareFuncs;return Ve.optional(function(){ot.assert(wt,rt+" in "+Wt,"invalid "+Lt+", must be one of "+Object.keys(zu))}),wt.def(Wt,"[",rt,"]")});case Xf:return Bt(function(ot){return Ve.command(En(ot)&&ot.length===2&&typeof ot[0]=="number"&&typeof ot[1]=="number"&&ot[0]<=ot[1],"depth range is 2d array",je.commandStr),ot},function(ot,wt,rt){Ve.optional(function(){ot.assert(wt,ot.shared.isArrayLike+"("+rt+")&&"+rt+".length===2&&typeof "+rt+'[0]==="number"&&typeof '+rt+'[1]==="number"&&'+rt+"[0]<="+rt+"[1]","depth range must be a 2d array")});var Wt=wt.def("+",rt,"[0]"),Jt=wt.def("+",rt,"[1]");return[Wt,Jt]});case Wf:return Bt(function(ot){Ve.commandType(ot,"object","blend.func",je.commandStr);var wt="srcRGB"in ot?ot.srcRGB:ot.src,rt="srcAlpha"in ot?ot.srcAlpha:ot.src,Wt="dstRGB"in ot?ot.dstRGB:ot.dst,Jt="dstAlpha"in ot?ot.dstAlpha:ot.dst;return Ve.commandParameter(wt,yo,Tt+".srcRGB",je.commandStr),Ve.commandParameter(rt,yo,Tt+".srcAlpha",je.commandStr),Ve.commandParameter(Wt,yo,Tt+".dstRGB",je.commandStr),Ve.commandParameter(Jt,yo,Tt+".dstAlpha",je.commandStr),Ve.command(Dc.indexOf(wt+", "+Wt)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+wt+", "+Wt+")",je.commandStr),[yo[wt],yo[Wt],yo[rt],yo[Jt]]},function(ot,wt,rt){var Wt=ot.constants.blendFuncs;Ve.optional(function(){ot.assert(wt,rt+"&&typeof "+rt+'==="object"',"invalid blend func, must be an object")});function Jt(xn,Un){var ia=wt.def('"',xn,Un,'" in ',rt,"?",rt,".",xn,Un,":",rt,".",xn);return Ve.optional(function(){ot.assert(wt,ia+" in "+Wt,"invalid "+Lt+"."+xn+Un+", must be one of "+Object.keys(yo))}),ia}var wr=Jt("src","RGB"),xr=Jt("dst","RGB");Ve.optional(function(){var xn=ot.constants.invalidBlendCombinations;ot.assert(wt,xn+".indexOf("+wr+'+", "+'+xr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var dr=wt.def(Wt,"[",wr,"]"),Vr=wt.def(Wt,"[",Jt("src","Alpha"),"]"),Tn=wt.def(Wt,"[",xr,"]"),na=wt.def(Wt,"[",Jt("dst","Alpha"),"]");return[dr,Tn,Vr,na]});case qu:return Bt(function(ot){if(typeof ot=="string")return Ve.commandParameter(ot,ne,"invalid "+Lt,je.commandStr),[ne[ot],ne[ot]];if(typeof ot=="object")return Ve.commandParameter(ot.rgb,ne,Lt+".rgb",je.commandStr),Ve.commandParameter(ot.alpha,ne,Lt+".alpha",je.commandStr),[ne[ot.rgb],ne[ot.alpha]];Ve.commandRaise("invalid blend.equation",je.commandStr)},function(ot,wt,rt){var Wt=ot.constants.blendEquations,Jt=wt.def(),wr=wt.def(),xr=ot.cond("typeof ",rt,'==="string"');return Ve.optional(function(){function dr(Vr,Tn,na){ot.assert(Vr,na+" in "+Wt,"invalid "+Tn+", must be one of "+Object.keys(ne))}dr(xr.then,Lt,rt),ot.assert(xr.else,rt+"&&typeof "+rt+'==="object"',"invalid "+Lt),dr(xr.else,Lt+".rgb",rt+".rgb"),dr(xr.else,Lt+".alpha",rt+".alpha")}),xr.then(Jt,"=",wr,"=",Wt,"[",rt,"];"),xr.else(Jt,"=",Wt,"[",rt,".rgb];",wr,"=",Wt,"[",rt,".alpha];"),wt(xr),[Jt,wr]});case Uf:return Bt(function(ot){return Ve.command(En(ot)&&ot.length===4,"blend.color must be a 4d array",je.commandStr),Ln(4,function(wt){return+ot[wt]})},function(ot,wt,rt){return Ve.optional(function(){ot.assert(wt,ot.shared.isArrayLike+"("+rt+")&&"+rt+".length===4","blend.color must be a 4d array")}),Ln(4,function(Wt){return wt.def("+",rt,"[",Wt,"]")})});case pc:return Bt(function(ot){return Ve.commandType(ot,"number",Tt,je.commandStr),ot|0},function(ot,wt,rt){return Ve.optional(function(){ot.assert(wt,"typeof "+rt+'==="number"',"invalid stencil.mask")}),wt.def(rt,"|0")});case Ef:return Bt(function(ot){Ve.commandType(ot,"object",Tt,je.commandStr);var wt=ot.cmp||"keep",rt=ot.ref||0,Wt="mask"in ot?ot.mask:-1;return Ve.commandParameter(wt,zu,Lt+".cmp",je.commandStr),Ve.commandType(rt,"number",Lt+".ref",je.commandStr),Ve.commandType(Wt,"number",Lt+".mask",je.commandStr),[zu[wt],rt,Wt]},function(ot,wt,rt){var Wt=ot.constants.compareFuncs;Ve.optional(function(){function dr(){ot.assert(wt,Array.prototype.join.call(arguments,""),"invalid stencil.func")}dr(rt+"&&typeof ",rt,'==="object"'),dr('!("cmp" in ',rt,")||(",rt,".cmp in ",Wt,")")});var Jt=wt.def('"cmp" in ',rt,"?",Wt,"[",rt,".cmp]",":",Zs),wr=wt.def(rt,".ref|0"),xr=wt.def('"mask" in ',rt,"?",rt,".mask|0:-1");return[Jt,wr,xr]});case Zi:case tf:return Bt(function(ot){Ve.commandType(ot,"object",Tt,je.commandStr);var wt=ot.fail||"keep",rt=ot.zfail||"keep",Wt=ot.zpass||"keep";return Ve.commandParameter(wt,hu,Lt+".fail",je.commandStr),Ve.commandParameter(rt,hu,Lt+".zfail",je.commandStr),Ve.commandParameter(Wt,hu,Lt+".zpass",je.commandStr),[Lt===tf?Gu:Mf,hu[wt],hu[rt],hu[Wt]]},function(ot,wt,rt){var Wt=ot.constants.stencilOps;Ve.optional(function(){ot.assert(wt,rt+"&&typeof "+rt+'==="object"',"invalid "+Lt)});function Jt(wr){return Ve.optional(function(){ot.assert(wt,'!("'+wr+'" in '+rt+")||("+rt+"."+wr+" in "+Wt+")","invalid "+Lt+"."+wr+", must be one of "+Object.keys(hu))}),wt.def('"',wr,'" in ',rt,"?",Wt,"[",rt,".",wr,"]:",Zs)}return[Lt===tf?Gu:Mf,Jt("fail"),Jt("zfail"),Jt("zpass")]});case vc:return Bt(function(ot){Ve.commandType(ot,"object",Tt,je.commandStr);var wt=ot.factor|0,rt=ot.units|0;return Ve.commandType(wt,"number",Tt+".factor",je.commandStr),Ve.commandType(rt,"number",Tt+".units",je.commandStr),[wt,rt]},function(ot,wt,rt){Ve.optional(function(){ot.assert(wt,rt+"&&typeof "+rt+'==="object"',"invalid "+Lt)});var Wt=wt.def(rt,".factor|0"),Jt=wt.def(rt,".units|0");return[Wt,Jt]});case mf:return Bt(function(ot){var wt=0;return ot==="front"?wt=Mf:ot==="back"&&(wt=Gu),Ve.command(!!wt,Tt,je.commandStr),wt},function(ot,wt,rt){return Ve.optional(function(){ot.assert(wt,rt+'==="front"||'+rt+'==="back"',"invalid cull.face")}),wt.def(rt,'==="front"?',Mf,":",Gu)});case Vf:return Bt(function(ot){return Ve.command(typeof ot=="number"&&ot>=rr.lineWidthDims[0]&&ot<=rr.lineWidthDims[1],"invalid line width, must be a positive number between "+rr.lineWidthDims[0]+" and "+rr.lineWidthDims[1],je.commandStr),ot},function(ot,wt,rt){return Ve.optional(function(){ot.assert(wt,"typeof "+rt+'==="number"&&'+rt+">="+rr.lineWidthDims[0]+"&&"+rt+"<="+rr.lineWidthDims[1],"invalid line width")}),rt});case Ju:return Bt(function(ot){return Ve.commandParameter(ot,Nc,Tt,je.commandStr),Nc[ot]},function(ot,wt,rt){return Ve.optional(function(){ot.assert(wt,rt+'==="cw"||'+rt+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),wt.def(rt+'==="cw"?'+qc+":"+Qf)});case hc:return Bt(function(ot){return Ve.command(En(ot)&&ot.length===4,"color.mask must be length 4 array",je.commandStr),ot.map(function(wt){return!!wt})},function(ot,wt,rt){return Ve.optional(function(){ot.assert(wt,ot.shared.isArrayLike+"("+rt+")&&"+rt+".length===4","invalid color.mask")}),Ln(4,function(Wt){return"!!"+rt+"["+Wt+"]"})});case ef:return Bt(function(ot){Ve.command(typeof ot=="object"&&ot,Tt,je.commandStr);var wt="value"in ot?ot.value:1,rt=!!ot.invert;return Ve.command(typeof wt=="number"&&wt>=0&&wt<=1,"sample.coverage.value must be a number between 0 and 1",je.commandStr),[wt,rt]},function(ot,wt,rt){Ve.optional(function(){ot.assert(wt,rt+"&&typeof "+rt+'==="object"',"invalid sample.coverage")});var Wt=wt.def('"value" in ',rt,"?+",rt,".value:1"),Jt=wt.def("!!",rt,".invert");return[Wt,Jt]})}}),Yt}function ei(it,je){var Ct=it.static,Pt=it.dynamic,Yt={};return Object.keys(Ct).forEach(function(Lt){var Tt=Ct[Lt],Bt;if(typeof Tt=="number"||typeof Tt=="boolean")Bt=Fi(function(){return Tt});else if(typeof Tt=="function"){var ot=Tt._reglType;ot==="texture2d"||ot==="textureCube"?Bt=Fi(function(wt){return wt.link(Tt)}):ot==="framebuffer"||ot==="framebufferCube"?(Ve.command(Tt.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Lt+'"',je.commandStr),Bt=Fi(function(wt){return wt.link(Tt.color[0])})):Ve.commandRaise('invalid data for uniform "'+Lt+'"',je.commandStr)}else En(Tt)?Bt=Fi(function(wt){var rt=wt.global.def("[",Ln(Tt.length,function(Wt){return Ve.command(typeof Tt[Wt]=="number"||typeof Tt[Wt]=="boolean","invalid uniform "+Lt,wt.commandStr),Tt[Wt]}),"]");return rt}):Ve.commandRaise('invalid or missing data for uniform "'+Lt+'"',je.commandStr);Bt.value=Tt,Yt[Lt]=Bt}),Object.keys(Pt).forEach(function(Lt){var Tt=Pt[Lt];Yt[Lt]=_o(Tt,function(Bt,ot){return Bt.invoke(ot,Tt)})}),Yt}function ea(it,je){var Ct=it.static,Pt=it.dynamic,Yt={};return Object.keys(Ct).forEach(function(Lt){var Tt=Ct[Lt],Bt=qe.id(Lt),ot=new j;if(Jf(Tt))ot.state=Qu,ot.buffer=Mr.getBuffer(Mr.create(Tt,du,!1,!0)),ot.type=0;else{var wt=Mr.getBuffer(Tt);if(wt)ot.state=Qu,ot.buffer=wt,ot.type=0;else if(Ve.command(typeof Tt=="object"&&Tt,"invalid data for attribute "+Lt,je.commandStr),"constant"in Tt){var rt=Tt.constant;ot.buffer="null",ot.state=Bf,typeof rt=="number"?ot.x=rt:(Ve.command(En(rt)&&rt.length>0&&rt.length<=4,"invalid constant for attribute "+Lt,je.commandStr),$u.forEach(function(Tn,na){na<rt.length&&(ot[Tn]=rt[na])}))}else{Jf(Tt.buffer)?wt=Mr.getBuffer(Mr.create(Tt.buffer,du,!1,!0)):wt=Mr.getBuffer(Tt.buffer),Ve.command(!!wt,'missing buffer for attribute "'+Lt+'"',je.commandStr);var Wt=Tt.offset|0;Ve.command(Wt>=0,'invalid offset for attribute "'+Lt+'"',je.commandStr);var Jt=Tt.stride|0;Ve.command(Jt>=0&&Jt<256,'invalid stride for attribute "'+Lt+'", must be integer betweeen [0, 255]',je.commandStr);var wr=Tt.size|0;Ve.command(!("size"in Tt)||wr>0&&wr<=4,'invalid size for attribute "'+Lt+'", must be 1,2,3,4',je.commandStr);var xr=!!Tt.normalized,dr=0;"type"in Tt&&(Ve.commandParameter(Tt.type,qi,"invalid type for attribute "+Lt,je.commandStr),dr=qi[Tt.type]);var Vr=Tt.divisor|0;"divisor"in Tt&&(Ve.command(Vr===0||oe,'cannot specify divisor for attribute "'+Lt+'", instancing not supported',je.commandStr),Ve.command(Vr>=0,'invalid divisor for attribute "'+Lt+'"',je.commandStr)),Ve.optional(function(){var Tn=je.commandStr,na=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Tt).forEach(function(xn){Ve.command(na.indexOf(xn)>=0,'unknown parameter "'+xn+'" for attribute pointer "'+Lt+'" (valid parameters are '+na+")",Tn)})}),ot.buffer=wt,ot.state=Qu,ot.size=wr,ot.normalized=xr,ot.type=dr||wt.dtype,ot.offset=Wt,ot.stride=Jt,ot.divisor=Vr}}Yt[Lt]=Fi(function(Tn,na){var xn=Tn.attribCache;if(Bt in xn)return xn[Bt];var Un={isStream:!1};return Object.keys(ot).forEach(function(ia){Un[ia]=ot[ia]}),ot.buffer&&(Un.buffer=Tn.link(ot.buffer),Un.type=Un.type||Un.buffer+".dtype"),xn[Bt]=Un,Un})}),Object.keys(Pt).forEach(function(Lt){var Tt=Pt[Lt];function Bt(ot,wt){var rt=ot.invoke(wt,Tt),Wt=ot.shared,Jt=ot.constants,wr=Wt.isBufferArgs,xr=Wt.buffer;Ve.optional(function(){ot.assert(wt,rt+"&&(typeof "+rt+'==="object"||typeof '+rt+'==="function")&&('+wr+"("+rt+")||"+xr+".getBuffer("+rt+")||"+xr+".getBuffer("+rt+".buffer)||"+wr+"("+rt+'.buffer)||("constant" in '+rt+"&&(typeof "+rt+'.constant==="number"||'+Wt.isArrayLike+"("+rt+".constant))))",'invalid dynamic attribute "'+Lt+'"')});var dr={isStream:wt.def(!1)},Vr=new j;Vr.state=Qu,Object.keys(Vr).forEach(function(Un){dr[Un]=wt.def(""+Vr[Un])});var Tn=dr.buffer,na=dr.type;wt("if(",wr,"(",rt,")){",dr.isStream,"=true;",Tn,"=",xr,".createStream(",du,",",rt,");",na,"=",Tn,".dtype;","}else{",Tn,"=",xr,".getBuffer(",rt,");","if(",Tn,"){",na,"=",Tn,".dtype;",'}else if("constant" in ',rt,"){",dr.state,"=",Bf,";","if(typeof "+rt+'.constant === "number"){',dr[$u[0]],"=",rt,".constant;",$u.slice(1).map(function(Un){return dr[Un]}).join("="),"=0;","}else{",$u.map(function(Un,ia){return dr[Un]+"="+rt+".constant.length>"+ia+"?"+rt+".constant["+ia+"]:0;"}).join(""),"}}else{","if(",wr,"(",rt,".buffer)){",Tn,"=",xr,".createStream(",du,",",rt,".buffer);","}else{",Tn,"=",xr,".getBuffer(",rt,".buffer);","}",na,'="type" in ',rt,"?",Jt.glTypes,"[",rt,".type]:",Tn,".dtype;",dr.normalized,"=!!",rt,".normalized;");function xn(Un){wt(dr[Un],"=",rt,".",Un,"|0;")}return xn("size"),xn("offset"),xn("stride"),xn("divisor"),wt("}}"),wt.exit("if(",dr.isStream,"){",xr,".destroyStream(",Tn,");","}"),dr}Yt[Lt]=_o(Tt,Bt)}),Yt}function Li(it,je){var Ct=it.static,Pt=it.dynamic;if(Qo in Ct){var Yt=Ct[Qo];return Yt!==null&&Wr.getVAO(Yt)===null&&(Yt=Wr.createVAO(Yt)),Fi(function(Tt){return Tt.link(Wr.getVAO(Yt))})}else if(Qo in Pt){var Lt=Pt[Qo];return _o(Lt,function(Tt,Bt){var ot=Tt.invoke(Bt,Lt);return Bt.def(Tt.shared.vao+".getVAO("+ot+")")})}return null}function ti(it){var je=it.static,Ct=it.dynamic,Pt={};return Object.keys(je).forEach(function(Yt){var Lt=je[Yt];Pt[Yt]=Fi(function(Tt,Bt){return typeof Lt=="number"||typeof Lt=="boolean"?""+Lt:Tt.link(Lt)})}),Object.keys(Ct).forEach(function(Yt){var Lt=Ct[Yt];Pt[Yt]=_o(Lt,function(Tt,Bt){return Tt.invoke(Bt,Lt)})}),Pt}function _a(it,je,Ct,Pt,Yt){var Lt=it.static,Tt=it.dynamic;Ve.optional(function(){var xn=[cu,So,ku,Ru,lu,yc,rn,Yf,rf,Qo].concat(Be);function Un(ia){Object.keys(ia).forEach(function(za){Ve.command(xn.indexOf(za)>=0,'unknown parameter "'+za+'"',Yt.commandStr)})}Un(Lt),Un(Tt)});var Bt=bn(it,je),ot=Yr(it,Yt),wt=_n(it,ot,Yt),rt=Qn(it,Yt),Wt=zn(it,Yt),Jt=Pn(it,Yt,Bt);function wr(xn){var Un=wt[xn];Un&&(Wt[xn]=Un)}wr(bs),wr(ht(bf));var xr=Object.keys(Wt).length>0,dr={framebuffer:ot,draw:rt,shader:Jt,state:Wt,dirty:xr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(dr.profile=Kr(it,Yt),dr.uniforms=ei(Ct,Yt),dr.drawVAO=dr.scopeVAO=Li(it,Yt),!dr.drawVAO&&Jt.program&&!Bt&&pt.angle_instanced_arrays){var Vr=!0,Tn=Jt.program.attributes.map(function(xn){var Un=je.static[xn];return Vr=Vr&&!!Un,Un});if(Vr&&Tn.length>0){var na=Wr.getVAO(Wr.createVAO(Tn));dr.drawVAO=new Ro(null,null,null,function(xn,Un){return xn.link(na)}),dr.useVAO=!0}}return Bt?dr.useVAO=!0:dr.attributes=ea(je,Yt),dr.context=ti(Pt,Yt),dr}function bi(it,je,Ct){var Pt=it.shared,Yt=Pt.context,Lt=it.scope();Object.keys(Ct).forEach(function(Tt){je.save(Yt,"."+Tt);var Bt=Ct[Tt],ot=Bt.append(it,je);Array.isArray(ot)?Lt(Yt,".",Tt,"=[",ot.join(),"];"):Lt(Yt,".",Tt,"=",ot,";")}),je(Lt)}function Di(it,je,Ct,Pt){var Yt=it.shared,Lt=Yt.gl,Tt=Yt.framebuffer,Bt;he&&(Bt=je.def(Yt.extensions,".webgl_draw_buffers"));var ot=it.constants,wt=ot.drawBuffer,rt=ot.backBuffer,Wt;Ct?Wt=Ct.append(it,je):Wt=je.def(Tt,".next"),Pt||je("if(",Wt,"!==",Tt,".cur){"),je("if(",Wt,"){",Lt,".bindFramebuffer(",rl,",",Wt,".framebuffer);"),he&&je(Bt,".drawBuffersWEBGL(",wt,"[",Wt,".colorAttachments.length]);"),je("}else{",Lt,".bindFramebuffer(",rl,",null);"),he&&je(Bt,".drawBuffersWEBGL(",rt,");"),je("}",Tt,".cur=",Wt,";"),Pt||je("}")}function Ki(it,je,Ct){var Pt=it.shared,Yt=Pt.gl,Lt=it.current,Tt=it.next,Bt=Pt.current,ot=Pt.next,wt=it.cond(Bt,".dirty");Be.forEach(function(rt){var Wt=ht(rt);if(!(Wt in Ct.state)){var Jt,wr;if(Wt in Tt){Jt=Tt[Wt],wr=Lt[Wt];var xr=Ln(me[Wt].length,function(Vr){return wt.def(Jt,"[",Vr,"]")});wt(it.cond(xr.map(function(Vr,Tn){return Vr+"!=="+wr+"["+Tn+"]"}).join("||")).then(Yt,".",Xe[Wt],"(",xr,");",xr.map(function(Vr,Tn){return wr+"["+Tn+"]="+Vr}).join(";"),";"))}else{Jt=wt.def(ot,".",Wt);var dr=it.cond(Jt,"!==",Bt,".",Wt);wt(dr),Wt in Ke?dr(it.cond(Jt).then(Yt,".enable(",Ke[Wt],");").else(Yt,".disable(",Ke[Wt],");"),Bt,".",Wt,"=",Jt,";"):dr(Yt,".",Xe[Wt],"(",Jt,");",Bt,".",Wt,"=",Jt,";")}}}),Object.keys(Ct.state).length===0&&wt(Bt,".dirty=false;"),je(wt)}function Mo(it,je,Ct,Pt){var Yt=it.shared,Lt=it.current,Tt=Yt.current,Bt=Yt.gl;nl(Object.keys(Ct)).forEach(function(ot){var wt=Ct[ot];if(!(Pt&&!Pt(wt))){var rt=wt.append(it,je);if(Ke[ot]){var Wt=Ke[ot];vu(wt)?rt?je(Bt,".enable(",Wt,");"):je(Bt,".disable(",Wt,");"):je(it.cond(rt).then(Bt,".enable(",Wt,");").else(Bt,".disable(",Wt,");")),je(Tt,".",ot,"=",rt,";")}else if(En(rt)){var Jt=Lt[ot];je(Bt,".",Xe[ot],"(",rt,");",rt.map(function(wr,xr){return Jt+"["+xr+"]="+wr}).join(";"),";")}else je(Bt,".",Xe[ot],"(",rt,");",Tt,".",ot,"=",rt,";")}})}function Xi(it,je){oe&&(it.instancing=je.def(it.shared.extensions,".angle_instanced_arrays"))}function ca(it,je,Ct,Pt,Yt){var Lt=it.shared,Tt=it.stats,Bt=Lt.current,ot=Lt.timer,wt=Ct.profile;function rt(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Wt,Jt;function wr(xn){Wt=je.def(),xn(Wt,"=",rt(),";"),typeof Yt=="string"?xn(Tt,".count+=",Yt,";"):xn(Tt,".count++;"),w&&(Pt?(Jt=je.def(),xn(Jt,"=",ot,".getNumPendingQueries();")):xn(ot,".beginQuery(",Tt,");"))}function xr(xn){xn(Tt,".cpuTime+=",rt(),"-",Wt,";"),w&&(Pt?xn(ot,".pushScopeStats(",Jt,",",ot,".getNumPendingQueries(),",Tt,");"):xn(ot,".endQuery();"))}function dr(xn){var Un=je.def(Bt,".profile");je(Bt,".profile=",xn,";"),je.exit(Bt,".profile=",Un,";")}var Vr;if(wt){if(vu(wt)){wt.enable?(wr(je),xr(je.exit),dr("true")):dr("false");return}Vr=wt.append(it,je),dr(Vr)}else Vr=je.def(Bt,".profile");var Tn=it.block();wr(Tn),je("if(",Vr,"){",Tn,"}");var na=it.block();xr(na),je.exit("if(",Vr,"){",na,"}")}function Co(it,je,Ct,Pt,Yt){var Lt=it.shared;function Tt(ot){switch(ot){case Cc:case Ac:case Kf:return 2;case Tc:case Oc:case af:return 3;case Ic:case ki:case $f:return 4;default:return 1}}function Bt(ot,wt,rt){var Wt=Lt.gl,Jt=je.def(ot,".location"),wr=je.def(Lt.attributes,"[",Jt,"]"),xr=rt.state,dr=rt.buffer,Vr=[rt.x,rt.y,rt.z,rt.w],Tn=["buffer","normalized","offset","stride"];function na(){je("if(!",wr,".buffer){",Wt,".enableVertexAttribArray(",Jt,");}");var Un=rt.type,ia;if(rt.size?ia=je.def(rt.size,"||",wt):ia=wt,je("if(",wr,".type!==",Un,"||",wr,".size!==",ia,"||",Tn.map(function(Gi){return wr+"."+Gi+"!=="+rt[Gi]}).join("||"),"){",Wt,".bindBuffer(",du,",",dr,".buffer);",Wt,".vertexAttribPointer(",[Jt,ia,Un,rt.normalized,rt.stride,rt.offset],");",wr,".type=",Un,";",wr,".size=",ia,";",Tn.map(function(Gi){return wr+"."+Gi+"="+rt[Gi]+";"}).join(""),"}"),oe){var za=rt.divisor;je("if(",wr,".divisor!==",za,"){",it.instancing,".vertexAttribDivisorANGLE(",[Jt,za],");",wr,".divisor=",za,";}")}}function xn(){je("if(",wr,".buffer){",Wt,".disableVertexAttribArray(",Jt,");",wr,".buffer=null;","}if(",$u.map(function(Un,ia){return wr+"."+Un+"!=="+Vr[ia]}).join("||"),"){",Wt,".vertexAttrib4f(",Jt,",",Vr,");",$u.map(function(Un,ia){return wr+"."+Un+"="+Vr[ia]+";"}).join(""),"}")}xr===Qu?na():xr===Bf?xn():(je("if(",xr,"===",Qu,"){"),na(),je("}else{"),xn(),je("}"))}Pt.forEach(function(ot){var wt=ot.name,rt=Ct.attributes[wt],Wt;if(rt){if(!Yt(rt))return;Wt=rt.append(it,je)}else{if(!Yt(Ks))return;var Jt=it.scopeAttrib(wt);Ve.optional(function(){it.assert(je,Jt+".state","missing attribute "+wt)}),Wt={},Object.keys(new j).forEach(function(wr){Wt[wr]=je.def(Jt,".",wr)})}Bt(it.link(ot),Tt(ot.info.type),Wt)})}function Va(it,je,Ct,Pt,Yt){for(var Lt=it.shared,Tt=Lt.gl,Bt,ot=0;ot<Pt.length;++ot){var wt=Pt[ot],rt=wt.name,Wt=wt.info.type,Jt=Ct.uniforms[rt],wr=it.link(wt),xr=wr+".location",dr;if(Jt){if(!Yt(Jt))continue;if(vu(Jt)){var Vr=Jt.value;if(Ve.command(Vr!==null&&typeof Vr!="undefined",'missing uniform "'+rt+'"',it.commandStr),Wt===xa||Wt===ss){Ve.command(typeof Vr=="function"&&(Wt===xa&&(Vr._reglType==="texture2d"||Vr._reglType==="framebuffer")||Wt===ss&&(Vr._reglType==="textureCube"||Vr._reglType==="framebufferCube")),"invalid texture for uniform "+rt,it.commandStr);var Tn=it.link(Vr._texture||Vr.color[0]._texture);je(Tt,".uniform1i(",xr,",",Tn+".bind());"),je.exit(Tn,".unbind();")}else if(Wt===wf||Wt===Sf||Wt===Fu){Ve.optional(function(){Ve.command(En(Vr),"invalid matrix for uniform "+rt,it.commandStr),Ve.command(Wt===wf&&Vr.length===4||Wt===Sf&&Vr.length===9||Wt===Fu&&Vr.length===16,"invalid length for matrix uniform "+rt,it.commandStr)});var na=it.global.def("new Float32Array(["+Array.prototype.slice.call(Vr)+"])"),xn=2;Wt===Sf?xn=3:Wt===Fu&&(xn=4),je(Tt,".uniformMatrix",xn,"fv(",xr,",false,",na,");")}else{switch(Wt){case Zf:Ve.commandType(Vr,"number","uniform "+rt,it.commandStr),Bt="1f";break;case Cc:Ve.command(En(Vr)&&Vr.length===2,"uniform "+rt,it.commandStr),Bt="2f";break;case Tc:Ve.command(En(Vr)&&Vr.length===3,"uniform "+rt,it.commandStr),Bt="3f";break;case Ic:Ve.command(En(Vr)&&Vr.length===4,"uniform "+rt,it.commandStr),Bt="4f";break;case Lc:Ve.commandType(Vr,"boolean","uniform "+rt,it.commandStr),Bt="1i";break;case Qc:Ve.commandType(Vr,"number","uniform "+rt,it.commandStr),Bt="1i";break;case Kf:Ve.command(En(Vr)&&Vr.length===2,"uniform "+rt,it.commandStr),Bt="2i";break;case Ac:Ve.command(En(Vr)&&Vr.length===2,"uniform "+rt,it.commandStr),Bt="2i";break;case af:Ve.command(En(Vr)&&Vr.length===3,"uniform "+rt,it.commandStr),Bt="3i";break;case Oc:Ve.command(En(Vr)&&Vr.length===3,"uniform "+rt,it.commandStr),Bt="3i";break;case $f:Ve.command(En(Vr)&&Vr.length===4,"uniform "+rt,it.commandStr),Bt="4i";break;case ki:Ve.command(En(Vr)&&Vr.length===4,"uniform "+rt,it.commandStr),Bt="4i";break}je(Tt,".uniform",Bt,"(",xr,",",En(Vr)?Array.prototype.slice.call(Vr):Vr,");")}continue}else dr=Jt.append(it,je)}else{if(!Yt(Ks))continue;dr=je.def(Lt.uniforms,"[",qe.id(rt),"]")}Wt===xa?(Ve(!Array.isArray(dr),"must specify a scalar prop for textures"),je("if(",dr,"&&",dr,'._reglType==="framebuffer"){',dr,"=",dr,".color[0];","}")):Wt===ss&&(Ve(!Array.isArray(dr),"must specify a scalar prop for cube maps"),je("if(",dr,"&&",dr,'._reglType==="framebufferCube"){',dr,"=",dr,".color[0];","}")),Ve.optional(function(){function qo(qs,Ol){it.assert(je,qs,'bad data or missing for uniform "'+rt+'".  '+Ol)}function wl(qs){Ve(!Array.isArray(dr),"must not specify an array type for uniform"),qo("typeof "+dr+'==="'+qs+'"',"invalid type, expected "+qs)}function Qs(qs,Ol){Array.isArray(dr)?Ve(dr.length===qs,"must have length "+qs):qo(Lt.isArrayLike+"("+dr+")&&"+dr+".length==="+qs,"invalid vector, should have length "+qs,it.commandStr)}function zl(qs){Ve(!Array.isArray(dr),"must not specify a value type"),qo("typeof "+dr+'==="function"&&'+dr+'._reglType==="texture'+(qs===_c?"2d":"Cube")+'"',"invalid texture type",it.commandStr)}switch(Wt){case Qc:wl("number");break;case Ac:Qs(2,"number");break;case Oc:Qs(3,"number");break;case ki:Qs(4,"number");break;case Zf:wl("number");break;case Cc:Qs(2,"number");break;case Tc:Qs(3,"number");break;case Ic:Qs(4,"number");break;case Lc:wl("boolean");break;case Kf:Qs(2,"boolean");break;case af:Qs(3,"boolean");break;case $f:Qs(4,"boolean");break;case wf:Qs(4,"number");break;case Sf:Qs(9,"number");break;case Fu:Qs(16,"number");break;case xa:zl(_c);break;case ss:zl(xf);break}});var Un=1;switch(Wt){case xa:case ss:var ia=je.def(dr,"._texture");je(Tt,".uniform1i(",xr,",",ia,".bind());"),je.exit(ia,".unbind();");continue;case Qc:case Lc:Bt="1i";break;case Ac:case Kf:Bt="2i",Un=2;break;case Oc:case af:Bt="3i",Un=3;break;case ki:case $f:Bt="4i",Un=4;break;case Zf:Bt="1f";break;case Cc:Bt="2f",Un=2;break;case Tc:Bt="3f",Un=3;break;case Ic:Bt="4f",Un=4;break;case wf:Bt="Matrix2fv";break;case Sf:Bt="Matrix3fv";break;case Fu:Bt="Matrix4fv";break}if(je(Tt,".uniform",Bt,"(",xr,","),Bt.charAt(0)==="M"){var za=Math.pow(Wt-wf+2,2),Gi=it.global.def("new Float32Array(",za,")");Array.isArray(dr)?je("false,(",Ln(za,function(qo){return Gi+"["+qo+"]="+dr[qo]}),",",Gi,")"):je("false,(Array.isArray(",dr,")||",dr," instanceof Float32Array)?",dr,":(",Ln(za,function(qo){return Gi+"["+qo+"]="+dr+"["+qo+"]"}),",",Gi,")")}else Un>1?je(Ln(Un,function(qo){return Array.isArray(dr)?dr[qo]:dr+"["+qo+"]"})):(Ve(!Array.isArray(dr),"uniform value must not be an array"),je(dr));je(");")}}function Bn(it,je,Ct,Pt){var Yt=it.shared,Lt=Yt.gl,Tt=Yt.draw,Bt=Pt.draw;function ot(){var ia=Bt.elements,za,Gi=je;return ia?((ia.contextDep&&Pt.contextDynamic||ia.propDep)&&(Gi=Ct),za=ia.append(it,Gi)):za=Gi.def(Tt,".",Ru),za&&Gi("if("+za+")"+Lt+".bindBuffer("+Zc+","+za+".buffer.buffer);"),za}function wt(){var ia=Bt.count,za,Gi=je;return ia?((ia.contextDep&&Pt.contextDynamic||ia.propDep)&&(Gi=Ct),za=ia.append(it,Gi),Ve.optional(function(){ia.MISSING&&it.assert(je,"false","missing vertex count"),ia.DYNAMIC&&it.assert(Gi,za+">=0","missing vertex count")})):(za=Gi.def(Tt,".",rn),Ve.optional(function(){it.assert(Gi,za+">=0","missing vertex count")})),za}var rt=ot();function Wt(ia){var za=Bt[ia];return za?za.contextDep&&Pt.contextDynamic||za.propDep?za.append(it,Ct):za.append(it,je):je.def(Tt,".",ia)}var Jt=Wt(lu),wr=Wt(yc),xr=wt();if(typeof xr=="number"){if(xr===0)return}else Ct("if(",xr,"){"),Ct.exit("}");var dr,Vr;oe&&(dr=Wt(Yf),Vr=it.instancing);var Tn=rt+".type",na=Bt.elements&&vu(Bt.elements);function xn(){function ia(){Ct(Vr,".drawElementsInstancedANGLE(",[Jt,xr,Tn,wr+"<<(("+Tn+"-"+Vc+")>>1)",dr],");")}function za(){Ct(Vr,".drawArraysInstancedANGLE(",[Jt,wr,xr,dr],");")}rt?na?ia():(Ct("if(",rt,"){"),ia(),Ct("}else{"),za(),Ct("}")):za()}function Un(){function ia(){Ct(Lt+".drawElements("+[Jt,xr,Tn,wr+"<<(("+Tn+"-"+Vc+")>>1)"]+");")}function za(){Ct(Lt+".drawArrays("+[Jt,wr,xr]+");")}rt?na?ia():(Ct("if(",rt,"){"),ia(),Ct("}else{"),za(),Ct("}")):za()}oe&&(typeof dr!="number"||dr>=0)?typeof dr=="string"?(Ct("if(",dr,">0){"),xn(),Ct("}else if(",dr,"<0){"),Un(),Ct("}")):xn():Un()}function ra(it,je,Ct,Pt,Yt){var Lt=Gr(),Tt=Lt.proc("body",Yt);return Ve.optional(function(){Lt.commandStr=je.commandStr,Lt.command=Lt.link(je.commandStr)}),oe&&(Lt.instancing=Tt.def(Lt.shared.extensions,".angle_instanced_arrays")),it(Lt,Tt,Ct,Pt),Lt.compile().body}function ga(it,je,Ct,Pt){Xi(it,je),Ct.useVAO?Ct.drawVAO?je(it.shared.vao,".setVAO(",Ct.drawVAO.append(it,je),");"):je(it.shared.vao,".setVAO(",it.shared.vao,".targetVAO);"):(je(it.shared.vao,".setVAO(null);"),Co(it,je,Ct,Pt.attributes,function(){return!0})),Va(it,je,Ct,Pt.uniforms,function(){return!0}),Bn(it,je,je,Ct)}function ui(it,je){var Ct=it.proc("draw",1);Xi(it,Ct),bi(it,Ct,je.context),Di(it,Ct,je.framebuffer),Ki(it,Ct,je),Mo(it,Ct,je.state),ca(it,Ct,je,!1,!0);var Pt=je.shader.progVar.append(it,Ct);if(Ct(it.shared.gl,".useProgram(",Pt,".program);"),je.shader.program)ga(it,Ct,je,je.shader.program);else{Ct(it.shared.vao,".setVAO(null);");var Yt=it.global.def("{}"),Lt=Ct.def(Pt,".id"),Tt=Ct.def(Yt,"[",Lt,"]");Ct(it.cond(Tt).then(Tt,".call(this,a0);").else(Tt,"=",Yt,"[",Lt,"]=",it.link(function(Bt){return ra(ga,it,je,Bt,1)}),"(",Pt,");",Tt,".call(this,a0);"))}Object.keys(je.state).length>0&&Ct(it.shared.current,".dirty=true;")}function us(it,je,Ct,Pt){it.batchId="a1",Xi(it,je);function Yt(){return!0}Co(it,je,Ct,Pt.attributes,Yt),Va(it,je,Ct,Pt.uniforms,Yt),Bn(it,je,je,Ct)}function $s(it,je,Ct,Pt){Xi(it,je);var Yt=Ct.contextDep,Lt=je.def(),Tt="a0",Bt="a1",ot=je.def();it.shared.props=ot,it.batchId=Lt;var wt=it.scope(),rt=it.scope();je(wt.entry,"for(",Lt,"=0;",Lt,"<",Bt,";++",Lt,"){",ot,"=",Tt,"[",Lt,"];",rt,"}",wt.exit);function Wt(Tn){return Tn.contextDep&&Yt||Tn.propDep}function Jt(Tn){return!Wt(Tn)}if(Ct.needsContext&&bi(it,rt,Ct.context),Ct.needsFramebuffer&&Di(it,rt,Ct.framebuffer),Mo(it,rt,Ct.state,Wt),Ct.profile&&Wt(Ct.profile)&&ca(it,rt,Ct,!1,!0),Pt)Ct.useVAO?Ct.drawVAO?Wt(Ct.drawVAO)?rt(it.shared.vao,".setVAO(",Ct.drawVAO.append(it,rt),");"):wt(it.shared.vao,".setVAO(",Ct.drawVAO.append(it,wt),");"):wt(it.shared.vao,".setVAO(",it.shared.vao,".targetVAO);"):(wt(it.shared.vao,".setVAO(null);"),Co(it,wt,Ct,Pt.attributes,Jt),Co(it,rt,Ct,Pt.attributes,Wt)),Va(it,wt,Ct,Pt.uniforms,Jt),Va(it,rt,Ct,Pt.uniforms,Wt),Bn(it,wt,rt,Ct);else{var wr=it.global.def("{}"),xr=Ct.shader.progVar.append(it,rt),dr=rt.def(xr,".id"),Vr=rt.def(wr,"[",dr,"]");rt(it.shared.gl,".useProgram(",xr,".program);","if(!",Vr,"){",Vr,"=",wr,"[",dr,"]=",it.link(function(Tn){return ra(us,it,Ct,Tn,2)}),"(",xr,");}",Vr,".call(this,a0[",Lt,"],",Lt,");")}}function dt(it,je){var Ct=it.proc("batch",2);it.batchId="0",Xi(it,Ct);var Pt=!1,Yt=!0;Object.keys(je.context).forEach(function(wr){Pt=Pt||je.context[wr].propDep}),Pt||(bi(it,Ct,je.context),Yt=!1);var Lt=je.framebuffer,Tt=!1;Lt?(Lt.propDep?Pt=Tt=!0:Lt.contextDep&&Pt&&(Tt=!0),Tt||Di(it,Ct,Lt)):Di(it,Ct,null),je.state.viewport&&je.state.viewport.propDep&&(Pt=!0);function Bt(wr){return wr.contextDep&&Pt||wr.propDep}Ki(it,Ct,je),Mo(it,Ct,je.state,function(wr){return!Bt(wr)}),(!je.profile||!Bt(je.profile))&&ca(it,Ct,je,!1,"a1"),je.contextDep=Pt,je.needsContext=Yt,je.needsFramebuffer=Tt;var ot=je.shader.progVar;if(ot.contextDep&&Pt||ot.propDep)$s(it,Ct,je,null);else{var wt=ot.append(it,Ct);if(Ct(it.shared.gl,".useProgram(",wt,".program);"),je.shader.program)$s(it,Ct,je,je.shader.program);else{Ct(it.shared.vao,".setVAO(null);");var rt=it.global.def("{}"),Wt=Ct.def(wt,".id"),Jt=Ct.def(rt,"[",Wt,"]");Ct(it.cond(Jt).then(Jt,".call(this,a0,a1);").else(Jt,"=",rt,"[",Wt,"]=",it.link(function(wr){return ra($s,it,je,wr,2)}),"(",wt,");",Jt,".call(this,a0,a1);"))}}Object.keys(je.state).length>0&&Ct(it.shared.current,".dirty=true;")}function sr(it,je){var Ct=it.proc("scope",3);it.batchId="a2";var Pt=it.shared,Yt=Pt.current;bi(it,Ct,je.context),je.framebuffer&&je.framebuffer.append(it,Ct),nl(Object.keys(je.state)).forEach(function(Tt){var Bt=je.state[Tt],ot=Bt.append(it,Ct);En(ot)?ot.forEach(function(wt,rt){Ct.set(it.next[Tt],"["+rt+"]",wt)}):Ct.set(Pt.next,"."+Tt,ot)}),ca(it,Ct,je,!0,!0),[Ru,yc,rn,Yf,lu].forEach(function(Tt){var Bt=je.draw[Tt];Bt&&Ct.set(Pt.draw,"."+Tt,""+Bt.append(it,Ct))}),Object.keys(je.uniforms).forEach(function(Tt){var Bt=je.uniforms[Tt].append(it,Ct);Array.isArray(Bt)&&(Bt="["+Bt.join()+"]"),Ct.set(Pt.uniforms,"["+qe.id(Tt)+"]",Bt)}),Object.keys(je.attributes).forEach(function(Tt){var Bt=je.attributes[Tt].append(it,Ct),ot=it.scopeAttrib(Tt);Object.keys(new j).forEach(function(wt){Ct.set(ot,"."+wt,Bt[wt])})}),je.scopeVAO&&Ct.set(Pt.vao,".targetVAO",je.scopeVAO.append(it,Ct));function Lt(Tt){var Bt=je.shader[Tt];Bt&&Ct.set(Pt.shader,"."+Tt,Bt.append(it,Ct))}Lt(So),Lt(ku),Object.keys(je.state).length>0&&(Ct(Yt,".dirty=true;"),Ct.exit(Yt,".dirty=true;")),Ct("a1(",it.shared.context,",a0,",it.batchId,");")}function tr(it){if(!(typeof it!="object"||En(it))){for(var je=Object.keys(it),Ct=0;Ct<je.length;++Ct)if(Or.isDynamic(it[je[Ct]]))return!0;return!1}}function gn(it,je,Ct){var Pt=je.static[Ct];if(!Pt||!tr(Pt))return;var Yt=it.global,Lt=Object.keys(Pt),Tt=!1,Bt=!1,ot=!1,wt=it.global.def("{}");Lt.forEach(function(Wt){var Jt=Pt[Wt];if(Or.isDynamic(Jt)){typeof Jt=="function"&&(Jt=Pt[Wt]=Or.unbox(Jt));var wr=_o(Jt,null);Tt=Tt||wr.thisDep,ot=ot||wr.propDep,Bt=Bt||wr.contextDep}else{switch(Yt(wt,".",Wt,"="),typeof Jt){case"number":Yt(Jt);break;case"string":Yt('"',Jt,'"');break;case"object":Array.isArray(Jt)&&Yt("[",Jt.join(),"]");break;default:Yt(it.link(Jt));break}Yt(";")}});function rt(Wt,Jt){Lt.forEach(function(wr){var xr=Pt[wr];if(Or.isDynamic(xr)){var dr=Wt.invoke(Jt,xr);Jt(wt,".",wr,"=",dr,";")}})}je.dynamic[Ct]=new Or.DynamicVariable(Gf,{thisDep:Tt,contextDep:Bt,propDep:ot,ref:wt,append:rt}),delete je.static[Ct]}function pa(it,je,Ct,Pt,Yt){var Lt=Gr();Lt.stats=Lt.link(Yt),Object.keys(je.static).forEach(function(Bt){gn(Lt,je,Bt)}),wc.forEach(function(Bt){gn(Lt,it,Bt)});var Tt=_a(it,je,Ct,Pt,Lt);return ui(Lt,Tt),sr(Lt,Tt),dt(Lt,Tt),G(Lt.compile(),{destroy:function(){Tt.shader.program.destroy()}})}return{next:_e,current:me,procs:function(){var it=Gr(),je=it.proc("poll"),Ct=it.proc("refresh"),Pt=it.block();je(Pt),Ct(Pt);var Yt=it.shared,Lt=Yt.gl,Tt=Yt.next,Bt=Yt.current;Pt(Bt,".dirty=false;"),Di(it,je),Di(it,Ct,null,!0);var ot;oe&&(ot=it.link(oe)),pt.oes_vertex_array_object&&Ct(it.link(pt.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var wt=0;wt<rr.maxAttributes;++wt){var rt=Ct.def(Yt.attributes,"[",wt,"]"),Wt=it.cond(rt,".buffer");Wt.then(Lt,".enableVertexAttribArray(",wt,");",Lt,".bindBuffer(",du,",",rt,".buffer.buffer);",Lt,".vertexAttribPointer(",wt,",",rt,".size,",rt,".type,",rt,".normalized,",rt,".stride,",rt,".offset);").else(Lt,".disableVertexAttribArray(",wt,");",Lt,".vertexAttrib4f(",wt,",",rt,".x,",rt,".y,",rt,".z,",rt,".w);",rt,".buffer=null;"),Ct(Wt),oe&&Ct(ot,".vertexAttribDivisorANGLE(",wt,",",rt,".divisor);")}return Ct(it.shared.vao,".currentVAO=null;",it.shared.vao,".setVAO(",it.shared.vao,".targetVAO);"),Object.keys(Ke).forEach(function(Jt){var wr=Ke[Jt],xr=Pt.def(Tt,".",Jt),dr=it.block();dr("if(",xr,"){",Lt,".enable(",wr,")}else{",Lt,".disable(",wr,")}",Bt,".",Jt,"=",xr,";"),Ct(dr),je("if(",xr,"!==",Bt,".",Jt,"){",dr,"}")}),Object.keys(Xe).forEach(function(Jt){var wr=Xe[Jt],xr=me[Jt],dr,Vr,Tn=it.block();if(Tn(Lt,".",wr,"("),En(xr)){var na=xr.length;dr=it.global.def(Tt,".",Jt),Vr=it.global.def(Bt,".",Jt),Tn(Ln(na,function(xn){return dr+"["+xn+"]"}),");",Ln(na,function(xn){return Vr+"["+xn+"]="+dr+"["+xn+"];"}).join("")),je("if(",Ln(na,function(xn){return dr+"["+xn+"]!=="+Vr+"["+xn+"]"}).join("||"),"){",Tn,"}")}else dr=Pt.def(Tt,".",Jt),Vr=Pt.def(Bt,".",Jt),Tn(dr,");",Bt,".",Jt,"=",dr,";"),je("if(",dr,"!==",Vr,"){",Tn,"}");Ct(Tn)}),it.compile()}(),compile:pa}}function kc(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var al=34918,ec=34919,il=35007,El=function(pe,qe){if(!qe.ext_disjoint_timer_query)return null;var pt=[];function rr(){return pt.pop()||qe.ext_disjoint_timer_query.createQueryEXT()}function Mr(oe){pt.push(oe)}var er=[];function hr(oe){var he=rr();qe.ext_disjoint_timer_query.beginQueryEXT(il,he),er.push(he),w(er.length-1,er.length,oe)}function Br(){qe.ext_disjoint_timer_query.endQueryEXT(il)}function cr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Wr=[];function Ar(){return Wr.pop()||new cr}function Hr(oe){Wr.push(oe)}var h=[];function w(oe,he,me){var _e=Ar();_e.startQueryIndex=oe,_e.endQueryIndex=he,_e.sum=0,_e.stats=me,h.push(_e)}var R=[],j=[];function ne(){var oe,he,me=er.length;if(me!==0){j.length=Math.max(j.length,me+1),R.length=Math.max(R.length,me+1),R[0]=0,j[0]=0;var _e=0;for(oe=0,he=0;he<er.length;++he){var Be=er[he];qe.ext_disjoint_timer_query.getQueryObjectEXT(Be,ec)?(_e+=qe.ext_disjoint_timer_query.getQueryObjectEXT(Be,al),Mr(Be)):er[oe++]=Be,R[he+1]=_e,j[he+1]=oe}for(er.length=oe,oe=0,he=0;he<h.length;++he){var Ke=h[he],Xe=Ke.startQueryIndex,ht=Ke.endQueryIndex;Ke.sum+=R[ht]-R[Xe];var Nt=j[Xe],gr=j[ht];gr===Nt?(Ke.stats.gpuTime+=Ke.sum/1e6,Hr(Ke)):(Ke.startQueryIndex=Nt,Ke.endQueryIndex=gr,h[oe++]=Ke)}h.length=oe}}return{beginQuery:hr,endQuery:Br,pushScopeStats:w,update:ne,getNumPendingQueries:function(){return er.length},clear:function(){pt.push.apply(pt,er);for(var oe=0;oe<pt.length;oe++)qe.ext_disjoint_timer_query.deleteQueryEXT(pt[oe]);er.length=0,pt.length=0},restore:function(){er.length=0,pt.length=0}}},bl=16384,xl=256,Rc=1024,ol=34962,Bc="webglcontextlost",tc="webglcontextrestored",Fc=1,sl=2,pi=3;function ul(pe,qe){for(var pt=0;pt<pe.length;++pt)if(pe[pt]===qe)return pt;return-1}function rc(pe){var qe=jn(pe);if(!qe)return null;var pt=qe.gl,rr=pt.getContextAttributes(),Mr=pt.isContextLost(),er=Jn(pt,qe);if(!er)return null;var hr=On(),Br=kc(),cr=er.extensions,Wr=El(pt,cr),Ar=wn(),Hr=pt.drawingBufferWidth,h=pt.drawingBufferHeight,w={tick:0,time:0,viewportWidth:Hr,viewportHeight:h,framebufferWidth:Hr,framebufferHeight:h,drawingBufferWidth:Hr,drawingBufferHeight:h,pixelRatio:qe.pixelRatio},R={},j={elements:null,primitive:4,count:-1,offset:0,instances:-1},ne=Eo(pt,cr),oe=Bi(pt,Br,qe,me),he=df(pt,cr,ne,Br,oe);function me(Bn){return he.destroyBuffer(Bn)}var _e=Uo(pt,cr,oe,Br),Be=vf(pt,hr,Br,qe),Ke=Nf(pt,cr,ne,function(){Nt.procs.poll()},w,Br,qe),Xe=te(pt,cr,ne,Br,qe),ht=Hu(pt,cr,ne,Ke,Xe,Br),Nt=Pc(pt,hr,cr,ne,oe,_e,Ke,ht,R,he,Be,j,w,Wr,qe),gr=ll(pt,ht,Nt.procs.poll,w,rr,cr,ne),Ut=Nt.next,Vt=pt.canvas,Xt=[],Gr=[],Kr=[],Yr=[qe.onDestroy],_n=null;function bn(){if(Xt.length===0){Wr&&Wr.update(),_n=null;return}_n=Qr.next(bn),Mo();for(var Bn=Xt.length-1;Bn>=0;--Bn){var ra=Xt[Bn];ra&&ra(w,null,0)}pt.flush(),Wr&&Wr.update()}function Pn(){!_n&&Xt.length>0&&(_n=Qr.next(bn))}function Qn(){_n&&(Qr.cancel(bn),_n=null)}function zn(Bn){Bn.preventDefault(),Mr=!0,Qn(),Gr.forEach(function(ra){ra()})}function ei(Bn){pt.getError(),Mr=!1,er.restore(),Be.restore(),oe.restore(),Ke.restore(),Xe.restore(),ht.restore(),he.restore(),Wr&&Wr.restore(),Nt.procs.refresh(),Pn(),Kr.forEach(function(ra){ra()})}Vt&&(Vt.addEventListener(Bc,zn,!1),Vt.addEventListener(tc,ei,!1));function ea(){Xt.length=0,Qn(),Vt&&(Vt.removeEventListener(Bc,zn),Vt.removeEventListener(tc,ei)),Be.clear(),ht.clear(),Xe.clear(),Ke.clear(),_e.clear(),oe.clear(),he.clear(),Wr&&Wr.clear(),Yr.forEach(function(Bn){Bn()})}function Li(Bn){Ve(!!Bn,"invalid args to regl({...})"),Ve.type(Bn,"object","invalid args to regl({...})");function ra(Yt){var Lt=G({},Yt);delete Lt.uniforms,delete Lt.attributes,delete Lt.context,delete Lt.vao,"stencil"in Lt&&Lt.stencil.op&&(Lt.stencil.opBack=Lt.stencil.opFront=Lt.stencil.op,delete Lt.stencil.op);function Tt(Bt){if(Bt in Lt){var ot=Lt[Bt];delete Lt[Bt],Object.keys(ot).forEach(function(wt){Lt[Bt+"."+wt]=ot[wt]})}}return Tt("blend"),Tt("depth"),Tt("cull"),Tt("stencil"),Tt("polygonOffset"),Tt("scissor"),Tt("sample"),"vao"in Yt&&(Lt.vao=Yt.vao),Lt}function ga(Yt,Lt){var Tt={},Bt={};return Object.keys(Yt).forEach(function(ot){var wt=Yt[ot];if(Or.isDynamic(wt)){Bt[ot]=Or.unbox(wt,ot);return}else if(Lt&&Array.isArray(wt)){for(var rt=0;rt<wt.length;++rt)if(Or.isDynamic(wt[rt])){Bt[ot]=Or.unbox(wt,ot);return}}Tt[ot]=wt}),{dynamic:Bt,static:Tt}}var ui=ga(Bn.context||{},!0),us=ga(Bn.uniforms||{},!0),$s=ga(Bn.attributes||{},!1),dt=ga(ra(Bn),!1),sr={gpuTime:0,cpuTime:0,count:0},tr=Nt.compile(dt,$s,us,ui,sr),gn=tr.draw,pa=tr.batch,it=tr.scope,je=[];function Ct(Yt){for(;je.length<Yt;)je.push(null);return je}function Pt(Yt,Lt){var Tt;if(Mr&&Ve.raise("context lost"),typeof Yt=="function")return it.call(this,null,Yt,0);if(typeof Lt=="function")if(typeof Yt=="number")for(Tt=0;Tt<Yt;++Tt)it.call(this,null,Lt,Tt);else if(Array.isArray(Yt))for(Tt=0;Tt<Yt.length;++Tt)it.call(this,Yt[Tt],Lt,Tt);else return it.call(this,Yt,Lt,0);else if(typeof Yt=="number"){if(Yt>0)return pa.call(this,Ct(Yt|0),Yt|0)}else if(Array.isArray(Yt)){if(Yt.length)return pa.call(this,Yt,Yt.length)}else return gn.call(this,Yt)}return G(Pt,{stats:sr,destroy:function(){tr.destroy()}})}var ti=ht.setFBO=Li({framebuffer:Or.define.call(null,Fc,"framebuffer")});function _a(Bn,ra){var ga=0;Nt.procs.poll();var ui=ra.color;ui&&(pt.clearColor(+ui[0]||0,+ui[1]||0,+ui[2]||0,+ui[3]||0),ga|=bl),"depth"in ra&&(pt.clearDepth(+ra.depth),ga|=xl),"stencil"in ra&&(pt.clearStencil(ra.stencil|0),ga|=Rc),Ve(!!ga,"called regl.clear with no buffer specified"),pt.clear(ga)}function bi(Bn){if(Ve(typeof Bn=="object"&&Bn,"regl.clear() takes an object as input"),"framebuffer"in Bn)if(Bn.framebuffer&&Bn.framebuffer_reglType==="framebufferCube")for(var ra=0;ra<6;++ra)ti(G({framebuffer:Bn.framebuffer.faces[ra]},Bn),_a);else ti(Bn,_a);else _a(null,Bn)}function Di(Bn){Ve.type(Bn,"function","regl.frame() callback must be a function"),Xt.push(Bn);function ra(){var ga=ul(Xt,Bn);Ve(ga>=0,"cannot cancel a frame twice");function ui(){var us=ul(Xt,ui);Xt[us]=Xt[Xt.length-1],Xt.length-=1,Xt.length<=0&&Qn()}Xt[ga]=ui}return Pn(),{cancel:ra}}function Ki(){var Bn=Ut.viewport,ra=Ut.scissor_box;Bn[0]=Bn[1]=ra[0]=ra[1]=0,w.viewportWidth=w.framebufferWidth=w.drawingBufferWidth=Bn[2]=ra[2]=pt.drawingBufferWidth,w.viewportHeight=w.framebufferHeight=w.drawingBufferHeight=Bn[3]=ra[3]=pt.drawingBufferHeight}function Mo(){w.tick+=1,w.time=ca(),Ki(),Nt.procs.poll()}function Xi(){Ke.refresh(),Ki(),Nt.procs.refresh(),Wr&&Wr.update()}function ca(){return(wn()-Ar)/1e3}Xi();function Co(Bn,ra){Ve.type(ra,"function","listener callback must be a function");var ga;switch(Bn){case"frame":return Di(ra);case"lost":ga=Gr;break;case"restore":ga=Kr;break;case"destroy":ga=Yr;break;default:Ve.raise("invalid event, must be one of frame,lost,restore,destroy")}return ga.push(ra),{cancel:function(){for(var ui=0;ui<ga.length;++ui)if(ga[ui]===ra){ga[ui]=ga[ga.length-1],ga.pop();return}}}}var Va=G(Li,{clear:bi,prop:Or.define.bind(null,Fc),context:Or.define.bind(null,sl),this:Or.define.bind(null,pi),draw:Li({}),buffer:function(Bn){return oe.create(Bn,ol,!1,!1)},elements:function(Bn){return _e.create(Bn,!1)},texture:Ke.create2D,cube:Ke.createCube,renderbuffer:Xe.create,framebuffer:ht.create,framebufferCube:ht.createCube,vao:he.createVAO,attributes:rr,frame:Di,on:Co,limits:ne,hasExtension:function(Bn){return ne.extensions.indexOf(Bn.toLowerCase())>=0},read:gr,destroy:ea,_gl:pt,_refresh:Xi,poll:function(){Mo(),Wr&&Wr.update()},now:ca,stats:Br});return qe.onDone(null,Va),Va}return rc})},86851:function(pr,U,G){"use strict";var F=G(35171),Y=Array.prototype.concat,P=Array.prototype.slice,A=pr.exports=function(O){for(var x=[],E=0,y=O.length;E<y;E++){var m=O[E];F(m)?x=Y.call(x,P.call(m)):x.push(m)}return x};A.wrap=function(N){return function(){return N(A(arguments))}}},17061:function(pr,U,G){var F=G(18698).default;function Y(){"use strict";pr.exports=Y=function(){return P},pr.exports.__esModule=!0,pr.exports.default=pr.exports;var P={},A=Object.prototype,N=A.hasOwnProperty,O=Object.defineProperty||function(Pe,we,xe){Pe[we]=xe.value},x=typeof Symbol=="function"?Symbol:{},E=x.iterator||"@@iterator",y=x.asyncIterator||"@@asyncIterator",m=x.toStringTag||"@@toStringTag";function g(Pe,we,xe){return Object.defineProperty(Pe,we,{value:xe,enumerable:!0,configurable:!0,writable:!0}),Pe[we]}try{g({},"")}catch(Pe){g=function(xe,ve,Se){return xe[ve]=Se}}function v(Pe,we,xe,ve){var Se=we&&we.prototype instanceof T?we:T,Te=Object.create(Se.prototype),We=new ce(ve||[]);return O(Te,"_invoke",{value:re(Pe,xe,We)}),Te}function u(Pe,we,xe){try{return{type:"normal",arg:Pe.call(we,xe)}}catch(ve){return{type:"throw",arg:ve}}}P.wrap=v;var b={};function T(){}function D(){}function k(){}var V={};g(V,E,function(){return this});var J=Object.getPrototypeOf,W=J&&J(J(De([])));W&&W!==A&&N.call(W,E)&&(V=W);var X=k.prototype=T.prototype=Object.create(V);function K(Pe){["next","throw","return"].forEach(function(we){g(Pe,we,function(xe){return this._invoke(we,xe)})})}function Q(Pe,we){function xe(Se,Te,We,Ge){var Je=u(Pe[Se],Pe,Te);if(Je.type!=="throw"){var mt=Je.arg,xt=mt.value;return xt&&F(xt)=="object"&&N.call(xt,"__await")?we.resolve(xt.__await).then(function(Ze){xe("next",Ze,We,Ge)},function(Ze){xe("throw",Ze,We,Ge)}):we.resolve(xt).then(function(Ze){mt.value=Ze,We(mt)},function(Ze){return xe("throw",Ze,We,Ge)})}Ge(Je.arg)}var ve;O(this,"_invoke",{value:function(Te,We){function Ge(){return new we(function(Je,mt){xe(Te,We,Je,mt)})}return ve=ve?ve.then(Ge,Ge):Ge()}})}function re(Pe,we,xe){var ve="suspendedStart";return function(Se,Te){if(ve==="executing")throw new Error("Generator is already running");if(ve==="completed"){if(Se==="throw")throw Te;return Ie()}for(xe.method=Se,xe.arg=Te;;){var We=xe.delegate;if(We){var Ge=q(We,xe);if(Ge){if(Ge===b)continue;return Ge}}if(xe.method==="next")xe.sent=xe._sent=xe.arg;else if(xe.method==="throw"){if(ve==="suspendedStart")throw ve="completed",xe.arg;xe.dispatchException(xe.arg)}else xe.method==="return"&&xe.abrupt("return",xe.arg);ve="executing";var Je=u(Pe,we,xe);if(Je.type==="normal"){if(ve=xe.done?"completed":"suspendedYield",Je.arg===b)continue;return{value:Je.arg,done:xe.done}}Je.type==="throw"&&(ve="completed",xe.method="throw",xe.arg=Je.arg)}}}function q(Pe,we){var xe=we.method,ve=Pe.iterator[xe];if(ve===void 0)return we.delegate=null,xe==="throw"&&Pe.iterator.return&&(we.method="return",we.arg=void 0,q(Pe,we),we.method==="throw")||xe!=="return"&&(we.method="throw",we.arg=new TypeError("The iterator does not provide a '"+xe+"' method")),b;var Se=u(ve,Pe.iterator,we.arg);if(Se.type==="throw")return we.method="throw",we.arg=Se.arg,we.delegate=null,b;var Te=Se.arg;return Te?Te.done?(we[Pe.resultName]=Te.value,we.next=Pe.nextLoc,we.method!=="return"&&(we.method="next",we.arg=void 0),we.delegate=null,b):Te:(we.method="throw",we.arg=new TypeError("iterator result is not an object"),we.delegate=null,b)}function ae(Pe){var we={tryLoc:Pe[0]};1 in Pe&&(we.catchLoc=Pe[1]),2 in Pe&&(we.finallyLoc=Pe[2],we.afterLoc=Pe[3]),this.tryEntries.push(we)}function ue(Pe){var we=Pe.completion||{};we.type="normal",delete we.arg,Pe.completion=we}function ce(Pe){this.tryEntries=[{tryLoc:"root"}],Pe.forEach(ae,this),this.reset(!0)}function De(Pe){if(Pe){var we=Pe[E];if(we)return we.call(Pe);if(typeof Pe.next=="function")return Pe;if(!isNaN(Pe.length)){var xe=-1,ve=function Se(){for(;++xe<Pe.length;)if(N.call(Pe,xe))return Se.value=Pe[xe],Se.done=!1,Se;return Se.value=void 0,Se.done=!0,Se};return ve.next=ve}}return{next:Ie}}function Ie(){return{value:void 0,done:!0}}return D.prototype=k,O(X,"constructor",{value:k,configurable:!0}),O(k,"constructor",{value:D,configurable:!0}),D.displayName=g(k,m,"GeneratorFunction"),P.isGeneratorFunction=function(Pe){var we=typeof Pe=="function"&&Pe.constructor;return!!we&&(we===D||(we.displayName||we.name)==="GeneratorFunction")},P.mark=function(Pe){return Object.setPrototypeOf?Object.setPrototypeOf(Pe,k):(Pe.__proto__=k,g(Pe,m,"GeneratorFunction")),Pe.prototype=Object.create(X),Pe},P.awrap=function(Pe){return{__await:Pe}},K(Q.prototype),g(Q.prototype,y,function(){return this}),P.AsyncIterator=Q,P.async=function(Pe,we,xe,ve,Se){Se===void 0&&(Se=Promise);var Te=new Q(v(Pe,we,xe,ve),Se);return P.isGeneratorFunction(we)?Te:Te.next().then(function(We){return We.done?We.value:Te.next()})},K(X),g(X,m,"Generator"),g(X,E,function(){return this}),g(X,"toString",function(){return"[object Generator]"}),P.keys=function(Pe){var we=Object(Pe),xe=[];for(var ve in we)xe.push(ve);return xe.reverse(),function Se(){for(;xe.length;){var Te=xe.pop();if(Te in we)return Se.value=Te,Se.done=!1,Se}return Se.done=!0,Se}},P.values=De,ce.prototype={constructor:ce,reset:function(we){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(ue),!we)for(var xe in this)xe.charAt(0)==="t"&&N.call(this,xe)&&!isNaN(+xe.slice(1))&&(this[xe]=void 0)},stop:function(){this.done=!0;var we=this.tryEntries[0].completion;if(we.type==="throw")throw we.arg;return this.rval},dispatchException:function(we){if(this.done)throw we;var xe=this;function ve(mt,xt){return We.type="throw",We.arg=we,xe.next=mt,xt&&(xe.method="next",xe.arg=void 0),!!xt}for(var Se=this.tryEntries.length-1;Se>=0;--Se){var Te=this.tryEntries[Se],We=Te.completion;if(Te.tryLoc==="root")return ve("end");if(Te.tryLoc<=this.prev){var Ge=N.call(Te,"catchLoc"),Je=N.call(Te,"finallyLoc");if(Ge&&Je){if(this.prev<Te.catchLoc)return ve(Te.catchLoc,!0);if(this.prev<Te.finallyLoc)return ve(Te.finallyLoc)}else if(Ge){if(this.prev<Te.catchLoc)return ve(Te.catchLoc,!0)}else{if(!Je)throw new Error("try statement without catch or finally");if(this.prev<Te.finallyLoc)return ve(Te.finallyLoc)}}}},abrupt:function(we,xe){for(var ve=this.tryEntries.length-1;ve>=0;--ve){var Se=this.tryEntries[ve];if(Se.tryLoc<=this.prev&&N.call(Se,"finallyLoc")&&this.prev<Se.finallyLoc){var Te=Se;break}}Te&&(we==="break"||we==="continue")&&Te.tryLoc<=xe&&xe<=Te.finallyLoc&&(Te=null);var We=Te?Te.completion:{};return We.type=we,We.arg=xe,Te?(this.method="next",this.next=Te.finallyLoc,b):this.complete(We)},complete:function(we,xe){if(we.type==="throw")throw we.arg;return we.type==="break"||we.type==="continue"?this.next=we.arg:we.type==="return"?(this.rval=this.arg=we.arg,this.method="return",this.next="end"):we.type==="normal"&&xe&&(this.next=xe),b},finish:function(we){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var ve=this.tryEntries[xe];if(ve.finallyLoc===we)return this.complete(ve.completion,ve.afterLoc),ue(ve),b}},catch:function(we){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var ve=this.tryEntries[xe];if(ve.tryLoc===we){var Se=ve.completion;if(Se.type==="throw"){var Te=Se.arg;ue(ve)}return Te}}throw new Error("illegal catch attempt")},delegateYield:function(we,xe,ve){return this.delegate={iterator:De(we),resultName:xe,nextLoc:ve},this.method==="next"&&(this.arg=void 0),b}},P}pr.exports=Y,pr.exports.__esModule=!0,pr.exports.default=pr.exports},64687:function(pr,U,G){var F=G(17061)();pr.exports=F;try{regeneratorRuntime=F}catch(Y){typeof globalThis=="object"?globalThis.regeneratorRuntime=F:Function("r","regeneratorRuntime = r")(F)}}}]);
